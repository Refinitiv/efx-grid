<h1 id="saveload-grid-config">Save/Load grid config</h1>
<p>In efx-grid, we provide the developer with can implement save/load grid config for restoring config to the grid. This behavior helps the developer with implementation, Such as undo/redo functionality.
Where the grid has static data, which you can use <code>setStaticData</code> or <code>setStaticRowData</code> in runtime, the grid will store this information, and then when you want to use this config, you can just set this config into the grid.
We divide the example into two examples.</p>
<p>First, we have the grid and some data in the grid. You can set static data by clicking the button, and then the grid will change states, such as row coloring and segment color. And then, when you want to save this state, you can click “Save config,” and the grid will return the current state and copied to your clipboard. Then when you have a clipboard, you can pass it into example 2. Then click &quot;Start Grid&quot; and both grids look the same. </p>
<code-sandbox hash="5c094fd"><pre><code class="language-css">html body {
    padding: 20px;
    box-sizing: border-box;
}

html hr {
    margin: 5px;
}

efx-grid {
    height: 300px;
}

#copy_success {
    color: green;
}

input[type=&quot;number&quot;] {
    width: 40px;
}
</code></pre>
<pre><code class="language-html">&lt;!--  Set predifined color with api  --&gt;
    &lt;h4&gt;Example 1 save data from grid&lt;/h4&gt;
    &lt;span&gt;Row Index&lt;/span&gt;
    &lt;input value=&quot;1&quot; type=&quot;number&quot; id=&quot;row_index&quot;&gt;
    &lt;hr&gt;
    &lt;span&gt; Set row coloring&lt;/span&gt;
    &lt;button id=&quot;set_row_coloring_color1&quot;&gt; Row color 1 &lt;/button&gt;
    &lt;button id=&quot;set_row_coloring_color2&quot;&gt; Row color 2 &lt;/button&gt;
    &lt;button id=&quot;set_row_coloring_color3&quot;&gt; Row color 3 &lt;/button&gt;
    &lt;button id=&quot;unset_row_coloring_color&quot;&gt; Unset row color &lt;/button&gt;
    &lt;hr&gt;
    &lt;span&gt; Save grid config for restore &lt;/span&gt;
    &lt;button id=&quot;save_config&quot;&gt; Save config &lt;/button&gt;
    &lt;span id=&quot;copy_success&quot;&gt; &lt;/span&gt;
    &lt;efx-grid&gt;&lt;/efx-grid&gt;
</code></pre>
<pre><code class="language-javascript">await (await import(&quot;./theme-loader.js&quot;)).default; // This line is only required for demo purpose. It is not relevant for using EFX Grid in your application.

/* ---------------------------------- Note ----------------------------------
  DataGenerator, Formatters and extensions are exposed to global scope
  in the bundle file to make it easier to create live examples.
  Importing formatters and extensions is still required in your application. 
  Please see the document for further information.
---------------------------------------------------------------------------*/
var rowColoringExt = window.rowColoringExt = new RowColoring();

var fields = [&quot;companyName&quot;, &quot;industry&quot;, &quot;CF_NETCHNG&quot;, &quot;PCTCHNG&quot;, &quot;CF_VOLUME&quot;];

var records = DataGenerator.generateRecords(fields, { seed: 1, rowCount: 12 });

var predefinedColorsSet1 = {
    &quot;color-1&quot;: {
        backgroundColor: &quot;#FF2848&quot;
    },
    &quot;color-2&quot;: {
        backgroundColor: &quot;#FFB27B&quot;
    },
    &quot;color-3&quot;: {
        backgroundColor: &quot;#EEF3B4&quot;
    }
};

var predefinedRowColorsSet1 = {
    &quot;c-yellow&quot;: {
        backgroundColor: &quot;#FFFF00&quot;
    },
    &quot;c-blue&quot;: {
        backgroundColor: &quot;#00FFFF&quot;
    },
    &quot;c-green&quot;: {
        backgroundColor: &quot;#80FF80&quot;
    },
    &quot;c-red&quot;: {
        backgroundColor: &quot;#FF8080&quot;
    }
};

var configObj = {
    columns: [
        {
            name: &quot;Company Name&quot;,
            field: fields[0],
            width: 120
        },
        {
            name: &quot;Industry&quot;,
            field: fields[1]
        },
        {
            name: &quot;Net. Chng&quot;,
            field: fields[2]
        },
        {
            name: &quot;Price. Chng&quot;,
            field: fields[3]
        },
        {
            name: &quot;Volume&quot;,
            field: fields[4]
        }
    ],
    extensions: [rowColoringExt],
    rowColoring: {
        predefinedColors: predefinedRowColorsSet1,
        predefinedColoring: true,
        cssField: &quot;rowColoringClass&quot;
    },
    staticDataRows: records,
};

var grid = window.grid = document.getElementsByTagName(&quot;efx-grid&quot;)[0];
grid.config = configObj;
window.grid = grid;

// listening Click Events
set_row_coloring_color1.addEventListener(&quot;click&quot;, function (e) {
    var rowIndex = + row_index.value;
    grid.api.setStaticData(rowIndex, &quot;rowColoringClass&quot;, &quot;c-yellow&quot;);
});

set_row_coloring_color2.addEventListener(&quot;click&quot;, function (e) {
    var rowIndex = + row_index.value;
    grid.api.setStaticData(rowIndex, &quot;rowColoringClass&quot;, &quot;c-blue&quot;);
});

set_row_coloring_color3.addEventListener(&quot;click&quot;, function (e) {
    var rowIndex = + row_index.value;
    grid.api.setStaticData(rowIndex, &quot;rowColoringClass&quot;, &quot;c-green&quot;);
});

unset_row_coloring_color.addEventListener(&quot;click&quot;, function (e) {
    var rowIndex = + row_index.value;
    grid.api.setStaticData(rowIndex, &quot;rowColoringClass&quot;, null);
});

save_config.addEventListener(&quot;click&quot;, function(e) {
    var config = grid.api.getConfigObject();
    var configStr = JSON.stringify(config, null, 2);
    copyToClipboard(configStr);
    copy_success.textContent = &quot;Copied grid config to clipboard success&quot;;
    setTimeout(function(e) { copy_success.textContent = &quot;&quot; }, 5000); // clear alert user
});

function copyToClipboard(val) {
    // tmpInput for copy text
    var tmpInput = document.getElementById(&quot;tmp_input&quot;);
    if(!tmpInput) {
        tmpInput = document.createElement(&quot;textarea&quot;);
        tmpInput.id = &quot;tmp_input&quot;;
        document.body.appendChild(tmpInput);
    }
    tmpInput.style.visibility = &quot;visible&quot;; // we need to set input visibility before select text
    tmpInput.value = val;
    tmpInput.select();
    document.execCommand(&quot;copy&quot;);
    tmpInput.style.visibility = &quot;hidden&quot;;
}
</code></pre>
</code-sandbox><hr>
<code-sandbox hash="214ed320"><pre><code class="language-css">html body {
    padding: 20px;
    box-sizing: border-box;
}

html hr {
    margin: 5px;
}

efx-grid {
    height: 300px;
}

#area_config {
    width: 100%;
    height: 100px;
}
</code></pre>
<pre><code class="language-html">&lt;!-- For restore config to grid --&gt;
&lt;h4&gt;Example 2 load data to grid&lt;/h4&gt;
&lt;span&gt; You can load the grid config with pase in below text area and then click &quot;Start Grid&quot; &lt;/span&gt;
&lt;hr&gt;
&lt;button id=&quot;start_grid&quot;&gt; Start Grid &lt;/button&gt;
&lt;hr&gt;
&lt;textarea id=&quot;area_config&quot; placeholder=&quot;Patse grid config and click Start Grid&quot;&gt;&lt;/textarea&gt;
&lt;hr&gt;
&lt;efx-grid&gt;&lt;/efx-grid&gt;
</code></pre>
<pre><code class="language-javascript">await (await import(&quot;./theme-loader.js&quot;)).default; // This line is only required for demo purpose. It is not relevant for using EFX Grid in your application.

/* ---------------------------------- Note ----------------------------------
  DataGenerator, Formatters and extensions are exposed to global scope
  in the bundle file to make it easier to create live examples.
  Importing formatters and extensions is still required in your application. 
  Please see the document for further information.
---------------------------------------------------------------------------*/
var rowColoringExt = window.rowColoringExt = new RowColoring();

var fields = [&quot;companyName&quot;, &quot;industry&quot;, &quot;CF_NETCHNG&quot;, &quot;PCTCHNG&quot;, &quot;CF_VOLUME&quot;];

start_grid.addEventListener(&quot;click&quot;, function (e) {
    var grid = window.grid = window.grid = document.getElementsByTagName(&quot;efx-grid&quot;)[0];

    var valueConfig = JSON.parse(area_config.value);
    var configObj = valueConfig;
    configObj.extensions = [rowColoringExt];
    grid.config = configObj;
});
</code></pre>
</code-sandbox>