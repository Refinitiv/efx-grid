<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: grid/LayoutGrid.js</title>

    <script src="scripts/prettify.js"> </script>
    <script src="scripts/lang-css.js"> </script>
    <!--[if lt IE 9]&gt;
      &lt;script src="//html5shiv.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
    &lt;![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/default.css">
    <link type="text/css" rel="stylesheet" href="styles/elf-template.css">
</head>

<body>

<div id="main-template" class="elf-template">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>goog.provide("tr.LayoutGrid");

goog.require("tr.res");
goog.require("tr.grid.util");
goog.require("tr.IElementControl");
goog.require("tr.ElementControl");
goog.require("tr.ElementWrapper");
goog.require("tr.ILayoutGrid");

goog.require("tr.grid.Cell");
goog.require("tr.grid.Column");
goog.require("tr.grid.SelectionList");
goog.require("tr.grid.TrackLayout");
goog.require("tr.grid.CellSpans");
goog.require("tr.grid.CellSpan");

//#region Events
/**
 * @event tr.LayoutGrid#rowHighlighted
 */
/**
 * @event tr.LayoutGrid#rowCountChanged
 */
/**
 * @event tr.LayoutGrid#rowHeightChanged
 */
/**
 * @event tr.LayoutGrid#rowAvailable
 * @ignore
 */
//#endregion Events

/**
 * Please see {@link tr.ILayoutGrid} for full APIs and parameter lists.
 * @constructor
 * @param {Element|null=} opt_initializer this can be either element id (string) or DOM element
 * @param {Object=} opt_options
 * @implements {tr.ILayoutGrid}
 * @extends {tr.ElementControl}
 */
tr.LayoutGrid = function (opt_initializer, opt_options) {
	var _t = this;

	_t._onMouseMove = _t._onMouseMove.bind(_t);
	_t._onMouseOut = _t._onMouseOut.bind(_t);

	_t._trackX = new grid.TrackLayout();
	_t._trackY = new grid.TrackLayout();
	_t._trackX.setDefaultLaneSize(100);
	_t._trackY.setDefaultLaneSize(32);

	_t._cellSpans = new grid.CellSpans();

	_t._topNode = new ElementWrapper(opt_initializer);
	_t._topNode.setClass("tr-lg tr-even-shading");

	_t._columns = [];
	_t._cells = [];
	_t._highlightedCells = [];
	_t._stretchedCells = {};
	_t._selectionList = new grid.SelectionList();
	_t._onResetTransformIE = _t._onResetTransformIE.bind(_t);

	if (opt_options) {
		this._virOwner = opt_options["owner"] || null;
	}

	_t._addEvent("rowHighlighted");
	_t._addEvent("rowCountChanged");
	_t._addEvent("rowHeightChanged");
	_t._addEvent("rowAvailable");
};

goog.inherits(tr.LayoutGrid, tr.ElementControl);

/**
 * For virtualization in Y-Axis
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._index = -1;

/**
 * For virtualization in Y-Axis
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._indexOffset = 0;

/**
 * For virtualization in Y-Axis
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._availableRowCount = 0;

/**
 * For virtualization in Y-Axis
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._activeRow = 0;

/**
 * For virtualization in Y-Axis
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._activeRowEnd = 0;

/**
 * Cache of column count.
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._colCount = 0;

/** Cache of row count
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._rowCount = 0;

/**
 * Cache of hidden row count
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._hiddenRowCount = 0;

/**
 * @type {!tr.grid.TrackLayout}
 * @private
 */
tr.LayoutGrid.prototype._trackX;

/**
 * @type {!tr.grid.TrackLayout}
 * @private
 */
tr.LayoutGrid.prototype._trackY;

/**
 * @type {!tr.grid.CellSpans}
 * @private
 */
tr.LayoutGrid.prototype._cellSpans;

/**
 * Div elements that govern column styles
 * @type {!Array.&lt;tr.grid.Column&gt;}
 * @private
 */
tr.LayoutGrid.prototype._columns;

/**
 * @type {tr.grid.Column}
 * @private
 */
tr.LayoutGrid.prototype._firstColumn;

/**
 * @type {tr.grid.Column}
 * @private
 */
tr.LayoutGrid.prototype._lastColumn;

/**
 * @type {Element}
 * @private
 */
tr.LayoutGrid.prototype._rightSpace;

/**
 * @type {boolean}
 * @private
 */
tr.LayoutGrid.prototype._frozenLayout = false;

/**
 * @type {boolean}
 * @private
 */
tr.LayoutGrid.prototype._rowHighlightEnabled = false;

/**
 * Negative value means no row is highlight
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._rowHighlightIndex = -1;

/**
 * @type {!Array.&lt;tr.grid.Cell&gt;}
 * @private
 */
tr.LayoutGrid.prototype._highlightedCells;

/**
 * @type {Object.&lt;string, tr.grid.Cell&gt;}
 * @private
 */
tr.LayoutGrid.prototype._stretchedCells = null;
/**
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._stretchedCount = 0;
/**
 * @type {number}
 * @private
 */
tr.LayoutGrid.prototype._stretchedSize = 0;
/**
 * @type {*}
 * @private
 */
tr.LayoutGrid.prototype._ctx = null;

/**
 * @type {!tr.grid.SelectionList}
 * @private
 */
tr.LayoutGrid.prototype._selectionList;

/** @type {boolean}
 * @private
 */
tr.LayoutGrid.prototype._colVir = false;

/**
 * @type {boolean}
 * @private
 */
tr.LayoutGrid.prototype._initialized = false;

/**
 * @type {string}
 * @private
 */
tr.LayoutGrid.prototype._hidingMethod = "";

/**
 * @type {tr.ILayoutGrid}
 * @private
 */
tr.LayoutGrid.prototype._virOwner = null;

/** @type {number}
* @private
*/
tr.LayoutGrid.prototype._transformIETimer = 0;


/**
 * {@link tr.IElementControl#dispose}
 * @override
 */
tr.LayoutGrid.prototype.dispose = function () {
	this.setRowCount(0); // Fire rowCountChanged

	this.unlistenAll();
	//this.clearSelectedRows();

	for (var i = this._columns.length; --i &gt;= 0; ) {
		this._columns[i].dispose();
	}

	this._colCount = this._rowCount = this._activeRowEnd = this._availableRowCount = 0;

	this._highlightedCells.length = 0;
	this._stretchedCells = this._ctx = null;
	this._stretchedCount = 0;

	this._topNode.dispose();
};
/**
 * {@link tr.IElementControl#getWidth}
 * @override
 */
tr.LayoutGrid.prototype.getWidth = function () {
	if (this._topNode.isVisible() === false) {
		return 0;
	}

	return this.getContentWidth();
};

/**
 * {@link tr.IElementControl#setWidth}
 * @override
 */
tr.LayoutGrid.prototype.setWidth = function (px) {
	if (px &lt; 0) {
		return false;
	}

	var reserveSpace = this._rightSpace ? this._rightSpace.offsetWidth : 0;
	var changes = this._trackX.setTrackSize(px, reserveSpace); // WARNING: Perform scalling instead of setting width directly

	if (changes === null) {
		return false;
	}

	// The size will be applied, only if minimum specification is satisfied.
	this._syncLayoutToColumns(0);

	return true;
};

/**
 * {@link tr.IElementControl#getHeight}
 * @override
 */
tr.LayoutGrid.prototype.getHeight = function () {
	if (!this._topNode.isVisible()) {
		return 0;
	}

	return this.getContentHeight();
};
/**
 * {@link tr.IElementControl#setHeight}
 * @override
 */
tr.LayoutGrid.prototype.setHeight = function (px) {
	if (px &lt; 0) {
		return false;
	}

	var changes = this._trackY.setTrackSize(px, 0); // WARNING: Perform scalling instead of setting height directly

	if (changes === null) {
		return true;
	}

	// The size will be applied, only if minimum specification is satisfied.
	this._syncLayoutToRows(0, this._rowCount);

	return true;
};
/**
 * {@link tr.IElementControl#show}
 * @override
 */
tr.LayoutGrid.prototype.show = function (opt_shown) {
	// warning: this method affect to row only
	this._topNode.show(opt_shown);
	this._trackY.show(opt_shown);
	this.setFrozenLayout(opt_shown === false);
	this._dispatchRowHeightChangedEvent(0, this._rowCount); // TODO: This is redundant with setFrozenLayout
};

/**
 * {@link tr.ILayoutGrid#hitTest}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hitTest = function (x, y, opt_omitSpan) {
	if (x &lt; 0) {
		return null;
	}

	if (y &lt; 0) {
		return null;
	}

	if (x &gt;= this.getWidth()) {
		return null;
	}

	if (y &gt;= this.getHeight()) {
		return null;
	}

	var hitX = this._trackX.hitTest(x);

	if (hitX &lt; 0) {
		return null;
	}

	var hitY = this._trackY.hitTest(y);

	if (hitY &lt; 0) {
		return null;
	}

	var result = {};
	result[tr.res.colIndex] = hitX;
	result[tr.res.rowIndex] = hitY;

	if (opt_omitSpan !== true) {
		var cellSpan = this._cellSpans.getOccupyingSpan(hitX, hitY);

		if (cellSpan) {
			result[tr.res.colIndex] = cellSpan.indexX;
			result[tr.res.rowIndex] = cellSpan.indexY;
		}
	}

	return result;
};

/**
 * {@link tr.ILayoutGrid#hitTestX}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hitTestX = function (x) {
	if (x &lt; 0) {
		return -1;
	}

	if (x &gt;= this.getWidth()) {
		return ~this._colCount;
	}

	return this._trackX.hitTest(x);
};

/**
 * {@link tr.ILayoutGrid#hitTestY}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hitTestY = function (y) {
	if (y &lt; 0) {
		return -1;
	}

	if (y &gt;= this.getHeight()) {
		return ~this._rowCount;
	}

	return this._trackY.hitTest(y);
};

/**
 * {@link tr.ILayoutGrid#getDefaultColumnWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getDefaultColumnWidth = function () {
	return this._trackX.getDefaultLaneSize();
};

/**
 * {@link tr.ILayoutGrid#setDefaultColumnWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setDefaultColumnWidth = function (val) {
	if (this._trackX.getDefaultLaneSize() !== val) {
		this._trackX.setDefaultLaneSize(val);
		this._syncLayoutToColumns(0);
	}
};

/**
 * {@link tr.ILayoutGrid#getDefaultRowHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getDefaultRowHeight = function () {
	return this._trackY.getDefaultLaneSize();
};

/**
 * {@link tr.ILayoutGrid#setDefaultRowHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setDefaultRowHeight = function (val) {
	var defaultH = this._trackY.getDefaultLaneSize();

	if (defaultH !== val) {
		this._trackY.setDefaultLaneSize(val);

		for (var i = 0; i &lt; this._colCount; ++i) {
			this._columns[i].setHeight(val);
		}

		this._syncLayoutToRows(0, this._rowCount);
		this._dispatchRowHeightChangedEvent(0, this._rowCount);
	}
};

/**
 * {@link tr.ILayoutGrid#getColumnWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumnWidth = function (indexX) {
	return this._trackX.getLaneSize(indexX);
};

/**
 * {@link tr.ILayoutGrid#setColumnWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setColumnWidth = function (indexX, val) {
	if (this._setColumnWidth(indexX, val)) {
		this._syncLayoutToColumns(indexX);

		return true;
	}

	return false;
};
/** @public
 * @ignore
 * @param {number} indexX
 * @param {number} val
 * @return {boolean}
 */
tr.LayoutGrid.prototype._setColumnWidth = function (indexX, val) {
	return this._trackX.setLaneSize(indexX, val);
};
/** @public
 * @ignore
 */
tr.LayoutGrid.prototype._updateColumnLayout = function () {
	this._syncLayoutToColumns(0);
};

/**
 * {@link tr.ILayoutGrid#getRowHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowHeight = function (indexY) {
	return this._trackY.getLaneSize(indexY);
};

/**
 * {@link tr.ILayoutGrid#setRowHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowHeight = function (rowIndex, val) {
	if (rowIndex &lt; 0 || rowIndex &gt;= this._rowCount) {
		return false;
	}

	var dirty = this._trackY.setLaneSize(rowIndex, val);

	this._syncLayoutToRows(rowIndex, rowIndex + 1); // Update UI. WARNING: Very slow

	if (dirty) {
		this._dispatchRowHeightChangedEvent(rowIndex, rowIndex + 1);
	}

	this._resetTransformIETimer();

	return dirty;
};

/**
 * @description Use internally to quickly update all row heights
 * @public
 * @ignore
 * @param {tr.grid.TrackLayout} track
 * @param {number} start
 */
tr.LayoutGrid.prototype._updateRowHeights = function (track, start) {
	var dirty = 0;

	for (var i = 0; i &lt; this._rowCount; ++i) {
		var val = track.getLaneSize(start);

		dirty |= this._trackY.setLaneSize(i, val);
		++start;
	}

	this._syncLayoutToRows(0, this._rowCount);
	// if (dirty) { // TODO: Check if need to dispatch the event
		// this._dispatchRowHeightChangedEvent(0, this._rowCount);
	// }
	return dirty;
};

/**
 * {@link tr.ILayoutGrid#isColumnVisible}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.isColumnVisible = function (indexX) {
	return this._trackX.isLaneVisible(indexX);
};

/**
 * {@link tr.ILayoutGrid#hideColumn}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hideColumn = function (indexX, val) {
	return this.setColumnVisibility(indexX, (val === false), 0);
};

/**
 * {@link tr.ILayoutGrid#isRowVisible}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.isRowVisible = function (indexY) {
	return this._trackY.isLaneVisible(indexY);
};

/**
 * {@link tr.ILayoutGrid#hideRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hideRow = function (indexY, val) {
	if (this._trackY.hideLane(indexY, val)) {
		if ((val === undefined || val) &amp;&amp; !this.isRowVisible(indexY)) {
			this._hiddenRowCount++;
		} else if (this.isRowVisible(indexY)){
			this._hiddenRowCount--;
		}

		this._syncLayoutToRows(indexY, this._rowCount);
		this._dispatchRowHeightChangedEvent(indexY, indexY + 1);

		return true;
	}

	return false;
};

/**
 * {@link tr.ILayoutGrid#getMinimumColumnWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getMinimumColumnWidth = function (indexX) {
	return this._trackX.getMinimumLaneSize(indexX);
};

/**
 * {@link tr.ILayoutGrid#setMinimumColumnWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setMinimumColumnWidth = function (indexX, val) {
	if (this._trackX.setMinimumLaneSize(indexX, val)) {
		this._syncLayoutToColumns(indexX);

		return true;
	}

	return false;
};

/**
 * {@link tr.ILayoutGrid#getMinimumRowHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getMinimumRowHeight = function (indexY) {
	return this._trackY.getMinimumLaneSize(indexY);
};

/**
 * {@link tr.ILayoutGrid#setMinimumRowHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setMinimumRowHeight = function (indexY, val) {
	if (this._trackY.setMinimumLaneSize(indexY, val)) {
		this._syncLayoutToRows(indexY, this._rowCount);
		this._dispatchRowHeightChangedEvent(indexY, indexY + 1);

		return true;
	}

	return false;
};

/**
 * {@link tr.ILayoutGrid#getCellLeft}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellLeft = function (indexX) {
	return this._trackX.getLaneStart(indexX);
};

/**
 * {@link tr.ILayoutGrid#getCellTop}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellTop = function (indexY) {
	return this._trackY.getLaneStart(indexY);
};

/**
 * {@link tr.ILayoutGrid#getCellWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellWidth = function (indexX, indexY) {
	var cellSpan = this._cellSpans.getOccupyingSpan(indexX, indexY);

	if (cellSpan) {
		var spanStart = this._trackX.getLaneStart(cellSpan.indexX);
		var spanEnd = this._trackX.getLaneEnd(cellSpan.indexX + cellSpan.colSpan - 1);

		return spanEnd - spanStart;
	}

	return this.getColumnWidth(indexX);
};

/**
 * {@link tr.ILayoutGrid#getCellHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellHeight = function (indexX, indexY) {
	var cellSpan = this._cellSpans.getOccupyingSpan(indexX, indexY);

	if (cellSpan) {
		var spanStart = this._trackY.getLaneStart(cellSpan.indexY);
		var spanEnd = this._trackY.getLaneEnd(cellSpan.indexY + cellSpan.rowSpan - 1);

		return spanEnd - spanStart;
	}

	return this.getRowHeight(indexY);
};

/**
 * {@link tr.ILayoutGrid#hasCellSpan}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hasCellSpan = function () {
	return this._cellSpans.hasSpan();
};

/**
 * {@link tr.ILayoutGrid#getCellRowSpan}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellRowSpan = function (indexX, indexY) {
	return this._cellSpans.getRowSpan(indexX, indexY);
};

/**
 * {@link tr.ILayoutGrid#setCellRowSpan}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setCellRowSpan = function (indexX, indexY, spanVal) {
	var cellSpan = this._cellSpans.setRowSpan(indexX, indexY, spanVal);

	this._updateCellSpanSize(indexX, indexY, cellSpan);

	if (cellSpan) {
		if (cellSpan.retVal &gt;= 0) { // Expansion
			this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.rowSpan, true);
		} else { // Shrinking
			if (cellSpan.colSpan &gt; 1) { // Spanning still exists
				this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.prevRowSpan, false);
				this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.rowSpan, true);
			} else { // Removing span definition
				this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.prevRowSpan, false);
			}
		}

		return cellSpan.retVal !== 0;
	}

	var cell = this._getCell(indexX, indexY);

	if (cell &amp;&amp; cell._rowSpan &gt; 1) {
		this._updateCellSpanClass(indexX, indexY, cell._colSpan, cell._rowSpan, false);
	}

	return false;
};

/**
 * {@link tr.ILayoutGrid#getCellColSpan}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellColSpan = function (indexX, indexY) {
	return this._cellSpans.getColSpan(indexX, indexY);
};

/**
 * {@link tr.ILayoutGrid#setCellColSpan}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setCellColSpan = function (indexX, indexY, spanVal) {
	var cellSpan = this._cellSpans.setColSpan(indexX, indexY, spanVal);

	this._updateCellSpanSize(indexX, indexY, cellSpan);

	if (cellSpan) {
		if (cellSpan.retVal &gt;= 0) { // Expansion
			this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.rowSpan, true);
		} else { // Shrinking
			if (cellSpan.colSpan &gt; 1) { // Spanning still exists
				this._updateCellSpanClass(indexX, indexY, cellSpan.prevColSpan, cellSpan.rowSpan, false);
				this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.rowSpan, true);
			} else { // Removing span definition
				this._updateCellSpanClass(indexX, indexY, cellSpan.prevColSpan, cellSpan.rowSpan, false);
			}
		}

		return cellSpan.retVal !== 0;
	}

	var cell = this._getCell(indexX, indexY);

	if (cell &amp;&amp; cell._colSpan &gt; 1) {
		this._updateCellSpanClass(indexX, indexY, cell._colSpan, cell._rowSpan, false);
	}

	return false;
};

/**
 * {@link tr.ILayoutGrid#clearCellSpans}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.clearCellSpans = function () {
	var cellSpans = this._cellSpans.clearAllSpans();

	if (cellSpans === null) {
		return false;
	}

	for (var i = cellSpans.length; --i &gt;= 0; ) {
		var cellSpan = cellSpans[i];

		this._updateCellSpan(cellSpan.indexX, cellSpan.indexY, cellSpan, false);
	}

	return true;
};

/**
 * {@link tr.ILayoutGrid#clearCellSpans}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.clearColumnSpans = function (indexX) {
	var cellSpans = this._cellSpans.removeSpanByColIndex(indexX);

	if (cellSpans === null) {
		return false;
	}

	for (var i = cellSpans.length; --i &gt;= 0; ) {
		var cellSpan = cellSpans[i];

		this._updateCellSpan(cellSpan.indexX, cellSpan.indexY, cellSpan, false);
	}

	return true;
};

/**
 * {@link tr.ILayoutGrid#clearColumnCustomizations}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.clearColumnCustomizations = function () {
	this._trackX.clearLaneCustomizations();
	this._syncLayoutToColumns(0);
};

/**
 * {@link tr.ILayoutGrid#clearRowCustomizations}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.clearRowCustomizations = function () {
	this._trackY.clearLaneCustomizations();
	this._syncLayoutToRows(0, this._rowCount);
};

/**
 * {@link tr.ILayoutGrid#getColumnScalability}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumnScalability = function (indexX) {
	return this._trackX.getLaneScalability(indexX);
};

/**
 * {@link tr.ILayoutGrid#setColumnScalability}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setColumnScalability = function (indexX, val) {
	return this._trackX.setLaneScalability(indexX, val);
};

/**
 * {@link tr.ILayoutGrid#getRowScalability}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowScalability = function (indexY) {
	return this._trackY.getLaneScalability(indexY);
};

/**
 * {@link tr.ILayoutGrid#setRowScalability}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowScalability = function (indexY, val) {
	return this._trackY.setLaneScalability(indexY, val);
};

/**
 * {@link tr.ILayoutGrid#getCell}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCell = function (indexX, indexY, opt_includeSpan) {
	if (opt_includeSpan &amp;&amp; this._cellSpans.hasSpan()) {
		var colSpan = this._cellSpans.getColSpan(indexX, indexY);
		var rowSpan = this._cellSpans.getRowSpan(indexX, indexY);

		if (colSpan &lt; 0) {
			indexX += colSpan;
		}

		if (rowSpan &lt; 0) {
			indexY += rowSpan;
		}
	}

	return this._getCell(indexX, indexY);
};

/**
 * {@link tr.ILayoutGrid#getCellContent}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellContent = function (indexX, indexY) {
	var cell = this.getCell(indexX, indexY);

	if (cell !== null) {
		return cell.getContent();
	}

	return null;
};

/**
 * {@link tr.ILayoutGrid#setCellContent}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setCellContent = function (indexX, indexY, data) {
	var cell = this.getCell(indexX, indexY);

	if (cell === null) {
		window.console.log("Error: Accessing nonexistent cell in Grid's Table");

		return null;
	}

	return cell.setContent(data);
};

/**
 * {@link tr.ILayoutGrid#getColumnCount}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumnCount = function () {
	return this._colCount;
};

/**
 * {@link tr.ILayoutGrid#setColumnCount}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setColumnCount = function (val) {
	if (val &lt; 0) {
		val = 0;
	}

	if (this._colCount === val) {
		return;
	}

	var oldColCount = this._colCount;

	this._trackX.setLaneCount(val);  // Need to be set before syncing layout
	this._colCount = this._trackX.getLaneCount();

	var i = 0;
	var column = null;

	if (oldColCount &gt; val) {
		for (i = oldColCount; --i &gt;= val; ) {
			column = this._columns.pop();
			column.dispose();

			if (column === this._firstColumn) {
				this._firstColumn = null;
			}

			if (column === this._lastColumn) {
				this._lastColumn = null;
			}
		}

		// this._updateViewWidth(); // Core grid will guarantee updating width to each section
	} else {
		for (i = oldColCount; i &lt; val; ++i) {
			column = this._newColumn(i);
		}

		// this._syncLayoutToColumns(oldColCount); // Core grid will guarantee updating width to each section
	}

	this._updateColumnIndices();

	for (i = oldColCount; i &lt; val; ++i) {
		this._columns[i].activate(!this._colVir);
	}

	if (val &lt;= 0) { // If there is no column at all, clear all selections
		this._selectionList.clearAllSelections(); // No UI change
	}
};

/**
 * {@link tr.ILayoutGrid#getRowCount}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowCount = function () {
	return this._rowCount;
};

/**
 * {@link tr.ILayoutGrid#setRowCount}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowCount = function (val, noBinding) {
	if (val &lt; 0) {
		val = 0;
	}

	if (this._rowCount === val) {
		return;
	}

	var c, r;
	var oldRowCount = this._rowCount;

	this._trackY.setLaneCount(val); // Need to be set before syncing layout
	this._rowCount = this._trackY.getLaneCount();

	for (c = 0; c &lt; this._colCount; ++c) {
		this._columns[c].setCellCount(val);
	}

	if (oldRowCount &gt; val) {
		if (val &lt; this._rowHighlightIndex) {
			this.setRowHighlight(-1);
		}

		if (val &lt; this._activeRowEnd) {
			this._activeRowEnd = val;
		}

		if (val &lt; this._availableRowCount) {
			this._availableRowCount = val;
		}

		this._cellSpans.removeSpanStartedFromRowIndex(val);
		this._updateViewHeight();

		// Clear selection of the removed rows
		if (val &gt; 0) {
			for (var i = val; i &lt; oldRowCount; ++i) {
				this._selectionList.deselect(i); // No UI change
			}
		} else {
			this._selectionList.clearAllSelections(); // No UI change
		}
	} else {
		this._syncLayoutToRows(oldRowCount, val);
	}

	var e = {};

	e["prevCount"] = oldRowCount;
	e["rowCount"] = this._rowCount;
	this._dispatch("rowCountChanged", e); // This will trigger virtualizer

	if (oldRowCount &lt; val) { // In case of no event is sent back
		this._insertCells(0, this._rowCount); // Dispatch row available
	}
};

/**
 * {@link tr.ILayoutGrid#getVisibleRowCount}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getVisibleRowCount = function () {
	return (this._rowCount - this._hiddenRowCount);
};

/**
 * {@link tr.ILayoutGrid#addRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.addRow = function (val) {
	if (val &lt;= 0) {
		return;
	}

	if (this._colCount &lt;= 0) {
		window.console.log("WARNING: Row cannot be added, unless at least one column is added");

		return;
	}

	this.setRowCount(this._rowCount + val);
};

/**
 * {@link tr.ILayoutGrid#removeRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.removeRow = function (val) {
	if (val &lt;= 0) {
		return;
	}

	if (val &gt; this._rowCount) {
		val = this._rowCount;
	}

	this.setRowCount(this._rowCount - val);
};

/**
 * {@link tr.ILayoutGrid#setBorders}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setBorders = function (lft, top, rgt, btm) {
	this._topNode.setBorders(lft, top, rgt, btm);
};

/**
 * {@link tr.ILayoutGrid#getColumnStyle}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumnStyle = function (colIndex, styleName) {
	var column = this._columns[colIndex];

	if (column) {
		return column.getStyle(styleName);
	}

	return null;
};

/**
 * {@link tr.ILayoutGrid#setColumnStyle}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setColumnStyle = function (colIndex, styleName, value) {
	var column = this._columns[colIndex];
	if (column) {
		column.setStyle(styleName, value);
	}
};

/**
 * {@link tr.ILayoutGrid#enableColumnClass}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.enableColumnClass = function (colIndex, className, enabled) {
	var column = this._columns[colIndex];

	if (column) {
		column.enableClass(className, enabled);
	}
};

/**
 * {@link tr.ILayoutGrid#enableColumnClass}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.hasColumnClass = function (colIndex, className) {
	var column = this._columns[colIndex];

	return (column) ? column.hasClass(className) : false;
};

/**
 * {@link tr.ILayoutGrid#enableRowClass}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.enableRowClass = function (rowIndex, className, enabled) {
	if (rowIndex &gt;= 0 &amp;&amp; rowIndex &lt; this._rowCount) {
		for (var c = 0; c &lt; this._colCount; ++c) {
			this._columns[c].getCell(rowIndex).enableClass(className, enabled);
		}
	}
};

/**
 * {@link tr.ILayoutGrid#setRowStyle}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowStyle = function (rowIndex, styleName, value, enabled) {
	if (rowIndex &gt;= 0 &amp;&amp; rowIndex &lt; this._rowCount) {
		if (!value || (enabled != null &amp;&amp; !enabled)) {
			value = "";
		}

		for (var c = 0; c &lt; this._colCount; ++c) {
			this._columns[c].getCell(rowIndex).setStyle(styleName, value);
		}
	}
};

/**
 * {@link tr.ILayoutGrid#getRelativePosition}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRelativePosition = function (obj) {
	return tr.getRelativePosition(/** @type{Element|MouseEvent|Event} */(obj), this._topNode.getElement());
};

/**
 * {@link tr.ILayoutGrid#getContentWidth}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getContentWidth = function () {
	return this._trackX.getTrackSize();
};

/**
 * {@link tr.ILayoutGrid#getContentHeight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getContentHeight = function () {
	var layoutSize = this._trackY.getTrackSize();

	if (layoutSize &lt;= 0) { // All of the cell has default size of zero
		if (this._colCount * this.getVisibleRowCount() &gt; 0) {
			var column = this._columns[0];
			var bottomCell = column.getCell(this._rowCount - 1);
			var bottom = bottomCell.getTop() + bottomCell.getHeight();

			return bottom - column.getCell(0).getTop();
		}
	}

	return layoutSize;
};

/**
 * {@link tr.ILayoutGrid#getCellsByRowIndex}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellsByRowIndex = function (rowIndex) {
	if (rowIndex &lt; 0 || rowIndex &gt;= this._rowCount) {
		return null;
	}

	var ary = new Array(this._colCount);

	for (var c = 0; c &lt; this._colCount; ++c) {
		ary[c] = this._columns[c].getCell(rowIndex);
	}

	return ary;
};

/**
 * {@link tr.ILayoutGrid#disableHorizontalGridLine}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.disableHorizontalGridLine = function (opt_bool) {
	this.enableClass("no-horizontal-grid-line", opt_bool !== false);
};

/**
 * {@link tr.ILayoutGrid#disableVerticalGridLine}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.disableVerticalGridLine = function (opt_bool) {
	this.enableClass("no-vertical-grid-line", opt_bool !== false);
};

/**
 * {@link tr.ILayoutGrid#enableShading}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.enableShading = function (enabled) {
	if (enabled !== false) {
		this.addClass("tr-even-shading");
	} else {
		this.removeClass("tr-even-shading");
		this.removeClass("tr-odd-shading");
	}
};

/**
 * {@link tr.ILayoutGrid#setTransposedShading}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setTransposedShading = function (enabled) {
	this.enableClass("transposed-shading", enabled !== false);
};

/**
 * {@link tr.ILayoutGrid#enableRowHighlighting}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.enableRowHighlighting = function (opt_bool) {
	if (opt_bool === undefined) {
		opt_bool = true;
	}

	if (this._rowHighlightEnabled === opt_bool) {
		return;
	}

	this._rowHighlightEnabled = opt_bool;

	if (this._rowHighlightEnabled) {
		this.listen(tr.res.mousemove, this._onMouseMove);
		this.listen("mouseout", this._onMouseOut);
	} else {
		this.setRowHighlight(-1);
		this.unlisten(tr.res.mousemove, this._onMouseMove);
		this.unlisten("mouseout", this._onMouseOut);
	}
};

/**
 * {@link tr.ILayoutGrid#getRowHighlight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowHighlight = function () {
	return this._rowHighlightIndex;
};

/**
 * {@link tr.ILayoutGrid#setRowHighlight}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowHighlight = function (rowIndex) {
	if (!this._rowHighlightEnabled || rowIndex &lt; -1 || rowIndex &gt;= this._rowCount) {
		rowIndex = -1;
	}

	if (this._rowHighlightIndex === rowIndex) {
		return;
	}

	var prevIndex = this._rowHighlightIndex;

	this._rowHighlightIndex = rowIndex;

	for (var i = this._highlightedCells.length; --i &gt;= 0;) {
		this._highlightedCells[i].removeClass("highlighted-row"); // This will guarantee that there is no left over highlighted cell
	}

	if (rowIndex &gt;= 0 &amp;&amp; rowIndex &lt; this._rowCount) {
		this._highlightedCells.length = this._colCount;

		for (var c = this._colCount; --c &gt;= 0;) {
			var cell = this._columns[c].getCell(rowIndex);

			this._highlightedCells[c] = cell;
			cell.addClass("highlighted-row");
		}
	} else {
		this._highlightedCells.length = 0;
	}

	if (this._hasListener("rowHighlighted")) {
		var e = {};

		e[tr.res.prevRowIndex] = prevIndex;
		e[tr.res.rowIndex] = rowIndex;
		this._dispatch("rowHighlighted", e);
	}
};

/**
 * {@link tr.ILayoutGrid#getSelectedRows}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getSelectedRows = function () {
	if (this.getSelectedRowCount() &gt; 0) {
		return this._selectionList.getAllSelections();
	}

	return null;
};

/**
 * {@link tr.ILayoutGrid#getSelectedRowCount}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getSelectedRowCount = function () {
	return this._selectionList.getSelectionCount();
};

/**
 * {@link tr.ILayoutGrid#isSelectedRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.isSelectedRow = function (at) {
	return this._selectionList.getSelection(at);
};

/**
 * {@link tr.ILayoutGrid#setSelectedRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setSelectedRow = function (rowIndex, opt_selected) {
	if (rowIndex &lt; 0 || rowIndex &gt;= this._rowCount) {
		return;
	}

	this._selectionList.setSelection(rowIndex, opt_selected);
	this._updateSelectionUI(rowIndex);
};

/**
 * {@link tr.ILayoutGrid#selectSingleRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.selectSingleRow = function (rowIndex) {
	if (rowIndex &lt; 0 || rowIndex &gt;= this._rowCount) {
		return;
	}

	this.clearSelectedRows();
	this._selectionList.select(rowIndex);
	this._addSelectionUI(rowIndex);
};

/**
 * {@link tr.ILayoutGrid#selectRowRange}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.selectRowRange = function (rowIndex, len) {
	if (rowIndex &lt; 0 || rowIndex &gt;= this._rowCount) {
		return;
	}

	if (rowIndex + len &gt; this._rowCount) {
		len = this._rowCount - rowIndex;
	}

	this._selectionList.selectRange(rowIndex, len);

	for (var r = 0; r &lt; len; ++r) {
		this._addSelectionUI(r + rowIndex);
	}
};

/**
 * {@link tr.ILayoutGrid#clearSelectedRows}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.clearSelectedRows = function () {
	var count = this._selectionList.getSelectionCount();

	if (count) {
		var sels = this._selectionList.getAllSelections(); // Slow

		this._selectionList.clearAllSelections();

		for (var i = 0; i &lt; count; ++i) {
			this._removeSelectionUI(sels[i]);
		}

		return count;
	}

	return 0;
};

/**
 * {@link tr.ILayoutGrid#getFirstSelectedRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getFirstSelectedRow = function () {
	return this._selectionList.getFirstSelectedIndex();
};

/**
 * {@link tr.ILayoutGrid#getLastSelectedRow}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getLastSelectedRow = function () {
	return this._selectionList.getLastSelectedIndex();
};

/**
 * {@link tr.ILayoutGrid#getRowAnchor}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowAnchor = function () {
	return this._selectionList.getSelectionAnchor();
};

/**
 * {@link tr.ILayoutGrid#setRowAnchor}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowAnchor = function (at) {
	this._selectionList.setSelectionAnchor(at);
};

/**
 * @inheritDoc
 */
tr.LayoutGrid.prototype.activateColumn = function (colIndex, opt_bool) {
	var column = this._columns[colIndex];

	if (column) {
		var dirty = column.activate(opt_bool);
		if (opt_bool &amp;&amp; dirty &amp;&amp; this._rightSpace) {
			var pn = this._rightSpace.parentNode;
			if (pn) {
				pn.appendChild(this._rightSpace);
			}
		}
	}
};

/**
 * {@link tr.ILayoutGrid#activateRows}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.activateRows = function () {
	this._onEnterDocument();
};

/**
 * @inheritDoc
 */
tr.LayoutGrid.prototype.moveRowsToTop = function (numRows) {
	for (var c = 0; c &lt; this._colCount; ++c) {
		this._columns[c].moveCellsToTop(numRows);
	}
};

/**
 * {@link tr.ILayoutGrid#getFirstIndexInView}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getFirstIndexInView = function () {
	return 0;
};

/**
 * {@link tr.ILayoutGrid#getLastIndexInView}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getLastIndexInView = function () {
	return this._availableRowCount - 1;
};

/**
 * {@link tr.ILayoutGrid#isInCurrentView}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.isInCurrentView = function (index) {
	return this._rowCount === 0 ? false : (index &gt;= 0 &amp;&amp; index &lt; this._rowCount);
};

/**
 * {@link tr.ILayoutGrid#getFrozenLayout}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getFrozenLayout = function () {
	return this._frozenLayout;
};

/**
 * {@link tr.ILayoutGrid#setFrozenLayout}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setFrozenLayout = function (bool) {
	if (!this._topNode.isVisible()) {
		bool = true;
	}

	if (this._frozenLayout !== bool) {
		this._frozenLayout = bool;

		if (!this._frozenLayout) {
			this._syncLayoutToColumns(0);
			this._syncLayoutToRows(0, this._rowCount);
			this._dispatchRowHeightChangedEvent(0, this._rowCount);
		}
	}
};

/**
 * {@link tr.ILayoutGrid#getColumn}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumn = function (index) {
	return this._columns[index] || null;
};

/**
 * {@link tr.ILayoutGrid#insertColumn}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.insertColumn = function (index, opt_json) {
	if (index &lt; 0) {
		index = 0;
	}	else if (index &gt; this._colCount) {
		index = this._colCount;
	}

	var atTheMiddle = index &lt; this._colCount;
	var cellSpans = this._cellSpans.getAllSpans();

	this._updateCellSpans(cellSpans, false); // Clear all styling
	this._trackX.insertLane(index, opt_json);
	this._colCount = this._trackX.getLaneCount();

	var column = this._newColumn(index);

	this._updateColumnIndices();

	if (this._cellSpans.shiftColumn(index, 1)) {
		cellSpans = this._cellSpans.getAllSpans();
	}

	this._updateCellSpans(cellSpans, true); // Restore all styling
	// this._syncLayoutToColumns(index); // Core grid will guarantee updating width to each section

	// Select the newly added cell, if there is a row selection
	var count = this._selectionList.getSelectionCount();

	if (count) {
		var sels = this._selectionList.getAllSelections(); // Slow

		for (var i = sels.length; --i &gt;= 0;) {
			var cell = column.getCell(sels[i]);

			if (cell) {
				cell.addClass("selected-row");
			}
		}
	}

	column.activate(atTheMiddle || !this._colVir);

	return column;
};

/**
 * {@link tr.ILayoutGrid#removeColumnAt}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.removeColumnAt = function (index) {
	var definition = this._trackX.removeLaneAt(index);

	if (definition === null) {
		return null;
	}

	var cellSpans = this._cellSpans.getAllSpans();

	this._updateCellSpans(cellSpans, false); // Clear all styling
	this._colCount = this._trackX.getLaneCount();

	var column = this._columns.splice(index, 1)[0];

	column.dispose();
	definition["control"] = column;
	this._updateColumnIndices();

	if (this._cellSpans.removeColumn(index)) {
		cellSpans = this._cellSpans.getAllSpans();
	}

	this._updateCellSpans(cellSpans, true); // Restore all styling
	this._syncLayoutToColumns(index);

	if (index &gt;= this._colCount) {
		this._updateViewWidth();
	}

	return definition;
};

/**
 * {@link tr.ILayoutGrid#moveColumn}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.moveColumn = function (from, to) {
	if (from &lt; 0) {
		from = 0;
	} else if (from &gt;= this._colCount) {
		return;
	}

	if (to &lt; 0) {
		to = 0;
	}	else if (to &gt;= this._colCount) {
		to = this._colCount - 1;
	}

	if (from === to) {
		return;
	}

	var cellSpans = this._cellSpans.getAllSpans();

	this._updateCellSpans(cellSpans, false); // Clear all styling
	this._trackX.moveLane(from, to);

	var movedColumn = this._columns[from];

	tr.moveArrayItem(this._columns, from, to);

	var nextSibling = this._columns[to + 1] || null;
	movedColumn.insertBefore(nextSibling);

	if (this._rightSpace) {
		var pn = this._rightSpace.parentNode;

		if (pn) {
			pn.appendChild(this._rightSpace);
		}
	}

	this._updateColumnIndices();
	this._updateCellSpans(cellSpans, true); // Restore all styling

	var minIndex = (from &lt; to) ? from : to;

	this._syncLayoutToColumns(minIndex);
};

/**
 * {@link tr.ILayoutGrid#enableRowVirtualization}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.enableRowVirtualization = function () {
	console.log("WARNING: This function is deprecated");
};

/**
 * {@link tr.ILayoutGrid#enableRowVirtualization}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.enableColumnVirtualization = function (bool) {
	this._colVir = bool !== false;
};

/**
 * {@link tr.ILayoutGrid#getColumnIndex}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumnIndex = function (colElem) {
	if (colElem) {
		var len = this._columns.length;

		for (var i = 0; i &lt; len; ++i) {
			if (this._columns[i].getElement() === colElem) {
				return i;
			}
		}
	}

	return -1;
};

/**
 * {@link tr.ILayoutGrid#getCellIndex}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getCellIndex = function (colIndex, cellElem) {
	var column = this._columns[colIndex];

	if (!column) {
		return -1;
	}

	return column.getCellIndex(cellElem);
};

/**
 * {@link tr.ILayoutGrid#getIndex}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getIndex = function () {
	return this._index;
};

/**
 * {@link tr.ILayoutGrid#setIndex}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setIndex = function (index) {
	this._index = index;
};

/**
 * {@link tr.ILayoutGrid#getRowOffset}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowOffset = function () {
	return this._rowOffset;
};

/**
 * {@link tr.ILayoutGrid#setRowOffset}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowOffset = function (index) {
	this._rowOffset = index;
};

/**
 * {@link tr.ILayoutGrid#updateLayout}
 * @ignore
 * @inheritDoc
 */
tr.LayoutGrid.prototype.updateLayout = function () {};

/**
 * {@link tr.ILayoutGrid#stretchCell}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.stretchCell = function (cellRef, rowIndex, opt_stretching, onlyToTheRight) {
	var colIndex = -1;
	var cell = null;
	var column = null;

	if (typeof cellRef === "number") {
		colIndex = cellRef;
		column = this._columns[colIndex];

		if (!column) {
			return null;
		}

		cell = column.getCell(rowIndex || 0);
		if (!cell) {
			return null;
		}
	} else {
		cell = /** @type{tr.grid.Cell} */(cellRef);
		if (cell &amp;&amp; cell.getParent) {
			colIndex = this.getColumnIndex(cell.getParent());
		}
		column = this._columns[colIndex];

		if (!column) {
			return null;
		}
	}

	var stretching = (opt_stretching !== false);
	var cellId = cell.getCellId() + "";

	if (stretching) {
		cell.addClass("tr-stretched");

		this._updateStretchedCell(cell, colIndex, !onlyToTheRight);

		column.disableDeactivation(); // HACK: If the cell is stretched, the column cannot be virtualized

		if (!this._stretchedCells) {
			this._stretchedCells = {};
		}
		if (!this._stretchedCells[cellId]) {
			this._stretchedCells[cellId] = cell;
			this._stretchedCount++;
		}
	} else if (cell._stretched) {
		cell.removeClass("tr-stretched");

		if (cell._leftStretching) {
			cell.setStyle("left", "");
			cell._leftStretching = false;
		}

		cell.setWidth(-1);

		if (this._stretchedCount) {
			if (this._stretchedCells[cellId]) {
				this._stretchedCells[cellId] = null; // Faster then delete
				this._stretchedCount--;
			}
		}
	}

	cell._stretched = stretching;

	return cell;
};

/**
 * {@link tr.ILayoutGrid#unstretchCell}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.unstretchCell = function (cellRef, rowIndex) {
	return this.stretchCell(cellRef, rowIndex, false);
};

/**
 * {@link tr.ILayoutGrid#getStretchedCells}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getStretchedCells = function () { // TODO: Deprecate this method
	var ary = [];
	if (this._stretchedCount) {
		var obj = this._stretchedCells;
		for (var key in obj) {
			var cell = this._stretchedCells[key];
			if (cell) {
				ary.push(cell);
			}
		}
	}
	return ary;
};

/** {@link tr.ILayoutGrid#updateStretchedCells}
* @inheritDoc */
tr.LayoutGrid.prototype.updateStretchedCells = function () {
	this._stretchedSize = 0;
	if (this._stretchedCount &lt;= 0) {
		return false;
	}
	var obj = this._stretchedCells;
	for (var cellId in obj) {
		var cell = this._stretchedCells[cellId];
		if (cell) {
			if (cell.getElement()) {
				var colIndex = this.getColumnIndex(cell.getParent());
				this._updateStretchedCell(cell, colIndex, cell._leftStretching);
			} else {
				this._stretchedCells[cellId] = null; // Faster then delete
				this._stretchedCount--;
			}
		}
	}
	if (this._stretchedCount &lt;= 0) {
		this._stretchedCells = null;
		this._stretchedCount = 0;
	}
	return this._stretchedCount ? true : false;
};

/** @private
* @param {tr.grid.Cell} cell
* @param {number} colIndex
* @param {boolean} leftStretching
*/
tr.LayoutGrid.prototype._updateStretchedCell = function(cell, colIndex, leftStretching) {
	var ctx = this._ctx;
	if(!this._stretchedSize &amp;&amp; ctx) {
		if(ctx["getWidth"] &amp;&amp; (this._columns[colIndex].getParent() === this._topNode.getElement())) {
			this._stretchedSize = ctx["getWidth"]();
			var contentWidth = this.getContentWidth();
			if(contentWidth &lt; this._stretchedSize) { // If view width is larger than actual content
				this._stretchedSize = contentWidth;
			}
		}
	}

	var stretchedSize = this._stretchedSize || this.getContentWidth();
	var leftStart = this._trackX.getLaneStart(colIndex);
	if (leftStretching) {
		cell._leftStretching = true;
		cell.setLeft(-leftStart);
		cell.setWidth(stretchedSize); // Cell width is always modified (colSpan styling will be reset)
	} else {
		cell._leftStretching = false;
		cell.setStyle("left", "");
		cell.setWidth(stretchedSize - leftStart);
	}
};

/**
 * {@link tr.ILayoutGrid#getColumnHost}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getColumnHost = function () {
	return this._topNode.getElement();
};

/**
 * {@link tr.ILayoutGrid#setHidingMethod}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setHidingMethod = function (method) {
	this._hidingMethod = method;
};

/**
 * {@link tr.ILayoutGrid#getHidingMethod}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getHidingMethod = function () {
	return this._hidingMethod;
};

/**
 * {@link tr.ILayoutGrid#setColumnVisibility}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setColumnVisibility = function (colIndex, bool, flag) {
	if (this._trackX.hideLane(colIndex, !bool, flag)) {
		this._syncLayoutToColumns(colIndex);

		return true;
	}

	return false;
};

/**
 * {@link tr.ILayoutGrid#setColumnVisibility}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getRowLayout = function () {
	return this._trackY;
};

/**
 * {@link tr.ILayoutGrid#reserveRightSpace}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.reserveRightSpace = function (size) {
	if (size &amp;&amp; size &gt; 0) {
		if (!this._rightSpace) {
			var rs = this._rightSpace = document.createElement("div");
			rs.className = "tr-reserved-space";
			rs.style.height = this.getContentHeight() + "px";

			// warning: The element's style is not completed by this function
			// so this method should not be called directly in the application level.

			this._topNode.addContent(this._rightSpace);
		}

		this._rightSpace.style.width = size + "px";

		this._updateViewWidth();
	} else if (this._rightSpace) {
		var pn = this._rightSpace.parentNode;

		if (pn) {
			pn.removeChild(this._rightSpace);
		}

		this._rightSpace = null;

		this._updateViewWidth();
	}

	return this._rightSpace;
};

/**
 * @public
 * @ignore
 * @param {boolean} absolutePos if true, the right space element will be positioned absolutely
 */
tr.LayoutGrid.prototype._updateRightSpaceStyle = function(absolutePos) {
	var rs = this._rightSpace;
	if (absolutePos) {
		rs.style.top = this._trackY.getLaneStart(this._activeRow) + "px";
		rs.style.left = this._trackX.getLaneStart(this._colCount) + "px";
		rs.style.position = "";
		rs.style.display = "";
	} else {
		rs.style.position = "static";
		rs.style.display = "inline-block";
	}
};
/** @public
* @ignore
*/
tr.LayoutGrid.prototype._reinsertRightSpace = function() {
	if(this._rightSpace) {
		this._topNode.addContent(this._rightSpace);
	}
};

/**
 * {@link tr.ILayoutGrid#reserveRightSpace}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getReservedSpace = function () {
	return this._rightSpace;
};

/**
 * {@link tr.ILayoutGrid#getComputedStyle}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.getComputedStyle = function () {
	var elem = this._topNode.getElement();

	return elem.offsetParent ? getComputedStyle(elem) : null;
};

/**
 * {@link tr.ILayoutGrid#isColumnActive}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.isColumnActive = function (colIndex) {
	var column = this._columns[colIndex];

	return column ? column.isActive() : false;
};

/**
 * {@link tr.ILayoutGrid#setRowAttributes}
 * @inheritDoc
 */
tr.LayoutGrid.prototype.setRowAttributes = function (rowIndex, func) {

	if (rowIndex &lt; 0 || (rowIndex &gt;= this._rowCount)) {
		return;
	}

	for (var c = 0; c &lt; this._colCount; ++c) {

		var result = func(c);

		for (var i = result.length; --i &gt;= 0;) {

			var entry = result[i];
			var cell = this._columns[c].getCell(rowIndex);

			if (!cell) {
				continue;
			}

			if (entry["remove"]) {
				cell.removeAttribute(entry["attribute"]);
			} else {
				cell.setAttribute(entry["attribute"], entry["value"]);
			}
		}

	}

};

/**
 * @private
 * @param {number} indexX
 * @param {number} indexY
 * @return {tr.grid.Cell}
 */
tr.LayoutGrid.prototype._getCell = function (indexX, indexY) {
	var column = this._columns[indexX];

	return (column) ? column.getCell(indexY) : null;
};

/**
 * @private
 * @param {number} from
 * @param {number} to
 */
tr.LayoutGrid.prototype._insertCells = function (from, to) {
	this._activeRow = from;
	this._activeRowEnd = to;

	var top = this._trackY.getLaneStart(from);

	for (var c = 0; c &lt; this._colCount; ++c) {
		var column = this._columns[c];

		if (!column.hasCollapsedCells()) {
			column.setTop(top);
		}

		column.activateCells(from, to);
	}

	if (this._rightSpace) {
		this._rightSpace.style.top = top + "px";
	}

	if (to &gt; this._availableRowCount) {
		var e = {};

		e[tr.res.prevRowIndex] = this._availableRowCount;
		e[tr.res.rowIndex] = to;

		this._availableRowCount = to;
		this._dispatch("rowAvailable", e);
	}
};

/**
 * @private
 * @param {number} indexX
 * @return {!tr.IElementControl}
 */
tr.LayoutGrid.prototype._newColumn = function (indexX) {
	var column = new grid.Column(this._virOwner || this);

	column.setHeight(this._trackY.getDefaultLaneSize());
	column.setCellCount(this._rowCount);
	column.setTop(this._trackY.getLaneStart(this._activeRow));
	column.activateCells(this._activeRow, this._activeRowEnd);

	for (var r = 0; r &lt; this._rowCount; ++r) {
		if (!this._trackY.isAtDefaultSize(r)) {
			column.getCell(r).setHeight(this._trackY.getLaneSize(r));
		}
	}

	if (indexX &gt;= this._columns.length) {
		this._columns.push(column);

		column.setParent(this._topNode);
	} else {
		this._columns.splice(indexX, 0, column);

		var nextColumn = this._columns[indexX + 1];

		column.insertBefore(nextColumn);
	}

	if (this._rightSpace) {
		var pn = this._rightSpace.parentNode;

		if (pn) {
			pn.appendChild(this._rightSpace);
		}
	}

	return column;
};

/**
 * @private
 */
tr.LayoutGrid.prototype._updateViewWidth = function () { // This method is also called by _syncLayoutToColumns()
	if (this._frozenLayout) {
		return;
	}

	var contentWidth = this.getContentWidth();
	this.updateStretchedCells();

	if (this._rightSpace) {
		contentWidth += this._rightSpace.offsetWidth;
	}
	this._topNode.setWidth(contentWidth); // View is kept in sync with content size
};

/**
 * @private
 */
tr.LayoutGrid.prototype._updateViewHeight = function () {
	if (this._frozenLayout) {
		return;
	}

	var contentHeight = this.getContentHeight();

	this._topNode.setHeight(contentHeight); // View is kept in sync with content size

	if (this._rightSpace) {
		this._rightSpace.style.height = contentHeight + "px";
	}
};

/** @private
*/
tr.LayoutGrid.prototype._updateColumnIndices = function () {
	var columnCount = this._columns.length;
	var first = this._columns[0];

	if (first !== this._firstColumn) {
		if (this._firstColumn) {
			this._firstColumn.removeClass("first");
		}

		this._firstColumn = first;

		if (this._firstColumn) {
			this._firstColumn.addClass("first");
		}
	}

	var last = this._columns[columnCount - 1];

	if (last !== this._lastColumn) {
		if (this._lastColumn) {
			this._lastColumn.removeClass("last");
		}

		this._lastColumn = last;

		if (this._lastColumn) { this._lastColumn.addClass("last"); }
	}

	var sibling = null;

	for (var i = this._columns.length; --i &gt;= 0;) {
		var column = this._columns[i];

		column.setNextSibling(sibling);
		sibling = column;
	}
};

/**
 * @private
 * @param {number} from
 */
tr.LayoutGrid.prototype._syncLayoutToColumns = function (from) {
	if (this._frozenLayout) {
		return false;
	}

	if (this._rightSpace) { // Reserved right space must be updated regardless of the given index
		this._rightSpace.style.left = this._trackX.getLaneStart(this._colCount) + "px";
	}

	if (from &gt;= this._colCount) {
		return false;
	}

	for (var c = from; c &lt; this._colCount; ++c) {
		var column = this._columns[c];

		column.setLeft(this._trackX.getLaneStart(c));
		column.setWidth(this._trackX.getLaneSize(c));
	}

	this._updateCellSpanLayout(this._cellSpans.getAllSpans());
	this._updateViewWidth();
};

/**
 * @private
 * @param {number} indexY
 * @param {number} toY Exclusive index of end cell in Y-Axis
 */
tr.LayoutGrid.prototype._syncLayoutToRows = function (indexY, toY) {
	if (this._frozenLayout) {
		return;
	}

	for (var r = indexY; r &lt; toY; ++r) {
		var height = (this._trackY.isAtDefaultSize(r)) ? -1 : this._trackY.getLaneSize(r);

		for (var c = 0; c &lt; this._colCount; ++c) {
			this._columns[c].getCell(r).setHeight(height);
		}
	}

	this._updateCellSpanLayout(this._cellSpans.getAllSpans());
	this._updateViewHeight();
};

/**
 * @private
 */
tr.LayoutGrid.prototype._dispatchRowHeightChangedEvent = function (from, to) {
	if (!this._hasListener("rowHeightChanged")) {
		return;
	}

	if (from &gt;= to) {
		return;
	}

	var e = {};

	e[tr.res.rowIndex] = from;
	e["changeLength"] = to - from;
	this._dispatch("rowHeightChanged", e);
};

/**
 * @private
 * @param {number} indexX
 * @param {number} indexY
 * @param {tr.grid.CellSpan} cellSpan
 */
tr.LayoutGrid.prototype._updateCellSpanSize = function (indexX, indexY, cellSpan) {
	var cell = this._getCell(indexX, indexY);

	if (cell === null) {
		return;
	}

	if (cellSpan &amp;&amp; cellSpan.colSpan &gt; 1) {
		cell.setWidth(this.getCellWidth(indexX, indexY));
		this._columns[indexX].disableDeactivation(); // HACK: If a cell has column span, the column cannot be virtualized
	} else {
		cell.setWidth(-1);
	}

	if (cellSpan &amp;&amp; cellSpan.rowSpan &gt; 1) {
		cell.setHeight(this.getCellHeight(indexX, indexY)); /////
	} else {
		var height = this._trackY.isAtDefaultSize(indexY) ? -1 : this._trackY.getLaneSize(indexY);

		cell.setHeight(height);
	}
};

/**
 * @private
 * @param {Array.&lt;tr.grid.CellSpan&gt;} cellSpans
 */
tr.LayoutGrid.prototype._updateCellSpanLayout = function (cellSpans) {
	if (cellSpans === null) { return; }

	for (var i = cellSpans.length; --i &gt;= 0; ) {
		var cellSpan = cellSpans[i];

		this._updateCellSpanSize(cellSpan.indexX, cellSpan.indexY, cellSpan);
	}
};

/**
 * @private
 * @param {number} indexX
 * @param {number} indexY
 * @param {!tr.grid.CellSpan} cellSpan
 * @param {boolean} adding
 */
tr.LayoutGrid.prototype._updateCellSpan = function (indexX, indexY, cellSpan, adding) {
	this._updateCellSpanSize(indexX, indexY, adding ? cellSpan : null);
	this._updateCellSpanClass(indexX, indexY, cellSpan.colSpan, cellSpan.rowSpan, adding);
};

/**
 * @private
 * @param {number} indexX
 * @param {number} indexY
 * @param {number} colSpan
 * @param {number} rowSpan
 * @param {boolean} adding
 */
tr.LayoutGrid.prototype._updateCellSpanClass = function (indexX, indexY, colSpan, rowSpan, adding) {
	var column;

	for (var c = 0; c &lt; colSpan; ++c) {
		column = this._columns[indexX + c];

		if (!column) {
			break;
		}

		column.collapseCells(indexY, rowSpan, adding, (c === 0), (c &gt; 0));
	}

	var cell = this._getCell(indexX, indexY);

	if (cell) {
		cell._colSpan = (adding) ? colSpan : 1;
		cell._rowSpan = (adding) ? rowSpan : 1; // For quick rendering
	}
};

/**
 * @private
 * @param {Array.&lt;tr.grid.CellSpan&gt;} cellSpans
 * @param {boolean} adding
 */
tr.LayoutGrid.prototype._updateCellSpans = function (cellSpans, adding) {
	if (cellSpans === null) { return; }

	for (var i = cellSpans.length; --i &gt;= 0; ) {
		var cellSpan = cellSpans[i];

		this._updateCellSpan(cellSpan.indexX, cellSpan.indexY, cellSpan, adding);
	}
};

/**
 * @private
 * @param {Object} e
 */
tr.LayoutGrid.prototype._onMouseMove = function (e) {
	var target = e["target"];
	var colElement = tr.closestElement(target, "column");
	var colIndex = this.getColumnIndex(colElement);
	var cellElement = (colIndex &gt;= 0) ? tr.closestElement(target, "cell") : null;

	this.setRowHighlight(this.getCellIndex(colIndex, cellElement));
};

/**
 * @private
 * @param {Object} e
 */
tr.LayoutGrid.prototype._onMouseOut = function (e) {
	var rel = e.relatedTarget;

	if (rel) {
		var thisElem = this._topNode.getElement();

		while (rel.parentNode !== null) {
			rel = rel.parentNode;

			if (rel === thisElem) {
				return;
			}
		}
	}

	this.setRowHighlight(-1);
};

/**
 * @private
 * @param {number} rowIndex
 */
tr.LayoutGrid.prototype._updateSelectionUI = function (rowIndex) { // Update UI of the specified row index
	var selected = this._selectionList.getSelection(rowIndex);

	for (var c = 0; c &lt; this._colCount; ++c) {
		var cell = this._columns[c].getCell(rowIndex);

		if (cell) {
			cell.enableClass("selected-row", selected);
		}
	}
};

/** @private
* @param {number} rowIndex
*/
tr.LayoutGrid.prototype._addSelectionUI = function (rowIndex) {
	for (var c = 0; c &lt; this._colCount; ++c) {
		var cell = this._columns[c].getCell(rowIndex);

		if (cell) {
			cell.addClass("selected-row");
		}
	}
};

/**
 * @private
 * @param {number} rowIndex
 */
tr.LayoutGrid.prototype._removeSelectionUI = function (rowIndex) {
	for (var c = 0; c &lt; this._colCount; ++c) {
		var cell = this._columns[c].getCell(rowIndex);

		if (cell) {
			cell.removeClass("selected-row");
		}
	}
};

/**
 * @public
 * @ignore
 */
tr.LayoutGrid.prototype._onEnterDocument = function () {
	if (!this._initialized &amp;&amp; this._topNode.getParent()) {
		for (var c = 0; c &lt; this._colCount; ++c) {
			this._columns[c].enableAutoStyleUpdating();
		}

		this._syncLayoutToColumns(0);
		this._initialized = true;
	}
};
/** This is a WORKAROUND to fix Internet Explorer couldn't render top 50% with translateX -50% correctly
 * @private
*/
tr.LayoutGrid.prototype._resetTransformIETimer = function () {
	if (tr.isIE) {
		if(!this._transformIETimer) {
			this.enableClass("reset-transform");
			this._transformIETimer = setTimeout(this._onResetTransformIE.bind(this), 20);
		}
	}
};
/** @private
*/
tr.LayoutGrid.prototype._onResetTransformIE = function () {
	this._transformIETimer = 0;
	this.enableClass("reset-transform", false);
};

/** @public
* @ignore
* @param {*} ctx
*/
tr.LayoutGrid.prototype._setContext = function(ctx) {
	this._ctx = ctx;
};

/** @public
* @ignore
* @return {*} ctx
*/
tr.LayoutGrid.prototype._getContext = function () {
	return this._ctx;
};

goog.exportSymbol("tr.LayoutGrid", tr.LayoutGrid);
(function() {
var pt = tr.LayoutGrid.prototype;
var methodMap = {
	"dispose": pt.dispose,
	"getWidth": pt.getWidth,
	"setWidth": pt.setWidth,
	"getHeight": pt.getHeight,
	"setHeight": pt.setHeight,
	"show": pt.show,

	"getFirstIndexInView": pt.getFirstIndexInView,
	"getLastIndexInView": pt.getLastIndexInView,
	"isInCurrentView": pt.isInCurrentView,
	"getFrozenLayout": pt.getFrozenLayout,
	"setFrozenLayout": pt.setFrozenLayout,

	"getCell": pt.getCell,
	"getCellContent": pt.getCellContent,
	"setCellContent": pt.setCellContent,
	"getColumn": pt.getColumn,
	"getColumnCount": pt.getColumnCount,
	"setColumnCount": pt.setColumnCount,
	"getRowCount": pt.getRowCount,
	"setRowCount": pt.setRowCount,
	"addRow": pt.addRow,
	"removeRow": pt.removeRow,

	"getDefaultColumnWidth": pt.getDefaultColumnWidth,
	"setDefaultColumnWidth": pt.setDefaultColumnWidth,
	"getDefaultRowHeight": pt.getDefaultRowHeight,
	"setDefaultRowHeight": pt.setDefaultRowHeight,
	"getColumnWidth": pt.getColumnWidth,
	"setColumnWidth": pt.setColumnWidth,
	"getRowHeight": pt.getRowHeight,
	"setRowHeight": pt.setRowHeight,
	"isColumnVisible": pt.isColumnVisible,
	"hideColumn": pt.hideColumn,
	"isRowVisible": pt.isRowVisible,
	"hideRow": pt.hideRow,
	"getMinimumColumnWidth": pt.getMinimumColumnWidth,
	"setMinimumColumnWidth": pt.setMinimumColumnWidth,
	"getMinimumRowHeight": pt.getMinimumRowHeight,
	"setMinimumRowHeight": pt.setMinimumRowHeight,
	"getCellLeft": pt.getCellLeft,
	"getCellTop": pt.getCellTop,
	"getCellWidth": pt.getCellWidth,
	"getCellHeight": pt.getCellHeight,

	"hasCellSpan": pt.hasCellSpan,
	"getCellRowSpan": pt.getCellRowSpan,
	"setCellRowSpan": pt.setCellRowSpan,
	"getCellColSpan": pt.getCellColSpan,
	"setCellColSpan": pt.setCellColSpan,
	"clearCellSpans": pt.clearCellSpans,
	"clearColumnSpans": pt.clearColumnSpans,

	"clearColumnCustomizations": pt.clearColumnCustomizations,
	"clearRowCustomizations": pt.clearRowCustomizations,
	"getColumnScalability": pt.getColumnScalability,
	"setColumnScalability": pt.setColumnScalability,
	"getRowScalability": pt.getRowScalability,
	"setRowScalability": pt.setRowScalability,

	"setBorders": pt.setBorders,
	"disableHorizontalGridLine": pt.disableHorizontalGridLine,
	"disableVerticalGridLine": pt.disableVerticalGridLine,

	"getColumnStyle": pt.getColumnStyle,
	"setColumnStyle": pt.setColumnStyle,

	"enableColumnClass": pt.enableColumnClass,
	"hasColumnClass": pt.hasColumnClass,
	"enableRowClass": pt.enableRowClass,
	"setRowStyle": pt.setRowStyle,

	"enableShading": pt.enableShading,
	"setTransposedShading": pt.setTransposedShading,

	"getRelativePosition": pt.getRelativePosition,
	"getContentWidth": pt.getContentWidth,
	"getContentHeight": pt.getContentHeight,
	"getCellsByRowIndex": pt.getCellsByRowIndex,

	"enableRowHighlighting": pt.enableRowHighlighting,
	"getRowHighlight": pt.getRowHighlight,
	"setRowHighlight": pt.setRowHighlight,

	"getSelectedRows": pt.getSelectedRows,
	"getSelectedRowCount": pt.getSelectedRowCount,
	"isSelectedRow": pt.isSelectedRow,
	"setSelectedRow": pt.setSelectedRow,
	"selectSingleRow": pt.selectSingleRow,
	"selectRowRange": pt.selectRowRange,
	"clearSelectedRows": pt.clearSelectedRows,
	"getFirstSelectedRow": pt.getFirstSelectedRow,
	"getLastSelectedRow": pt.getLastSelectedRow,
	"getRowAnchor": pt.getRowAnchor,
	"setRowAnchor": pt.setRowAnchor,

	"getColumnIndex": pt.getColumnIndex,
	"getCellIndex": pt.getCellIndex,
	"enableRowVirtualization": pt.enableRowVirtualization,

	// Virtualization
	"activateRows": pt.activateRows,
	"getIndex": pt.getIndex,
	"getRowOffset": pt.getRowOffset,

	"stretchCell": pt.stretchCell,
	"unstretchCell": pt.unstretchCell,
	"getStretchedCells": pt.getStretchedCells,
	"updateStretchedCells": pt.updateStretchedCells,
	"getColumnHost": pt.getColumnHost,
	"setHidingMethod": pt.setHidingMethod,
	"getHidingMethod": pt.getHidingMethod,
	"setColumnVisibility": pt.setColumnVisibility,

	"reserveRightSpace": pt.reserveRightSpace,
	"getReservedSpace": pt.getReservedSpace,
	"getComputedStyle": pt.getComputedStyle,
	"isColumnActive": pt.isColumnActive
};
// Export methods for Closure's advanced compilation
for(var methodName in methodMap) {
	goog.exportProperty(pt, methodName, methodMap[methodName]);
}
})();
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="AdFin.html">AdFin</a></li><li><a href="DateTime.html">DateTime</a></li><li><a href="Info.html">Info</a></li><li><a href="Logic.html">Logic</a></li><li><a href="Math.html">Math</a></li><li><a href="Realtime.html">Realtime</a></li><li><a href="Statistic.html">Statistic</a></li><li><a href="Text.html">Text</a></li><li><a href="tr.ElementFrameWork.html">ElementFrameWork</a></li><li><a href="tr.PipDefinition.html">PipDefinition</a></li></ul><h3>Classes</h3><ul><li><a href="tr.ADCSubscription.html">ADCSubscription</a></li><li><a href="tr.AdFinSubscription.html">AdFinSubscription</a></li><li><a href="tr.cgrid.editor.TextBox.html">TextBox</a></li><li><a href="tr.cgrid.filter.TextBox.html">TextBox</a></li><li><a href="tr.cgrid.formatter.AsyncFormatter.html">AsyncFormatter</a></li><li><a href="tr.cgrid.formatter.CheckBox.html">CheckBox</a></li><li><a href="tr.cgrid.formatter.UpDownColor.html">UpDownColor</a></li><li><a href="tr.ColumnStats.html">ColumnStats</a></li><li><a href="tr.CompositeGrid.html">CompositeGrid</a></li><li><a href="tr.DataCache.html">DataCache</a></li><li><a href="tr.DataTable.html">DataTable</a></li><li><a href="tr.DataView.html">DataView</a></li><li><a href="tr.DropDown.html">DropDown</a></li><li><a href="tr.ElementControl.html">ElementControl</a></li><li><a href="tr.ElementWrapper.html">ElementWrapper</a></li><li><a href="tr.Event.html">Event</a></li><li><a href="tr.EventDispatcher.html">EventDispatcher</a></li><li><a href="tr.EventDispatcher.extendClass-tempCtor.html">tempCtor</a></li><li><a href="tr.EventManager.html">EventManager</a></li><li><a href="tr.FieldFormatter.html">FieldFormatter</a></li><li><a href="tr.fn.Engine.html">Engine</a></li><li><a href="tr.fn.Formula.html">Formula</a></li><li><a href="tr.fn.VariableToken.html">VariableToken</a></li><li><a href="tr.Grid.html">Grid</a></li><li><a href="tr.grid.BidOfferSpan.html">BidOfferSpan</a></li><li><a href="tr.grid.Blinker.html">Blinker</a></li><li><a href="tr.grid.Cell.html">Cell</a></li><li><a href="tr.grid.CellBlinkingPlugin.html">CellBlinkingPlugin</a></li><li><a href="tr.grid.CellEditingPlugin.html">CellEditingPlugin</a></li><li><a href="tr.grid.CellFloatingPanel.html">CellFloatingPanel</a></li><li><a href="tr.grid.CellPainter.html">CellPainter</a></li><li><a href="tr.grid.CellSpan.html">CellSpan</a></li><li><a href="tr.grid.CellSpans.html">CellSpans</a></li><li><a href="tr.grid.CellWriter.html">CellWriter</a></li><li><a href="tr.grid.CheckboxColumnPlugin.html">CheckboxColumnPlugin</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html">CollapsibleHeaderPlugin</a></li><li><a href="tr.grid.ColumnFilterPlugin.html">ColumnFilterPlugin</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html">ColumnGroupingPlugin</a></li><li><a href="tr.grid.ColumnSelectionPlugin.html">ColumnSelectionPlugin</a></li><li><a href="tr.grid.ColumnStackingPlugin.html">ColumnStackingPlugin</a></li><li><a href="tr.grid.ColumnWidthAdjustingPlugin.html">ColumnWidthAdjustingPlugin</a></li><li><a href="tr.grid.Conflator.html">Conflator</a></li><li><a href="tr.grid.DataSourceTreePlugin.html">DataSourceTreePlugin</a></li><li><a href="tr.grid.DirectContentBindingPlugin.html">DirectContentBindingPlugin</a></li><li><a href="tr.grid.DragAndDropTitlePlugin.html">DragAndDropTitlePlugin</a></li><li><a href="tr.grid.DraggableContentPlugin.html">DraggableContentPlugin</a></li><li><a href="tr.grid.FindBar.html">FindBar</a></li><li><a href="tr.grid.FindBarPlugin.html">FindBarPlugin</a></li><li><a href="tr.grid.GroupStatisticsPlugin.html">GroupStatisticsPlugin</a></li><li><a href="tr.grid.HeatMapRenderer.html">HeatMapRenderer</a></li><li><a href="tr.grid.HScrollbar.html">HScrollbar</a></li><li><a href="tr.grid.IndexMarker.html">IndexMarker</a></li><li><a href="tr.grid.MovableHeaderPlugin.html">MovableHeaderPlugin</a></li><li><a href="tr.grid.NumberFormatter.html">NumberFormatter</a></li><li><a href="tr.grid.PercentBar.html">PercentBar</a></li><li><a href="tr.grid.PercentBarRenderer.html">PercentBarRenderer</a></li><li><a href="tr.grid.Plugin.html">Plugin</a></li><li><a href="tr.grid.RangeBar.html">RangeBar</a></li><li><a href="tr.grid.ResizableTitlePlugin.html">ResizableTitlePlugin</a></li><li><a href="tr.grid.Reverter.html">Reverter</a></li><li><a href="tr.grid.RowHeightAdjustingPlugin.html">RowHeightAdjustingPlugin</a></li><li><a href="tr.grid.RowSelectionPlugin.html">RowSelectionPlugin</a></li><li><a href="tr.grid.Scrollbar.html">Scrollbar</a></li><li><a href="tr.grid.SectionSettings.html">SectionSettings</a></li><li><a href="tr.grid.SmartTooltipsPlugin.html">SmartTooltipsPlugin</a></li><li><a href="tr.grid.SortableTitlePlugin.html">SortableTitlePlugin</a></li><li><a href="tr.grid.TreeIndentingPlugin.html">TreeIndentingPlugin</a></li><li><a href="tr.grid.Virtualizer.html">Virtualizer</a></li><li><a href="tr.grid.VScrollbar.html">VScrollbar</a></li><li><a href="tr.grid.ZoomPlugin.html">ZoomPlugin</a></li><li><a href="tr.HttpRequest.html">HttpRequest</a></li><li><a href="tr.IntervalSubscription.html">IntervalSubscription</a></li><li><a href="tr.LayoutGrid.html">LayoutGrid</a></li><li><a href="tr.ListMenu.html">ListMenu</a></li><li><a href="tr.MenuItem.html">MenuItem</a></li><li><a href="tr.MockArchive.html">MockArchive</a></li><li><a href="tr.MockJET.html">MockJET</a></li><li><a href="tr.MockQuotes.html">MockQuotes</a></li><li><a href="tr.MockQuotes2.html">MockQuotes2</a></li><li><a href="tr.MockSubscription.html">MockSubscription</a></li><li><a href="tr.MockSubscriptions.html">MockSubscriptions</a></li><li><a href="tr.Popup.html">Popup</a></li><li><a href="tr.PopupMenu.html">PopupMenu</a></li><li><a href="tr.PrintTrait.html">PrintTrait</a></li><li><a href="tr.RequestQueue.html">RequestQueue</a></li><li><a href="tr.Segment.html">Segment</a></li><li><a href="tr.SegmentCollection.html">SegmentCollection</a></li><li><a href="tr.TSISubscription.html">TSISubscription</a></li></ul><h3>Interfaces</h3><ul><li><a href="tr.cgrid.ICompositeExtension.html">ICompositeExtension</a></li><li><a href="tr.grid.IPlugin.html">IPlugin</a></li><li><a href="tr.IElementControl.html">IElementControl</a></li><li><a href="tr.ILayoutGrid.html">ILayoutGrid</a></li></ul><h3>Events</h3><ul><li><a href="tr.CompositeGrid.html#event:cellClicked">cellClicked</a></li><li><a href="tr.CompositeGrid.html#event:cellDblClicked">cellDblClicked</a></li><li><a href="tr.CompositeGrid.html#event:cellMouseDown">cellMouseDown</a></li><li><a href="tr.CompositeGrid.html#event:cellRightClicked">cellRightClicked</a></li><li><a href="tr.CompositeGrid.html#event:columnSorted">columnSorted</a></li><li><a href="tr.CompositeGrid.html#event:editorAttached">editorAttached</a></li><li><a href="tr.CompositeGrid.html#event:editorDetached">editorDetached</a></li><li><a href="tr.CompositeGrid.html#event:filterAdded">filterAdded</a></li><li><a href="tr.CompositeGrid.html#event:filterCleared">filterCleared</a></li><li><a href="tr.CompositeGrid.html#event:filterModified">filterModified</a></li><li><a href="tr.CompositeGrid.html#event:filterRemoved">filterRemoved</a></li><li><a href="tr.CompositeGrid.html#event:mouseLeaveCell">mouseLeaveCell</a></li><li><a href="tr.CompositeGrid.html#event:mouseOverCell">mouseOverCell</a></li><li><a href="tr.CompositeGrid.html#event:pageChanged">pageChanged</a></li><li><a href="tr.CompositeGrid.html#event:selectionChanged">selectionChanged</a></li><li><a href="tr.DataCache.html#event:dataChanged">dataChanged</a></li><li><a href="tr.DataCache.html#event:dataComposed">dataComposed</a></li><li><a href="tr.DataTable.html#event:dataChanged">dataChanged</a></li><li><a href="tr.DataTable.html#event:dataComposed">dataComposed</a></li><li><a href="tr.DataView.html#event:beforeFiltering">beforeFiltering</a></li><li><a href="tr.DataView.html#event:beforeGroupAdded">beforeGroupAdded</a></li><li><a href="tr.DataView.html#event:dataChanged">dataChanged</a></li><li><a href="tr.DataView.html#event:groupAdded">groupAdded</a></li><li><a href="tr.DataView.html#event:groupCriteriaChanged">groupCriteriaChanged</a></li><li><a href="tr.DataView.html#event:pageCountChanged">pageCountChanged</a></li><li><a href="tr.DataView.html#event:pageIndexChanged">pageIndexChanged</a></li><li><a href="tr.DataView.html#event:preDisposed">preDisposed</a></li><li><a href="tr.Formula.html#event:dataCacheChanged">dataCacheChanged</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:cancelled">cancelled</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:change">change</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:closed">closed</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:editorOpened">editorOpened</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:preEditorOpening">preEditorOpening</a></li><li><a href="tr.grid.CheckboxColumnPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:contentBindinig">contentBindinig</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:footerBinding">footerBinding</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:headerBinding">headerBinding</a></li><li><a href="tr.grid.ColumnFilterPlugin.html#event:click">click</a></li><li><a href="tr.grid.ColumnFilterPlugin.html#event:iconCreated">iconCreated</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html#event:columnCollapsed">columnCollapsed</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html#event:groupChanged">groupChanged</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html#event:render">render</a></li><li><a href="tr.grid.ColumnStackingPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.ColumnStackingPlugin.html#event:iconCreated">iconCreated</a></li><li><a href="tr.grid.DragAndDropTitlePlugin.html#event:columnMoved">columnMoved</a></li><li><a href="tr.grid.DragAndDropTitlePlugin.html#event:dragged">dragged</a></li><li><a href="tr.grid.DraggableContentPlugin.html#event:drag">drag</a></li><li><a href="tr.grid.DraggableContentPlugin.html#event:dragEnd">dragEnd</a></li><li><a href="tr.grid.DraggableContentPlugin.html#event:dragStart">dragStart</a></li><li><a href="tr.grid.FindBarPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.MovableHeaderPlugin.html#event:dragged">dragged</a></li><li><a href="tr.grid.MovableHeaderPlugin.html#event:groupMoved">groupMoved</a></li><li><a href="tr.grid.MovableHeaderPlugin.html#event:sectionMoved">sectionMoved</a></li><li><a href="tr.grid.RowSelectionPlugin.html#event:selectionChanged">selectionChanged</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:columnSorted">columnSorted</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:preClicked">preClicked</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:preDataSorting">preDataSorting</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:contentBindinig">contentBindinig</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:footerBinding">footerBinding</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:headerBinding">headerBinding</a></li><li><a href="tr.Grid.html#event:columnAdded">columnAdded</a></li><li><a href="tr.Grid.html#event:columnAlignmentChanged">columnAlignmentChanged</a></li><li><a href="tr.Grid.html#event:columnRemoved">columnRemoved</a></li><li><a href="tr.Grid.html#event:columnVisibilityChanged">columnVisibilityChanged</a></li><li><a href="tr.Grid.html#event:dataSourceChanged">dataSourceChanged</a></li><li><a href="tr.Grid.html#event:postSectionDataBinding">postSectionDataBinding</a></li><li><a href="tr.Grid.html#event:rowExpansionBinding">rowExpansionBinding</a></li><li><a href="tr.Grid.html#event:rowHighlighted">rowHighlighted</a></li><li><a href="tr.Grid.html#event:sectionAdded">sectionAdded</a></li><li><a href="tr.Grid.html#event:widthChanged">widthChanged</a></li><li><a href="tr.HttpRequest.html#event:abort">abort</a></li><li><a href="tr.HttpRequest.html#event:error">error</a></li><li><a href="tr.HttpRequest.html#event:load">load</a></li><li><a href="tr.HttpRequest.html#event:loadend">loadend</a></li><li><a href="tr.HttpRequest.html#event:loadstart">loadstart</a></li><li><a href="tr.HttpRequest.html#event:timeout">timeout</a></li><li><a href="tr.IElementControl.html#event:blur">blur</a></li><li><a href="tr.IElementControl.html#event:change">change</a></li><li><a href="tr.IElementControl.html#event:click">click</a></li><li><a href="tr.IElementControl.html#event:contextmenu">contextmenu</a></li><li><a href="tr.IElementControl.html#event:dblclick">dblclick</a></li><li><a href="tr.IElementControl.html#event:drag">drag</a></li><li><a href="tr.IElementControl.html#event:dragend">dragend</a></li><li><a href="tr.IElementControl.html#event:dragenter">dragenter</a></li><li><a href="tr.IElementControl.html#event:dragleave">dragleave</a></li><li><a href="tr.IElementControl.html#event:dragover">dragover</a></li><li><a href="tr.IElementControl.html#event:dragstart">dragstart</a></li><li><a href="tr.IElementControl.html#event:drop">drop</a></li><li><a href="tr.IElementControl.html#event:focus">focus</a></li><li><a href="tr.IElementControl.html#event:formchange">formchange</a></li><li><a href="tr.IElementControl.html#event:forminput">forminput</a></li><li><a href="tr.IElementControl.html#event:input">input</a></li><li><a href="tr.IElementControl.html#event:invalid">invalid</a></li><li><a href="tr.IElementControl.html#event:keydown">keydown</a></li><li><a href="tr.IElementControl.html#event:keypress">keypress</a></li><li><a href="tr.IElementControl.html#event:keyup">keyup</a></li><li><a href="tr.IElementControl.html#event:mousedown">mousedown</a></li><li><a href="tr.IElementControl.html#event:mousemove">mousemove</a></li><li><a href="tr.IElementControl.html#event:mouseout">mouseout</a></li><li><a href="tr.IElementControl.html#event:mouseover">mouseover</a></li><li><a href="tr.IElementControl.html#event:mouseup">mouseup</a></li><li><a href="tr.IElementControl.html#event:mousewheel">mousewheel</a></li><li><a href="tr.IElementControl.html#event:reset">reset</a></li><li><a href="tr.IElementControl.html#event:scroll">scroll</a></li><li><a href="tr.IElementControl.html#event:select">select</a></li><li><a href="tr.IElementControl.html#event:submit">submit</a></li><li><a href="tr.ILayoutGrid.html#event:blur">blur</a></li><li><a href="tr.ILayoutGrid.html#event:change">change</a></li><li><a href="tr.ILayoutGrid.html#event:click">click</a></li><li><a href="tr.ILayoutGrid.html#event:contextmenu">contextmenu</a></li><li><a href="tr.ILayoutGrid.html#event:dblclick">dblclick</a></li><li><a href="tr.ILayoutGrid.html#event:drag">drag</a></li><li><a href="tr.ILayoutGrid.html#event:dragend">dragend</a></li><li><a href="tr.ILayoutGrid.html#event:dragenter">dragenter</a></li><li><a href="tr.ILayoutGrid.html#event:dragleave">dragleave</a></li><li><a href="tr.ILayoutGrid.html#event:dragover">dragover</a></li><li><a href="tr.ILayoutGrid.html#event:dragstart">dragstart</a></li><li><a href="tr.ILayoutGrid.html#event:drop">drop</a></li><li><a href="tr.ILayoutGrid.html#event:focus">focus</a></li><li><a href="tr.ILayoutGrid.html#event:formchange">formchange</a></li><li><a href="tr.ILayoutGrid.html#event:forminput">forminput</a></li><li><a href="tr.ILayoutGrid.html#event:input">input</a></li><li><a href="tr.ILayoutGrid.html#event:invalid">invalid</a></li><li><a href="tr.ILayoutGrid.html#event:keydown">keydown</a></li><li><a href="tr.ILayoutGrid.html#event:keypress">keypress</a></li><li><a href="tr.ILayoutGrid.html#event:keyup">keyup</a></li><li><a href="tr.ILayoutGrid.html#event:mousedown">mousedown</a></li><li><a href="tr.ILayoutGrid.html#event:mousemove">mousemove</a></li><li><a href="tr.ILayoutGrid.html#event:mouseout">mouseout</a></li><li><a href="tr.ILayoutGrid.html#event:mouseover">mouseover</a></li><li><a href="tr.ILayoutGrid.html#event:mouseup">mouseup</a></li><li><a href="tr.ILayoutGrid.html#event:mousewheel">mousewheel</a></li><li><a href="tr.ILayoutGrid.html#event:reset">reset</a></li><li><a href="tr.ILayoutGrid.html#event:scroll">scroll</a></li><li><a href="tr.ILayoutGrid.html#event:select">select</a></li><li><a href="tr.ILayoutGrid.html#event:submit">submit</a></li><li><a href="tr.LayoutGrid.html#event:rowCountChanged">rowCountChanged</a></li><li><a href="tr.LayoutGrid.html#event:rowHeightChanged">rowHeightChanged</a></li><li><a href="tr.LayoutGrid.html#event:rowHighlighted">rowHighlighted</a></li><li><a href="tr.Popup.html#event:hidden">hidden</a></li><li><a href="tr.Popup.html#event:shown">shown</a></li><li><a href="tr.PopupMenu.html#event:hidden">hidden</a></li><li><a href="tr.PopupMenu.html#event:shown">shown</a></li><li><a href="tr.PrintTrait.html#event:afterprint">afterprint</a></li><li><a href="tr.PrintTrait.html#event:beforeprint">beforeprint</a></li><li><a href="tr.PrintTrait.html#event:pageCounting">pageCounting</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cellRef%255Bundefined%255D">cellRef[undefined]</a></li><li><a href="global.html#e%255Bundefined%255D">e[undefined]</a></li><li><a href="global.html#.textContent">.textContent</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#input%255Bundefined%255D">input[undefined]</a></li><li><a href="global.html#q%255Bundefined%255D">q[undefined]</a></li><li><a href="global.html#sortingDef%255B1%255D">sortingDef[1]</a></li></ul>
</nav>


<script src="scripts/linenumber.js"> </script>
<script src="scripts/prettify.js"> </script>
<script> prettyPrint(); </script>
</body>
</html>
