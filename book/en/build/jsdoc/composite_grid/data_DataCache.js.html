<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: data/DataCache.js</title>

    <script src="scripts/prettify.js"> </script>
    <script src="scripts/lang-css.js"> </script>
    <!--[if lt IE 9]&gt;
      &lt;script src="//html5shiv.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
    &lt;![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/default.css">
    <link type="text/css" rel="stylesheet" href="styles/elf-template.css">
</head>

<body>

<div id="main-template" class="elf-template">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>goog.provide("tr.DataCache");
goog.require("tr.EventDispatcher");

/**
 * Trigger when data within the table has been changed
 * @event tr.DataCache#dataChanged
 * @property {boolean} globalChange Indicates a big change. User should expect all data has been change
 * @property {string} type Type of changes. Possible values are "inserted", "removed", "updated", and undefined
 * @property {string} rid Row Id
 * @property {Object.&lt;string, *&gt;} rowData Column values of the changed row in JSON object format
 */

/**
 * Trigger before tr.DataCache#dataChanged. Perform any data update during the event will NOT cause more dataChanged events
 * @event tr.DataCache#dataComposed
 */

/**
 * @constructor
 * @extends {tr.EventDispatcher}
 */
tr.DataCache = function () {
	var _t = this;

	_t._rows = {};
	_t._subs = {};
	_t._staticFields = {};
	_t._onInsert = _t._onInsert.bind(_t);
	_t._onUpdate = _t._onUpdate.bind(_t);
	_t._onDelete = _t._onDelete.bind(_t);
	_t._onBatchRequestADCData = _t._onBatchRequestADCData.bind(_t);
	_t._onADCUpdate = _t._onADCUpdate.bind(_t);
	_t._onADCError = _t._onADCError.bind(_t);
	_t._onQ2DataChanged = _t._onQ2DataChanged.bind(_t);
	_t._onQ2SubAdded = _t._onQ2SubAdded.bind(_t);
	_t._onQ2SubRemoved = _t._onQ2SubRemoved.bind(_t);

	_t._addEvent("dataComposed");
	_t._addEvent("dataChanged");
};
goog.inherits(tr.DataCache, tr.EventDispatcher);

//#region Public
/**
 * @public
 */
tr.DataCache.prototype.dispose = function () {
	this.unlistenAll();
	this.clearAllData(true);
	this._quotes2 = null;
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility. This API supports only Quotes2's "Subscriptions" object.
 * @public
 * @param {Object} subs Subscriptions object from JET.Quotes2
 */
tr.DataCache.prototype.setSubscriptions = function (subs) {
	if (this._quotes2) {
		this._quotes2["removeEventListener"]("dataChanged", this._onQ2DataChanged);
		this._quotes2["removeEventListener"]("subscriptionAdded", this._onQ2SubAdded);
		this._quotes2["removeEventListener"]("subscriptionRemoved", this._onQ2SubRemoved);
	}

	this._quotes2 = subs;

	if (this._quotes2) {
		this._quotes2["addEventListener"]("dataChanged", this._onQ2DataChanged);
		this._quotes2["addEventListener"]("subscriptionAdded", this._onQ2SubAdded);
		this._quotes2["addEventListener"]("subscriptionRemoved", this._onQ2SubRemoved);
	}
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.This API supports only Quotes2's
 * "Subscriptions" object.
 * @public
 * @return {Object} subs Subscriptions object from JET.Quotes2
 */
tr.DataCache.prototype.getSubscriptions = function () {
	return this._quotes2;
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {Object} sub Subscription object from JET.Quote
 * @param {string=} opt_primaryRic Main RIC for creating Id or recalling subscription. This is because subscription
 * object does not provide a way to access its data
 * @param {Object=} opt_values Initial values
 */
tr.DataCache.prototype.addSubscription = function (sub, opt_primaryRic, opt_values) {
	if (this.getSubscription(sub["id"])) {
		return;
	}

	var internalSub = {"s": sub, "rics": {}};

	this._subs[sub["id"]] = internalSub;

	if (!this._quotes2) {
		sub["onNewRow"](this._onInsert);
		sub["onUpdate"](this._onUpdate);
		sub["onRemoveRow"](this._onDelete);
	}

	if (opt_primaryRic) {
		internalSub["primary"] = opt_primaryRic;

		if (!opt_values) {
			opt_values = {};
		}

		this._onInsert(sub, opt_primaryRic, opt_values);
	}
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {Object} sub Subscription object from JET.Quote
 */
tr.DataCache.prototype.removeSubscription = function (sub) { // All RICs associated to the subscription are removed
	var subId = sub["id"];

	if (!sub || !this._subs[subId]) {
		return;
	}

	if (!this._quotes2) {
		sub["stop"]();
	}

	var rics = this._subs[subId]["rics"];

	for (var ric in rics) {
		this.setRowData(subId + ric, null); // No subscription attached
	}

	delete this._subs[subId];
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 */
tr.DataCache.prototype.startAllSubscriptions = function () {
	if (this._quotes2) {
		this._quotes2["start"]();
	} else {
		for (var key in this._subs) {
			this._subs[key]["s"]["start"]();
		}
	}
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 */
tr.DataCache.prototype.stopAllSubscriptions = function () {
	if (this._quotes2) {
		this._quotes2["stop"]();
	} else {
		for (var key in this._subs) {
			this._subs[key]["s"]["stop"]();
		}
	}
};

/**
 * @public
 * @param {string} sub_id
 * @return {Object} Subscription object from JET.Quote
 */
tr.DataCache.prototype.getSubscription = function (sub_id) {
	return (this._subs[sub_id]) ? this._subs[sub_id]["s"] : null;
};

/**
 * @public
 * @param {string} sub_id
 * @return {string} ric that has been input when calling addSubscription
 */
tr.DataCache.prototype.getPrimaryRic = function (sub_id) {
	var subDef = this._subs[sub_id];
	if (subDef) {
		return subDef["primary"];
	}
	return "";
};

/**
 * @public
 * @param {boolean=} opt_suppressEvent
 * @fires tr.DataCache#dataChanged
 */
tr.DataCache.prototype.clearAllData = function (opt_suppressEvent) { // All subscriptions are also removed
	if (this._quotes2) {
		this._quotes2["removeAllSubscriptions"]();
	} else {
		this.stopAllSubscriptions();
	}

	this._subs = {};
	this._rows = {};

	if (this._adcTimerId &gt;= 0) {
		clearTimeout(this._adcTimerId);
		this._adcTimerId = -1;
	}

	this._adcRicMap = null;

	if (!opt_suppressEvent) {
		this._dispatchDataChange({"globalChange": true});
	}
};

/**
 * @public
 * @param {Array.&lt;string&gt;|string} colId
 * @param {boolean=} opt_suppressEvent
 * @fires tr.DataCache#dataChanged
 */
tr.DataCache.prototype.clearColumnData = function (colId, opt_suppressEvent) {
	var cids = (typeof colId === "string") ? [/** @type {string} */(colId)] : /** @type {Array.&lt;string&gt;} */(colId);

	for (var i = cids.length; --i &gt;= 0;) {
		var cid = cids[i];

		if (cid) {
			for (var rid in this._rows) {
				delete this._rows[rid][cid];
			}
		}
	}

	if (!opt_suppressEvent) {
		this._dispatchDataChange({"globalChange": true});
	}
};

/**
 * @public
 * @param {string} rid
 * @param {string} cid
 * @return {*}
 */
tr.DataCache.prototype.getData = function (rid, cid) {
	var row = this.getRowData(rid);

	return (row) ? row[cid] : undefined;
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @return {Object.&lt;string, Array.&lt;string&gt;&gt;} Map of Array of subscription object
 */
tr.DataCache.prototype.getAllRics = function () { // Slow
	var ricMap = {};

	for (var subId in this._subs) {
		var rics = this._subs[subId]["rics"];

		for (var ric in rics) {
			if (!ricMap[ric]) {
				ricMap[ric] = [];
			}

			ricMap[ric].push(subId);
		}
	}

	return ricMap; // No duplicate ric
};

/**
 * @public
 * @return {Array.&lt;string&gt;}
 */
tr.DataCache.prototype.getAllRowIds = function () {
	var rids = [];

	for (var rid in this._rows) {
		rids.push(rid);
	}

	return rids;
};

/**
 * @public
 * @param {string} rid ID of a row to be checked for its presence.
 * @return {boolean} `true` if row was found, `false` if row was not found.
 */
tr.DataCache.prototype.hasRowId = function (rid) {
	return this._rows.hasOwnProperty(rid);
};

/**
 * @public
 * @param {string} cid
 * @return {!Array.&lt;*&gt;}
 */
tr.DataCache.prototype.getColumnData = function (cid) {
	var fieldRows = [];

	for (var rid in this._rows) {
		fieldRows.push(this._rows[rid][cid]);
	}

	return fieldRows;
};

/**
 * @public
 * @param {string} rid
 * @return {Object.&lt;string, *&gt;}
 */
tr.DataCache.prototype.getRowData = function (rid) {
	return this._rows[rid] || null;
};

/**
 * @public
 * @param {Array.&lt;string&gt;} rids
 * @param {number=} opt_from
 * @param {number=} opt_to EXCLUSIVE
 * @return {!Array.&lt;Object&gt;}
 */
tr.DataCache.prototype.getMultipleRowData = function (rids, opt_from, opt_to) {
	var len = rids.length;

	if (opt_to == null) {
		opt_to = len;
	}

	if (opt_to &gt; len) {
		opt_to = len;
	}

	if (!(opt_from &gt; 0)) {
		opt_from = 0;
	}

	var out_ary = new Array(len);
	var rowMap = this._rows;

	for (var i = opt_from; i &lt; opt_to; ++i) {
		out_ary[i] = rowMap[rids[i]] || null;
	}

	return out_ary;
};

/** Return a new copy of row data
 * @public
 * @return {!Array.&lt;Object.&lt;string, *&gt;&gt;}
 */
tr.DataCache.prototype.getAllRowData = function () {
	var rows = [];
	var rowMap = this._rows;

	for (var rid in rowMap) {
		rows.push(rowMap[rid]);
	}

	return rows;
};

/**
 * @public
 * @param {string} rid Row Id
 * @param {string} cid Column Id
 * @param {*} value
 * @return {boolean} Return true if there is any change, and false otherwise
 * @fires tr.DataCache#dataChanged
 */
tr.DataCache.prototype.setData = function (rid, cid, value) { // Data changed event is always dispatched
	var values = {};

	values[cid] = value;

	return this.setRowData(rid, values);
};

/**
 * @public
 * @param {string} rid
 * @return {boolean}
 */
tr.DataCache.prototype.hasDataCloudData = function (rid) {
	if (!this._adcFields) {
		return false;
	}

	var row = this.getRowData(rid);

	if (!row) {
		return false;
	}

	for (var i = this._adcFields.length; --i &gt;= 0;) {
		var data = row[this._adcFields[i]];

		if (data != null) {
			return true;
		}
	}

	return false;
};

/**
 * @public
 * @param {string} rid Row Id
 * @param {Object.&lt;string, *&gt;=} values Object where the key is column Id and value is the data to be set
 * @param {Object=} opt_eventArg Additional arguments to be attached to the event fired
 * @return {boolean} Return true if there is any change, and false otherwise
 * @fires tr.DataCache#dataChanged
 */
tr.DataCache.prototype.setRowData = function (rid, values, opt_eventArg) { // Data changed event is always dispatched
	var row = this.getRowData(rid);
	var dirty = false;
	var changes = null;

	if (values) {
		if (!row) {
			row = values; // WARNING: Dangerous use of external reference. User may modify data without using DataCache's API

			this._rows[rid] = row;
			dirty = true;

		} else {
			for (var cid in values) {
				row[cid] = values[cid];
				dirty = true;
			}

			changes = values;
		}
	} else {
		if (row) {
			delete this._rows[rid];
			dirty = true;
		}
	}

	if (dirty &amp;&amp; !this._composing) {
		var e = opt_eventArg || {};

		e["rid"] = rid;

		if (changes) {
			e["changes"] = changes;
		}

		e["rowData"] = row;

		this._dispatchDataChange(e);
	}

	return dirty;
};

/**
 * @public
 * @param {string} rid
 * @return {Object}
 */
tr.DataCache.prototype.cloneRowData = function (rid) {
	var fields = this._rows[rid];

	if (!fields) {
		return null;
	}

	var values = {};

	for (var key in fields) {
		if (key.indexOf("FREE_TEXT") === 0) { // TODO: This is not generic and will cause unintentional error. Also, it posts some performance penalty
			continue; // Skip free text column
		}

		values[key] = fields[key];
	}

	return values;
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {Array.&lt;string&gt;} fields
 * @suppress {checkTypes}
 */
tr.DataCache.prototype.addStaticFields = function (fields) {
	if (!Array.isArray(fields)) {
		return;
	}

	for (var i in fields) {
		if (!this._staticFields[fields[i]]) {
			this._staticFields[fields[i]] = 1;
		} else {
			this._staticFields[fields[i]]++;
		}
	}
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {Array.&lt;string&gt;} fields
 * @suppress {checkTypes}
 */
tr.DataCache.prototype.removeStaticFields = function (fields) {
	if (!Array.isArray(fields)) {
		return;
	}

	for (var i in fields) {
		if (this._staticFields[fields[i]]) {
			this._staticFields[fields[i]]--;

			if (this._staticFields[fields[i]] === 0) {
				delete this._staticFields[fields[i]];
			}
		}
	}
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 */
tr.DataCache.prototype.resetStaticFields = function () {
	this._staticFields = {};
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @return {Object.&lt;string, number&gt;}
 */
tr.DataCache.prototype.getStaticFields = function () {
	return this._staticFields;
};

/**
 * Construct a JSON object that is compatible with console.table()
 * @public
 * @param {Object=} options
 * @return {!Array.&lt;Object&gt;} Return a JSON object that is compatible with console.table()
 * @example
 * var options = {
 *   "colNames": Array.&lt;string&gt;,
 *   "rowCount": number,
 *   "startIndex": number,
 *   "getter": function(Object, string):*,
 *   "withRowIds": boolean
 * };
 */
tr.DataCache.prototype.dump = function (options) {
	return tr.DataCache.constructTable(this.getAllRowData(), options, Object.keys(this._rows));
};

/**
 * Print current data and structure to console panel
 * @public
 * @param {Object=} opt_options
 * @example
 * var options = {
 *   "colNames": Array.&lt;string&gt;,
 *   "rowCount": number,
 *   "startIndex": number,
 *   "getter": function(Object, string):*,
 *   "withRowIds": boolean
 * };
 */
tr.DataCache.prototype.log = function (opt_options) {
	console.table(this.dump(opt_options));
};

//#region ADC
/** Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {string} userId
 * @param {string} productId
 * @param {string} url
 * @param {string=} opt_lang
 */
tr.DataCache.prototype.setDataCloudSettings = function (userId, productId, url, opt_lang) {
	if (userId != null) {
		this._userId = userId;
	}

	if (productId != null) {
		this._productId = productId;
	}

	if (url != null) {
		this._adcUrl = url;
	}

	if (opt_lang) {
		this._lang = opt_lang;
	}
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @return {Array.&lt;string&gt;}
 */
tr.DataCache.prototype.getDataCloudFields = function () {
	return this._adcFields; // Return private members
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {Array.&lt;string&gt;|string} fields
 * @return {boolean} Return true if success, and false otherwise
 */
tr.DataCache.prototype.addDataCloudFields = function (fields) {
	if (!this._adcFields) {
		this._adcFields = [];
		this._adcRefMap = {};
	}

	var newFields = [];

	if (fields instanceof Array) {
		for (var i = fields.length; --i &gt;= 0;) {
			this._addDataCloudField(fields[i], newFields);
		}
	} else {
		this._addDataCloudField(/** @type {string} */(fields), newFields);
	}

	if (newFields.length &lt;= 0) {
		return false;
	}

	var ricMap = this.getAllRics();

	this._batchRequestDataCloud(ricMap, newFields);

	return true;
};

/**
 * Deprecated. Built-in Data Service is deprecated due to the lack of flexibility.
 * @public
 * @param {string} field
 * @return {boolean} Return true if success, and false otherwise
 */
tr.DataCache.prototype.removeDataCloudField = function (field) {
	if (!this._adcFields) {
		return false;
	}

	if (!this._adcRefMap[field]) {
		return false;
	}

	--this._adcRefMap[field];

	if (!this._adcRefMap[field]) {
		var foundAt = this._adcFields.indexOf(field);

		this._adcFields.splice(foundAt, 1);
		this.clearColumnData(field);
	}

	return true;
};
//#endregion ADC
//#endregion Public

/**
 * @protected
 * @ignore
 * @param {!Object} e
 * @fires tr.DataTable#dataComposed
 * @fires tr.DataTable#dataChanged
 */
tr.DataCache.prototype._dispatchDataChange = function (e) {
	if (this._composing) {
		return;
	}

	this._composing = true;
	this._dispatch("dataComposed", e);
	this._composing = false;
	this._dispatch("dataChanged", e);
};

/**
 * @private
 * @param {string} propertyName
 * @param {Object} rowData
 * @param {string} colName
 * @return {*}
 */
tr.DataCache._defaultPropertyGetter = function (propertyName, rowData, colName) {
	var d = rowData[colName];

	return d ? d[propertyName] : undefined;
};

/**
 * @private
 * @param {Object} rowData
 * @param {string} colName
 * @return {*}
 */
tr.DataCache._defaultGetter = function (rowData, colName) {
	return rowData[colName];
};


/** Construct a JSON object that is compatible with console.table()
 * @public
 * @ignore
 * @param {!Array.&lt;Object&gt;} dataset
 * @param {Object=} opt_options { "rowCount": number,  "colNames": Array.&lt;string&gt;,  "getter": function(Object, string):*, startIndex: number, "withRowIds": boolean }
 * @param {Array.&lt;string&gt;=} opt_rowIds Optional row ids corresponding to the given dataset
 * @return {!Array.&lt;Object&gt;} Return a JSON object that is compatible with console.table()
 */
tr.DataCache.constructTable = function (dataset, opt_options, opt_rowIds) {
	var startIndex = 0;
	var rLen = dataset.length;
	var rowLim = rLen;
	var colMap = null;
	var rids = opt_rowIds || null;
	var getter = tr.DataCache._defaultGetter;
	var transformation = false;

	if (opt_options) {
		if (opt_options["rowCount"]) {
			rowLim = opt_options["rowCount"];
			transformation = true;
		}

		if (opt_options["colNames"]) {
			colMap = {};

			var len = opt_options["colNames"].length;

			for (var i = 0; i &lt; len; ++i) {
				colMap[opt_options["colNames"][i]] = true;
			}

			transformation = true;
		}

		if (opt_options["getter"]) {
			if (typeof opt_options["getter"] == "string") {
				getter = tr.DataCache._defaultPropertyGetter.bind(null, opt_options["getter"]);
			} else { // Function
				getter = opt_options["getter"];
			}

			transformation = true;
		}

		if (opt_options["startIndex"]) {
			startIndex = /** @type{number} */(opt_options["startIndex"]);
			transformation = true;
		}

		if (opt_options["withRowIds"] === false) {
			rids = null;
		}
	}

	if (!transformation &amp;&amp; !rids) {
		return dataset; // The dataset is already compatible with console.table
	}

	var rows = [];

	for (var r = startIndex; r &lt; rLen; ++r) {
		if (rows.length &gt;= rowLim) {
			break;
		}

		var rowData = dataset[r];
		var columns = (rids) ? {"rid": rids[r]} : {};

		if (rowData) { // Header and footer don't have any row data
			var colName;

			if (colMap) {
				for (colName in colMap) {
					if (rowData[colName] !== undefined) {
						columns[colName] = getter(rowData, colName);
					}
				}
			} else {
				for (colName in rowData) {
					columns[colName] = getter(rowData, colName);
				}
			}
		}

		rows.push(columns);
	}

	return rows;
};


//#region Private
/**
 * For Quotes2 only
 * @private
 * @param {string} subId
 * @param {string} ric
 * @param {Object.&lt;string, *&gt;} values
 */
tr.DataCache.prototype._insertRic = function (subId, ric, values) {
	// HACK: Some chain may have 0# symbol in there chain index (e.g. 0#CL:)
	ric = ric.replace("0#", "");

	var rid = subId + ric;

	// We cannot cache event arguments because user may want to collect all the updates
	this._onADCForNewRic(subId, ric);

	if (!this.getRowData(rid)) { // Ensure that we have subscription id and ric from Quotes2
		var tmp = values;

		values = {}; // Clone a new object for duplicated ric

		for (var key in tmp) { // Slow
			values[key] = tmp[key];
		}

		values["SUB_ID"] = subId;
		values["RIC"] = ric;
	}

	this.setRowData(rid, values);
};

/**
 * @private
 * @param {Object} e
 */
tr.DataCache.prototype._onQ2DataChanged = function (e) {
	var subId = e["subId"];
	var ric = e["ric"];
	var values = /** @type{Object.&lt;string, *&gt;} */(e["values"]);

	if (values) {
		this._insertRic(subId, ric, values);
	} else { // Remove ric
		delete this._subs[subId]["rics"][ric];

		this.setRowData(subId + ric, null);
	}
};

/**
 * @private
 * @param {Object} e
 */
tr.DataCache.prototype._onQ2SubAdded = function (e) {
	var subs = e["subs"];
	var duplicateSubIds = e["duplicateSubIds"];
	var len = subs.length;

	for (var i = 0; i &lt; len; ++i) {
		var sub = subs[i];
		var ric = sub["ric"];

		this.addSubscription(sub, ric);

		if (duplicateSubIds) { // There will be no network request for duplicate subs, and hence we need to update the data from our cache
			var dupSubId = duplicateSubIds[i];

			if (dupSubId) {
				window.setTimeout(
					this._onDuplicateRic.bind(this, sub["id"], this.getRowData(dupSubId + ric)),
					10);
			}
		}
	}
};

/**
 * @private
 * @param {Object} e
 */
tr.DataCache.prototype._onQ2SubRemoved = function (e) {
	var subs = e["subs"];
	var len = subs.length;

	for (var i = 0; i &lt; len; ++i) {
		var sub = subs[i];
		this.removeSubscription(sub);
	}
};

/**
 * @private
 * @param {string} subId Subscription id
 * @param {string} ric
 */
tr.DataCache.prototype._onADCForNewRic = function (subId, ric) {
	var sub = this._subs[subId];

	if (!sub) {
		return;
	}

	if (this._adcFields) {
		if (!sub["rics"][ric]) { // First time insertion
			if (this._adcTimerId &lt; 0) {
				this._adcRicMap = {};
				this._adcTimerId = setTimeout(this._onBatchRequestADCData, 100);
			}

			if (!this._adcRicMap[ric]) {
				this._adcRicMap[ric] = [];
			}

			this._adcRicMap[ric].push(subId);
		}
	}

	sub["rics"][ric] = true;
};

/**
 * @private
 * @param {string} subId
 * @param {Object.&lt;string, *&gt;} dupData
 */
tr.DataCache.prototype._onDuplicateRic = function (subId, dupData) {
	var sub = this._subs[subId];

	if (!sub) {
		return;
	}

	sub = sub["s"]; // Quotes2' subscription

	var ric = sub["ric"];
	var dupSubId = /** @type{string} */(dupData["SUB_ID"]);
	var values = this._cloneRowData(dupData, ric, subId);

	if (!values) {
		return;
	}

	this._onInsert(sub, ric, values);

	var children = sub["children"];

	if (children) {
		var childCount = children.length;

		for (var i = 0; i &lt; childCount; ++i) {
			ric = children[i];
			values = this._cloneRowData(dupSubId, ric, subId);

			this._onInsert(sub, ric, values); // TODO: This makes a lot of ADC request
		}
	}
};

/**
 * @private
 * @param {Object} sub Subscription object from JET.Quote
 * @param {string} ric
 * @param {Object.&lt;string, *&gt;} values
 */
tr.DataCache.prototype._onInsert = function (sub, ric, values/*, rowN*/) {
	var subId = sub["id"];

	if (this._quotes2) {
		this._insertRic(subId, ric, values);
	} else {
		this._onADCForNewRic(subId, ric);
		this.setRowData(subId + ric, values, {"subscription": sub, "ric": ric});
	}
};

/**
 * @private
 * @function
 */
tr.DataCache.prototype._onUpdate = tr.DataCache.prototype._onInsert;

/**
 * This is a legacy code and should be deprecated
 * @private
 * @param {Object} sub Subscription object from JET.Quote
 * @param {string} ric
 * @param {Array.&lt;string, *&gt;} values
 */
tr.DataCache.prototype._onDelete = function (sub, ric, values/*, rowN*/) {
	delete this._subs[sub["id"]]["rics"][ric];

	// We cannot cache event arguments because user may want to collect all the updates
	this.setRowData(sub["id"] + ric, null, {"subscription": sub, "ric": ric});
};

/**
 * @private
 * @param {string} field
 * @param {Array.&lt;string&gt;} ary_out
 */
tr.DataCache.prototype._addDataCloudField = function (field, ary_out) {
	if (!this._adcRefMap[field]) {
		this._adcFields.push(field);

		ary_out.push(field);

		this._adcRefMap[field] = 1;
	} else {
		++this._adcRefMap[field];
	}
};

/**
 * @private
 * @param {Object} e
 * @suppress {missingProperties}
 */
tr.DataCache.prototype._onADCUpdate = function (e) {
	var xhr = e["currentTarget"]; // XMLHttpRequest
	var resp = null;

	try {
		resp = JSON.parse(xhr.responseText);
		// window.console.log("Successfully parse: " + resp.rows);
	} catch (err) {
		return;
	}

	if (resp["status"] !== "Ok") {
		return;
	}

	var colCount = resp["cols"];
	var rows = resp["rows"];
	var colDefs = rows[0]; // The first row is always the column definition
	var ricIndex = -1;
	var fieldIndices = {};

	for (var i = 0; i &lt; colCount; ++i) {
		var colDef = colDefs[i];

		if (colDef["i"] === "instrument") {
			ricIndex = i;
		} else if (colDef["r"]) {
			fieldIndices[colDef["r"]] = i;
		}
	}

	var rowCount = rows.length;

	for (var j = 1; j &lt; rowCount; ++j) { // Start from 1
		var row = rows[j];
		var ric = row[ricIndex];
		var values = {};

		for (var field in fieldIndices) {
			var value = row[fieldIndices[field]];

			if (value !== undefined) {
				// Data should be merged from the backend.
				// Don't override data with null value.
				// TODO: Merge all the row into one single row
				if (value !== null &amp;&amp; value["f"] === undefined) {
					if (this._quotes2) {
						values[field] = value;
						values[field + "_FORMATTED"] = value;
					} else {
						values[field] = {"formatted": value + "", "raw": value};
					}
				}
			}
		}

		var subIds = xhr.ricMap[ric];

		if (subIds) { // Only ric within the subscription can be updated
			for (i = subIds.length; --i &gt;= 0;) {
				var subId = subIds[i];

				if (this._subs[subId]) { // Only update the existing subscription
					// window.console.log("ADC update " + subId + ric + " with " + JSON.stringify(values));
					this.setRowData(subId + ric, values); // Event is fired
				}
			}
		}
	}
};

/**
 * @private
 * @param {Object} e
 */
tr.DataCache.prototype._onADCError = function (e) {
	window.console.log(e);
};

/**
 * @private
 * @param {Object} e
 */
tr.DataCache.prototype._onBatchRequestADCData = function (e) {
	if (this._adcTimerId &lt;= 0) {
		return;
	}

	this._adcTimerId = -1;
	this._batchRequestDataCloud(this._adcRicMap, this._adcFields);
	this._adcRicMap = null;
};

/**
 * @private
 * @param {Object.&lt;string, Array.&lt;string&gt;&gt;} ricMap of Array of subscription object
 * @param {Array.&lt;string&gt;} fields
 * @return {XMLHttpRequest}
 */
tr.DataCache.prototype._batchRequestDataCloud = function (ricMap, fields) {
	if (!this._adcUrl) {
		return null;
	}

	var rics = [];

	for (var ric in ricMap) {
		rics.push(ric);
	}

	// Request data cloud in small multiple batches because the service cannot handle a long request
	while (rics.length &gt; 30) {
		this._requestDataCloud(ricMap, fields, rics.splice(0, 30));
	}

	return this._requestDataCloud(ricMap, fields, rics);
};

/**
 * @private
 * @param {Object.&lt;string, Array.&lt;string&gt;&gt;} ricMap of Array of subscription object
 * @param {Array.&lt;string&gt;} fields
 * @param {Array.&lt;string&gt;} rics
 * @return {XMLHttpRequest}
 */
tr.DataCache.prototype._requestDataCloud = function (ricMap, fields, rics) { // Small batch
	if (!rics || rics.length &lt;= 0) {
		return null;
	}

	if (!fields || fields.length &lt;= 0) {
		return null;
	}

	var xhr = new XMLHttpRequest();

	xhr.onload = this._onADCUpdate;
	xhr.onerror = this._onADCError;
	xhr.ricMap = ricMap;

	xhr.open("POST", this._adcUrl, true);
	xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

	var body = 'formula=' + fields + '&amp;identifiers=' + rics;

	// window.console.log("ADC is requested with " + body);
	if (this._productId) {
		body += '&amp;productid=' + this._productId;
	}

	if (this._userId) {
		body += '&amp;uuid=' + this._userId;
	}

	if (this._lang) {
		body += '&amp;lang=' + this._lang;
	}

	xhr.send(body);

	return xhr;
};

/**
 * @private
 * @param {string|Object.&lt;string, *&gt;} obj
 * @param {string} ric
 * @param {string} newSubId
 * @return {Object}
 */
tr.DataCache.prototype._cloneRowData = function (obj, ric, newSubId) {
	var subId = (typeof obj === "string") ? obj : obj["SUB_ID"];
	var fields = this._rows[subId + ric];

	if (!fields) { // The specified row has been removed
		if (typeof obj === "object") {
			fields = obj;
		} else {
			return null;
		}
	}

	var values = {};

	for (var key in fields) {
		if (this._staticFields[key] === undefined) { // Static field must not be cloned
			values[key] = fields[key];
		}
	}

	values["SUB_ID"] = newSubId;

	return values;
};

/** @protected
 * @ignore
 * @type {!Object.&lt;string, Object.&lt;string, *&gt;&gt;}
 */
tr.DataCache.prototype._rows;

/**
 * @private
 * @type {!Object.&lt;string, Object&gt;}
 */
tr.DataCache.prototype._subs;

/**
 * @private
 * @type {Object}
 */
tr.DataCache.prototype._quotes2 = null;

/**
 * @private
 * @type {Object.&lt;string, number&gt;}
 */
tr.DataCache.prototype._staticFields = null;

//#region ADC
/**
 * @private
 * @type {Array.&lt;string&gt;}
 */
tr.DataCache.prototype._adcFields = null;

/**
 * @private
 * @type {Object.&lt;string, number&gt;}
 */
tr.DataCache.prototype._adcRefMap = null;

/**
 * @private
 * @type {number}
 */
tr.DataCache.prototype._adcTimerId = -1;

/**
 * @private
 * @description ricMap of Array of subscription object
 * @type {Object.&lt;string, Array.&lt;string&gt;&gt;}
 */
tr.DataCache.prototype._adcRicMap = null;

/**
 * @private
 * @type {string}
 */
tr.DataCache.prototype._adcUrl = "/datacloud/rest/select";

/**
 * @private
 * @type {string}
 */
tr.DataCache.prototype._userId = "";

/**
 * @private
 * @type {string}
 */
tr.DataCache.prototype._productId = "";

/** @protected
 * @ignore
 * @type {boolean}
 */
tr.DataCache.prototype._composing = false;

/** @protected
 * @ignore
 * @type {string}
 */
tr.DataCache.prototype._lang = "";
//#endregion ADC
//#endregion Private

goog.exportSymbol("tr.DataCache", tr.DataCache);
goog.exportSymbol("tr.DataCache.constructTable", tr.DataCache.constructTable);

tr.DataCache._proto = tr.DataCache.prototype;

goog.exportProperty(tr.DataCache._proto, "dispose", tr.DataCache._proto.dispose);

goog.exportProperty(tr.DataCache._proto, "addSubscription", tr.DataCache._proto.addSubscription);
goog.exportProperty(tr.DataCache._proto, "removeSubscription", tr.DataCache._proto.removeSubscription);
goog.exportProperty(tr.DataCache._proto, "startAllSubscriptions", tr.DataCache._proto.startAllSubscriptions);
goog.exportProperty(tr.DataCache._proto, "stopAllSubscriptions", tr.DataCache._proto.stopAllSubscriptions);
goog.exportProperty(tr.DataCache._proto, "getSubscription", tr.DataCache._proto.getSubscription);
goog.exportProperty(tr.DataCache._proto, "getPrimaryRic", tr.DataCache._proto.getPrimaryRic);
goog.exportProperty(tr.DataCache._proto, "getAllRics", tr.DataCache._proto.getAllRics);

goog.exportProperty(tr.DataCache._proto, "setSubscriptions", tr.DataCache._proto.setSubscriptions); // For Quotes2
goog.exportProperty(tr.DataCache._proto, "getSubscriptions", tr.DataCache._proto.getSubscriptions); // For Quotes2

goog.exportProperty(tr.DataCache._proto, "addStaticFields", tr.DataCache._proto.addStaticFields);
goog.exportProperty(tr.DataCache._proto, "removeStaticFields", tr.DataCache._proto.removeStaticFields);
goog.exportProperty(tr.DataCache._proto, "resetStaticFields", tr.DataCache._proto.resetStaticFields);
goog.exportProperty(tr.DataCache._proto, "getStaticFields", tr.DataCache._proto.getStaticFields);

goog.exportProperty(tr.DataCache._proto, "getData", tr.DataCache._proto.getData);
goog.exportProperty(tr.DataCache._proto, "getAllRowIds", tr.DataCache._proto.getAllRowIds);
goog.exportProperty(tr.DataCache._proto, "hasRowId", tr.DataCache._proto.hasRowId);
goog.exportProperty(tr.DataCache._proto, "getColumnData", tr.DataCache._proto.getColumnData);
goog.exportProperty(tr.DataCache._proto, "getRowData", tr.DataCache._proto.getRowData);
goog.exportProperty(tr.DataCache._proto, "getMultipleRowData", tr.DataCache._proto.getMultipleRowData);
goog.exportProperty(tr.DataCache._proto, "getAllRowData", tr.DataCache._proto.getAllRowData);
goog.exportProperty(tr.DataCache._proto, "setData", tr.DataCache._proto.setData);
goog.exportProperty(tr.DataCache._proto, "setRowData", tr.DataCache._proto.setRowData);
goog.exportProperty(tr.DataCache._proto, "cloneRowData", tr.DataCache._proto.cloneRowData);

goog.exportProperty(tr.DataCache._proto, "clearAllData", tr.DataCache._proto.clearAllData);
goog.exportProperty(tr.DataCache._proto, "clearColumnData", tr.DataCache._proto.clearColumnData);

goog.exportProperty(tr.DataCache._proto, "dump", tr.DataCache._proto.dump);
goog.exportProperty(tr.DataCache._proto, "log", tr.DataCache._proto.log);

goog.exportProperty(tr.DataCache._proto, "hasDataCloudData", tr.DataCache._proto.hasDataCloudData);
goog.exportProperty(tr.DataCache._proto, "setDataCloudSettings", tr.DataCache._proto.setDataCloudSettings);
goog.exportProperty(tr.DataCache._proto, "getDataCloudFields", tr.DataCache._proto.getDataCloudFields);
goog.exportProperty(tr.DataCache._proto, "addDataCloudFields", tr.DataCache._proto.addDataCloudFields);
goog.exportProperty(tr.DataCache._proto, "removeDataCloudField", tr.DataCache._proto.removeDataCloudField);
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="AdFin.html">AdFin</a></li><li><a href="DateTime.html">DateTime</a></li><li><a href="Info.html">Info</a></li><li><a href="Logic.html">Logic</a></li><li><a href="Math.html">Math</a></li><li><a href="Realtime.html">Realtime</a></li><li><a href="Statistic.html">Statistic</a></li><li><a href="Text.html">Text</a></li><li><a href="tr.ElementFrameWork.html">ElementFrameWork</a></li><li><a href="tr.PipDefinition.html">PipDefinition</a></li></ul><h3>Classes</h3><ul><li><a href="tr.ADCSubscription.html">ADCSubscription</a></li><li><a href="tr.AdFinSubscription.html">AdFinSubscription</a></li><li><a href="tr.cgrid.editor.TextBox.html">TextBox</a></li><li><a href="tr.cgrid.filter.TextBox.html">TextBox</a></li><li><a href="tr.cgrid.formatter.AsyncFormatter.html">AsyncFormatter</a></li><li><a href="tr.cgrid.formatter.CheckBox.html">CheckBox</a></li><li><a href="tr.cgrid.formatter.UpDownColor.html">UpDownColor</a></li><li><a href="tr.ColumnStats.html">ColumnStats</a></li><li><a href="tr.CompositeGrid.html">CompositeGrid</a></li><li><a href="tr.DataCache.html">DataCache</a></li><li><a href="tr.DataTable.html">DataTable</a></li><li><a href="tr.DataView.html">DataView</a></li><li><a href="tr.DropDown.html">DropDown</a></li><li><a href="tr.ElementControl.html">ElementControl</a></li><li><a href="tr.ElementWrapper.html">ElementWrapper</a></li><li><a href="tr.Event.html">Event</a></li><li><a href="tr.EventDispatcher.html">EventDispatcher</a></li><li><a href="tr.EventDispatcher.extendClass-tempCtor.html">tempCtor</a></li><li><a href="tr.EventManager.html">EventManager</a></li><li><a href="tr.FieldFormatter.html">FieldFormatter</a></li><li><a href="tr.fn.Engine.html">Engine</a></li><li><a href="tr.fn.Formula.html">Formula</a></li><li><a href="tr.fn.VariableToken.html">VariableToken</a></li><li><a href="tr.Grid.html">Grid</a></li><li><a href="tr.grid.BidOfferSpan.html">BidOfferSpan</a></li><li><a href="tr.grid.Blinker.html">Blinker</a></li><li><a href="tr.grid.Cell.html">Cell</a></li><li><a href="tr.grid.CellBlinkingPlugin.html">CellBlinkingPlugin</a></li><li><a href="tr.grid.CellEditingPlugin.html">CellEditingPlugin</a></li><li><a href="tr.grid.CellFloatingPanel.html">CellFloatingPanel</a></li><li><a href="tr.grid.CellPainter.html">CellPainter</a></li><li><a href="tr.grid.CellSpan.html">CellSpan</a></li><li><a href="tr.grid.CellSpans.html">CellSpans</a></li><li><a href="tr.grid.CellWriter.html">CellWriter</a></li><li><a href="tr.grid.CheckboxColumnPlugin.html">CheckboxColumnPlugin</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html">CollapsibleHeaderPlugin</a></li><li><a href="tr.grid.ColumnFilterPlugin.html">ColumnFilterPlugin</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html">ColumnGroupingPlugin</a></li><li><a href="tr.grid.ColumnSelectionPlugin.html">ColumnSelectionPlugin</a></li><li><a href="tr.grid.ColumnStackingPlugin.html">ColumnStackingPlugin</a></li><li><a href="tr.grid.ColumnWidthAdjustingPlugin.html">ColumnWidthAdjustingPlugin</a></li><li><a href="tr.grid.Conflator.html">Conflator</a></li><li><a href="tr.grid.DataSourceTreePlugin.html">DataSourceTreePlugin</a></li><li><a href="tr.grid.DirectContentBindingPlugin.html">DirectContentBindingPlugin</a></li><li><a href="tr.grid.DragAndDropTitlePlugin.html">DragAndDropTitlePlugin</a></li><li><a href="tr.grid.DraggableContentPlugin.html">DraggableContentPlugin</a></li><li><a href="tr.grid.FindBar.html">FindBar</a></li><li><a href="tr.grid.FindBarPlugin.html">FindBarPlugin</a></li><li><a href="tr.grid.GroupStatisticsPlugin.html">GroupStatisticsPlugin</a></li><li><a href="tr.grid.HeatMapRenderer.html">HeatMapRenderer</a></li><li><a href="tr.grid.HScrollbar.html">HScrollbar</a></li><li><a href="tr.grid.IndexMarker.html">IndexMarker</a></li><li><a href="tr.grid.MovableHeaderPlugin.html">MovableHeaderPlugin</a></li><li><a href="tr.grid.NumberFormatter.html">NumberFormatter</a></li><li><a href="tr.grid.PercentBar.html">PercentBar</a></li><li><a href="tr.grid.PercentBarRenderer.html">PercentBarRenderer</a></li><li><a href="tr.grid.Plugin.html">Plugin</a></li><li><a href="tr.grid.RangeBar.html">RangeBar</a></li><li><a href="tr.grid.ResizableTitlePlugin.html">ResizableTitlePlugin</a></li><li><a href="tr.grid.Reverter.html">Reverter</a></li><li><a href="tr.grid.RowHeightAdjustingPlugin.html">RowHeightAdjustingPlugin</a></li><li><a href="tr.grid.RowSelectionPlugin.html">RowSelectionPlugin</a></li><li><a href="tr.grid.Scrollbar.html">Scrollbar</a></li><li><a href="tr.grid.SectionSettings.html">SectionSettings</a></li><li><a href="tr.grid.SmartTooltipsPlugin.html">SmartTooltipsPlugin</a></li><li><a href="tr.grid.SortableTitlePlugin.html">SortableTitlePlugin</a></li><li><a href="tr.grid.TreeIndentingPlugin.html">TreeIndentingPlugin</a></li><li><a href="tr.grid.Virtualizer.html">Virtualizer</a></li><li><a href="tr.grid.VScrollbar.html">VScrollbar</a></li><li><a href="tr.grid.ZoomPlugin.html">ZoomPlugin</a></li><li><a href="tr.HttpRequest.html">HttpRequest</a></li><li><a href="tr.IntervalSubscription.html">IntervalSubscription</a></li><li><a href="tr.LayoutGrid.html">LayoutGrid</a></li><li><a href="tr.ListMenu.html">ListMenu</a></li><li><a href="tr.MenuItem.html">MenuItem</a></li><li><a href="tr.MockArchive.html">MockArchive</a></li><li><a href="tr.MockJET.html">MockJET</a></li><li><a href="tr.MockQuotes.html">MockQuotes</a></li><li><a href="tr.MockQuotes2.html">MockQuotes2</a></li><li><a href="tr.MockSubscription.html">MockSubscription</a></li><li><a href="tr.MockSubscriptions.html">MockSubscriptions</a></li><li><a href="tr.Popup.html">Popup</a></li><li><a href="tr.PopupMenu.html">PopupMenu</a></li><li><a href="tr.PrintTrait.html">PrintTrait</a></li><li><a href="tr.RequestQueue.html">RequestQueue</a></li><li><a href="tr.Segment.html">Segment</a></li><li><a href="tr.SegmentCollection.html">SegmentCollection</a></li><li><a href="tr.TSISubscription.html">TSISubscription</a></li></ul><h3>Interfaces</h3><ul><li><a href="tr.cgrid.ICompositeExtension.html">ICompositeExtension</a></li><li><a href="tr.grid.IPlugin.html">IPlugin</a></li><li><a href="tr.IElementControl.html">IElementControl</a></li><li><a href="tr.ILayoutGrid.html">ILayoutGrid</a></li></ul><h3>Events</h3><ul><li><a href="tr.CompositeGrid.html#event:cellClicked">cellClicked</a></li><li><a href="tr.CompositeGrid.html#event:cellDblClicked">cellDblClicked</a></li><li><a href="tr.CompositeGrid.html#event:cellMouseDown">cellMouseDown</a></li><li><a href="tr.CompositeGrid.html#event:cellRightClicked">cellRightClicked</a></li><li><a href="tr.CompositeGrid.html#event:columnSorted">columnSorted</a></li><li><a href="tr.CompositeGrid.html#event:editorAttached">editorAttached</a></li><li><a href="tr.CompositeGrid.html#event:editorDetached">editorDetached</a></li><li><a href="tr.CompositeGrid.html#event:filterAdded">filterAdded</a></li><li><a href="tr.CompositeGrid.html#event:filterCleared">filterCleared</a></li><li><a href="tr.CompositeGrid.html#event:filterModified">filterModified</a></li><li><a href="tr.CompositeGrid.html#event:filterRemoved">filterRemoved</a></li><li><a href="tr.CompositeGrid.html#event:mouseLeaveCell">mouseLeaveCell</a></li><li><a href="tr.CompositeGrid.html#event:mouseOverCell">mouseOverCell</a></li><li><a href="tr.CompositeGrid.html#event:pageChanged">pageChanged</a></li><li><a href="tr.CompositeGrid.html#event:selectionChanged">selectionChanged</a></li><li><a href="tr.DataCache.html#event:dataChanged">dataChanged</a></li><li><a href="tr.DataCache.html#event:dataComposed">dataComposed</a></li><li><a href="tr.DataTable.html#event:dataChanged">dataChanged</a></li><li><a href="tr.DataTable.html#event:dataComposed">dataComposed</a></li><li><a href="tr.DataView.html#event:beforeFiltering">beforeFiltering</a></li><li><a href="tr.DataView.html#event:beforeGroupAdded">beforeGroupAdded</a></li><li><a href="tr.DataView.html#event:dataChanged">dataChanged</a></li><li><a href="tr.DataView.html#event:groupAdded">groupAdded</a></li><li><a href="tr.DataView.html#event:groupCriteriaChanged">groupCriteriaChanged</a></li><li><a href="tr.DataView.html#event:pageCountChanged">pageCountChanged</a></li><li><a href="tr.DataView.html#event:pageIndexChanged">pageIndexChanged</a></li><li><a href="tr.DataView.html#event:preDisposed">preDisposed</a></li><li><a href="tr.Formula.html#event:dataCacheChanged">dataCacheChanged</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:cancelled">cancelled</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:change">change</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:closed">closed</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:editorOpened">editorOpened</a></li><li><a href="tr.grid.CellEditingPlugin.html#event:preEditorOpening">preEditorOpening</a></li><li><a href="tr.grid.CheckboxColumnPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:contentBindinig">contentBindinig</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:footerBinding">footerBinding</a></li><li><a href="tr.grid.CollapsibleHeaderPlugin.html#event:headerBinding">headerBinding</a></li><li><a href="tr.grid.ColumnFilterPlugin.html#event:click">click</a></li><li><a href="tr.grid.ColumnFilterPlugin.html#event:iconCreated">iconCreated</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html#event:columnCollapsed">columnCollapsed</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html#event:groupChanged">groupChanged</a></li><li><a href="tr.grid.ColumnGroupingPlugin.html#event:render">render</a></li><li><a href="tr.grid.ColumnStackingPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.ColumnStackingPlugin.html#event:iconCreated">iconCreated</a></li><li><a href="tr.grid.DragAndDropTitlePlugin.html#event:columnMoved">columnMoved</a></li><li><a href="tr.grid.DragAndDropTitlePlugin.html#event:dragged">dragged</a></li><li><a href="tr.grid.DraggableContentPlugin.html#event:drag">drag</a></li><li><a href="tr.grid.DraggableContentPlugin.html#event:dragEnd">dragEnd</a></li><li><a href="tr.grid.DraggableContentPlugin.html#event:dragStart">dragStart</a></li><li><a href="tr.grid.FindBarPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.MovableHeaderPlugin.html#event:dragged">dragged</a></li><li><a href="tr.grid.MovableHeaderPlugin.html#event:groupMoved">groupMoved</a></li><li><a href="tr.grid.MovableHeaderPlugin.html#event:sectionMoved">sectionMoved</a></li><li><a href="tr.grid.RowSelectionPlugin.html#event:selectionChanged">selectionChanged</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:columnSorted">columnSorted</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:preClicked">preClicked</a></li><li><a href="tr.grid.SortableTitlePlugin.html#event:preDataSorting">preDataSorting</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:clicked">clicked</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:contentBindinig">contentBindinig</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:footerBinding">footerBinding</a></li><li><a href="tr.grid.TreeIndentingPlugin.html#event:headerBinding">headerBinding</a></li><li><a href="tr.Grid.html#event:columnAdded">columnAdded</a></li><li><a href="tr.Grid.html#event:columnAlignmentChanged">columnAlignmentChanged</a></li><li><a href="tr.Grid.html#event:columnRemoved">columnRemoved</a></li><li><a href="tr.Grid.html#event:columnVisibilityChanged">columnVisibilityChanged</a></li><li><a href="tr.Grid.html#event:dataSourceChanged">dataSourceChanged</a></li><li><a href="tr.Grid.html#event:postSectionDataBinding">postSectionDataBinding</a></li><li><a href="tr.Grid.html#event:rowExpansionBinding">rowExpansionBinding</a></li><li><a href="tr.Grid.html#event:rowHighlighted">rowHighlighted</a></li><li><a href="tr.Grid.html#event:sectionAdded">sectionAdded</a></li><li><a href="tr.Grid.html#event:widthChanged">widthChanged</a></li><li><a href="tr.HttpRequest.html#event:abort">abort</a></li><li><a href="tr.HttpRequest.html#event:error">error</a></li><li><a href="tr.HttpRequest.html#event:load">load</a></li><li><a href="tr.HttpRequest.html#event:loadend">loadend</a></li><li><a href="tr.HttpRequest.html#event:loadstart">loadstart</a></li><li><a href="tr.HttpRequest.html#event:timeout">timeout</a></li><li><a href="tr.IElementControl.html#event:blur">blur</a></li><li><a href="tr.IElementControl.html#event:change">change</a></li><li><a href="tr.IElementControl.html#event:click">click</a></li><li><a href="tr.IElementControl.html#event:contextmenu">contextmenu</a></li><li><a href="tr.IElementControl.html#event:dblclick">dblclick</a></li><li><a href="tr.IElementControl.html#event:drag">drag</a></li><li><a href="tr.IElementControl.html#event:dragend">dragend</a></li><li><a href="tr.IElementControl.html#event:dragenter">dragenter</a></li><li><a href="tr.IElementControl.html#event:dragleave">dragleave</a></li><li><a href="tr.IElementControl.html#event:dragover">dragover</a></li><li><a href="tr.IElementControl.html#event:dragstart">dragstart</a></li><li><a href="tr.IElementControl.html#event:drop">drop</a></li><li><a href="tr.IElementControl.html#event:focus">focus</a></li><li><a href="tr.IElementControl.html#event:formchange">formchange</a></li><li><a href="tr.IElementControl.html#event:forminput">forminput</a></li><li><a href="tr.IElementControl.html#event:input">input</a></li><li><a href="tr.IElementControl.html#event:invalid">invalid</a></li><li><a href="tr.IElementControl.html#event:keydown">keydown</a></li><li><a href="tr.IElementControl.html#event:keypress">keypress</a></li><li><a href="tr.IElementControl.html#event:keyup">keyup</a></li><li><a href="tr.IElementControl.html#event:mousedown">mousedown</a></li><li><a href="tr.IElementControl.html#event:mousemove">mousemove</a></li><li><a href="tr.IElementControl.html#event:mouseout">mouseout</a></li><li><a href="tr.IElementControl.html#event:mouseover">mouseover</a></li><li><a href="tr.IElementControl.html#event:mouseup">mouseup</a></li><li><a href="tr.IElementControl.html#event:mousewheel">mousewheel</a></li><li><a href="tr.IElementControl.html#event:reset">reset</a></li><li><a href="tr.IElementControl.html#event:scroll">scroll</a></li><li><a href="tr.IElementControl.html#event:select">select</a></li><li><a href="tr.IElementControl.html#event:submit">submit</a></li><li><a href="tr.ILayoutGrid.html#event:blur">blur</a></li><li><a href="tr.ILayoutGrid.html#event:change">change</a></li><li><a href="tr.ILayoutGrid.html#event:click">click</a></li><li><a href="tr.ILayoutGrid.html#event:contextmenu">contextmenu</a></li><li><a href="tr.ILayoutGrid.html#event:dblclick">dblclick</a></li><li><a href="tr.ILayoutGrid.html#event:drag">drag</a></li><li><a href="tr.ILayoutGrid.html#event:dragend">dragend</a></li><li><a href="tr.ILayoutGrid.html#event:dragenter">dragenter</a></li><li><a href="tr.ILayoutGrid.html#event:dragleave">dragleave</a></li><li><a href="tr.ILayoutGrid.html#event:dragover">dragover</a></li><li><a href="tr.ILayoutGrid.html#event:dragstart">dragstart</a></li><li><a href="tr.ILayoutGrid.html#event:drop">drop</a></li><li><a href="tr.ILayoutGrid.html#event:focus">focus</a></li><li><a href="tr.ILayoutGrid.html#event:formchange">formchange</a></li><li><a href="tr.ILayoutGrid.html#event:forminput">forminput</a></li><li><a href="tr.ILayoutGrid.html#event:input">input</a></li><li><a href="tr.ILayoutGrid.html#event:invalid">invalid</a></li><li><a href="tr.ILayoutGrid.html#event:keydown">keydown</a></li><li><a href="tr.ILayoutGrid.html#event:keypress">keypress</a></li><li><a href="tr.ILayoutGrid.html#event:keyup">keyup</a></li><li><a href="tr.ILayoutGrid.html#event:mousedown">mousedown</a></li><li><a href="tr.ILayoutGrid.html#event:mousemove">mousemove</a></li><li><a href="tr.ILayoutGrid.html#event:mouseout">mouseout</a></li><li><a href="tr.ILayoutGrid.html#event:mouseover">mouseover</a></li><li><a href="tr.ILayoutGrid.html#event:mouseup">mouseup</a></li><li><a href="tr.ILayoutGrid.html#event:mousewheel">mousewheel</a></li><li><a href="tr.ILayoutGrid.html#event:reset">reset</a></li><li><a href="tr.ILayoutGrid.html#event:scroll">scroll</a></li><li><a href="tr.ILayoutGrid.html#event:select">select</a></li><li><a href="tr.ILayoutGrid.html#event:submit">submit</a></li><li><a href="tr.LayoutGrid.html#event:rowCountChanged">rowCountChanged</a></li><li><a href="tr.LayoutGrid.html#event:rowHeightChanged">rowHeightChanged</a></li><li><a href="tr.LayoutGrid.html#event:rowHighlighted">rowHighlighted</a></li><li><a href="tr.Popup.html#event:hidden">hidden</a></li><li><a href="tr.Popup.html#event:shown">shown</a></li><li><a href="tr.PopupMenu.html#event:hidden">hidden</a></li><li><a href="tr.PopupMenu.html#event:shown">shown</a></li><li><a href="tr.PrintTrait.html#event:afterprint">afterprint</a></li><li><a href="tr.PrintTrait.html#event:beforeprint">beforeprint</a></li><li><a href="tr.PrintTrait.html#event:pageCounting">pageCounting</a></li></ul><h3>Global</h3><ul><li><a href="global.html#cellRef%255Bundefined%255D">cellRef[undefined]</a></li><li><a href="global.html#e%255Bundefined%255D">e[undefined]</a></li><li><a href="global.html#.textContent">.textContent</a></li><li><a href="global.html#get">get</a></li><li><a href="global.html#input%255Bundefined%255D">input[undefined]</a></li><li><a href="global.html#q%255Bundefined%255D">q[undefined]</a></li><li><a href="global.html#sortingDef%255B1%255D">sortingDef[1]</a></li></ul>
</nav>


<script src="scripts/linenumber.js"> </script>
<script src="scripts/prettify.js"> </script>
<script> prettyPrint(); </script>
</body>
</html>
