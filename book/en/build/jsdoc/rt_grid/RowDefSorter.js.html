<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: RowDefSorter.js</title>

    <script src="scripts/prettify.js"> </script>
    <script src="scripts/lang-css.js"> </script>
    <!--[if lt IE 9]&gt;
      &lt;script src="//html5shiv.googlecode.com/svn/trunk/html5.js"&gt;&lt;/script&gt;
    &lt;![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/default.css">
    <link type="text/css" rel="stylesheet" href="styles/elf-template.css">
</head>

<body>

<div id="main-template" class="elf-template">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/** @constructor
*/
var RowDefSorter = function() {
	this._defaultSorter = this._defaultSorter.bind(this);
	this._dataSorter = this._dataSorter.bind(this);
	this._rowDefSorter = this._rowDefSorter.bind(this);

	this._sortContext = {};
};


/** @type {string}
* @private
*/
RowDefSorter.prototype._field = "";
/** @type {!Object}
* @private
*/
RowDefSorter.prototype._sortContext;
/** @type {Function}
* @private
*/
RowDefSorter.prototype._sortLogic = null;


/** @public
*/
RowDefSorter.prototype.dispose = function() {
	this._sortLogic = null;
	this._sortContext = {}; // Clear any existing reference
};

/** @public
* @param {boolean=} rowSorting=false
* @return {Function}
*/
RowDefSorter.prototype.getSorter = function(rowSorting) {
	if(this._sortLogic) {
		return rowSorting ? this._rowDefSorter : this._dataSorter;
	} else {
		return this._defaultSorter;
	}
};
/** @public
* @param {Function=} func
*/
RowDefSorter.prototype.setSortLogic = function(func) {
	this._sortLogic = (typeof func === "function") ? func : null;
};


/** @public
* @param {string} field
*/
RowDefSorter.prototype.setField = function(field) {
	if(!field) {
		field = "";
	}
	this._sortContext["field"] = this._field = field;
	this._sortContext["formattedField"] = field + "_FORMATTED";
};
/** @public
* @param {string} key
* @param {*} value
*/
RowDefSorter.prototype.setContext = function(key, value) {
	this._sortContext[key] = value;
};

/** @private
* @param {RowDefinition} rowDefA
* @param {RowDefinition} rowDefB
* @param {number} order
* @return {number}
*/
RowDefSorter.prototype._defaultSorter = function(rowDefA, rowDefB, order) {
	var orderA = rowDefA.getGroupOrder();
	var orderB = rowDefB.getGroupOrder();
	if(orderA !== orderB) {
		return orderA - orderB; // Regardless of sort order
	}

	var a = rowDefA.getData(this._field);
	var b = rowDefB.getData(this._field);

	if(a == null || a !== a) {
		if(b == null || b !== b) {
			return 0;
		}
		return 1;
	}
	if(b == null || b !== b) {
		return -1;
	}

	if(a &lt; b) {
		return -order;
	}
	if(b &lt; a) {
		return order;
	}
	return 0;
};
/** @private
* @param {RowDefinition} rowDefA
* @param {RowDefinition} rowDefB
* @param {number} order
* @return {number}
*/
RowDefSorter.prototype._dataSorter = function(rowDefA, rowDefB, order) {
	var orderA = rowDefA.getGroupOrder();
	var orderB = rowDefB.getGroupOrder();
	if(orderA !== orderB) {
		return orderA - orderB; // Regardless of sort order
	}

	var a = rowDefA.getData(this._field);
	var b = rowDefB.getData(this._field);
	return this._sortLogic(a, b, order, this._sortContext);
};
/** @private
* @param {RowDefinition} rowDefA
* @param {RowDefinition} rowDefB
* @param {number} order
* @return {number}
*/
RowDefSorter.prototype._rowDefSorter = function(rowDefA, rowDefB, order) {
	var orderA = rowDefA.getGroupOrder();
	var orderB = rowDefB.getGroupOrder();
	if(orderA !== orderB) {
		return orderA - orderB; // Regardless of sort order
	}

	return this._sortLogic(rowDefA, rowDefB, order, this._sortContext);
};

export default RowDefSorter;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="ColumnDefinition.html">ColumnDefinition</a></li><li><a href="DataConnector.html">DataConnector</a></li><li><a href="Grid.html">Grid</a></li><li><a href="ReferenceCounter.html">ReferenceCounter</a></li><li><a href="RowDefinition.html">RowDefinition</a></li><li><a href="RowDefSorter.html">RowDefSorter</a></li><li><a href="SnapshotFiller.html">SnapshotFiller</a></li><li><a href="StyleLoader.html">StyleLoader</a></li></ul><h3>Events</h3><ul><li><a href="Grid.html#event:adcDataReceived">adcDataReceived</a></li><li><a href="Grid.html#event:beforeRowRemoved">beforeRowRemoved</a></li><li><a href="Grid.html#event:dataComposed">dataComposed</a></li><li><a href="Grid.html#event:fieldAdded">fieldAdded</a></li><li><a href="Grid.html#event:fieldRemoved">fieldRemoved</a></li><li><a href="Grid.html#event:pageCountChanged">pageCountChanged</a></li><li><a href="Grid.html#event:pageIndexChanged">pageIndexChanged</a></li><li><a href="Grid.html#event:ricAdded">ricAdded</a></li><li><a href="Grid.html#event:ricRemoved">ricRemoved</a></li></ul><h3>Global</h3><ul><li><a href="global.html#COL_DEF">COL_DEF</a></li><li><a href="global.html#ROW_DEF">ROW_DEF</a></li></ul>
</nav>


<script src="scripts/linenumber.js"> </script>
<script src="scripts/prettify.js"> </script>
<script> prettyPrint(); </script>
</body>
</html>
