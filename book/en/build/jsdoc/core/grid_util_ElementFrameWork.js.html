<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: grid/util/ElementFrameWork.js</title>

    <script src="scripts/prettify.js"> </script>
    <script src="scripts/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/default.css">
    <link type="text/css" rel="stylesheet" href="styles/elf-template.css">
</head>

<body>

<div id="main-template" class="elf-template">
    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import Util from "./util.js";

/*
 * Support for ELFv3
 * https://elf.int.refinitiv.com/index.html
 */

/**
* @namespace
*/
var ElementFrameWork = {};

/** @private
 * @static
 * @description True if the app uses ELFv3, false otherwise
 * @type {boolean}
 */
ElementFrameWork._isElfv3 = false;

/** @public
 * @description Enable the ELFv3 mode
 */
ElementFrameWork.setElfv3 = function() {
	ElementFrameWork._isElfv3 = true;
};

/** @public
 * @description Indicate is the app uses ELFv3
 * @returns {boolean} True if the app uses ELFv3, false otherwise
 */
ElementFrameWork.isElfv3 = function() {
	return ElementFrameWork._isElfv3;
};

/** @public
 * @description Create a icon span
 * @param {string} iconName
 * @returns {Element} The created element
 */
ElementFrameWork.createIcon = function(iconName) {
	var element;

	if (ElementFrameWork._isElfv3) {
		element = document.createElement("ef-icon");
		element.setAttribute("icon", iconName);
	} else {
		element = document.createElement("span");
		element.classList.add("icon-" + iconName);
	}

	return element;
};

/** @public
 * @description Create a icon button
 * @param {string} iconName
 * @returns {Element} The created element
 */
ElementFrameWork.createIconButton = function(iconName) {
	var element;

	if (ElementFrameWork._isElfv3) {
		element = document.createElement("ef-button");
		element.setAttribute("icon", iconName);
	} else {
		element = document.createElement("button");
		element.classList.add("icon-" + iconName);
	}

	return element;
};

/** @public
 * @description Create range bar
 * @returns {Element} The created element
 */
ElementFrameWork.createRangeBar = function() {
	var _slider;
	var scalebar = document.createElement("div");

	if (ElementFrameWork._isElfv3) {
		scalebar.className = "tr-range-bar-wrapper";
		_slider = document.createElement("sapphire-led-gauge");
		_slider.setAttribute("neutral-color", "");
		_slider.setAttribute("top-value", "0.00");
	} else {
		scalebar.className = "tr-range-bar-scale";
		_slider = document.createElement("div");
		_slider.className = "tr-range-bar-slider";
	}

	_slider.classList.add("tr-range-slider");
	scalebar.appendChild(_slider);

	/**
	 * @private
	 * @param {number} lowValue
	 * @param {number} lastValue
	 * @param {number} highValue
	 * @returns {{sliderValue: number, rangeValue: (null|string)}}
	 */
	scalebar._calculateScaleParams = function (lowValue, lastValue, highValue) {
		var sliderValue;
		var rightSegmentValue;
		var leftSegmentValue;
		var rangeValue = null;

		if (lowValue === highValue) {
			if (lastValue === highValue) {
				sliderValue = 0;
			} else if (lastValue &gt; highValue) {
				sliderValue = 100;
			} else {
				sliderValue = -100;
			}

			return {
				"sliderValue": sliderValue,
				"rangeValue": "[-100,100]"
			};
		}

		if (lowValue === lastValue) {
			return {
				"sliderValue": -100,
				"rangeValue": rangeValue
			};
		}

		if (lastValue === highValue) {
			return {
				"sliderValue": 100,
				"rangeValue": rangeValue
			};
		}

		if (lowValue &gt; highValue) {
			if (lastValue &gt; lowValue) {
				rightSegmentValue = Util.calculatePercent(highValue, lastValue - lowValue, lowValue) * 2 - 100;

				sliderValue = -100;
				rangeValue = "[-100," + rightSegmentValue + "]";
			} else if(lastValue &lt; highValue) {
				leftSegmentValue = Util.calculatePercent(highValue, lowValue - lastValue, lowValue) * 2 - 100;

				sliderValue = 100;
				rangeValue = "[" + leftSegmentValue + ",100]";
			} else {
				sliderValue = Util.calculatePercent(highValue, lastValue, lowValue) * 2 - 100;
			}

			return {
				"sliderValue": sliderValue,
				"rangeValue": rangeValue
			};
		}

		if (lastValue &gt; highValue) {
			leftSegmentValue = Util.calculatePercent(lowValue, 2 * highValue - lastValue, highValue) * 2 - 100;

			return {
				"sliderValue": 100,
				"rangeValue": "[" + leftSegmentValue + ",100]"
			};
		}

		if (lastValue &lt; lowValue) {
			rightSegmentValue = Util.calculatePercent(lowValue, 2 * lowValue - lastValue, highValue) * 2 - 100;

			return {
				"sliderValue": -100,
				"rangeValue": "[-100," + rightSegmentValue + "]"
			};
		}

		return {
			"sliderValue": Util.calculatePercent(lowValue, lastValue, highValue) * 2 - 100,
			"rangeValue": rangeValue
		};
	};

	scalebar._getSliderInstance = function () {
		return _slider;
	};

	/**
	 * @param {number} percent
	 * @param {number} lowValue
	 * @param {number} lastValue
	 * @param {number} highValue
	 */
	scalebar.updateScale = function (percent, lowValue, lastValue, highValue) {
		var sliderParams;
		var sliderInstance = scalebar._getSliderInstance();

		if (!ElementFrameWork._isElfv3) {
			sliderInstance.style.left = percent + "%";

			return;
		}

		sliderParams = scalebar._calculateScaleParams(lowValue, lastValue, highValue);
		sliderInstance.setAttribute("top-value", sliderParams["sliderValue"].toString());

		if (!sliderParams["rangeValue"]) {
			sliderInstance.removeAttribute("range");

			return;
		}

		sliderInstance.setAttribute("range", sliderParams["rangeValue"]);
	};

	scalebar.setSliderWidth = function (val) {
		var sliderWidth = (val &gt; 0) ? val : 1;

		if (!ElementFrameWork._isElfv3) {
			scalebar.style.width = "calc(100% - " + sliderWidth + "px)";
			scalebar._getSliderInstance().style.width = sliderWidth + "px";
		}
	};

	return scalebar;
};

export { ElementFrameWork };
export default ElementFrameWork;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="ElementFrameWork.html">ElementFrameWork</a></li><li><a href="Util.html">Util</a></li></ul><h3>Classes</h3><ul><li><a href="Cell.html">Cell</a></li><li><a href="CellFloatingPanel.html">CellFloatingPanel</a></li><li><a href="CellSpan.html">CellSpan</a></li><li><a href="CellSpans.html">CellSpans</a></li><li><a href="ColumnStats.html">ColumnStats</a></li><li><a href="Conflator.html">Conflator</a></li><li><a href="DataCache.html">DataCache</a></li><li><a href="DataTable.html">DataTable</a></li><li><a href="DataView.html">DataView</a></li><li><a href="DragAndDropTitlePlugin.html">DragAndDropTitlePlugin</a></li><li><a href="ElementWrapper.html">ElementWrapper</a></li><li><a href="EventDispatcher.html">EventDispatcher</a></li><li><a href="EventListeners.html">EventListeners</a></li><li><a href="Grid.html">Grid</a></li><li><a href="HScrollbar.html">HScrollbar</a></li><li><a href="HttpRequest.html">HttpRequest</a></li><li><a href="LayoutGrid.html">LayoutGrid</a></li><li><a href="PercentBar.html">PercentBar</a></li><li><a href="PercentBarRenderer.html">PercentBarRenderer</a></li><li><a href="Plugin.html">Plugin</a></li><li><a href="RangeBar.html">RangeBar</a></li><li><a href="Reverter.html">Reverter</a></li><li><a href="Scrollbar.html">Scrollbar</a></li><li><a href="SectionSettings.html">SectionSettings</a></li><li><a href="Segment.html">Segment</a></li><li><a href="SegmentCollection.html">SegmentCollection</a></li><li><a href="SortableTitlePlugin.html">SortableTitlePlugin</a></li><li><a href="Virtualizer.html">Virtualizer</a></li><li><a href="VScrollbar.html">VScrollbar</a></li></ul><h3>Interfaces</h3><ul><li><a href="ILayoutGrid.html">ILayoutGrid</a></li></ul><h3>Events</h3><ul><li><a href="DataCache.html#event:dataChanged">dataChanged</a></li><li><a href="DataCache.html#event:dataComposed">dataComposed</a></li><li><a href="DataTable.html#event:dataChanged">dataChanged</a></li><li><a href="DataTable.html#event:dataComposed">dataComposed</a></li><li><a href="DataView.html#event:beforeFiltering">beforeFiltering</a></li><li><a href="DataView.html#event:beforeGroupAdded">beforeGroupAdded</a></li><li><a href="DataView.html#event:dataChanged">dataChanged</a></li><li><a href="DataView.html#event:groupAdded">groupAdded</a></li><li><a href="DataView.html#event:groupCriteriaChanged">groupCriteriaChanged</a></li><li><a href="DataView.html#event:pageCountChanged">pageCountChanged</a></li><li><a href="DataView.html#event:pageIndexChanged">pageIndexChanged</a></li><li><a href="DataView.html#event:preDisposed">preDisposed</a></li><li><a href="DragAndDropTitlePlugin.html#event:columnMoved">columnMoved</a></li><li><a href="DragAndDropTitlePlugin.html#event:dragged">dragged</a></li><li><a href="Grid.html#event:columnAdded">columnAdded</a></li><li><a href="Grid.html#event:columnRemoved">columnRemoved</a></li><li><a href="Grid.html#event:columnVisibilityChanged">columnVisibilityChanged</a></li><li><a href="Grid.html#event:dataSourceChanged">dataSourceChanged</a></li><li><a href="Grid.html#event:postSectionDataBinding">postSectionDataBinding</a></li><li><a href="Grid.html#event:rowExpansionBinding">rowExpansionBinding</a></li><li><a href="Grid.html#event:rowHighlighted">rowHighlighted</a></li><li><a href="Grid.html#event:sectionAdded">sectionAdded</a></li><li><a href="Grid.html#event:widthChanged">widthChanged</a></li><li><a href="HttpRequest.html#event:abort">abort</a></li><li><a href="HttpRequest.html#event:error">error</a></li><li><a href="HttpRequest.html#event:load">load</a></li><li><a href="HttpRequest.html#event:loadend">loadend</a></li><li><a href="HttpRequest.html#event:loadstart">loadstart</a></li><li><a href="HttpRequest.html#event:timeout">timeout</a></li><li><a href="LayoutGrid.html#event:rowCountChanged">rowCountChanged</a></li><li><a href="LayoutGrid.html#event:rowHeightChanged">rowHeightChanged</a></li><li><a href="LayoutGrid.html#event:rowHighlighted">rowHighlighted</a></li><li><a href="SortableTitlePlugin.html#event:clicked">clicked</a></li><li><a href="SortableTitlePlugin.html#event:columnSorted">columnSorted</a></li><li><a href="SortableTitlePlugin.html#event:preClicked">preClicked</a></li><li><a href="SortableTitlePlugin.html#event:preDataSorting">preDataSorting</a></li></ul><h3>Global</h3><ul><li><a href="global.html#get">get</a></li><li><a href="global.html#sortingDef%255B1%255D">sortingDef[1]</a></li></ul>
</nav>


<script src="scripts/linenumber.js"> </script>
<script src="scripts/prettify.js"> </script>
<script> prettyPrint(); </script>
</body>
</html>
