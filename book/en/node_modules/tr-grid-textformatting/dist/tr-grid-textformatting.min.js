!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n={inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,n){r||(r="constructor");for(var i=arguments.length,o=new Array(i),a=2;a<i;a++)o[a-2]=arguments[a];return e.prototype[r].apply(t,o)}}},i=function(){};i.prototype._events=null,i.prototype._listenerCount=0,i.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var r=this._events[t];r?r.indexOf(e)<0&&(r.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},i.prototype.removeEventListener=function(t,e){var r=this._events?this._events[t]:null;if(r){var n=r.indexOf(e);n>=0&&(r.splice(n,1),--this._listenerCount)}},i.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},i.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},i.prototype.getListener=function(t,e){if(t){var r=this._events?this._events[t]:null;if(r)return e||(e=0),r[e]||null}return null},i.prototype.addListener=function(t,e){var r=t?t[e]:null;"function"==typeof r&&this.addEventListener(e,r)},i.prototype._prepareEventArguments=function(t,e){return e},i.prototype._dispatch=function(t,e){var r=this._events?this._events[t]:null;if(r){e=this._prepareEventArguments(t,e);for(var n=r.length,i=0;i<n;++i)r[i](e)}};i.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var o=function(t,e,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=r&&(this._ctx=r),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};o.prototype.promise=null,o.prototype._resolve=null,o.prototype._reject=null,o.prototype._resolveHandler=null,o.prototype._rejectHandler=null,o.prototype._ctx=null,o.prototype._fulfilled=!1,o.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},o.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},o.prototype.isFulfilled=function(){return this._fulfilled},o.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var a=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},l=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},s=function(t,e){if(!t)return null;var r=document.createElement("style");r.textContent="\n"+t+"\n";var n,i=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null}(e),o=!0;return i||(o=!1,i=document.head),o&&i.children&&i.children.length&&(n=i.children[0]),n?i.insertBefore(r,n):i.appendChild(r),r},u=function(t,e){for(var r in e||(e=[]),t){var n=t[r];"object"==typeof n?u(n,e):e.push(n)}return e},d=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var r="#",n=0;n<3;n++){var i=+e[n];i>=16||(r+="0"),r+=i?i.toString(16).toUpperCase():"0"}return r},p={},c=function(t,e){"attributes"==e.type&&"lang"==e.attributeName&&(t.lang=e.target.lang||"en")},f=function(t,e,r){"attributes"===r.type&&(null!=e?r.attributeName===e&&t(r.target.getAttribute(e)):t(r.target))};p._getNewId=function(){return"observer_"+ ++p._id},p._addObserver=function(t,e,r){var n=r;n||(n={}),n.attributes=!0,p._observer.observe(t,n),p._addListener(t,e)},p._onMutationCallback=function(t){for(var e=0;e<t.length;e++)for(var r=t[e],n=p._listeners[r.target._observeId],i=0;i<n.length;i++)n[i](r)},p._addListener=function(t,e){var r=p._listeners;if(r||(r=p._listeners={}),!t._observeId){var n=p._getNewId();t._observeId=n}r[t._observeId]||(r[t._observeId]=[]);var i=r[t._observeId];i.indexOf(e)<0&&i.push(e)},p.addLanguageListener=function(t){t&&(t.lang=document.documentElement.lang||"en",p._addObserver(document.documentElement,c.bind(null,t)))},p.addAttributeListener=function(t,e,r){t&&e&&p._addObserver(t,f.bind(null,e,r))},p._observer=new MutationObserver(p._onMutationCallback),p._listeners={},p._id=0;var h={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},m={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};m.themeColors=m._defaultColors,m._components={},m._themeName="",m._elfVersion=0,m._dummyIcon=null,m._iconLoaded=!1,m._profileName=null,m._callbacks=[],m._observed=!1,m._pendingResolve=!1,m._themeLoaded=!1,m._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},m._icons["halo-theme"]=m._icons["elf-theme-halo"],m._icons["solar-theme"]=m._icons["elf-theme-solar"],m.getElfVersion=function(){if(!m._elfVersion){var t=0;if(window.EFX_GRID){var e=window.EFX_GRID.version;t=+(e=e.split("."))[0]}else if(window.elf)if(window.elf.version){var r=window.elf.version.match(/\d/);r&&r[0]&&(t=parseInt(r[0],10))}else window.elf.customElements?t=3:window.customElements&&(t=4);else window.Polymer&&(t=1);m._elfVersion=t}return m._elfVersion},m.hasComponent=function(t){var e=m._components[t];if(null==e){e=0;var r=m.getElfVersion();if(t)1===r?document.createElement(t).is===t&&(e=r):r>1&&(window.customElements&&window.customElements.get(t)||document.createElement(t).constructor!==HTMLElement)&&(e=r),m._components[t]=e}return e},m.toLangString=function(t){if(!t)return"";if("zh-hant"===(t=t.toLowerCase()))return"zh-Hant";var e=t.replace(/-.*/,"");return h[e]?e:""},m.hasTheme=function(t){return t===m.getThemeName()},m.getThemeName=function(t){return m._themeName||(m._themeName=m.getCssVariable("--theme-name",document.documentElement)),m._themeName},m.setThemeName=function(t){m._themeName=t},m.isThemeLoaded=function(){return m._themeLoaded},m.getColors=function(){return m.themeColors},m.isHaloTheme=function(t){return null==t&&(t=m.getThemeName()),!!t&&t.indexOf("halo")>=0},m.injectIcons=function(t,e){if("object"==typeof t){var r=m.getThemeName();t.themeName=r;var n=m.getElfVersion();t.elfVersion=n;var i=m._icons[r];i&&(t.icons=i)}},m.getIconList=function(){var t=m._icons[m.getThemeName()];return t?u(t):[]},m._onIconPreloaded=function(){if(m._dummyIcon){var t=m._dummyIcon.parentNode;t&&t.removeChild(m._dummyIcon),m._dummyIcon=null}},m.prepareIconPreloading=function(){if(!m._iconLoaded){m._iconLoaded=!0;var t=m.getIconList();if(t.length){setTimeout(m._onIconPreloaded,10);var e=m._dummyIcon=document.createElement("coral-icon");return e.style.transform="scale(0)",document.body.appendChild(e),t}}return null},m.getCssVariable=function(t,e){var r="",n=e||document.body;return window&&"string"==typeof t&&1===n.nodeType&&t.match(/^--/)&&(r=(r=window.getComputedStyle(n).getPropertyValue(t)).replace(/[\"\']/g,"")),r},m.getCssVariables=function(t,e){var r=e||document.body;if(window&&1===r.nodeType){var n=window.getComputedStyle(r);for(var i in t){var o=t[i];o&&o.match(/^--/)&&(t[i]=n.getPropertyValue(o).replace(/\"/g,""))}}return t||null},m.setRTK=function(t){null!=t&&(m._rtk=t)},m.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},m._addThemeChangedCallback=function(t){var e=m._callbacks;e.indexOf(t)<0&&e.push(t)},m.reloadThemeColors=function(){return m._deferred&&m._deferred.isFulfilled()?(m._profileName="",m._themeLoaded=!1,m.themeReady=null,m.getThemeColors()):m.themeReady},m.getThemeColors=function(t){if("function"==typeof t&&m._addThemeChangedCallback(t),m.themeReady)return m.themeReady;var e=m._deferred=new o;m.themeReady=e.promise;var r=m.getMovementColorProfile();if(r)r!==m._profileName?setTimeout(m._profileNameRetrieved,100):m._deferred.resolve(m.themeColors);else{var n={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},i=window?window.JET:null;if(m._themeLoaded=!1,m._rtk&&m._rtk.Settings)m._rtk.Settings.getAsync(n).then(m._loadingProfileSuccess).catch(m._loadingProfileFailure);else if(i&&i.Settings)try{i.Settings.read(m._loadingProfileSuccess,n)}catch(t){m._loadingProfileFailure()}else setTimeout(m._profileNameRetrieved,100)}return e.promise};var _=function(t){if(t!==m._profileName){m._retrieveThemeColors(t),m._pendingResolve&&(m._pendingResolve=!1,m._deferred.resolve(m.themeColors));for(var e=m._callbacks,r=0;r<e.length;r++)e[r]()}};m._loadingProfileSuccess=function(t){t&&document.documentElement.setAttribute("movement-color-profile",t.toLowerCase()),m._observed?m._pendingResolve=!0:m._profileNameRetrieved(t)},m._loadingProfileFailure=function(){m._retrieveThemeColors(),m._observed||(m._observed=!0,p.addAttributeListener(document.documentElement,_,"movement-color-profile")),m._deferred.reject("Failed to get movement color profile from settings.")},m._profileNameRetrieved=function(){var t=m.getMovementColorProfile();m._retrieveThemeColors(t),m._observed||(m._observed=!0,p.addAttributeListener(document.documentElement,_,"movement-color-profile")),m._deferred.resolve(m.themeColors)},m._retrieveThemeColors=function(t){m._themeLoaded=!0,m._profileName=t;var e=m.themeColors=m.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});e.up||(e.up=m._defaultColors.up,e.down=m._defaultColors.down,e.level=m._defaultColors.level,e.tickUp=m._defaultColors.tickUp,e.tickDown=m._defaultColors.tickDown),e.positive=e.up,e.negative=e.down,e.neutral=e.level;var r=document.createElement("table");r.style.visibility="hidden",r.style.position="fixed",r.style.left="0",r.style.top="0",r.style.width="0";var n=r.insertRow(-1),i=n.insertCell(-1);document.body.appendChild(r);var o=window.getComputedStyle(n);e.tableBg=o.backgroundColor;var a=window.getComputedStyle(i);e.tableText=a.color,e.tableBorder=a.borderColor,e.tableText===e.tableBorder&&(i.className="tr-lg",a=window.getComputedStyle(i),e.tableBg=a.backgroundColor,e.tableText=a.color,e.tableBorder=a.borderColor,e.tableText===e.tableBorder&&(e.tableBg=m._defaultColors.baseGrid,e.tableText=m._defaultColors.baseText,e.tableBorder="")),e.tableBg=d(e.tableBg),e.tableText=d(e.tableText),e.tableBorder=d(e.tableBorder),document.body.removeChild(r),e.baseGrid=e.tableBg,e.baseText=e.tableText,e.trackColor=e.primary||m._defaultColors.trackColor};var g=m,y=function(){};n.inherits(y,i),y.prototype._hosts=null,y.prototype._compositeGrid=null,y.prototype._realTimeGrid=null,y.prototype._rowGetter=null,y.prototype._initializedGrid=!1,y.prototype.listen=y.prototype.addEventListener,y.prototype.unlisten=y.prototype.removeEventListener,y.prototype.afterInit=function(t,e,r){var n=null;r&&r.getCoreGrid&&(n=r.getCoreGrid()),n&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&n.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?x:T,this._afterInit())},y.prototype._afterInit=function(){},y.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},y.prototype.hasMultiTableSupport=function(){return!1},y.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},y.prototype.getName=function(){return"GridPlugin"},y.prototype.initialize=function(t,e){},y.prototype.unload=function(t){this._dispose()},y.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var r=(e=t.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var n=this._hosts.length;--n>=0;){var i=this._hosts[n];if(i.getElement().contains(e))return i}return null},y.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},y.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},y.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var r=this.getColumnIndex(t),n=this._realTimeGrid.getColumnDefinition(r);if(n)return n.getName()}return""},y.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){var e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},y.prototype.getColumnIndices=function(t){var e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){for(var r,n=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),o=[],a=0;a<t.length;a++)if("number"==typeof(r=t[a]))r>=0&&r<i&&o.push(r);else{var l=n.indexOf(r);-1!==l&&o.push(l)}return o}return this._realTimeGrid.getColumnIndices(t)},y.prototype.getColumnId=function(t){if("string"==typeof t)return t;var e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var r=this._realTimeGrid.getColumnDefinition(t);return r?r.getId():""},y.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},y.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},y.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},y.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},y.prototype._moveColumnById=function(t,e){var r=this._hosts,n=r?r.length:0;if(n){for(var i=0,o=0;o<n;++o)i|=r[o].moveColumnById(t,e);return!!i}return!1},y.prototype._reorderColumns=function(t,e){var r=this._hosts,n=r?r.length:0;if(n){for(var i=0,o=0;o<n;++o)i|=r[o].reorderColumns(t,e);return!!i}return!1},y.prototype._loadPlugin=function(t,e,r){return t||(t=e.getPlugin(r))||(t=e.loadPlugin(r))&&this._initializedGrid&&(t._initializedGrid=!0),t},y.prototype._requestPlugin=function(t,e,r){return this._initializedGrid?y.requestPlugin(t,e,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},y.requestPlugin=function(t,e,r,n,i){var a=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(a=t),l&&(a=l.getCoreGrid(),n||i||(l.getModel?n=l:i=l))}if(!a)return Promise.reject("Cannot find grid element");var s=a.getPlugin(e);if(s)return Promise.resolve(s);var u=new o;return setTimeout(y._onPluginRequested.bind(null,{grid:a,pluginRef:e,compositeGrid:n,realTimeGrid:i,config:r,deferred:u}),10),u.promise},y._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var r=e.getPlugin(t.pluginRef);if(r)return t.deferred.resolve(r);var n=!1;return t.pluginRef.beforeInit&&(n=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(r=e.loadPlugin(t.pluginRef,t.config))?(!n&&r.beforeInit&&(n=!0,r.beforeInit(e.getElement(),t.config)),r.setGridWrapper&&(t.compositeGrid?r.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&r.setGridWrapper("realtimegrid",t.realTimeGrid)),r.afterInit&&r.afterInit(),t.deferred.resolve(r)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},y.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},y.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},y.prototype._getColumnOption=function(t,e,r){var n=this._getColumnData(t,r);return n?n[e]:null},y.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var r=e.getColumnData(t);return r||(r=e.setColumnData(t,{})),r},y.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},y.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},y.prototype._getRow=function(t,e){return D(t.getRowDataAt(e))},y.prototype._getData=function(t,e,r){var n=this._getRow(t,e);return n?n[r]:void 0},y.prototype._setData=function(t,e,r,n){if(this._realTimeGrid){var i=C(t,e);i&&i.setData(r,n)}else"number"==typeof e?t.setDataAt(e,r,n):t.setData(e,r,n)},y.prototype._setRowData=function(t,e,r){if(this._realTimeGrid){var n=C(t,e);n&&n.setRowData(r)}else"number"==typeof e?t.setRowDataAt(e,r):t.setRowData(e,r)},y.prototype._setStaticData=function(t,e,r,n){if(this._realTimeGrid){var i=C(t,e);i&&i.setStaticData(r,n)}else this._setData(t,e,r,n)},y.prototype._setColumnData=function(t,e,r,n){if(e){var i=Array.isArray(n)?n:t.getAllRowIds(!0),o=i?i.length:0;if(o)if(1!==o){var a=Array.isArray(r)?r:i.map((function(){return r}));if(this._realTimeGrid){for(var l=0;l<o;++l){var s=t.getRowData(i[l]);if(s){var u=s.ROW_DEF;u&&(u.getRowData()[e]=a[l])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,a,i)}else this._setData(t,i[0],e,Array.isArray(r)?r[0]:r)}},y.prototype._activateColumnRenderer=function(t,e,r){if(null!=t){var n=this._realTimeGrid;n?n.activateColumnRenderer(t,e,r):"function"==typeof r?this._hosts[0].setColumnDataBindingHandler(t,r):this._hosts[0].setColumnDataBindingHandler(t,null)}};var v=function(){},b={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};y.prototype._mockMouseEvent=function(t,e,r){null==t&&(t=0),null==e&&(e=0);var n=r||{};if(n.preventDefault=v,n.stopPropagation=v,t>=0&&e>=0){var i=this._activeGrid||this._hosts[0],o=i?i.getCell(n.sectionType||"content",t,e):null;n.target=o?o.getElement():null}return n},y.prototype._mockKeyboardEvent=function(t,e){var r=e||{};if(r.preventDefault=v,r.stopPropagation=v,"string"==typeof t){var n=b[t.toLowerCase()]||0;t=n||t.charCodeAt(0)}return r.keyCode=t,r},y._staticStyles={},y._themeLoaders={},y._themeLoadSuccess=function(t,e){var r=this.getName(),n=y._staticStyles[r]=t(e);this.applyStyles(n,r)},y.prototype.applyStaticStyles=function(t){var e=this.getName(),r=y._staticStyles[e];r?this.applyStyles(r,e):t&&(y._themeLoaders[e]||(y._themeLoaders[e]=m.getThemeColors()),y._themeLoaders[e].then(y._themeLoadSuccess.bind(this,t)))},y.prototype.applyStyles=function(t,e,r){e||(e=this.getName());var n,i,o="_style"+e,a=this._hosts,l=a.length;if(l)if(r)for(n=0;n<l;n++)i=a[n],this.revokeStyles(i,e),i[o]=s(t,i.getElement());else for(n=0;n<l;n++)(i=a[n])[o]||(s(t,i.getElement()),i[o]=!0)},y.prototype.revokeStyles=function(t,e){if(t&&e){var r=t[e="_style"+e];r&&1===r.nodeType&&(r.parentNode.removeChild(r),t[e]=null)}};var C=function(t,e){var r="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return r&&r.ROW_DEF||null},T=function(t){return t},x=function(t){return t?t.ROW_DEF.getRowData():null},D=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},w=function(t){if(t>(0|t)){var e=t+"",r=e.indexOf("."),n=e.slice(r+1)+"00";return+(e.slice(0,r)+n.slice(0,2)+"."+n.slice(2))}return 100*t},S=function(t){this.format=this.format=this.format.bind(this),this.init(t)};S._denominator=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],S._zeroes=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000"],S.prototype._precision=2,S.prototype._sepChar=",",S.prototype._percentChar=" %",S.prototype._precisionEnabled=!1,S.prototype._separatorEnabled=!1,S.prototype._percentSignEnabled=!1,S.prototype._percentFormatEnabled=!1,S.prototype._plusSignEnabled=!1,S.prototype._multiplyBy100Enabled=!1,S.prototype._scaler="",S.prototype.init=function(t){if(t){var e=t.formatType||t.type,r=t.precisionEnabled;this._precisionEnabled=null==r||""===r||!!r,null!=(r=t.decimalPlaces)&&""!==r&&(this._precision="number"==typeof r?r:2),null!=(r=t.plusSign)&&""!==r&&(this._plusSignEnabled=!!r),null!=(r=t.separator)&&""!==r&&(this._separatorEnabled=!!r),this.enableMillionScaling(!1),"scaled"!==e&&"scaledvalue"!==e||(null!=(r=t.scalingUnit)&&""!==r?r&&"string"==typeof r&&("b"==(r=r.charAt(0).toLowerCase())?this.enableBillionScaling():"m"==r&&this.enableMillionScaling()):this.enableMillionScaling()),"percent"===e?(r=t.percentSign,this._percentSignEnabled=null!=r&&""!==r&&!!r,(null!=(r=t.multiplyBy100)&&""!==r||null!=(r=t.mutiplyBy100)&&""!==r)&&(this._multiplyBy100Enabled=!!r)):this._percentSignEnabled=this._multiplyBy100Enabled=!1}},S.prototype.resetToDefaults=function(){this._precisionEnabled=!1,this._precision=2,this._plusSignEnabled=!1,this._separatorEnabled=!1,this._percentSignEnabled=!1,this._scaler="",this._multiplyBy100Enabled=!1},S.padDecimalPartWithZeroes=function(t,e){var r=t.lastIndexOf(".");if(r>=0){var n=t.length-r-1;n<e&&(t+=S._zeroes[e-n])}else t+="."+S._zeroes[e];return t},S.multiplyByHundred=function(t){return t<0?-w(-t):w(t)},S.prototype.getOptions=function(t){t||(t={});var e=t.formatType;if(!0!==this._precisionEnabled&&(t.precisionEnabled=this._precisionEnabled),2!==this._precision&&(t.decimalPlaces=this._precision),!1!==this._plusSignEnabled&&(t.plusSign=this._plusSignEnabled),!1!==this._separatorEnabled&&(t.separator=this._separatorEnabled),"scaled"===e||"scaledvalue"===e){var r="";"b"==this._scaler&&(r="billion",t.scalingUnit=r)}return"percent"===e&&(!1!==this._percentSignEnabled&&(t.percentSign=this._percentSignEnabled),!1!==this._multiplyBy100Enabled&&(t.multiplyBy100=this._multiplyBy100Enabled)),t},S.prototype.format=function(t){if(!t&&0!==t)return"";if("number"!=typeof t&&(t=Number(t))!=t)return"";var e,r;t>=0?(e=t,r=this._plusSignEnabled?"+":""):(e=-t,r="-");var n=this._percentFormatEnabled?"":this._scaler;this._multiplyBy100Enabled&&(this._precisionEnabled||n?e*=100:e=w(e));var i,o=e;if(n&&("b"===n&&e<1e9&&(n="m"),"m"===n?e>=1e6?e/=1e6:e>=1e3&&(e/=1e3):"b"===n&&(e/=1e9)),this._precisionEnabled)if(this._precision>0){var a=S._denominator[this._precision];e=Math.round(e*a)/a}else e=Math.round(e);else n&&(e=Math.round(100*e)/100);e>0?i=e>=1e-6?r+e:r+"0.000000"+(i=1e7*e/10+"").substr(2):i="0";if(this._separatorEnabled&&e>=1e3){var l=i.split(".");i=l[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),l.length>1&&(i+="."+l[1])}return(this._precisionEnabled||n)&&this._precision>0&&(i=S.padDecimalPartWithZeroes(i,this._precision)),n&&("m"===n?o>=1e6?i+="M":o>=1e3&&(i+="K"):"b"===n&&(i+="B")),(this._percentSignEnabled||this._percentFormatEnabled)&&(i+=this._percentChar),i},S.prototype.enableDefaultFormat=function(){var t=this;t._precisionEnabled=t._separatorEnabled=t._percentSignEnabled=!1,t._percentFormatEnabled=t._plusSignEnabled=t._multiplyBy100Enabled=!1,t._scaler=""},S.prototype.enablePrecision=function(t){this._precisionEnabled=!1!==t},S.prototype.enableSeparator=function(t){this._separatorEnabled=!1!==t},S.prototype.enablePercentSign=function(t){this._percentSignEnabled=!1!==t},S.prototype.enablePercentFormat=function(t){this._percentFormatEnabled=!1!==t},S.prototype.enablePlusSign=function(t){this._plusSignEnabled=!1!==t},S.prototype.enableMultiplyBy100=function(t){this._multiplyBy100Enabled=!1!==t},S.prototype.enableMillionScaling=function(t){this._scaler=!1!==t?"m":""},S.prototype.enableBillionScaling=function(t){this._scaler=!1!==t?"b":""},S.prototype.isDefaultFormatEnabled=function(){return!(this._precisionEnabled||this._separatorEnabled||this._percentSignEnabled||this._scaler||this._percentFormatEnabled)},S.prototype.isPrecisionEnabled=function(){return this._precisionEnabled},S.prototype.isSeparatorEnabled=function(){return this._separatorEnabled},S.prototype.isPercentSignEnabled=function(){return this._percentSignEnabled},S.prototype.isPercentFormatEnabled=function(){return this._percentFormatEnabled},S.prototype.isPlusSignEnabled=function(){return this._plusSignEnabled},S.prototype.isMultiplyBy100Enabled=function(){return this._multiplyBy100Enabled},S.prototype.isMillionScalingEnabled=function(){return"m"===this._scaler},S.prototype.isBillionScalingEnabled=function(){return"b"===this._scaler},S.prototype.getPrecision=function(){return this._precision},S.prototype.setPrecision=function(t){this._precision=t<S._denominator.length?t:S._denominator.length-1},S.prototype.setSeparatorCharacter=function(t){this._sepChar=t},S.prototype.setPercentSignCharacter=function(t){this._percentChar=t};var E={en:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",am:"am",AM:"AM",pm:"pm",PM:"PM"},de:{sun:"So",mon:"Mo",tue:"Di",wed:"Mi",thu:"Do",fri:"Fr",sat:"Sa",Sunday:"Sonntag",Monday:"Montag",Tuesday:"Dienstag",Wednesday:"Mittwoch",Thursday:"Donnerstag",Friday:"Freitag",Saturday:"Samstag",jan:"Jan",feb:"Feb",mar:"Mrz",apr:"Apr",may:"Mai",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Okt",nov:"Nov",dec:"Dez",January:"Januar",February:"Februar",March:"März",April:"April",May:"Mai",June:"Juni",July:"Juli",August:"August",September:"September",October:"Oktober",November:"November",December:"Dezember",am:"am",AM:"AM",pm:"pm",PM:"PM"},ja:{sun:"日",mon:"月",tue:"火",wed:"水",thu:"木",fri:"金",sat:"土",Sunday:"日曜日",Monday:"月曜日",Tuesday:"火曜日",Wednesday:"水曜日",Thursday:"木曜日",Friday:"金曜日",Saturday:"土曜日",jan:"1月",feb:"2月",mar:"3月",apr:"4月",may:"5月",jun:"6月",jul:"7月",aug:"8月",sep:"9月",oct:"10月",nov:"11月",dec:"12月",January:"1月",February:"2月",March:"3月",April:"4月",May:"5月",June:"6月",July:"7月",August:"8月",September:"9月",October:"10月",November:"11月",December:"12月",am:"午前",AM:"午前",pm:"午後",PM:"午後"},zh:{sun:"周日",mon:"周一",tue:"周二",wed:"周三",thu:"周四",fri:"周五",sat:"周六",Sunday:"星期日",Monday:"星期一",Tuesday:"星期二",Wednesday:"星期三",Thursday:"星期四",Friday:"星期五",Saturday:"星期六",jan:"1月",feb:"2月",mar:"3月",apr:"4月",may:"5月",jun:"6月",jul:"7月",aug:"8月",sep:"9月",oct:"10月",nov:"11月",dec:"12月",January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月",am:"上午",AM:"上午",pm:"下午",PM:"下午"},"zh-Hant":{sun:"週日",mon:"週一",tue:"週二",wed:"週三",thu:"週四",fri:"週五",sat:"週六",Sunday:"星期日",Monday:"星期一",Tuesday:"星期二",Wednesday:"星期三",Thursday:"星期四",Friday:"星期五",Saturday:"星期六",jan:"1月",feb:"2月",mar:"3月",apr:"4月",may:"5月",jun:"6月",jul:"7月",aug:"8月",sep:"9月",oct:"10月",nov:"11月",dec:"12月",January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月",am:"上午",AM:"上午",pm:"下午",PM:"下午"}},F=(new Date(NaN),Date.UTC(1900,0,1)),M=Date.UTC(1900,2,1),A=["sun","mon","tue","wed","thu","fri","sat"],N=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],P=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],I=["January","February","March","April","May","June","July","August","September","October","November","December"],G=function(t){return t>9?""+t:"0"+t},L={D:function(t,e){return""+t.getDate()},DD:function(t,e){return G(t.getDate())},DDD:function(t,e){return e[A[t.getDay()]]},D_:function(t,e){return e[N[t.getDay()]]},M:function(t,e){return""+(t.getMonth()+1)},MM:function(t,e){return G(t.getMonth()+1)},MMM:function(t,e){return e[P[t.getMonth()]]},M_:function(t,e){return e[I[t.getMonth()]]},YY:function(t,e){return(""+t.getFullYear()).substr(-2)},Y_:function(t,e){return""+t.getFullYear()},H:function(t,e){return""+t.getHours()},H_:function(t,e){return G(t.getHours())},h:function(t,e){var r=t.getHours()%12;return 0===r?"12":""+r},h_:function(t,e){var r=t.getHours()%12;return G(r=0===r?12:r)},m:function(t,e){return""+t.getMinutes()},m_:function(t,e){return G(t.getMinutes())},s:function(t,e){return""+t.getSeconds()},s_:function(t,e){return G(t.getSeconds())},S:function(t,e){return~~(t.getMilliseconds()/100)},SS:function(t,e){return G(~~(t.getMilliseconds()/10))},S_:function(t,e){return(r=t.getMilliseconds())>99?""+r:r>9?"0"+r:"00"+r;var r},A:function(t,e){return t.getHours()<12?e.AM:e.PM},a:function(t,e){return t.getHours()<12?e.am:e.pm}},R={_dateTimePattern:"M/D/YY h:mm A",_localeSetting:"en",_activeLocaleMap:null,_activeInput:null,setDateTimePattern:function(t){R._dateTimePattern=t||"M/D/YY h:mm A"},setLocale:function(t){var e=g.toLangString(t);R._localeSetting=E[e]?e:"en"},format:function(t,e,r){var n=null,i="",o=!(!r||"LOCAL"!==r.toUpperCase());if("number"==typeof t)t>1e8?n=new Date(t):(n=R.fromDateNumber(t),o=!0);else if(t instanceof Date)n=new Date(t);else{var a=(i=t+"").match(/^\d{4}(-\d{2}(-\d{2}(T\d{2}\:\d{2}\:\d{2})?)?)?$/);i=i.replace(/\-/g,"/"),a&&(i=i.replace(/T/g," ")),n=new Date(i)}return R.isInvalidDate(n)?t||"":(o||n.setTime(n.getTime()+6e4*n.getTimezoneOffset()),R.formatDateObject(n,e))},formatDateObject:function(t,e){if(R.isInvalidDate(t))return"";e||(e=R._dateTimePattern),R._activeInput=t,R._activeLocaleMap=E[R._localeSetting]||DateTimeLocale.en;var r=e.replace(/D+|M+|Y+|H+|S+|A+|d+|m+|y+|h+|s+|a+|\[[^\]]*\]+/g,R._parseDatePattern);return R._activeInput=null,r},_lowerCaseDatePatterns:{d:!0,y:!0},_parseDatePattern:function(t){var e=t?t.charAt(0):"";if("["===e)return t.substring(1,t.length-1);var r=L[t];if(!r){var n=t;R._lowerCaseDatePatterns[e]&&(n=t.toUpperCase(),e=e.toUpperCase(),r=L[n]),r||(r=L[n=e+"_"])}return r?r(R._activeInput,R._activeLocaleMap):t},isValidDate:function(t){if(t&&t.getTime){var e=t.getTime();return e==e}return!1},isInvalidDate:function(t){if(t&&t.getTime){var e=t.getTime();return e!=e}return!0},fromDateNumber:function(t){var e=R.dateNumberToMs(t);if(e==e){var r=R.timeNumberToMs(t);return new Date(e+r)}return new Date(NaN)},dateNumberToMs:function(t){if(!(t=Math.floor(+t))||t<=0||60===t)return NaN;var e=t-25569;return t<60&&e++,864e5*e},timeNumberToMs:function(t){"number"!=typeof t&&(t=+t);var e=t-Math.floor(t);return e?(e<0&&(e=-e),1e3*Math.round(86400*e)):0},toDateObject:function(t){var e=null;if(t instanceof Date)e=t;else if("number"==typeof t)e=t>3e9||t<=0?new Date(t):t>1e5?new Date(1e3*t):R.fromDateNumber(t);else if(t){var r=t+"",n=r.match(/^\d{4}(-\d{2}(-\d{2}(T\d{2}\:\d{2}\:\d{2})?)?)?$/);r=r.replace(/\-/g,"/"),n&&(r=r.replace(/T/g," ")),e=new Date(r)}else e=new Date(NaN);return e},toDateNumber:function(t){return R._millisecondToDateNumber(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},toTimeNumber:function(t){return Date.UTC(1970,0,1,t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())/864e5},_millisecondToDateNumber:function(t){if((t=+t)!=t||t<F)return NaN;var e=t/864e5+25569;return t<M&&e--,e},toYYYYMMDD:function(t){var e=t?t.toJSON():"";return e?e.substr(0,10):""}};const O={DATE:!0,TIME:!0,DATETIME:!0,"DATE-TIME":!0,"TIME-DATE":!0};var V=function(t){return null!=t&&O[t.toUpperCase()]?"datetime":""},k=function(t){this.format=this.format=this.format.bind(this),k._startMidnightInterval(),this.init(t)};k.prototype._field="",k.prototype._formattedField="",k.prototype._combinedField="",k.prototype._formatType="number",k.prototype._userFormatType="",k.prototype._mixedTypeInput=!1,k.prototype._dateTimeFormat="",k.prototype._idnSource="",k.prototype._timeZone="GMT",k.prototype._df=null,k.prototype._nf=null,k._lastMidnight=null,k._updateMidnight=function(){k._lastMidnight=new Date,k._lastMidnight.setUTCHours(0,0,0,0)},k._startMidnightInterval=function(){if(!k._lastMidnight){k._updateMidnight();var t=k._lastMidnight.valueOf()+86405e3-(new Date).valueOf();setTimeout(k._setMidnightInterval,t)}},k._setMidnightInterval=function(){setInterval(k._updateMidnight,864e5)},k.prototype.init=function(t){if(t){var e=t.field;e&&this.setField(e);var r=t.formatType||t.type,n=t.fieldDataType;this._userFormatType=r||n,(e=(r=V(this._userFormatType))||this._userFormatType)&&this.setFormatType(e);var i=t.dateTimeFormat,o=t.useUTCTime;null==o&&null==i||this.setDateTimeMeta(i,o,t.idnSource?"idn":""),"datetime"===this._formatType&&(this._df||(this._df=R.format))}},k.prototype.getOptions=function(t){return t||(t={}),t.field=this._field,t.formatType=this._userFormatType?this._userFormatType:this._formatType,"datetime"==V(t.formatType)&&(this._dateTimeFormat&&"MM/DD/YYYY"!==this._dateTimeFormat&&(t.dateTimeFormat=this._dateTimeFormat),"GMT"!==this._timeZone&&(t.useUTCTime=!1)),t},k.prototype.getField=function(){return this._field},k.prototype.clone=function(){var t=new k;return t._field=this._field,t._formattedField=this._formattedField,t._combinedField=this._combinedField,t._formatType=this._formatType,t._mixedTypeInput=this._mixedTypeInput,t._dateTimeFormat=this._dateTimeFormat,t._idnSource=this._idnSource,t._timeZone=this._timeZone,t._df=this._df,t._nf=this._nf,t},k.prototype.setFormatType=function(t){this._formatType=t.toLowerCase(),this._mixedTypeInput="freetext"==this._formatType||"formula"==this._formatType},k.prototype.setField=function(t,e,r){this._field=t,this._formattedField=r||t+"_FORMATTED",this._combinedField=e||""},k.prototype.setDateTimeMeta=function(t,e,r,n){this._dateTimeFormat=t||"",this._timeZone=!1!==e?"GMT":"LOCAL",this._idnSource=r&&"idn"==r.toLowerCase()?"idn":"",R.setLocale(n)},k.prototype.setDateFormatter=function(t){this._df=t},k.prototype.setNumberFormatter=function(t){t?"function"==typeof t?this._nf=t:"function"==typeof t.format&&(this._nf=t.format):this._nf=null},k.prototype.getProperties=function(){var t={field:this._field,formattedField:this._formattedField,combinedField:this._combinedField,type:this._formatType};return"datetime"===this._formatType&&(t.dateTimeFormat=this._dateTimeFormat,t.timeZone=this._timeZone,t.idnSource=this._idnSource),t},k.prototype.format=function(t){return!t||"object"!=typeof t||t instanceof Date?this._format(t,null):this.formatRowData(t)},k.prototype.formatRowData=function(t){return t?this._format(t[this._field],t):""},k.prototype.formatValue=function(t){return this._format(t,null)},k.prototype._format=function(t,e){if(!t&&0!==t)return"";if("datetime"==this._formatType)return this._formatDateTime(t,e);if(this._mixedTypeInput&&"number"!=typeof t)return"string"!=typeof t?t+"":t;if(this._nf){if("number"!=typeof t){var r=+t;return r==r?this._nf(r):t+""}return this._nf(t)}return this._mixedTypeInput?"formula"==this._formatType?Math.round(1e6*t)/1e6+"":t+"":this._formatNumber(t,e)},k.prototype._formatDateTime=function(t,e){if(!this._df)return"";if(this._idnSource){var r=+t;if(r!=r)return t;var n=e&&this._combinedField?+e[this._combinedField]:NaN;if(n==n)r=n;else if(r<86400)r+=k._lastMidnight.valueOf()/1e3;else{if("NEWS_TIME"!==this._field&&"LOCAL"===this._timeZone)r+=60*new Date(1e3*r).getTimezoneOffset()}t=new Date(1e3*r)}return this._df(t,this._dateTimeFormat||"MM/DD/YYYY",this._timeZone)},k.prototype._formatNumber=function(t,e){var r;if(e){if(!(r=e[this._formattedField])){if(null===r&&0===t)return"";r=t}}else r=t;if("number"==this._formatType){if("string"==typeof r&&r.indexOf(",")>=0)return r.replace(/,/g,"")}else if("percent"==this._formatType)if("string"==typeof r){if(r.lastIndexOf("%")<0&&0!=+r)return r+" %"}else if("number"==typeof r)return r==r?r+" %":"#INVALID";return r||(0===r?"0":"")};var B=function(){this._onSectionBinding=this._onSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._hosts=[]};n.inherits(B,y),B.prototype._noFormatting=!0,B.prototype._disabled=!1,B.prototype._idnSource="",B.prototype.getName=function(){return"TextFormattingPlugin"},B.prototype.hasMultiTableSupport=function(){return!0},B.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.listen("postSectionDataBinding",this._onSectionBinding),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnAdded),this.config(e)))},B.prototype._afterInit=function(){var t=this._realTimeGrid;t&&t.setDateTimeUtil&&t.setDateTimeUtil(R)},B.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("postSectionDataBinding",this._onSectionBinding),t.unlisten("columnAdded",this._onColumnAdded),this._hosts.splice(e,1))},B.prototype.config=function(t){if(t){this._idnSource=t.idnSource?"idn":"";var e=t.autoTextFormatting;null!=e&&(this._disabled=!e);var r=t.columns;if(r){for(var n=0,i=r.length,o=0;o<i;++o)n|=this._setColumnFormat(o,r[o]);var a=t.lang;if(a&&R.setLocale(a),n)for(i=this._hosts.length,o=0;o<i;++o)this._hosts[o].requestRowRefresh()}}},B.prototype.getConfigObject=function(t){var e=t||{};this._idnSource&&(e.idnSource=!0),this._disabled&&(e.autoTextFormatting=!1);var r=e.columns;r||(r=e.columns=[]);for(var n=this.getColumnCount(),i=0;i<n;++i){var o=r[i];o||(o=r[i]={}),this.getColumnFormatOptions(i,o)}return e},B.prototype.setColumnFormat=function(t,e){if(this._setColumnFormat(t,e))for(var r=this._hosts.length,n=0;n<r;++n)this._hosts[n].requestRowRefresh()},B.prototype._setColumnFormat=function(t,e){var r,n=this._newColumnData(t),i=e,o=null;if(i){r=i.field;var a=i.autoTextFormatting;null!=a&&(n.autoTextFormatting=!!a);var l=i.formatLogic;"function"==typeof l&&(n.formatLogic=l),(o=i.formatType||i.type)&&"object"==typeof o?(o.field&&(r=o.field),null!=(a=o.autoTextFormatting)&&(n.autoTextFormatting=!!a),"function"==typeof(l=o.formatLogic)&&(n.formatLogic=l)):o=i}var s=n.formatOptions;if(n.formatOptions=null,n.textFormatter=null,n.numberFormatter=null,!o)return!!s;var u=o.formatType||o.type;if(!u||"string"!=typeof u)return!!s;if("general"===(u=u.toLowerCase()))return!!s;r||(r=this._getField(t))||s&&(r=s.field),this._noFormatting=!1,o.field=r,o.formatType=u,o.formattedField||(o.formattedField=r+"_FORMATTED"),null==o.idnSource&&(o.idnSource=this._idnSource);var d=new k(o),p=null;if("number"==u||"scaled"==u||"percent"==u){var c=o.decimalPlaces,f=o.precisionEnabled;if("number"==typeof c?(n.precision=c,null==f&&(f=!0)):1==c?(n.precision=null,c=2,f=!0):!1===c?(n.precision=null,c=0,f=!1):(n.precision=null,c=2,null==f&&(f=!0)),o.decimalPlaces=c,o.precisionEnabled=f,"percent"===u){var h=o.percentSign;null==h?o.percentSign=!0:n.percentSign=h}p=new S(o),d.setNumberFormatter(p.format)}return n.formatOptions=o,n.textFormatter=d,n.numberFormatter=p,!0},B.prototype.getColumnFormatOptions=function(t,e){e||(e={});var r=this._getColumnData(t);if(r){var n=r.formatOptions,i=r.textFormatter,o=r.numberFormatter;if(null!=r.autoTextFormatting&&(e.autoTextFormatting=r.autoTextFormatting),n&&(e.formatType=n.formatType||n.type),i&&i.getOptions(e),o){o.getOptions(e);var a=r.precision;null!=a?e.decimalPlaces=a:delete e.decimalPlaces,"percent"===e.formatType&&null!=r.percentSign&&(e.percentSign=r.percentSign)}}return e},B.prototype._onColumnAdded=function(t){t.context&&this._setColumnFormat(t.colIndex,t.context)},B._hasAutoFormatting=function(t){return!!t&&(!1!==t.autoTextFormatting&&!t.percentBar&&!t.rangeBar)},B.prototype._onSectionBinding=function(t){if(!this._noFormatting&&!this._disabled)for(var e=t.section,r=t.dataRows,n=e.getColumnCount(),i=t.fromRowIndex,o=t.toRowIndex,a={},l=0;l<n;++l){var s=this._getColumnData(l);if(B._hasAutoFormatting(s))if(s.formatOptions){var u=s.textFormatter,d=s.formatLogic;a.colIndex=l,a.field=u.getField(),a.format=u.format;for(var p=i;p<o;++p){var c=e.getCell(l,p,!1);if(c){var f=this._getRowData(r[p]);a.formattedText=B._getFormattedText(u,f,c),d?(a.rowIndex=p,a.cell=c,a.rowData=f,d(a)):c.setTextContent(a.formattedText)}}}}},B._getFormattedText=function(t,e,r){if(e)return t.formatRowData(e);var n=r.getContent();return n?t.formatValue(n.textContent):""},B.prototype.getFormatter=function(t){return this._getColumnOption(t,"textFormatter")||null},B.prototype.formatText=function(t,e){if(null!=e){var r=this.getFormatter(t);return r?r.formatValue(e):e+""}return""},B.prototype.openDialog=function(t){if(this._formatDialog||(this._formatDialog=document.createElement("tr-grid-format-dialog"),this._formatDialog.addEventListener("data-change",this._onFormatDialogDataChange.bind(this))),"tr-grid-format-dialog"===this._formatDialog.is){var e=this.getColumnFormatOptions(t);this._formatDialog.data={valueFormatTab:e},this._formatDialog.colIndex=t,this._formatDialog.show()}},B.prototype._onFormatDialogDataChange=function(t){var e=this._formatDialog.colIndex,r=t.detail.data.valueFormatTab;this.setColumnFormat(e,r),r.colIndex=e,this._dispatch("formatChanged",r)};var j={create:function(t,e){var r=document.createElement(t);return e&&(r.className=e),r},div:function(t){return j.create("div",t)},text:function(t,e){var r=j.create("span",e);return(t||0===t)&&(r.textContent=t),r},appendChild:function(t,e){if(!t)return null;var r,n;Array.isArray(arguments[1])?(n=arguments[1],r=0):(n=arguments,r=1);for(var i=n.length;r<i;)t.appendChild(n[r]),++r;return t},buildTree:function(t,e){if(!t)return null;for(var r=arguments,n=r.length,i=1;i<n;++i){var o,a=r[i];if(a)Array.isArray(a)?o=j.buildTree.apply(null,a):1===a.nodeType&&(o=a),o&&t.appendChild(o)}return t},removeParent:function(t){if(!t)return null;var e=t.parentNode;return e&&e.removeChild(t),e},setParent:function(t,e){return t?e?(e.appendChild(t),e):j.removeParent(t):null},removeChildren:function(t,e){if(t){var r=t.childNodes.length;for((null==e||e>r)&&(e=r);--e>=0;)t.removeChild(t.lastChild)}},setContent:function(t,e){if(t)if(e||0===e){var r=e.nodeType;1===r||3===r?e!==t.lastChild&&(j.removeChildren(t),t.appendChild(e)):Array.isArray(e)?(j.removeChildren(t),j.appendChild(t,e)):t.textContent=e}else j.removeChildren(t)},toggleAttribute:function(t,e,r){r?t.setAttribute(e,"string"==typeof r?r:""):null==r?t.hasAttribute(e)?t.removeAttribute(e):t.setAttribute(e,""):t.removeAttribute(e)},toggleClass:function(t,e,r){r?t.classList.add(e):null==r?t.classList.contains(e)?t.classList.remove(e):t.classList.add(e):t.classList.remove(e)},addClasses:function(t,e){if(t)for(var r=Array.isArray(e)?e:arguments,n=r.length,i=0;i<n;++i){var o=r[i];o&&"string"==typeof o&&t.classList.add(o)}},removeClasses:function(t,e){if(t)for(var r=Array.isArray(e)?e:arguments,n=r.length,i=0;i<n;++i){var o=r[i];o&&"string"==typeof o&&t.classList.remove(o)}},preventDefault:function(t){t.preventDefault(),t.stopPropagation()},stopPropagation:function(t){t.stopPropagation()},getClientPosition:function(t,e){var r=e||{x:0,y:0};if(t.getBoundingClientRect){var n=t.getBoundingClientRect();r.x=n.left,r.y=n.top}else r.x=t.clientX,r.y=t.clientY;return r},getRelativePosition:function(t,e,r){r=j.getClientPosition(t,r);var n=j.getClientPosition(e);return r.x-=n.x,r.y-=n.y,r},closestElement:function(t,e){for(var r=t;r;){if(r.classList&&r.classList.contains(e))return r;r=r.parentNode||r.host}return null},closestTagName:function(t,e){for(var r=t;r;){if(r.tagName&&r.tagName==e)return r;r=r.parentNode||r.host}return null}},H={l:"l",c:"c",r:"r",L:"l",C:"c",R:"r"},W=function(t){return t&&H[t.charAt(0)]||""},z=function(t,e){this._topNode=t||j.div(),this._topNode._percentBar=this,this._topNode.classList.add("tr-percent-bar"),this._bar=j.div(),this._track=j.div(),this._track.appendChild(this._bar),this._txt=j.create("span");var r="l";if(e){e.alignment&&(r=e.alignment),null!=e.movementColor&&this.useMovementColor(!!e.movementColor),null!=e.barColor&&this.setBarColor(e.barColor);var n=0;null!=e.textWidth&&(n=1,this.setTextWidth(e.textWidth)),null!=e.textHidden&&(n|=this.hideText(e.textHidden)),null!=e.zeroValueHidden&&(n|=this.hideZeroValue(e.zeroValueHidden)),n&&this.isTextHidden()&&(this._textInDoc=!1,this._topNode.appendChild(this._track))}this.setAlignment(r)};z.prototype._topNode=null,z.prototype._track=null,z.prototype._bar=null,z.prototype._txt=null,z.prototype._textWidth="56px",z.prototype._textHidden=!1,z.prototype._zeroValueHidden=!1,z.prototype._textInDoc=!0,z.prototype._alignment,z.prototype._absValue,z.prototype._maxValue=100,z.prototype._sign=1,z.prototype._dirtySign=!0,z.prototype._invalid=!1,z.prototype._movementColor=!0,z.prototype._barColor="",z.prototype._tooltipEnabled=!0,z._styles=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(a).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,l)}return""}([".tr-percent-bar",["position: relative;","text-align: left;","overflow: hidden;","white-space: nowrap;"],".tr-percent-bar>div",["position: relative;","display: inline-block;","height: 8px;","vertical-align: middle;"],".tr-percent-bar>div>div ",["position: absolute;","height: 100%;"],".tr-percent-bar>span",["display: inline-block;","vertical-align: middle;","box-sizing: border-box;","padding-left: 4px;","padding-right: 4px;","overflow: hidden;","max-width: 100%;"]]),z.injectCss=function(t){s(this._styles,t)},z.toAlignment=W,z.prototype.getElement=function(){return this._topNode},z.prototype.getValue=function(){return this._absValue*this._sign},z.prototype.getPercent=function(){return this._absValue/this._maxValue*this._sign},z.prototype.isInvalid=function(){return this._invalid},z.prototype._checkInvalidity=function(){var t=this._absValue!=this._absValue||!this._maxValue;return t!==this._invalid&&(this._invalid=t,this._topNode.style.display=t?"none":""),t},z.prototype.setValue=function(t,e,r){var n=this;t&&"number"!=typeof t&&(t=+t),t||0===t?t>=0?(n._absValue=t,n._dirtySign|=1!==n._sign,n._sign=1):(n._absValue=-t,n._dirtySign|=-1!==n._sign,n._sign=-1):n._absValue=NaN,null!=e&&e==e&&(n._maxValue=e>=0?e:-e),n._checkInvalidity()||(n._absValue>n._maxValue&&(n._absValue=n._maxValue),n._updateValue(!0,r))},z.prototype.setMax=function(t){t==t&&(this._maxValue=t>=0?t:-t,this._checkInvalidity()||(this._absValue>this._maxValue&&(this._absValue=this._maxValue),this._updateValue(!0)))},z.prototype.hideZeroValue=function(t){var e=!1!==t;return this._zeroValueHidden!==e&&(this._zeroValueHidden=e,this._alignment&&this._updateTextVisibility()&&this._updateTextWidth(),!0)},z.prototype.setText=function(t){this._invalid||(t||0===t?"string"!=typeof t&&(t+=""):t="",this._txt._prevText!==t&&(this._txt._prevText=t,this._txt.textContent=t,this._tooltipEnabled&&(t?this._topNode.setAttribute("title",t):this._topNode.removeAttribute("title"))))},z.prototype.hideText=function(t){var e=!1!==t;return this._textHidden!==e&&(this._textHidden=e,this._alignment&&this._updateTextVisibility()&&this._updateTextWidth(),!0)},z.prototype.isTextHidden=function(){return!(!this._textHidden&&"0px"!==this._textWidth)||!(!this._zeroValueHidden||this._absValue)},z.prototype._updateTextVisibility=function(){var t=!this.isTextHidden();return this._textInDoc!==t&&(this._textInDoc=t,t?this._reorderElements():j.removeParent(this._txt),!0)},z.prototype._updateTextWidth=function(){return"c"!==this._alignment&&(this._textInDoc?this._track.style.width="calc(100% - "+this._textWidth+")":this._track.style.width="100%",this._txt.style.width=this._textWidth,!0)},z.prototype.setTextWidth=function(t){var e="56px";"number"==typeof t?e=t>8?t+"px":"0px":"string"==typeof t&&t&&(e="0"!==t?t:"0px"),this._textWidth!==e&&(this._textWidth=e,this._alignment&&(this._updateTextVisibility(),this._updateTextWidth()))},z.prototype.setMaxTextLength=z.prototype.setTextWidth,z.prototype.getTextScrollWidth=function(){return this._txt.scrollWidth>this._txt.offsetWidth?this._txt.scrollWidth:NaN},z.prototype.getAlignment=function(){return this._alignment},z.prototype.setAlignment=function(t){t=W(t)||"l",this._alignment!==t&&(this._alignment=t,"c"===t?(this._track.style.width="50%",this._txt.style.width="50%"):(this._updateTextWidth(),this._txt.style.textAlign="right",this._track.style.left="",this._txt.style.transform="",this._bar.style.right="r"===t?"0":""),this._textInDoc&&this._reorderElements(),this._dirtySign=!0,this._updateValue(!1))},z.prototype._reorderElements=function(){"l"!==this._alignment?(this._topNode.appendChild(this._track),this._topNode.appendChild(this._txt)):(this._topNode.appendChild(this._txt),this._topNode.appendChild(this._track))},z.prototype.useMovementColor=function(t){var e=!1!==t;this._movementColor!==e&&(this._movementColor=e,this.updateBarColor())},z.prototype.setTrackColor=function(t){this._track.style.backgroundColor=t||""},z.prototype.setBarColor=function(t){var e=t||"";this._barColor!==e&&(this._barColor=e,this.updateBarColor())},z.prototype.enableTooltip=function(t){this._tooltipEnabled=!1!==t,this._tooltipEnabled||this._topNode.removeAttribute("title")},z.prototype._updateValue=function(t,e){var r=this;if(r._dirtySign&&(r._dirtySign=!1,"c"===r._alignment&&(r._sign>=0?(r._track.style.left="50%",r._bar.style.right="",r._txt.style.transform="translateX(-100%)",r._txt.style.textAlign="right"):(r._track.style.left="",r._bar.style.right="0",r._txt.style.transform="",r._txt.style.textAlign="left")),r._movementColor&&!r._barColor&&r.updateBarColor()),!1!==t){this._zeroValueHidden&&this._updateTextVisibility()&&this._updateTextWidth();var n=100!==r._maxValue?r._absValue/r._maxValue*100:r._absValue;r._bar.style.width=n+"%",null!=e?!1!==e&&r.setText(e):r.setText((n*r._sign*100|0)/100+"%")}},z.prototype.updateBarColor=function(){var t;if(t=this._barColor?this._barColor:this._movementColor?this._sign>=0?m.themeColors.up:m.themeColors.down:m.themeColors.trackColor){var e=this._bar.style;e.backgroundColor!==t&&(e.backgroundColor=t)}};!function(t,e){if(t&&e&&e.prototype.getName){var r=e.prototype.getName().replace(/Plugin$/,"");if(r){var n=t.tr;n||(n=t.tr={});var i=n.grid;i||(i=n.grid={}),i[r+"Plugin"]=e,n[r+"Extension"]=e}}}(window,B),window&&window.tr&&(window.tr.grid&&(window.tr.grid.NumberFormatter=S),window.tr.PercentBar=z)}]);