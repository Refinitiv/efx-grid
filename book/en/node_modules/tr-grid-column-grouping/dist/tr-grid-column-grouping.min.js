!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"b",(function(){return prettifyCss})),__webpack_require__.d(__webpack_exports__,"a",(function(){return injectCss}));var Util={post:function(t,e){return Util._post(t,e).then(Util.toJSON)},requestText:function(t,e){return Util._post(t,e,"text/plain").then(Util.toText)},requestByUrlEncoded:function(t,e){return Util._post(t,e,"application/x-www-form-urlencoded").then(Util.toJSON)},toJSON:function(t){return Util._logError(t)?Promise.reject(t):t.json()},toText:function(t){return Util._logError(t)?Promise.reject(t):t.text()},_logError:function(t){return!!(t&&t.status>=300)&&(console.log("Response "+t.status+": "+t.statusText),!0)},_post:function(t,e,r){var n={method:e?"POST":"GET",headers:{"Content-Type":r||"application/json"}};return e&&(n.body="string"==typeof e?e:JSON.stringify(e)),fetch(t,n)}},extendObject=function(t,e,r){if(!t)return null;if(!e||t===e)return t;var n;if(r)for(var i=r.length,o=0;o<i;++o)(n=r[o])&&extendProperty(t,e,n);else for(n in e)extendProperty(t,e,n);return t},cloneObject=function(t,e){return extendObject({},t,e)},arrayToObject=function(t,e){if(!Array.isArray(t))return t;if(!e)return null;var r=t;t={};for(var n=r.length,i=0;i<n;++i){var o=e[i];o&&void 0!==r[i]&&(t[o]=r[i])}return t},extendProperty=function(t,e,r){var n=e[r];if(null!=n){var i=t[r];Array.isArray(i)?t[r]=i.concat(n):Array.isArray(n)&&i?t[r]=n.concat(i):t[r]=n}},extendArrayProperty=function(t,e,r){var n=null;if(r){var i=t[e];n=i?Array.isArray(i)?i:t[e]=[i]:t[e]=[],Array.isArray(r)?r.length&&(r.length>1?Array.prototype.push.apply(n,r):n.push(r[0])):n.push(r)}return n},_bracketExp=new RegExp(/\[[^\[]*\]/g),parseCondition=function(expression){if(!expression)return null;if("string"!=typeof expression)return"function"==typeof expression?expression:null;for(var brackets=expression.match(_bracketExp),map={},fields=[],len=brackets?brackets.length:0,i=len;--i>=0;){var field=brackets[i];map[field]||(map[field]="f["+fields.length+"]",fields.push(field.substring(1,field.length-1)))}expression=expression.replace(_bracketExp,(function(t){return"rowData["+map[t]+"]"}));var finalExp="(function(f, rowData) { return ("+expression+"); })",fn=null;try{fn=eval(finalExp),fn=fn.bind(null,fields)}catch(t){console.log(t.message)}return fn||null},_encloseBracket=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},_indentBracketContent=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},prettifyCss=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(_encloseBracket).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,_indentBracketContent)}return""},getShadowRoot=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null},injectCss=function(t,e){if(!t)return null;var r=document.createElement("style");r.textContent="\n"+t+"\n";var n,i=getShadowRoot(e),o=!0;return i||(o=!1,i=document.head),o&&i.children&&i.children.length&&(n=i.children[0]),n?i.insertBefore(r,n):i.appendChild(r),r},isIE=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0},isMac=function(){return/Mac/.test(navigator.platform)},isTouchDevice=function(){return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints<256||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints<256)},nestedObjectToArray=function(t,e){for(var r in e||(e=[]),t){var n=t[r];"object"==typeof n?nestedObjectToArray(n,e):e.push(n)}return e},rgb2Hex=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var r="#",n=0;n<3;n++){var i=+e[n];i>=16||(r+="0"),r+=i?i.toString(16).toUpperCase():"0"}return r},prepareTSVContent=function(t){if(null==t)return"";var e="string"==typeof t?t:t.toString();return e.length?(e.indexOf("\n")>=0&&(e=e.replace(/[\r\n]/g," ")),e.indexOf("\t")>=0&&(e=e.replace(/\t/g," "))," "!==e.charAt(0)&&" "!==e.charAt(e.length-1)||(e=e.trim()),e):""},_unused_webpack_default_export=Util},function(t,e,r){"use strict";r.r(e);var n={inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,n){r||(r="constructor");for(var i=arguments.length,o=new Array(i),s=2;s<i;s++)o[s-2]=arguments[s];return e.prototype[r].apply(t,o)}}},i=function(){};i.prototype._events=null,i.prototype._listenerCount=0,i.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var r=this._events[t];r?r.indexOf(e)<0&&(r.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},i.prototype.removeEventListener=function(t,e){var r=this._events?this._events[t]:null;if(r){var n=r.indexOf(e);n>=0&&(r.splice(n,1),--this._listenerCount)}},i.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},i.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},i.prototype.getListener=function(t,e){if(t){var r=this._events?this._events[t]:null;if(r)return e||(e=0),r[e]||null}return null},i.prototype.addListener=function(t,e){var r=t?t[e]:null;"function"==typeof r&&this.addEventListener(e,r)},i.prototype._prepareEventArguments=function(t,e){return e},i.prototype._dispatch=function(t,e){var r=this._events?this._events[t]:null;if(r){e=this._prepareEventArguments(t,e);for(var n=r.length,i=0;i<n;++i)r[i](e)}};i.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var o=function(t,e,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=r&&(this._ctx=r),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};o.prototype.promise=null,o.prototype._resolve=null,o.prototype._reject=null,o.prototype._resolveHandler=null,o.prototype._rejectHandler=null,o.prototype._ctx=null,o.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},o.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},o.prototype._finally=function(){this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(){};n.inherits(s,i),s.prototype._hosts=null,s.prototype._compositeGrid=null,s.prototype._realTimeGrid=null,s.prototype._rowGetter=null,s.prototype._initializedGrid=!1,s.prototype.listen=s.prototype.addEventListener,s.prototype.unlisten=s.prototype.removeEventListener,s.prototype.afterInit=function(t,e,r){var n=null;r&&r.getCoreGrid&&(n=r.getCoreGrid()),n&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&n.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?l:u,this._afterInit())},s.prototype._afterInit=function(){},s.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},s.prototype.hasMultiTableSupport=function(){return!1},s.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},s.prototype.getName=function(){return"GridPlugin"},s.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var r=(e=t.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var n=this._hosts.length;--n>=0;){var i=this._hosts[n];if(i.getElement().contains(e))return i}return null},s.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},s.prototype.getGridApi=function(){return this._compositeGrid||this._realTimeGrid},s.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var r=this.getColumnIndex(t),n=this._realTimeGrid.getColumnDefinition(r);if(n)return n.getName()}return""},s.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(t);for(var e=this._realTimeGrid,r=e.getColumnCount(),n=0;n<r;++n){var i=e.getColumnDefinition(n);if(i&&i.getId()===t)return n}return-1},s.prototype.getColumnId=function(t){if("string"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var e=this._realTimeGrid.getColumnDefinition(t);return e?e.getId():""},s.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},s.prototype._loadPlugin=function(t,e,r){return t||(t=e.getPlugin(r))||(t=e.loadPlugin(r))&&this._initializedGrid&&(t._initializedGrid=!0),t},s.prototype._requestPlugin=function(t,e,r){return this._initializedGrid?s.requestPlugin(t,e,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},s.requestPlugin=function(t,e,r,n,i){var u=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(u=t),l&&(u=l.getCoreGrid(),n||i||(l.getModel?n=l:i=l))}if(!u)return Promise.reject("Cannot find grid element");var p=u.getPlugin(e);if(p)return Promise.resolve(p);var a=new o;return setTimeout(s._onPluginRequested.bind(null,{grid:u,pluginRef:e,compositeGrid:n,realTimeGrid:i,config:r,deferred:a}),10),a.promise},s._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var r=e.getPlugin(t.pluginRef);if(r)return t.deferred.resolve(r);var n=!1;return t.pluginRef.beforeInit&&(n=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(r=e.loadPlugin(t.pluginRef,t.config))?(!n&&r.beforeInit&&(n=!0,r.beforeInit(e.getElement(),t.config)),r.setGridWrapper&&(t.compositeGrid?r.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&r.setGridWrapper("realtimegrid",t.realTimeGrid)),r.afterInit&&r.afterInit(),t.deferred.resolve(r)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},s.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},s.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},s.prototype._getColumnOption=function(t,e,r){var n=this._getColumnData(t,r);return n?n[e]:null},s.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var r=e.getColumnData(t);return r||(r=e.setColumnData(t,{})),r},s.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},s.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},s.prototype._getRow=function(t,e){return p(t.getRowDataAt(e))},s.prototype._getData=function(t,e,r){var n=this._getRow(t,e);return n?n[r]:void 0},s.prototype._setData=function(t,e,r,n){if(this._realTimeGrid){var i=t.getRowDataAt(e);i&&i.ROW_DEF.setData(r,n)}else t.setDataAt(e,r,n)},s.prototype._setRowData=function(t,e,r){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setRowData(r)}else t.setRowDataAt(e,r)},s.prototype._setColumnData=function(t,e,r,n){if(n=n||t.getAllRowIds()||[],this._realTimeGrid){for(var i=t.getDataSource(),o=i.freeze(),s=r.length<n.length?r.length:n.length,u=0;u<s;++u){var l=t.getRowData(n[u]);l&&l.ROW_DEF.setData(e,r[u])}i.freeze(o)}else t.setColumnData(e,r,n)};var u=function(t){return t},l=function(t){return t?t.ROW_DEF.getRowData():null},p=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},a={inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,n){r||(r="constructor");for(var i=arguments.length,o=new Array(i),s=2;s<i;s++)o[s-2]=arguments[s];return e.prototype[r].apply(t,o)}}},f=function(){};f.prototype._events=null,f.prototype._listenerCount=0,f.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var r=this._events[t];r?r.indexOf(e)<0&&(r.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},f.prototype.removeEventListener=function(t,e){var r=this._events?this._events[t]:null;if(r){var n=r.indexOf(e);n>=0&&(r.splice(n,1),--this._listenerCount)}},f.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},f.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},f.prototype.getListener=function(t,e){if(t){var r=this._events?this._events[t]:null;if(r)return e||(e=0),r[e]||null}return null},f.prototype.addListener=function(t,e){var r=t?t[e]:null;"function"==typeof r&&this.addEventListener(e,r)},f.prototype._prepareEventArguments=function(t,e){return e},f.prototype._dispatch=function(t,e){var r=this._events?this._events[t]:null;if(r){e=this._prepareEventArguments(t,e);for(var n=r.length,i=0;i<n;++i)r[i](e)}};f.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var d=function(t,e,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=r&&(this._ctx=r),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};d.prototype.promise=null,d.prototype._resolve=null,d.prototype._reject=null,d.prototype._resolveHandler=null,d.prototype._rejectHandler=null,d.prototype._ctx=null,d.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},d.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},d.prototype._finally=function(){this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var h=function(){};a.inherits(h,f),h.prototype._hosts=null,h.prototype._compositeGrid=null,h.prototype._realTimeGrid=null,h.prototype._rowGetter=null,h.prototype._initializedGrid=!1,h.prototype.listen=h.prototype.addEventListener,h.prototype.unlisten=h.prototype.removeEventListener,h.prototype.afterInit=function(t,e,r){var n=null;r&&r.getCoreGrid&&(n=r.getCoreGrid()),n&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&n.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?_:c,this._afterInit())},h.prototype._afterInit=function(){},h.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},h.prototype.hasMultiTableSupport=function(){return!1},h.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},h.prototype.getName=function(){return"GridPlugin"},h.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var r=(e=t.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var n=this._hosts.length;--n>=0;){var i=this._hosts[n];if(i.getElement().contains(e))return i}return null},h.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},h.prototype.getGridApi=function(){return this._compositeGrid||this._realTimeGrid},h.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var r=this.getColumnIndex(t),n=this._realTimeGrid.getColumnDefinition(r);if(n)return n.getName()}return""},h.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(t);for(var e=this._realTimeGrid,r=e.getColumnCount(),n=0;n<r;++n){var i=e.getColumnDefinition(n);if(i&&i.getId()===t)return n}return-1},h.prototype.getColumnId=function(t){if("string"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var e=this._realTimeGrid.getColumnDefinition(t);return e?e.getId():""},h.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},h.prototype._loadPlugin=function(t,e,r){return t||(t=e.getPlugin(r))||(t=e.loadPlugin(r))&&this._initializedGrid&&(t._initializedGrid=!0),t},h.prototype._requestPlugin=function(t,e,r){return this._initializedGrid?h.requestPlugin(t,e,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},h.requestPlugin=function(t,e,r,n,i){var o=null;if(t){var s=null;1===t.nodeType?s=t.api:t.getCoreGrid?s=t:t.getPlugin&&(o=t),s&&(o=s.getCoreGrid(),n||i||(s.getModel?n=s:i=s))}if(!o)return Promise.reject("Cannot find grid element");var u=o.getPlugin(e);if(u)return Promise.resolve(u);var l=new d;return setTimeout(h._onPluginRequested.bind(null,{grid:o,pluginRef:e,compositeGrid:n,realTimeGrid:i,config:r,deferred:l}),10),l.promise},h._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var r=e.getPlugin(t.pluginRef);if(r)return t.deferred.resolve(r);var n=!1;return t.pluginRef.beforeInit&&(n=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(r=e.loadPlugin(t.pluginRef,t.config))?(!n&&r.beforeInit&&(n=!0,r.beforeInit(e.getElement(),t.config)),r.setGridWrapper&&(t.compositeGrid?r.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&r.setGridWrapper("realtimegrid",t.realTimeGrid)),r.afterInit&&r.afterInit(),t.deferred.resolve(r)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},h.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},h.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},h.prototype._getColumnOption=function(t,e,r){var n=this._getColumnData(t,r);return n?n[e]:null},h.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var r=e.getColumnData(t);return r||(r=e.setColumnData(t,{})),r},h.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},h.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},h.prototype._getRow=function(t,e){return g(t.getRowDataAt(e))},h.prototype._getData=function(t,e,r){var n=this._getRow(t,e);return n?n[r]:void 0},h.prototype._setData=function(t,e,r,n){if(this._realTimeGrid){var i=t.getRowDataAt(e);i&&i.ROW_DEF.setData(r,n)}else t.setDataAt(e,r,n)},h.prototype._setRowData=function(t,e,r){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setRowData(r)}else t.setRowDataAt(e,r)},h.prototype._setColumnData=function(t,e,r,n){if(n=n||t.getAllRowIds()||[],this._realTimeGrid){for(var i=t.getDataSource(),o=i.freeze(),s=r.length<n.length?r.length:n.length,u=0;u<s;++u){var l=t.getRowData(n[u]);l&&l.ROW_DEF.setData(e,r[u])}i.freeze(o)}else t.setColumnData(e,r,n)};var c=function(t){return t},_=function(t){return t?t.ROW_DEF.getRowData():null},g=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},v=r(0),m=function(t){var e=this;e._hosts=[],e._onColumnChanged=e._onColumnChanged.bind(e),e._onPostSectionRender=e._onPostSectionRender.bind(e),e._groupDefs=[],e._groupMap={},e._childToParent={},t&&e.config({columnGrouping:t})};a.inherits(m,h),m.prototype._groupDefs,m.prototype._groupMap,m.prototype._childToParent,m.prototype._maxDepth=-1,m.prototype._restructuring=!1,m._getTooltip=function(t){var e=t.tooltip,r=t.title||t.name;if(null!=e){if("string"==typeof e)return e;if(!0===e)return r;if(!1===e)return""}return r},m.prototype.beforeProcessOption=function(t,e){if("columnGroups"===t)return this._legacyColumnGroups=e,!1},m.prototype.getName=function(){return"ColumnGroupingPlugin"},m.prototype.hasMultiTableSupport=function(){return!0},m.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnChanged),t.listen("columnMoved",this._onColumnChanged),t.listen("columnRemoved",this._onColumnChanged),t.listen("columnVisibilityChanged",this._onColumnChanged),t.listen("postSectionRender",this._onPostSectionRender)),this.config(e),this._legacyColumnGroups=null,this._initializedGrid&&t.getSection("title")&&this._applyGrouping(),m._styles||(m._styles=Object(v.b)([".tr-grid .title .column .cell:not(:last-child)",["box-shadow: none;"]])),t._columnGroupingStyles||(t._columnGroupingStyles=!0,Object(v.a)(m._styles,t.getElement())))},m.prototype._afterInit=function(){this._applyGrouping()},m.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnAdded",this._onColumnChanged),t.unlisten("columnMoved",this._onColumnChanged),t.unlisten("columnRemoved",this._onColumnChanged),t.unlisten("postSectionRender",this._onPostSectionRender),this._dispose())},m.prototype.config=function(t){if(t){var e=t.columnGrouping;Array.isArray(e)&&(this._groupDefs=e.filter(m._isValidGroup)),this._migrateLegacyStructure(t.columns)}},m.prototype.getConfigObject=function(t){var e=t||{};return e.columnGrouping=this.getGroupDefinitions(),e},m._mapParentToChildren=function(t,e,r){if(e&&r){var n=t[e];return n||(n=t[e]=[]),n.push(r),!0}return!1},m.prototype._migrateLegacyStructure=function(t){var e=this._legacyColumnGroups;if(e&&this._compositeGrid){for(var r=t.length,n={},i=0;i<r;++i){var o=t[i];o&&m._mapParentToChildren(n,o.columnGroup,o.id)}var s,u,l=e.length;for(s=0;s<l;++s)(u=e[s])&&m._mapParentToChildren(n,u.parent,u.id);for(s=0;s<l;++s)if((u=e[s])&&u.id){var p=n[u.id];u.children=p||[],u.formatter&&u.formatter.render&&(u.legacyRender=u.formatter.render,delete u.formatter),this._groupDefs.push(u)}}},m.prototype._applyGrouping=function(){if(!this._restructuring){var t;this._restructuring=!0,this._evaluateGroupStructure();var e=this._hosts.length;for(t=e;--t>=0;){var r=this._hosts[t].getSection("title");if(r){var n=this._maxDepth+1;r.setRowCount(n),r.clearCellSpans(),this._spanGroupVertically(r),this._spanGroupHorizontally(r)}}for(this._restructuring=!1,t=e;--t>=0;){var i=this._hosts[t].getSectionSettings("title");i&&i.rerender()}}},m.prototype._spanGroupVertically=function(t){var e=this.getGridApi();if(e)for(var r=this._hosts[0],n=this._maxDepth,i=n+1,o=e.getColumnCount(),s=0;s<o;s++){var u=n+1,l=this._getParentGroup(this.getColumnId(s));if(l)u=n-(l.onRow+1)+1;r.isColumnVisible(s)&&u>1&&t.setCellRowSpan(s,i-u,u)}},m.prototype._spanGroupHorizontally=function(t){var e=t,r=this._groupMap;for(var n in r)for(var i=r[n],o=this._findColumnSpans(i),s=0;s<o.length;s++){var u=o[s];if(u.length>0){var l=u[0],p=u[1];e.setCellColSpan(l,i.onRow,p-l+1),i.colIndex=l}}},m.prototype._renderGroups=function(){for(var t=this._hosts.length,e=this._groupMap,r=0;r<t;++r){var n=this._hosts[r].getSection("title");if(n){var i={};for(var o in e){var s=e[o],u=s.colIndex,l=s.onRow,p=n.getCell(u,l);p&&(p.setStyle("text-align",s.alignment||""),p.setTooltip(m._getTooltip(s)),p.setContent(s.title||s.name),p.addClass("no-sort"),s.legacyRender&&s.legacyRender(u,p,s),s.render&&(i.cell=p,i.colIndex=u,i.groupNode=s,s.render(i)))}}}},m.prototype._onPostSectionRender=function(t){"title"!==t.sectionType||this._restructuring||this._renderGroups()},m.prototype._onColumnChanged=function(){this._applyGrouping()},m.prototype.addColumnToGroup=function(t,e,r){if(t&&e){var n=r||this.getColumnCount();this._addGroupChild(t.id,e),this._realTimeGrid?this._realTimeGrid.insertColumn(t,n):this._compositeGrid&&this._compositeGrid.insertColumn(n,t)}},m.prototype.addGroup=function(t){if(t&&t.id&&!this.getGroupDefinition(t.id))return this._groupDefs.push(t),this._applyGrouping(),!0;return!1},m.prototype.addColumnGrouping=m.prototype.addGroup,m.prototype.removeGroup=function(t){var e=this.getGroupDefinition(t);if(e){var r=this._groupDefs.indexOf(e);this._groupDefs.splice(r,1),this._applyGrouping()}return e},m.prototype.setGroupDefinitions=function(t){Array.isArray(t)&&(t=t.filter(m._isValidGroup)).length||(t=null),t?(this._groupDefs=t,this._applyGrouping()):this._groupDefs.length&&(this._groupDefs=[],this._applyGrouping())},m._isValidGroup=function(t){return!(!t||!t.id)&&(t.children||(t.children=[]),!0)},m.prototype.getGroupDefinitions=function(){return this._groupDefs.slice()},m.prototype.setGroupDefinition=function(t,e){var r=this.getGroupDefinition(t);if(r){var n=this._groupDefs.indexOf(r);e.id=t,this._groupDefs[n]=e,this._applyGrouping()}},m.prototype.getGroupDefinition=function(t){return t&&this._groupMap[t]||null},m.prototype.setGroupChildren=function(t,e){var r=this.getGroupDefinition(t);r&&(Array.isArray(e)?(r.children=e.slice(),this._applyGrouping()):!e&&r.children.length&&(r.children=[],this._applyGrouping()))},m.prototype.getGroupChildren=function(t){var e=this.getGroupDefinition(t);return e?e.children.slice():null},m.prototype._evaluateGroupStructure=function(){this._groupMap={},this._childToParent={},this._maxDepth=-1;for(var t,e,r=this._groupDefs,n={},i=0;i<r.length;i++)(t=r[i]).children&&t.children.length&&this._flattenTree(t,n);for(e in this._groupMap)if(t=this._groupMap[e],this._childToParent[t.id]){var o=this._childToParent[t.id];t.parent=o}for(e in this._groupMap){t=this._groupMap[e];var s=this._findGroupTreeDepth(t,1);t.onRow=s-1}var u=0;for(e in this._groupMap)(s=(t=this._groupMap[e]).onRow+1)>u&&(u=s);this._maxDepth=u},m.prototype._flattenTree=function(t,e){var r=t.children;if(r&&r.length>0){for(var n,i=0;i<r.length;i++){var o=r[i];o.id?(n=o.id,this._flattenTree(o,e)):(e[n=o]||-1!==this._getColumnIndexById(n))&&(e[t.id]=!0),this._childToParent[n]||n==t.id||(this._childToParent[n]=t.id)}!this._groupMap[t.id]&&e[t.id]&&(this._groupMap[t.id]=t)}},m.prototype._findGroupTreeDepth=function(t,e){var r=t.parent,n=this._groupMap[r];return n?this._findGroupTreeDepth(n,e+1):e},m.prototype._getColumnIndexById=function(t){if(this.getGridApi()&&t)for(var e=this._hosts[0],r=e.getColumnCount(),n=0;n<r;n++)if(this.getColumnId(n)===t&&e.isColumnVisible(n))return n;return-1},m.prototype._findColumnIndexArr=function(t,e){if(t){var r=t.children;if(r&&r.length)for(var n=0;n<r.length;n++){var i=r[n];if(i.id){if(i.id===t.id)return;this._findColumnIndexArr(this._groupMap[i.id],e)}else if(this._groupMap[i])this._findColumnIndexArr(this._groupMap[i],e);else{var o=this._getColumnIndexById(i);-1!==o&&e.push(o)}}}},m.prototype._findColumnSpans=function(t){var e=[];return this._findColumnIndexArr(t,e),m._groupConsecutiveArr(e)},m._groupConsecutiveArr=function(t){var e=[];if(!t||!t.length)return e;for(var r=t.sort((function(t,e){return t-e})),n=r[0],i=n,o=1;o<=r.length;o++){var s=r[o];s===i+1?i=s:(n===i?e.push([n,n]):e.push([n,i]),i=n=r[o])}return e},m.prototype._addGroupChild=function(t,e){var r=this.getGroupDefinition(e);if(t&&r){var n=r.children;n&&n.indexOf(t)<0&&(this._childToParent[t]=e,n.push(t))}},m.prototype._getParentGroup=function(t){return this.getGroupDefinition(this._childToParent[t])};!function(t,e){if(t&&e&&e.prototype.getName){var r=e.prototype.getName().replace(/Plugin$/,"");if(r){var n=t.tr;n||(n=t.tr={});var i=n.grid;i||(i=n.grid={}),i[r+"Plugin"]=e,n[r+"Extension"]=e}}}(window,m)}]);