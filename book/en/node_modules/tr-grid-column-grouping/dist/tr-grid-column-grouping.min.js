!function(t){var e={};function r(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=t,r.c=e,r.d=function(t,e,i){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)r.d(i,n,function(e){return t[e]}.bind(null,n));return i},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"a",(function(){return cloneObject})),__webpack_require__.d(__webpack_exports__,"c",(function(){return prettifyCss})),__webpack_require__.d(__webpack_exports__,"b",(function(){return injectCss}));var Util={post:function(t,e){return Util._post(t,e).then(Util.toJSON)},requestText:function(t,e){return Util._post(t,e,"text/plain").then(Util.toText)},requestByUrlEncoded:function(t,e){return Util._post(t,e,"application/x-www-form-urlencoded").then(Util.toJSON)},toJSON:function(t){return Util._logError(t)?Promise.reject(t):t.json()},toText:function(t){return Util._logError(t)?Promise.reject(t):t.text()},_logError:function(t){return!!(t&&t.status>=300)&&(console.log("Response "+t.status+": "+t.statusText),!0)},_post:function(t,e,r){var i={method:e?"POST":"GET",headers:{"Content-Type":r||"application/json"}};return e&&(i.body="string"==typeof e?e:JSON.stringify(e)),fetch(t,i)}},extendObject=function(t,e,r){if(!t)return null;if(!e||t===e)return t;var i;if(r)for(var n=r.length,o=0;o<n;++o)(i=r[o])&&extendProperty(t,e,i);else for(i in e)extendProperty(t,e,i);return t},cloneObject=function(t,e){return extendObject({},t,e)},arrayToObject=function(t,e){if(!Array.isArray(t))return t;if(!e)return null;var r=t;t={};for(var i=r.length,n=0;n<i;++n){var o=e[n];o&&void 0!==r[n]&&(t[o]=r[n])}return t},extendProperty=function(t,e,r){var i=e[r];if(null!=i){var n=t[r];Array.isArray(n)?t[r]=n.concat(i):Array.isArray(i)&&n?t[r]=i.concat(n):t[r]=i}},extendArrayProperty=function(t,e,r){var i=null;if(r){var n=t[e];i=n?Array.isArray(n)?n:t[e]=[n]:t[e]=[],Array.isArray(r)?r.length&&(r.length>1?Array.prototype.push.apply(i,r):i.push(r[0])):i.push(r)}return i},_bracketExp=new RegExp(/\[[^\[]*\]/g),parseCondition=function(expression){if(!expression)return null;if("string"!=typeof expression)return"function"==typeof expression?expression:null;for(var brackets=expression.match(_bracketExp),map={},fields=[],len=brackets?brackets.length:0,i=len;--i>=0;){var field=brackets[i];map[field]||(map[field]="f["+fields.length+"]",fields.push(field.substring(1,field.length-1)))}expression=expression.replace(_bracketExp,(function(t){return"rowData["+map[t]+"]"}));var finalExp="(function(f, rowData) { return ("+expression+"); })",fn=null;try{fn=eval(finalExp),fn=fn.bind(null,fields)}catch(t){console.log(t.message)}return fn||null},_encloseBracket=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},_indentBracketContent=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},prettifyCss=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(_encloseBracket).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,_indentBracketContent)}return""},getShadowRoot=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null},injectCss=function(t,e){if(!t)return null;var r=document.createElement("style");r.textContent="\n"+t+"\n";var i,n=getShadowRoot(e),o=!0;return n||(o=!1,n=document.head),o&&n.children&&n.children.length&&(i=n.children[0]),i?n.insertBefore(r,i):n.appendChild(r),r},isIE=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0},isMac=function(){return/Mac/.test(navigator.platform)},isTouchDevice=function(){return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints<256||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints<256)},nestedObjectToArray=function(t,e){for(var r in e||(e=[]),t){var i=t[r];"object"==typeof i?nestedObjectToArray(i,e):e.push(i)}return e},rgb2Hex=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var r="#",i=0;i<3;i++){var n=+e[i];n>=16||(r+="0"),r+=n?n.toString(16).toUpperCase():"0"}return r},prepareTSVContent=function(t){if(null==t)return"";var e="string"==typeof t?t:t.toString();return e.length?(e.indexOf("\n")>=0&&(e=e.replace(/[\r\n]/g," ")),e.indexOf("\t")>=0&&(e=e.replace(/\t/g," "))," "!==e.charAt(0)&&" "!==e.charAt(e.length-1)||(e=e.trim()),e):""},_unused_webpack_default_export=Util},function(t,e,r){"use strict";r.r(e);var i={inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,i){r||(r="constructor");for(var n=arguments.length,o=new Array(n),s=2;s<n;s++)o[s-2]=arguments[s];return e.prototype[r].apply(t,o)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var r=this._events[t];r?r.indexOf(e)<0&&(r.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},n.prototype.removeEventListener=function(t,e){var r=this._events?this._events[t]:null;if(r){var i=r.indexOf(e);i>=0&&(r.splice(i,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},n.prototype.getListener=function(t,e){if(t){var r=this._events?this._events[t]:null;if(r)return e||(e=0),r[e]||null}return null},n.prototype.addListener=function(t,e){var r=t?t[e]:null;"function"==typeof r&&this.addEventListener(e,r)},n.prototype._prepareEventArguments=function(t,e){return e},n.prototype._dispatch=function(t,e){var r=this._events?this._events[t]:null;if(r){e=this._prepareEventArguments(t,e);for(var i=r.length,n=0;n<i;++n)r[n](e)}};n.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var o=function(t,e,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=r&&(this._ctx=r),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};o.prototype.promise=null,o.prototype._resolve=null,o.prototype._reject=null,o.prototype._resolveHandler=null,o.prototype._rejectHandler=null,o.prototype._ctx=null,o.prototype._fulfilled=!1,o.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},o.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},o.prototype.isFulfilled=function(){return this._fulfilled},o.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(){};i.inherits(s,n),s.prototype._hosts=null,s.prototype._compositeGrid=null,s.prototype._realTimeGrid=null,s.prototype._rowGetter=null,s.prototype._initializedGrid=!1,s.prototype.listen=s.prototype.addEventListener,s.prototype.unlisten=s.prototype.removeEventListener,s.prototype.afterInit=function(t,e,r){var i=null;r&&r.getCoreGrid&&(i=r.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&i.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?l:u,this._afterInit())},s.prototype._afterInit=function(){},s.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},s.prototype.hasMultiTableSupport=function(){return!1},s.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},s.prototype.getName=function(){return"GridPlugin"},s.prototype.initialize=function(t,e){},s.prototype.unload=function(t){this._dispose()},s.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var r=(e=t.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var i=this._hosts.length;--i>=0;){var n=this._hosts[i];if(n.getElement().contains(e))return n}return null},s.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},s.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},s.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var r=this.getColumnIndex(t),i=this._realTimeGrid.getColumnDefinition(r);if(i)return i.getName()}return""},s.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(t);for(var e=this._realTimeGrid,r=e.getColumnCount(),i=0;i<r;++i){var n=e.getColumnDefinition(i);if(n&&n.getId()===t)return i}return-1},s.prototype.getColumnIndices=function(t){if(this._compositeGrid){for(var e,r=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),n=[],o=0;o<t.length;o++)if("number"==typeof(e=t[o]))e>=0&&e<i&&n.push(e);else{var s=r.indexOf(e);-1!==s&&n.push(s)}return n}return this._realTimeGrid.getColumnIndices(t)},s.prototype.getColumnId=function(t){if("string"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var e=this._realTimeGrid.getColumnDefinition(t);return e?e.getId():""},s.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},s.prototype._loadPlugin=function(t,e,r){return t||(t=e.getPlugin(r))||(t=e.loadPlugin(r))&&this._initializedGrid&&(t._initializedGrid=!0),t},s.prototype._requestPlugin=function(t,e,r){return this._initializedGrid?s.requestPlugin(t,e,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},s.requestPlugin=function(t,e,r,i,n){var u=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(u=t),l&&(u=l.getCoreGrid(),i||n||(l.getModel?i=l:n=l))}if(!u)return Promise.reject("Cannot find grid element");var p=u.getPlugin(e);if(p)return Promise.resolve(p);var a=new o;return setTimeout(s._onPluginRequested.bind(null,{grid:u,pluginRef:e,compositeGrid:i,realTimeGrid:n,config:r,deferred:a}),10),a.promise},s._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var r=e.getPlugin(t.pluginRef);if(r)return t.deferred.resolve(r);var i=!1;return t.pluginRef.beforeInit&&(i=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(r=e.loadPlugin(t.pluginRef,t.config))?(!i&&r.beforeInit&&(i=!0,r.beforeInit(e.getElement(),t.config)),r.setGridWrapper&&(t.compositeGrid?r.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&r.setGridWrapper("realtimegrid",t.realTimeGrid)),r.afterInit&&r.afterInit(),t.deferred.resolve(r)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},s.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},s.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},s.prototype._getColumnOption=function(t,e,r){var i=this._getColumnData(t,r);return i?i[e]:null},s.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var r=e.getColumnData(t);return r||(r=e.setColumnData(t,{})),r},s.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},s.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},s.prototype._getRow=function(t,e){return p(t.getRowDataAt(e))},s.prototype._getData=function(t,e,r){var i=this._getRow(t,e);return i?i[r]:void 0},s.prototype._setData=function(t,e,r,i){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setData(r,i)}else t.setDataAt(e,r,i)},s.prototype._setRowData=function(t,e,r){if(this._realTimeGrid){var i=t.getRowDataAt(e);i&&i.ROW_DEF.setRowData(r)}else t.setRowDataAt(e,r)},s.prototype._setStaticData=function(t,e,r,i){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setStaticData(r,i)}else t.setDataAt(e,r,i)},s.prototype._setColumnData=function(t,e,r,i){if(i=i||t.getAllRowIds()||[],this._realTimeGrid){for(var n=t.getDataSource(),o=n.freeze(),s=r.length<i.length?r.length:i.length,u=0;u<s;++u){var l=t.getRowData(i[u]);l&&l.ROW_DEF.setData(e,r[u])}n.freeze(o)}else t.setColumnData(e,r,i)},s.prototype._activateColumnRenderer=function(t,e,r){if(null!=t){var i=this._realTimeGrid;i?i.activateColumnRenderer(t,e,r):"function"==typeof r?this._hosts[0].setColumnDataBindingHandler(t,r):this._hosts[0].setColumnDataBindingHandler(t,null)}};var u=function(t){return t},l=function(t){return t?t.ROW_DEF.getRowData():null},p=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},a={inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,i){r||(r="constructor");for(var n=arguments.length,o=new Array(n),s=2;s<n;s++)o[s-2]=arguments[s];return e.prototype[r].apply(t,o)}}},d=r(0),h=function(){};h.prototype._events=null,h.prototype._listenerCount=0,h.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var r=this._events[t];r?r.indexOf(e)<0&&(r.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},h.prototype.removeEventListener=function(t,e){var r=this._events?this._events[t]:null;if(r){var i=r.indexOf(e);i>=0&&(r.splice(i,1),--this._listenerCount)}},h.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},h.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},h.prototype.getListener=function(t,e){if(t){var r=this._events?this._events[t]:null;if(r)return e||(e=0),r[e]||null}return null},h.prototype.addListener=function(t,e){var r=t?t[e]:null;"function"==typeof r&&this.addEventListener(e,r)},h.prototype._prepareEventArguments=function(t,e){return e},h.prototype._dispatch=function(t,e){var r=this._events?this._events[t]:null;if(r){e=this._prepareEventArguments(t,e);for(var i=r.length,n=0;n<i;++n)r[n](e)}};h.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var f=function(t,e,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=r&&(this._ctx=r),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};f.prototype.promise=null,f.prototype._resolve=null,f.prototype._reject=null,f.prototype._resolveHandler=null,f.prototype._rejectHandler=null,f.prototype._ctx=null,f.prototype._fulfilled=!1,f.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},f.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},f.prototype.isFulfilled=function(){return this._fulfilled},f.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var c=function(){};a.inherits(c,h),c.prototype._hosts=null,c.prototype._compositeGrid=null,c.prototype._realTimeGrid=null,c.prototype._rowGetter=null,c.prototype._initializedGrid=!1,c.prototype.listen=c.prototype.addEventListener,c.prototype.unlisten=c.prototype.removeEventListener,c.prototype.afterInit=function(t,e,r){var i=null;r&&r.getCoreGrid&&(i=r.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&i.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?g:_,this._afterInit())},c.prototype._afterInit=function(){},c.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},c.prototype.hasMultiTableSupport=function(){return!1},c.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},c.prototype.getName=function(){return"GridPlugin"},c.prototype.initialize=function(t,e){},c.prototype.unload=function(t){this._dispose()},c.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var r=(e=t.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var i=this._hosts.length;--i>=0;){var n=this._hosts[i];if(n.getElement().contains(e))return n}return null},c.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},c.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},c.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var r=this.getColumnIndex(t),i=this._realTimeGrid.getColumnDefinition(r);if(i)return i.getName()}return""},c.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(t);for(var e=this._realTimeGrid,r=e.getColumnCount(),i=0;i<r;++i){var n=e.getColumnDefinition(i);if(n&&n.getId()===t)return i}return-1},c.prototype.getColumnIndices=function(t){if(this._compositeGrid){for(var e,r=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),n=[],o=0;o<t.length;o++)if("number"==typeof(e=t[o]))e>=0&&e<i&&n.push(e);else{var s=r.indexOf(e);-1!==s&&n.push(s)}return n}return this._realTimeGrid.getColumnIndices(t)},c.prototype.getColumnId=function(t){if("string"==typeof t)return t;if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var e=this._realTimeGrid.getColumnDefinition(t);return e?e.getId():""},c.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},c.prototype._loadPlugin=function(t,e,r){return t||(t=e.getPlugin(r))||(t=e.loadPlugin(r))&&this._initializedGrid&&(t._initializedGrid=!0),t},c.prototype._requestPlugin=function(t,e,r){return this._initializedGrid?c.requestPlugin(t,e,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},c.requestPlugin=function(t,e,r,i,n){var o=null;if(t){var s=null;1===t.nodeType?s=t.api:t.getCoreGrid?s=t:t.getPlugin&&(o=t),s&&(o=s.getCoreGrid(),i||n||(s.getModel?i=s:n=s))}if(!o)return Promise.reject("Cannot find grid element");var u=o.getPlugin(e);if(u)return Promise.resolve(u);var l=new f;return setTimeout(c._onPluginRequested.bind(null,{grid:o,pluginRef:e,compositeGrid:i,realTimeGrid:n,config:r,deferred:l}),10),l.promise},c._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var r=e.getPlugin(t.pluginRef);if(r)return t.deferred.resolve(r);var i=!1;return t.pluginRef.beforeInit&&(i=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(r=e.loadPlugin(t.pluginRef,t.config))?(!i&&r.beforeInit&&(i=!0,r.beforeInit(e.getElement(),t.config)),r.setGridWrapper&&(t.compositeGrid?r.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&r.setGridWrapper("realtimegrid",t.realTimeGrid)),r.afterInit&&r.afterInit(),t.deferred.resolve(r)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},c.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},c.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},c.prototype._getColumnOption=function(t,e,r){var i=this._getColumnData(t,r);return i?i[e]:null},c.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var r=e.getColumnData(t);return r||(r=e.setColumnData(t,{})),r},c.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},c.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},c.prototype._getRow=function(t,e){return m(t.getRowDataAt(e))},c.prototype._getData=function(t,e,r){var i=this._getRow(t,e);return i?i[r]:void 0},c.prototype._setData=function(t,e,r,i){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setData(r,i)}else t.setDataAt(e,r,i)},c.prototype._setRowData=function(t,e,r){if(this._realTimeGrid){var i=t.getRowDataAt(e);i&&i.ROW_DEF.setRowData(r)}else t.setRowDataAt(e,r)},c.prototype._setStaticData=function(t,e,r,i){if(this._realTimeGrid){var n=t.getRowDataAt(e);n&&n.ROW_DEF.setStaticData(r,i)}else t.setDataAt(e,r,i)},c.prototype._setColumnData=function(t,e,r,i){if(i=i||t.getAllRowIds()||[],this._realTimeGrid){for(var n=t.getDataSource(),o=n.freeze(),s=r.length<i.length?r.length:i.length,u=0;u<s;++u){var l=t.getRowData(i[u]);l&&l.ROW_DEF.setData(e,r[u])}n.freeze(o)}else t.setColumnData(e,r,i)},c.prototype._activateColumnRenderer=function(t,e,r){if(null!=t){var i=this._realTimeGrid;i?i.activateColumnRenderer(t,e,r):"function"==typeof r?this._hosts[0].setColumnDataBindingHandler(t,r):this._hosts[0].setColumnDataBindingHandler(t,null)}};var _=function(t){return t},g=function(t){return t?t.ROW_DEF.getRowData():null},m=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},v=function(t){var e=this;e._hosts=[],e._onColumnChanged=e._onColumnChanged.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._onColumnMoved=e._onColumnMoved.bind(e),e._onColumnRemoved=e._onColumnRemoved.bind(e),e._requestApplyAddChildGroup=e._requestApplyAddChildGroup.bind(this),e._onPostSectionRender=e._onPostSectionRender.bind(e),e._onBeforeColumnBoundUpdate=e._onBeforeColumnBoundUpdate.bind(e),e._groupDefs=[],e._groupMap={},e._childToParent={},t&&e.config({columnGrouping:t})};a.inherits(v,c),v.prototype._groupDefs,v.prototype._groupMap,v.prototype._childToParent,v.prototype._visibleGroupMap,v.prototype._maxDepth=0,v.prototype._restructuring=!1,v.prototype._rerenderTimerId=0,v.prototype._addingTimerId=0,v.prototype._addingEvents=null,v._getTooltip=function(t){var e=t.tooltip,r=t.title||t.name;if(null!=e){if("string"==typeof e)return e;if(!0===e)return r;if(!1===e)return""}return r},v.prototype.getName=function(){return"ColumnGroupingPlugin"},v.prototype.hasMultiTableSupport=function(){return!0},v.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._addingEvents||(this._addingEvents=[]),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnAdded),t.listen("columnMoved",this._onColumnMoved),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnVisibilityChanged",this._onColumnChanged),t.listen("postSectionRender",this._onPostSectionRender),t.listen("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate)),this.config(e),this._legacyColumnGroups=null,this._initializedGrid&&t.getSection("title")&&this._applyGrouping(),v._styles||(v._styles=Object(d.c)([".tr-grid .title .column .cell:not(:last-child)",["box-shadow: none;"]])),t._columnGroupingStyles||(t._columnGroupingStyles=!0,Object(d.b)(v._styles,t.getElement())))},v.prototype.beforeProcessOption=function(t,e){if("columnGroups"===t)return this._legacyColumnGroups=e,!1},v.prototype._afterInit=function(){this._applyGrouping()},v.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnAdded",this._onColumnChanged),t.unlisten("columnMoved",this._onColumnMoved),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("postSectionRender",this._onPostSectionRender),t.unlisten("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate),this._hosts.length||(this._rerenderTimerId&&(clearTimeout(this._rerenderTimerId),this._rerenderTimerId=0),this._addingTimerId&&(clearTimeout(this._addingTimerId),this._addingTimerId=0,this._addingEvents.length=0)),this._dispose())},v.prototype.config=function(t){if(t){var e=t.columnGrouping;if(Array.isArray(e)){var r=e.map(v._cloneObject);this._groupDefs=r.filter(v._isValidGroup)}var i=t.columns;if(i){for(var n=i.length,o=0;o<n;++o)this._setColumnGrouping(o,{id:i[o].id});this._migrateLegacyStructure(t.columns)}}},v.prototype.getConfigObject=function(t){var e=t||{},r=this.getGroupDefinitions();return e.columnGrouping=r,e},v.prototype._setColumnGrouping=function(t,e){this._newColumnData(t).columnGrouping=e},v.prototype._getColumnGrouping=function(t){return this._getColumnOption(t,"columnGrouping")},v._mapParentToChildren=function(t,e,r){if(e&&r){var i=t[e];return i||(i=t[e]=[]),i.push(r),!0}return!1},v.prototype._migrateLegacyStructure=function(t){var e=this._legacyColumnGroups;if(e&&this._compositeGrid){for(var r=t.length,i={},n=0;n<r;++n){var o=t[n];o&&v._mapParentToChildren(i,o.columnGroup,o.id)}var s,u,l=e.length;for(s=0;s<l;++s)(u=e[s])&&v._mapParentToChildren(i,u.parent,u.id);for(s=0;s<l;++s)if((u=v._cloneObject(e[s]))&&u.id){var p=i[u.id];u.children=p||[],u.formatter&&u.formatter.render&&(u.legacyRender=u.formatter.render,delete u.formatter),this._groupDefs.push(u)}this._groupDefs=this._groupDefs.filter(v._isValidGroup)}},v.prototype._applyGrouping=function(){if(this._rerenderTimerId=0,!this._restructuring){var t,e,r,i,n,o;this._restructuring=!0,this._evaluateGroupStructure();var s=this._maxDepth+1,u=this._hosts.length;for(t=u;--t>=0;)if(n=this._hosts[t].getSection("title")){for(n.setRowCount(s),n.clearCellSpans(),o=n.getColumnCount(),e=0;e<o;e++)for(r=0;r<s;r++)(i=n.getCell(e,r,!1))&&(i.reset(),i.removeClass("no-sort"),i.removeAttribute("group-id"));this._spanGroupVertically(n),this._spanGroupHorizontally(n)}for(this._restructuring=!1,t=u;--t>=0;){var l=this._hosts[t].getSectionSettings("title");l&&l.rerender()}}},v.prototype._evaluateGroupStructure=function(){var t=this._groupMap={},e=this._childToParent={},r=this._visibleGroupMap={};this._maxDepth=-1;var i,n,o,s,u,l=this._groupDefs,p=l.length;for(i=0;i<p;i++)this._flattenGroupDefs(l[i],l);for(p=l.length,i=0;i<p;i++)t[(n=l[i]).id]=n,r[n.id]=v._cloneObject(n),r[n.id].children=n.children.slice();for(o in t)for(s=(n=t[o]).children,i=0;i<s.length;i++)e[s[i]]=o;for(o in r)(u=e[o])&&(r[o].parent=u,t[o].parent=u);var a,d=[];for(o in r)n=r[o],1===this._findGroupTreeDepth(n,1)&&d.push(n);for(p=d.length,i=0;i<p;i++)this._verifySingleChild(d[i]);for(o in r)n=r[o],a=this._findGroupTreeDepth(n,1),n.onRow=a-1;var h=-1;for(o in r)(a=(n=r[o]).onRow)>h&&(h=a);this._maxDepth=h+1},v.prototype._flattenGroupDefs=function(t,e){if(t&&t.children)for(var r,i,n=t.children,o=0;o<n.length;o++)"string"!=typeof(r=n[o])&&(i=r.id)&&(n[o]=i,e.indexOf(r)<0&&e.push(r),this._flattenGroupDefs(r,e))},v.prototype._findGroupTreeDepth=function(t,e){var r=t.parent,i=this._visibleGroupMap[r];return i?this._findGroupTreeDepth(i,e+1):e},v.prototype._verifySingleChild=function(t){var e,r,i=t.children,n=0,o=0,s=[];for(e=0;e<i.length;e++)r=i[e],this._visibleGroupMap[r]?this._verifySingleChild(this._visibleGroupMap[r])?(++n,++o):s.push(r):this._getColumnIndexById(r)>-1?++n:s.push(r);if(s.length)for(e=0;e<s.length;e++)r=s[e],t.children.splice(i.indexOf(r),1);return n>1||o>1||(delete this._visibleGroupMap[t.id],!1)},v.prototype._requestApplyGrouping=function(){this._rerenderTimerId||(this._rerenderTimerId=setTimeout(this._applyGrouping.bind(this),10))},v.prototype._applyNearestGrouping=function(t){if(!(null==t||t<0)){var e=t-1,r=t+1,i=this.getGroupIds(e),n=this.getGroupIds(r);if(i&&n){var o,s,u,l,p=this.getColumnId(t),a=this._childToParent[p];if(a&&(i.indexOf(a)>-1||n.indexOf(a)>-1))return;var d=!1;for(o=0;o<i.length;o++){for(u=i[o],s=0;s<n.length;s++)u===(l=n[s])&&(this._addGroupChild(p,l),d=!0);if(d){this._evaluateGroupStructure();break}}}}},v.prototype._spanGroupVertically=function(t){var e=this.getGridApi();if(e)for(var r=this._hosts[0],i=this._maxDepth+1,n=e.getColumnCount(),o=0;o<n;o++){var s=i,u=this._getParentGroup(this.getColumnId(o));if(u)s=i-(u.onRow+1);r.isColumnVisible(o)&&s>1&&t.setCellRowSpan(o,i-s,s)}},v.prototype._spanGroupHorizontally=function(t){var e=t,r=this._visibleGroupMap;for(var i in r)for(var n=r[i],o=this._findColumnSpans(n),s=0;s<o.length;s++){var u=o[s];if(u.length>0){var l=u[0],p=u[1];e.setCellColSpan(l,n.onRow,p-l+1),n.colIndex=l}}},v.prototype._renderGroups=function(){for(var t=this._hosts.length,e=this._visibleGroupMap,r=0;r<t;++r){var i=this._hosts[r].getSection("title");if(i){var n={};for(var o in e){var s=e[o],u=s.colIndex,l=s.onRow,p=i.getCell(u,l);p&&(p.setStyle("text-align",s.alignment||""),p.setTooltip(v._getTooltip(s)),p.setContent(s.title||s.name),p.addClass("no-sort"),p.setAttribute("group-id",s.id),s.legacyRender&&s.legacyRender(u,p,s),s.render&&(n.cell=p,n.colIndex=u,n.groupNode=s,s.render(n)))}}}},v.prototype._onPostSectionRender=function(t){"title"!==t.sectionType||this._restructuring||this._renderGroups()},v.prototype._requestApplyAddChildGroup=function(t){this._addingEvents.push(t),this._addingTimerId||(this._addingTimerId=setTimeout(this._applyTimeSeries.bind(this,t),10))},v.prototype._applyTimeSeries=function(t){this._addingTimerId=0;var e=this._addingEvents.map((function(t){return t}));this._addingEvents.length=0;var r,i=t.colIndex;if(e.length>0){var n,o,s=[];for(r=0;r<e.length;r++)if((n=e[r]).context.parent){o||(o=n.context);var u=n.colIndex,l=this.getColumnId(u);s.push(l)}if(o&&o.parent){var p=o.parent;if(p){var a=p.getName(),d="timeSerieGroup_"+p.getId();if(this._groupMap[d]){var h,f=!1;for(r=0;r<s.length;r++)h=s[r],f|=this._addGroupChild(h,d);f&&this._evaluateGroupStructure()}else this.addGroup({id:d,title:a,children:s})}}}this._applyNearestGrouping(i),this._requestApplyGrouping()},v.prototype._onColumnAdded=function(t){var e=t.colIndex;this._requestApplyAddChildGroup(t),this._applyNearestGrouping(e),this._requestApplyGrouping()},v.prototype._onColumnChanged=function(){this._requestApplyGrouping()},v.prototype._onColumnMoved=function(t){var e=t.toColIndex,r=this.getColumnId(e),i=this._childToParent[r];if(i){var n=this.getColumnId(e-1),o=this.getColumnId(e+1),s=this._childToParent[n],u=this._childToParent[o];if(i!=s&&i!=u){var l=this.getGroupChildren(i),p=l.indexOf(r);p>-1&&l.splice(p,1),this.setGroupChildren(i,l)}}this._applyNearestGrouping(e),this._requestApplyGrouping()},v.prototype._onColumnRemoved=function(t){var e=t.columnData;if(e&&e.columnGrouping){var r=e.columnGrouping.id,i=this._childToParent[r];if(i){var n=this._groupMap[i];if(n){var o=n.children,s=o.indexOf(r);s>-1&&(o.length<3?this._groupDefs.splice(this._groupDefs.indexOf(n),1):o.splice(s,1),this._requestApplyGrouping())}}}},v.prototype._onBeforeColumnBoundUpdate=function(t){var e,r,i,n,o=t.selectedColumns,s=this._childToParent,u=[],l={};for(e=0;e<o.length;e++)if(r=this.getColumnId(o[e])){if(!(n=s[r])){i=r;break}l[n]=this._groupMap[n],u.push(r)}if(i)t.topBoundRowIndex=0;else{var p,a,d,h,f,c,_,g=this._maxDepth,m={};for(n in l)m[(a=this._getRootGroup(n)).id]=a,(p=l[n].onRow+1)<g&&(g=p);var v=m;for(e=0;e<g;e++)for(n in c=v,v={},c){if(a=c[n],f=!0,(h=this._getGroupMembers(a)).length<=u.length){for(d=0;d<h.length;d++)if(u.indexOf(h[d])<0){f=!1;break}if(f)return void(t.topBoundRowIndex=e)}for(_=a.children,d=0;d<_.length;d++){var y=_[d];(a=this._groupMap[y])&&(v[y]=a)}}t.topBoundRowIndex=g}},v.prototype.addColumnToGroup=function(t,e,r){if(t&&e){var i=r||this.getColumnCount();this._addGroupChild(t.id,e)&&this._evaluateGroupStructure(),this._realTimeGrid?this._realTimeGrid.insertColumn(t,i):this._compositeGrid&&this._compositeGrid.insertColumn(i,t)}},v.prototype.addGroup=function(t){if(t&&t.id&&!this.getGroupDefinition(t.id)){var e=v._cloneObject(t);return this._groupDefs.push(e),this._applyGrouping(),!0}return!1},v.prototype.addColumnGrouping=v.prototype.addGroup,v.prototype.removeGroup=function(t){var e=this.getGroupDefinition(t);if(e){var r=this._groupDefs.indexOf(e);this._groupDefs.splice(r,1),this._applyGrouping()}return e},v.prototype.setGroupDefinitions=function(t){Array.isArray(t)&&(t=(t=t.map(v._cloneObject)).filter(v._isValidGroup)).length||(t=null),t?(this._groupDefs=t,this._applyGrouping()):this._groupDefs.length&&(this._groupDefs=[],this._applyGrouping())},v._isValidGroup=function(t){return!(!t||!t.id)},v._cloneObject=function(t){var e=Object(d.a)(t);return Array.isArray(e.children)?e.children=e.children:e.children=[],e},v.prototype.getGroupDefinitions=function(){return this._groupDefs.slice()},v.prototype.setGroupDefinition=function(t,e){var r=this.getGroupDefinition(t);if(r){var i=this._groupDefs.indexOf(r);(e=v._cloneObject(e)).id=t,this._groupDefs[i]=e,this._applyGrouping()}},v.prototype.getGroupDefinition=function(t){return t&&this._groupMap[t]||null},v.prototype.setGroupChildren=function(t,e){var r=this.getGroupDefinition(t);r&&(Array.isArray(e)?(r.aaa=0,r.children=e.slice(),this._applyGrouping()):!e&&r.children.length&&(r.children=[],this._applyGrouping()))},v.prototype.getGroupChildren=function(t){var e=this.getGroupDefinition(t);return e?e.children:null},v.prototype.getChildColumnIndices=function(t){var e=this._groupMap[t];if(e){for(var r,i=this._getGroupMembers(e),n=[],o=0;o<i.length;o++)(r=this.getColumnIndex(i[o]))>-1&&n.push(r);return n.sort()}return null},v.prototype.getGroupIds=function(t){if(null!=t){var e=t;if("number"==typeof t&&(e=this.getColumnId(t)),e){var r=this._childToParent[e];if(r){for(var i=[r],n=this._groupMap[r];n&&n.parent;)(n=this._groupMap[n.parent])&&i.push(n.id);return i}}}return null},v.prototype.getMaxGroupLevel=function(){return this._maxDepth},v.prototype.getGroupLevel=function(t){var e=this._visibleGroupMap[t];return e?e.onRow:-1},v.prototype._getGroupMembers=function(t,e){e||(e=[]);for(var r,i,n=t.children,o=this._groupMap,s=0;s<n.length;s++)(r=o[i=n[s]])?this._getGroupMembers(r,e):e.push(i);return e},v.prototype._getRootGroup=function(t){if(!t)return null;for(var e=this._groupMap[t];e.parent;)e=this._groupMap[e.parent];return e},v.prototype._getColumnIndexById=function(t){if(this.getGridApi()&&t)for(var e=this._hosts[0],r=e.getColumnCount(),i=0;i<r;i++)if(this.getColumnId(i)===t&&e.isColumnVisible(i))return i;return-1},v.prototype._findColumnIndexArr=function(t,e){if(t){var r=t.children;if(r&&r.length)for(var i=0;i<r.length;i++){var n=r[i];if(n.id){if(n.id===t.id)return;this._findColumnIndexArr(this._visibleGroupMap[n.id],e)}else if(this._visibleGroupMap[n])this._findColumnIndexArr(this._visibleGroupMap[n],e);else{var o=this._getColumnIndexById(n);-1!==o&&e.push(o)}}}},v.prototype._findColumnSpans=function(t){var e=[];return this._findColumnIndexArr(t,e),v._groupConsecutiveArr(e)},v._groupConsecutiveArr=function(t){var e=[];if(!t||!t.length)return e;for(var r=t.sort((function(t,e){return t-e})),i=r[0],n=i,o=1;o<=r.length;o++){var s=r[o];s===n+1?n=s:(i===n?e.push([i,i]):e.push([i,n]),n=i=r[o])}return e},v.prototype._addGroupChild=function(t,e){var r=this._groupMap[e];if(t&&r){var i=r.children;if(i&&i.indexOf(t)<0)return i.push(t),!0}return!1},v.prototype._getParentGroup=function(t){return this._visibleGroupMap[this._childToParent[t]]},v.prototype._getGroupId=function(t,e){var r=this._childToParent[t];if(!r)return"";if(null==e)return r;for(var i=this.getGroupLevel(r);i>e&&r;)r=this._childToParent[r],i--;return r||""},v.prototype.getCellInfo=function(t){var e=this.getGridApi(),r=t.grid||this.getRelativeGrid(t);if(!e||!r)return null;var i=r.getCellInfo(t);if(!i.cell){var n=i.section.getCell(i.colIndex,i.rowIndex);i.cell=n}var o=this.getColumnId(i.colIndex),s=this._getGroupId(o,"title"==i.sectionType?i.rowIndex:null);if(!s)return i.columnId=o,i;var u=this.getGroupDefinition(s);if(u){var l="title"==i.sectionType&&i.rowIndex==this.getGroupLevel(s);l?(i.groupId=u.id,i.groupName=u.name,i.children=u.children):i.columnId=o,i.parent=l?u.parent||null:u.id}return i},v.prototype.moveColumnIntoGroup=function(t,e,r){var i=-1;if(-1!=(i="string"==typeof t?this._getColumnIndexById(t):t)){var n=this.getGroupDefinition(r);if(n){var o=this.getChildColumnIndices(r),s=-1,u=-1;o&&o.length&&(s=o[0],u=o[o.length-1]),e<s?(e=s)>i&&(e-=1):e>u&&(e=u)<i&&(e+=1);for(var l=0;l<n.children.length;l++){var p=this.getChildColumnIndices(n.children[l]);if(p&&p.length){var a=p[0],d=p[p.length-1];e>i&&(a-=1),e<i&&(d+=1),e>a&&e<d&&(e=d)}}for(var h=this.getColumnId(i),f=this._hosts.length;--f>=0;){this._hosts[f].moveColumn(i,e)}if(h){var c=this._childToParent[h];if(c){var _=this.getGroupChildren(c);_.splice(_.indexOf(h),1),this.setGroupChildren(c,_)}var g=this.getGroupChildren(r);g.indexOf(h)<0&&(g.push(h),this.setGroupChildren(r,g))}}else for(var m=this._hosts.length;--m>=0;){this._hosts[m].moveColumn(i,e)}}},v.prototype.setColumnParent=function(t,e){if(this.getGridApi()){var r=this._hosts[0].getColumnCount();this.moveColumnIntoGroup(t,r,e)}};!function(t,e){if(t&&e&&e.prototype.getName){var r=e.prototype.getName().replace(/Plugin$/,"");if(r){var i=t.tr;i||(i=t.tr={});var n=i.grid;n||(n=i.grid={}),n[r+"Plugin"]=e,i[r+"Extension"]=e}}}(window,v)}]);