!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){"use strict";r.r(t);var o={inherits:function(e,t){function r(){}r.prototype=t.prototype,e.prototype=new r,e.prototype.constructor=e,e.base=function(e,r,o){r||(r="constructor");for(var n=arguments.length,i=new Array(n),s=2;s<n;s++)i[s-2]=arguments[s];return t.prototype[r].apply(e,i)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(e,t){if(e&&t){this._events||(this._events={});var r=this._events[e];r?r.indexOf(t)<0&&(r.push(t),++this._listenerCount):(this._events[e]=[t],++this._listenerCount)}},n.prototype.removeEventListener=function(e,t){var r=this._events?this._events[e]:null;if(r){var o=r.indexOf(t);o>=0&&(r.splice(o,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(e){if(this._listenerCount){if(e){var t=this._events?this._events[e]:null;return!!t&&t.length>0}return!0}return!1},n.prototype.getListener=function(e,t){if(e){var r=this._events?this._events[e]:null;if(r)return t||(t=0),r[t]||null}return null},n.prototype.addListener=function(e,t){var r=e?e[t]:null;"function"==typeof r&&this.addEventListener(t,r)},n.prototype._prepareEventArguments=function(e,t){return t},n.prototype._dispatch=function(e,t){var r=this._events?this._events[e]:null;if(r){t=this._prepareEventArguments(e,t);for(var o=r.length,n=0;n<o;++n)r[n](t)}};n.preventDefault=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())};var i=function(e,t,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof e&&(this._resolveHandler=e),"function"==typeof t&&(this._rejectHandler=t),null!=r&&(this._ctx=r),this.promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this))};i.prototype.promise=null,i.prototype._resolve=null,i.prototype._reject=null,i.prototype._resolveHandler=null,i.prototype._rejectHandler=null,i.prototype._ctx=null,i.prototype._fulfilled=!1,i.prototype.resolve=function(e){if(this._resolve){if(this._resolveHandler){var t=this._resolveHandler(e,this._ctx||this);null!=t&&(e=t)}this._resolve(e),this._finally()}},i.prototype.reject=function(e){if(this._reject){if(this._rejectHandler){var t=this._rejectHandler(e,this._ctx||this);null!=t&&(e=t)}this._reject(e),this._finally()}},i.prototype.isFulfilled=function(){return this._fulfilled},i.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(e,t){return function(e,t,r){if(!e)return null;if(!t||e===t)return e;var o;if(r)for(var n=r.length,i=0;i<n;++i)(o=r[i])&&l(e,t,o);else for(o in t)l(e,t,o);return e}({},e,t)},l=function(e,t,r){var o=t[r];if(null!=o){var n=e[r];Array.isArray(n)?e[r]=n.concat(o):Array.isArray(o)&&n?e[r]=o.concat(n):e[r]=o}},u=function(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("object"==typeof e){if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!u(e[r],t[r]))return!1}else{if(Object.keys(e).length!==Object.keys(t).length)return!1;for(var o in e)if(!u(e[o],t[o]))return!1}return!0}return!1},a=function(e){return Array.isArray(e)?"{\n"+e.join("\n")+"\n}":e},p=function(e){return e.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},d=function(e,t){if(!e)return null;var r=document.createElement("style");r.textContent="\n"+e+"\n";var o,n=function(e){var t;if(e&&(e.shadowRoot?t=e.shadowRoot:e.getRootNode&&(t=e.getRootNode()),t&&t!==document&&t!==e))return t;return null}(t),i=!0;return n||(i=!1,n=document.head),i&&n.children&&n.children.length&&(o=n.children[0]),o?n.insertBefore(r,o):n.appendChild(r),r},h=function(e,t){for(var r in t||(t=[]),e){var o=e[r];"object"==typeof o?h(o,t):t.push(o)}return t},f=function(e){if(!e||"string"!=typeof e)return"";if("#"===e.charAt(0))return e;var t=e.match(/\d+/g);if(!t||t.length<3)return e;for(var r="#",o=0;o<3;o++){var n=+t[o];n>=16||(r+="0"),r+=n?n.toString(16).toUpperCase():"0"}return r},g={},c=function(e,t){"attributes"==t.type&&"lang"==t.attributeName&&(e.lang=t.target.lang||"en")},_=function(e,t,r){"attributes"===r.type&&(null!=t?r.attributeName===t&&e(r.target.getAttribute(t)):e(r.target))};g._getNewId=function(){return"observer_"+ ++g._id},g._addObserver=function(e,t,r){var o=r;o||(o={}),o.attributes=!0,g._observer.observe(e,o),g._addListener(e,t)},g._onMutationCallback=function(e){for(var t=0;t<e.length;t++)for(var r=e[t],o=g._listeners[r.target._observeId],n=0;n<o.length;n++)o[n](r)},g._addListener=function(e,t){var r=g._listeners;if(r||(r=g._listeners={}),!e._observeId){var o=g._getNewId();e._observeId=o}r[e._observeId]||(r[e._observeId]=[]);var n=r[e._observeId];n.indexOf(t)<0&&n.push(t)},g.addLanguageListener=function(e){e&&(e.lang=document.documentElement.lang||"en",g._addObserver(document.documentElement,c.bind(null,e)))},g.addAttributeListener=function(e,t,r){e&&t&&g._addObserver(e,_.bind(null,t,r))},g._observer=new MutationObserver(g._onMutationCallback),g._listeners={},g._id=0;var m={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},v={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};v.themeColors=v._defaultColors,v._components={},v._themeName="",v._elfVersion=0,v._dummyIcon=null,v._iconLoaded=!1,v._profileName=null,v._callbacks=[],v._observed=!1,v._pendingResolve=!1,v._themeLoaded=!1,v._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},v._icons["halo-theme"]=v._icons["elf-theme-halo"],v._icons["solar-theme"]=v._icons["elf-theme-solar"],v.getElfVersion=function(){if(!v._elfVersion){var e=0;if(window.EFX_GRID){var t=window.EFX_GRID.version;e=+(t=t.split("."))[0]}else if(window.elf)if(window.elf.version){var r=window.elf.version.match(/\d/);r&&r[0]&&(e=parseInt(r[0],10))}else window.elf.customElements?e=3:window.customElements&&(e=4);else window.Polymer&&(e=1);v._elfVersion=e}return v._elfVersion},v.hasComponent=function(e){var t=v._components[e];if(null==t){t=0;var r=v.getElfVersion();if(e)1===r?document.createElement(e).is===e&&(t=r):r>1&&(window.customElements&&window.customElements.get(e)||document.createElement(e).constructor!==HTMLElement)&&(t=r),v._components[e]=t}return t},v.toLangString=function(e){if(!e)return"";if("zh-hant"===(e=e.toLowerCase()))return"zh-Hant";var t=e.replace(/-.*/,"");return m[t]?t:""},v.hasTheme=function(e){return e===v.getThemeName()},v.getThemeName=function(e){return v._themeName||(v._themeName=v.getCssVariable("--theme-name",document.documentElement)),v._themeName},v.setThemeName=function(e){v._themeName=e},v.isThemeLoaded=function(){return v._themeLoaded},v.getColors=function(){return v.themeColors},v.isHaloTheme=function(e){return null==e&&(e=v.getThemeName()),!!e&&e.indexOf("halo")>=0},v.injectIcons=function(e,t){if("object"==typeof e){var r=v.getThemeName();e.themeName=r;var o=v.getElfVersion();e.elfVersion=o;var n=v._icons[r];n&&(e.icons=n)}},v.getIconList=function(){var e=v._icons[v.getThemeName()];return e?h(e):[]},v._onIconPreloaded=function(){if(v._dummyIcon){var e=v._dummyIcon.parentNode;e&&e.removeChild(v._dummyIcon),v._dummyIcon=null}},v.prepareIconPreloading=function(){if(!v._iconLoaded){v._iconLoaded=!0;var e=v.getIconList();if(e.length){setTimeout(v._onIconPreloaded,10);var t=v._dummyIcon=document.createElement("coral-icon");return t.style.transform="scale(0)",document.body.appendChild(t),e}}return null},v.getCssVariable=function(e,t){var r="",o=t||document.body;return window&&"string"==typeof e&&1===o.nodeType&&e.match(/^--/)&&(r=(r=window.getComputedStyle(o).getPropertyValue(e)).replace(/[\"\']/g,"")),r},v.getCssVariables=function(e,t){var r=t||document.body;if(window&&1===r.nodeType){var o=window.getComputedStyle(r);for(var n in e){var i=e[n];i&&i.match(/^--/)&&(e[n]=o.getPropertyValue(i).replace(/\"/g,""))}}return e||null},v.setRTK=function(e){null!=e&&(v._rtk=e)},v.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},v._addThemeChangedCallback=function(e){var t=v._callbacks;t.indexOf(e)<0&&t.push(e)},v.reloadThemeColors=function(){return v._deferred&&v._deferred.isFulfilled()?(v._profileName="",v._themeLoaded=!1,v.themeReady=null,v.getThemeColors()):v.themeReady},v.getThemeColors=function(e){if("function"==typeof e&&v._addThemeChangedCallback(e),v.themeReady)return v.themeReady;var t=v._deferred=new i;v.themeReady=t.promise;var r=v.getMovementColorProfile();if(r)r!==v._profileName?setTimeout(v._profileNameRetrieved,100):v._deferred.resolve(v.themeColors);else{var o={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},n=window?window.JET:null;if(v._themeLoaded=!1,v._rtk&&v._rtk.Settings)v._rtk.Settings.getAsync(o).then(v._loadingProfileSuccess).catch(v._loadingProfileFailure);else if(n&&n.Settings)try{n.Settings.read(v._loadingProfileSuccess,o)}catch(e){v._loadingProfileFailure()}else setTimeout(v._profileNameRetrieved,100)}return t.promise};var y=function(e){if(e!==v._profileName){v._retrieveThemeColors(e),v._pendingResolve&&(v._pendingResolve=!1,v._deferred.resolve(v.themeColors));for(var t=v._callbacks,r=0;r<t.length;r++)t[r]()}};v._loadingProfileSuccess=function(e){e&&document.documentElement.setAttribute("movement-color-profile",e.toLowerCase()),v._observed?v._pendingResolve=!0:v._profileNameRetrieved(e)},v._loadingProfileFailure=function(){v._retrieveThemeColors(),v._observed||(v._observed=!0,g.addAttributeListener(document.documentElement,y,"movement-color-profile")),v._deferred.reject("Failed to get movement color profile from settings.")},v._profileNameRetrieved=function(){var e=v.getMovementColorProfile();v._retrieveThemeColors(e),v._observed||(v._observed=!0,g.addAttributeListener(document.documentElement,y,"movement-color-profile")),v._deferred.resolve(v.themeColors)},v._retrieveThemeColors=function(e){v._themeLoaded=!0,v._profileName=e;var t=v.themeColors=v.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});t.up||(t.up=v._defaultColors.up,t.down=v._defaultColors.down,t.level=v._defaultColors.level,t.tickUp=v._defaultColors.tickUp,t.tickDown=v._defaultColors.tickDown),t.positive=t.up,t.negative=t.down,t.neutral=t.level;var r=document.createElement("table");r.style.visibility="hidden",r.style.position="fixed",r.style.left="0",r.style.top="0",r.style.width="0";var o=r.insertRow(-1),n=o.insertCell(-1);document.body.appendChild(r);var i=window.getComputedStyle(o);t.tableBg=i.backgroundColor;var s=window.getComputedStyle(n);t.tableText=s.color,t.tableBorder=s.borderColor,t.tableText===t.tableBorder&&(n.className="tr-lg",s=window.getComputedStyle(n),t.tableBg=s.backgroundColor,t.tableText=s.color,t.tableBorder=s.borderColor,t.tableText===t.tableBorder&&(t.tableBg=v._defaultColors.baseGrid,t.tableText=v._defaultColors.baseText,t.tableBorder="")),t.tableBg=f(t.tableBg),t.tableText=f(t.tableText),t.tableBorder=f(t.tableBorder),document.body.removeChild(r),t.baseGrid=t.tableBg,t.baseText=t.tableText,t.trackColor=t.primary||v._defaultColors.trackColor};var C=function(){};o.inherits(C,n),C.prototype._hosts=null,C.prototype._compositeGrid=null,C.prototype._realTimeGrid=null,C.prototype._rowGetter=null,C.prototype._initializedGrid=!1,C.prototype.listen=C.prototype.addEventListener,C.prototype.unlisten=C.prototype.removeEventListener,C.prototype.afterInit=function(e,t,r){var o=null;r&&r.getCoreGrid&&(o=r.getCoreGrid()),o&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&o.loadPlugin(this,t)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?P:D,this._afterInit())},C.prototype._afterInit=function(){},C.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},C.prototype.hasMultiTableSupport=function(){return!1},C.prototype._prepareEventArguments=function(e,t){return t||(t={}),t.api=this.getGridApi(),t},C.prototype.getName=function(){return"GridPlugin"},C.prototype.initialize=function(e,t){},C.prototype.unload=function(e){this._dispose()},C.prototype.getRelativeGrid=function(e){var t=null;if(e.target){var r=(t=e.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else e.getElement?t=e.getElement():1===e.nodeType&&(t=e);if(t)for(var o=this._hosts.length;--o>=0;){var n=this._hosts[o];if(n.getElement().contains(t))return n}return null},C.prototype.setGridWrapper=function(e,t){e&&("compositegrid"===(e=e.toLowerCase())?this._compositeGrid=t:"realtimegrid"===e&&(this._realTimeGrid=t))},C.prototype.getGridApi=function(e){if(null==e)return this._compositeGrid||this._realTimeGrid;var t="number"==typeof e?this._hosts[e]:e;return t&&t._wrapper||null},C.prototype.getColumnName=function(e){if(this._compositeGrid){var t=this._compositeGrid.getColumnModel(e);if(t)return t.title?t.title:t.field}else{var r=this.getColumnIndex(e),o=this._realTimeGrid.getColumnDefinition(r);if(o)return o.getName()}return""},C.prototype.getColumnIndex=function(e){if("number"==typeof e)return e;if(this._compositeGrid){var t=this._compositeGrid.getColumnFields().indexOf(e);return t>-1?t:this._compositeGrid.getColumnIndex(e)}return this._realTimeGrid.getColumnIndex(e)},C.prototype.getColumnIndices=function(e){var t=this.getGridApi();if(t.getColumnIndices)return t.getColumnIndices(e);if(this._compositeGrid){for(var r,o=this._compositeGrid.getColumnFields(),n=this._compositeGrid.getColumnCount(),i=[],s=0;s<e.length;s++)if("number"==typeof(r=e[s]))r>=0&&r<n&&i.push(r);else{var l=o.indexOf(r);-1!==l&&i.push(l)}return i}return this._realTimeGrid.getColumnIndices(e)},C.prototype.getColumnId=function(e){if("string"==typeof e)return e;var t=this.getColumnCount();if(e<0||e>=t)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(e);var r=this._realTimeGrid.getColumnDefinition(e);return r?r.getId():""},C.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},C.prototype.getColumnField=function(e){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(e):""},C.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},C.prototype.getColumnCount=function(){if(this._hosts){var e=this._hosts[0];return e?e.getColumnCount():0}return 0},C.prototype._moveColumnById=function(e,t){var r=this._hosts,o=r?r.length:0;if(o){for(var n=0,i=0;i<o;++i)n|=r[i].moveColumnById(e,t);return!!n}return!1},C.prototype._reorderColumns=function(e,t){var r=this._hosts,o=r?r.length:0;if(o){for(var n=0,i=0;i<o;++i)n|=r[i].reorderColumns(e,t);return!!n}return!1},C.prototype._loadPlugin=function(e,t,r){return e||(e=t.getPlugin(r))||(e=t.loadPlugin(r))&&this._initializedGrid&&(e._initializedGrid=!0),e},C.prototype._requestPlugin=function(e,t,r){return this._initializedGrid?C.requestPlugin(e,t,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},C.requestPlugin=function(e,t,r,o,n){var s=null;if(e){var l=null;1===e.nodeType?l=e.api:e.getCoreGrid?l=e:e.getPlugin&&(s=e),l&&(s=l.getCoreGrid(),o||n||(l.getModel?o=l:n=l))}if(!s)return Promise.reject("Cannot find grid element");var u=s.getPlugin(t);if(u)return Promise.resolve(u);var a=new i;return setTimeout(C._onPluginRequested.bind(null,{grid:s,pluginRef:t,compositeGrid:o,realTimeGrid:n,config:r,deferred:a}),10),a.promise},C._onPluginRequested=function(e){var t=e.grid;if(!t.getElement())return e.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+e.pluginRef);var r=t.getPlugin(e.pluginRef);if(r)return e.deferred.resolve(r);var o=!1;return e.pluginRef.beforeInit&&(o=!0,e.pluginRef.beforeInit(t.getElement(),e.config,!0)),(r=t.loadPlugin(e.pluginRef,e.config))?(!o&&r.beforeInit&&(o=!0,r.beforeInit(t.getElement(),e.config)),r.setGridWrapper&&(e.compositeGrid?r.setGridWrapper("compositegrid",e.compositeGrid):e.realTimeGrid&&r.setGridWrapper("realtimegrid",e.realTimeGrid)),r.afterInit&&r.afterInit(),e.deferred.resolve(r)):e.deferred.reject("Unable to load required dependency: "+e.pluginRef)},C.prototype._getPlugin=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getPlugin(e):null},C.prototype._getColumnData=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getColumnData(e):null},C.prototype._getColumnOption=function(e,t,r){var o=this._getColumnData(e,r);return o?o[t]:null},C.prototype._newColumnData=function(e,t){if(null==t&&(t=this._hosts[0]),!t)return{};var r=t.getColumnData(e);return r||(r=t.setColumnData(e,{})),r},C.prototype._getField=function(e){var t=this._compositeGrid||this._realTimeGrid;return t?t.getColumnField(e):""},C.prototype._getRowData=function(e){return this._realTimeGrid&&e?e.ROW_DEF.getRowData():e},C.prototype._getRow=function(e,t){return T(e.getRowDataAt(t))},C.prototype._getData=function(e,t,r){var o=this._getRow(e,t);return o?o[r]:void 0},C.prototype._setData=function(e,t,r,o){if(this._realTimeGrid){var n=I(e,t);n&&n.setData(r,o)}else"number"==typeof t?e.setDataAt(t,r,o):e.setData(t,r,o)},C.prototype._setRowData=function(e,t,r){if(this._realTimeGrid){var o=I(e,t);o&&o.setRowData(r)}else"number"==typeof t?e.setRowDataAt(t,r):e.setRowData(t,r)},C.prototype._setStaticData=function(e,t,r,o){if(this._realTimeGrid){var n=I(e,t);n&&n.setStaticData(r,o)}else this._setData(e,t,r,o)},C.prototype._setColumnData=function(e,t,r,o){if(t){var n=Array.isArray(o)?o:e.getAllRowIds(!0),i=n?n.length:0;if(i)if(1!==i){var s=Array.isArray(r)?r:n.map((function(){return r}));if(this._realTimeGrid){for(var l=0;l<i;++l){var u=e.getRowData(n[l]);if(u){var a=u.ROW_DEF;a&&(a.getRowData()[t]=s[l])}}e.dispatchGlobalChange||(e=e.getDataSource()),e&&e.dispatchGlobalChange&&e.dispatchGlobalChange()}else e.setColumnData(t,s,n)}else this._setData(e,n[0],t,Array.isArray(r)?r[0]:r)}},C.prototype._activateColumnRenderer=function(e,t,r){if(null!=e){var o=this._realTimeGrid;o?o.activateColumnRenderer(e,t,r):"function"==typeof r?this._hosts[0].setColumnDataBindingHandler(e,r):this._hosts[0].setColumnDataBindingHandler(e,null)}};var G=function(){},b={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};C.prototype._mockMouseEvent=function(e,t,r){null==e&&(e=0),null==t&&(t=0);var o=r||{};if(o.preventDefault=G,o.stopPropagation=G,e>=0&&t>=0){var n=this._activeGrid||this._hosts[0],i=n?n.getCell(o.sectionType||"content",e,t):null;o.target=i?i.getElement():null}return o},C.prototype._mockKeyboardEvent=function(e,t){var r=t||{};if(r.preventDefault=G,r.stopPropagation=G,"string"==typeof e){var o=b[e.toLowerCase()]||0;e=o||e.charCodeAt(0)}return r.keyCode=e,r},C._staticStyles={},C._themeLoaders={},C._themeLoadSuccess=function(e,t){var r=this.getName(),o=C._staticStyles[r]=e(t);this.applyStyles(o,r)},C.prototype.applyStaticStyles=function(e){var t=this.getName(),r=C._staticStyles[t];r?this.applyStyles(r,t):e&&(C._themeLoaders[t]||(C._themeLoaders[t]=v.getThemeColors()),C._themeLoaders[t].then(C._themeLoadSuccess.bind(this,e)))},C.prototype.applyStyles=function(e,t,r){t||(t=this.getName());var o,n,i="_style"+t,s=this._hosts,l=s.length;if(l)if(r)for(o=0;o<l;o++)n=s[o],this.revokeStyles(n,t),n[i]=d(e,n.getElement());else for(o=0;o<l;o++)(n=s[o])[i]||(d(e,n.getElement()),n[i]=!0)},C.prototype.revokeStyles=function(e,t){if(e&&t){var r=e[t="_style"+t];r&&1===r.nodeType&&(r.parentNode.removeChild(r),e[t]=null)}};var I=function(e,t){var r="number"==typeof t?e.getRowDataAt(t):e.getRowData(t);return r&&r.ROW_DEF||null},D=function(e){return e},P=function(e){return e?e.ROW_DEF.getRowData():null},T=function(e){if(e){var t=e.ROW_DEF;return t?t.getRowData():e}return null},w=function(){this._groupMap={},this._childToParent={}};w.prototype._groupMap,w.prototype._childToParent,w.getGroupId=function(e){return e&&e.id||""},w.calcTreeDepth=function(e,t){for(var r=-1,o=t;o;){if(++r>15){console.log("WARNING: Infinite loop detected during column group creation");break}o=e[o.parentId]}return r},w.getLeafDescendants=function(e,t){var r=e[t];if(!r)return null;for(var o=[],n=[r],i=0,s={};i<n.length;){s[(r=n[i++]).id]=!0;for(var l=r.children,u=l?l.length:0,a=0;a<u;++a){var p=l[a];(r=e[p])?s[r.id]||n.push(r):o.push(p)}}return o},w._cloneObject=function(e){var t=s(e);return Array.isArray(t.children)?t.children=t.children.slice():t.children=[],t},w._toGroupDefinition=function(e,t){var r=null;return e&&(r=Array.isArray(e)?{children:e.slice()}:w._cloneObject(e),t&&(r.id||(r.name=t),r.id=t)),r},w.prototype.toString=function(){var e=this._groupMap,t=[];for(var r in t.push("=== groupDefs ==="),e){var o=e[r];t.push(r+": "+JSON.stringify(o,["id","parentId","children"]))}return t.push("=== childToParent ==="),t.push(JSON.stringify(this._childToParent,null,2)),t.push(""),t.join("\n")},w.prototype.getGroup=function(e){return e&&this._groupMap[e]||null},w.prototype.getDefinition=w.prototype.getGroup,w.prototype.getGroups=function(){var e=[],t=this._groupMap;for(var r in t)e.push(t[r]);return e},w.prototype.getGroupIds=function(){return Object.keys(this._groupMap)},w.prototype.getGroupMap=function(){return this._groupMap},w.prototype.cloneGroupMap=function(){var e=this._groupMap,t={};for(var r in e){var o=e[r],n=w._cloneObject(o);t[r]=n}return t},w.prototype.rebuildMap=function(){var e,t,r=this._groupMap,o=this._childToParent={},n=Object.keys(r),i=n.length;for(e=0;e<i;++e)for(var s=r[t=n[e]].children,l=s?s.length:0,u=0;u<l;u++)o[s[u]]=t;for(e=0;e<i;++e){var a=o[t=n[e]];a&&(r[t].parentId=a)}},w.prototype.getGroupChildren=function(e){var t=this._groupMap[e];return t?t.children:null},w.prototype.getLeafDescendants=function(e){return w.getLeafDescendants(this._groupMap,e)},w.prototype.getGroupLevel=function(e){return w.calcTreeDepth(this._groupMap,this._groupMap[e])},w.prototype.getRootGroup=function(e){if(!e)return null;var t=this._groupMap,r=t[e]||null;if(r)for(;r.parentId;){var o=t[r.parentId];if(!o)break;r=o}return r},w.prototype.getParentGroup=function(e){return this.getGroup(this._childToParent[e])},w.prototype.getParentIds=function(e){if(e&&"string"==typeof e){var t=this._childToParent[e];if(t){for(var r=[t],o=this._groupMap[t];o&&o.parentId;)(o=this._groupMap[o.parentId])&&r.push(o.id);return r}}return null},w.prototype.getParentId=function(e,t){var r=this._childToParent[e];if(null!=t)for(var o=this.getGroupLevel(r);o>t&&r;)r=this._childToParent[r],o--;return r||""},w.prototype.removeAllGroups=function(){for(var e in this._groupMap)return this._groupMap={},this._childToParent={},!0;return!1},w.prototype.setGroups=function(e){for(var t=this._groupMap={},r=e?e.length:0,o=0;o<r;o++){var n=e[o],i=n.id;i&&(t[i]=w._cloneObject(n))}this.rebuildMap()},w.prototype.addGroup=function(e){var t=w.getGroupId(e);return t?this.setGroup(t,e):t},w.prototype.removeGroup=function(e){return!!this._groupMap[e]&&(this.removeAllChildren(e),this.unsetParent(e),delete this._groupMap[e],!0)},w.prototype.setGroup=function(e,t){if(!e)return"";if(t){var r=w._toGroupDefinition(t,e);this._ungroupChildren(r.children),this._groupMap[e]&&this.removeAllChildren(e);var o=this._childToParent[e];o&&(r.parentId=o.id),this._groupMap[e]=r;for(var n=r.children,i=n.length,s=0;s<i;++s){var l=n[s];this._childToParent[l]=e;var u=this._groupMap[l];u&&(u.parentId=e)}}else if(!this.removeGroup(e))return"";return e},w.prototype._ungroupChildren=function(e){if(Array.isArray(e))for(var t=e.length,r=0;r<t;++r)this.unsetParent(e[r])},w.prototype.hasGroupChild=function(e,t){var r=this._groupMap[e];if(t&&r){var o=r.children;if(o)return o.indexOf(t)>=0}return!1},w.prototype.contains=function(e,t){if(e&&t){if(e===t)return!0;for(var r=20,o=this._childToParent[t];o&&r;){if(e===o)return!0;--r,o=this._childToParent[o]}}return!1},w.prototype.addGroupChild=function(e,t,r){var o=this._groupMap[e];if(t&&o){var n=o.children;if(n&&n.indexOf(t)<0){this.unsetParent(t),this._childToParent[t]=e;var i=this._groupMap[t];return i&&(i.parentId=e),null!=r&&r>=0?n.splice(r,0,t):n.push(t),!0}}return!1},w.prototype.removeGroupChild=function(e,t){return null==t?this.unsetParent(e):!!this.hasGroupChild(e,t)&&this.unsetParent(t)},w.prototype.unsetParent=function(e){var t=this._childToParent[e];if(!t)return!1;this._childToParent[e]="";var r=this._groupMap[e];r&&(r.parentId="");var o=this._groupMap[t];if(o){var n=o.children;if(n&&n.length){var i=n.indexOf(e);i>=0&&n.splice(i,1)}}return!0},w.prototype.removeAllChildren=function(e){var t=this._groupMap[e];if(t){var r=t.children,o=r?r.length:0;if(o){t.children=[];for(var n=0;n<o;++n){var i=r[n];this._childToParent[i]&&(this._childToParent[i]="");var s=this._groupMap[i];s&&(s.parentId="")}return!0}}return!1},w.prototype.setGroupChildren=function(e,t){var r=this._groupMap[e];if(r){if(Array.isArray(t)){var o=t.slice();this._ungroupChildren(o),this.removeAllChildren(e),r.children=o;for(var n=r.id,i=o.length,s=0;s<i;++s){var l=o[s];this._childToParent[l]=n;var u=this._groupMap[l];u&&(u.parentId=n)}return!0}if(!t&&r.children.length)return this.removeAllChildren(e),!0}return!1},w.prototype.getGroupName=function(e){var t=this._groupMap[e];return t&&t.name||""},w.prototype.setGroupName=function(e,t){var r=this._groupMap[e];return!(!r||r.name===t)&&(r.name=t,!0)};var R=function(e){var t=this;t._hosts=[],t._onColumnChanged=t._onColumnChanged.bind(t),t._onColumnAdded=t._onColumnAdded.bind(t),t._onColumnMoved=t._onColumnMoved.bind(t),t._onColumnRemoved=t._onColumnRemoved.bind(t),t._requestApplyAddChildGroup=t._requestApplyAddChildGroup.bind(this),t._onPostSectionRender=t._onPostSectionRender.bind(t),t._onBeforeColumnBoundUpdate=t._onBeforeColumnBoundUpdate.bind(t),t._groupDefs=new w,e&&t.config({columnGrouping:e})};o.inherits(R,C),R.prototype._groupDefs,R.prototype._visibleGroupMap,R.prototype._maxDepth=0,R.prototype._restructuring=!1,R.prototype._rerenderTimerId=0,R.prototype._groupHeaderTimerId=0,R.prototype._addingTimerId=0,R.prototype._addingEvents=null,R.prototype._legacyColumnGroups=null,R.prototype._selectedColMap,R._ascSortLogic=function(e,t){return e-t},R._getTooltip=function(e){var t=e.tooltip,r=e.title||e.name;if(null!=t){if("string"==typeof t)return t;if(!0===t)return r;if(!1===t)return""}return r},R._hasGroupId=function(e){return!(!e||!e.id)},R._toGroupDefinition=function(e,t){var r=null;return e&&(r=Array.isArray(e)?{children:e}:R._cloneObject(e),t&&(r.id||(r.name=t),r.id=t)),r},R._cloneObject=function(e){var t=s(e);return Array.isArray(t.children)||(t.children=[]),t},R._flattenGroupDefs=function(e){for(var t=e?e.length:0,r=0;r<t;r++)R._recursivelyFlatten(e[r],e)},R._recursivelyFlatten=function(e,t){if(e&&e.children)for(var r,o,n=e.children,i=0;i<n.length;i++)"string"!=typeof(r=n[i])&&(o=r.id)&&(n[i]=o,t.indexOf(r)<0&&t.push(r),R._recursivelyFlatten(r,t))},R._isNotTimeSeriesGroup=function(e){return!e.timeSeriesGroup},R.prototype.getName=function(){return"ColumnGroupingPlugin"},R.prototype.hasMultiTableSupport=function(){return!0},R.prototype.initialize=function(e,t){this._hosts.indexOf(e)>=0||(this._hosts.push(e),"function"==typeof e.setColumnGrouping&&e.setColumnGrouping(this._groupDefs),this._addingEvents||(this._addingEvents=[]),1===this._hosts.length&&(e.listen("columnAdded",this._onColumnAdded),e.listen("columnMoved",this._onColumnMoved),e.listen("columnRemoved",this._onColumnRemoved),e.listen("columnVisibilityChanged",this._onColumnChanged),e.listen("postSectionRender",this._onPostSectionRender),e.listen("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate)),this.config(t),this._legacyColumnGroups=null,this._initializedGrid&&e.getSection("title")&&this._applyGrouping(),R._styles||(R._styles=function(e){if(e){var t="";if(Array.isArray(e))t=e.map(a).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else t="string"==typeof e?e:e+"";if(t)return t.replace(/{[\w\W]*?}/g,p)}return""}([".tr-grid .title .column .cell:not(:last-child)",["box-shadow: none;"]])),e._columnGroupingStyles||(e._columnGroupingStyles=!0,d(R._styles,e.getElement())))},R.prototype.beforeProcessOption=function(e,t){if("columnGroups"===e)return this._legacyColumnGroups=t,!1},R.prototype._afterInit=function(){this._applyGrouping()},R.prototype.unload=function(e){var t=this._hosts.indexOf(e);t<0||(this._hosts.splice(t,1),"function"==typeof e.setColumnGrouping&&e.setColumnGrouping(null),e.unlisten("columnAdded",this._onColumnChanged),e.unlisten("columnMoved",this._onColumnMoved),e.unlisten("columnRemoved",this._onColumnRemoved),e.unlisten("postSectionRender",this._onPostSectionRender),e.unlisten("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate),this._hosts.length||(this._rerenderTimerId&&(clearTimeout(this._rerenderTimerId),this._rerenderTimerId=0),this._groupHeaderTimerId&&(clearTimeout(this._groupHeaderTimerId),this._groupHeaderTimerId=0),this._addingTimerId&&(clearTimeout(this._addingTimerId),this._addingTimerId=0,this._addingEvents.length=0)),this._dispose())},R.prototype.config=function(e){if(e){var t=e.columnGrouping,r=null;Array.isArray(t)&&(r=(r=t.filter(R._hasGroupId)).map(R._cloneObject));var o=e.columns;o&&(r=this._migrateLegacyStructure(r,o)),r&&(R._flattenGroupDefs(r),this._groupDefs.setGroups(r))}},R.prototype.getConfigObject=function(e){var t=e||{},r=this.getGroupDefinitions();return(r=r.filter(R._isNotTimeSeriesGroup)).length&&(t.columnGrouping=r),t},R._mapParentToChildren=function(e,t,r){if(t&&r){var o=e[t];return o||(o=e[t]=[]),o.push(r),!0}return!1},R.prototype._migrateLegacyStructure=function(e,t){var r=this._legacyColumnGroups;if(!r||!this._compositeGrid)return e;e||(e=[]);for(var o=t.length,n={},i=0;i<o;++i){var s=t[i];s&&R._mapParentToChildren(n,s.columnGroup,s.id)}var l,u,a=r.length;for(l=0;l<a;++l)(u=r[l])&&R._mapParentToChildren(n,u.parent,u.id);for(l=0;l<a;++l)if((u=R._cloneObject(r[l]))&&u.id){var p=n[u.id];u.children=p||[],u.formatter&&u.formatter.render&&(u.legacyRender=u.formatter.render,delete u.formatter),e.push(u)}return e.filter(R._hasGroupId)},R.prototype._freezeColumn=function(e,t){for(var r=this._hosts,o=0;o<r.length;o++)r[o].freezeColumn(e,t)},R.prototype._applyPinning=function(){var e,t,r,o=this.getColumnCount(),n=this.getColumnIds(),i=this._hosts[0].getFrozenColumnCount()-1,s=this._hosts[0].getFirstPinnedRightIndex(),l=!1;for(e=o;e>i;e--)if(t=this._groupDefs.getParentId(n[e]),(r=this._visibleGroupMap[t])&&r.leftPinned){i=e,l=!0;break}for(e=i;e<s;e++)if(t=this._groupDefs.getParentId(n[e]),(r=this._visibleGroupMap[t])&&r.rightPinned){s=e,l=!0;break}if(l){var u=o-s;this._freezeColumn(i,u)}},R.prototype._applyGrouping=function(){if(this._rerenderTimerId=0,!this._restructuring){var e,t,r,o,n,i;this._restructuring=!0,this._evaluateGroupStructure(),this._applyPinning();var s=this._maxDepth+1,l=this._hosts.length;for(e=l;--e>=0;)if(n=this._hosts[e].getSection("title")){for(n.setRowCount(s),n.clearCellSpans(),i=n.getColumnCount(),t=0;t<i;t++)for(r=0;r<s;r++)(o=n.getCell(t,r,!1))&&(o.removeClass("no-sort"),o.removeClass("selected-group"),o.removeAttribute("group-id"));this._spanGroupVertically(n),this._spanGroupHorizontally(n)}for(this._restructuring=!1,e=l;--e>=0;){var u=this._hosts[e].getSectionSettings("title");u&&u.rerender()}}},R.prototype._evaluateGroupStructure=function(){var e=this._visibleGroupMap=this._groupDefs.cloneGroupMap();this._verifySingleChild(e),this._verifyColumnPinning(e);var t=this._maxDepth=-1;for(var r in e){var o=e[r],n=o.parentId;n&&(e[n]||(o.parentId=""));var i=w.calcTreeDepth(e,o);o.onRow=i,i>t&&(t=i)}this._maxDepth=t+1},R.prototype._setGroupPinning=function(e,t){if(e&&!e.leftPinned&&!e.rightPinned){"left"===t?e.leftPinned=!0:e.rightPinned=!0;for(var r=e.children,o=0;o<r.length;o++){var n=r[o],i=this._visibleGroupMap[n];i&&this._setGroupPinning(i,t)}}},R.prototype._verifyColumnPinning=function(e){var t,r,o,n,i=this._hosts[0],s=i.getFrozenColumnCount()-1,l=i.getFirstPinnedRightIndex(),u=this.getColumnCount(),a=this._groupDefs,p=this._visibleGroupMap;if(s>=0)for(t=s;t>=0;t--)n=this.getColumnId(t),(r=a.getParentId(n))&&p[r]&&(o=a.getRootGroup(r))&&this._setGroupPinning(p[o.id],"left");if(l<u)for(t=l;t<u;t++)n=this.getColumnId(t),(r=a.getParentId(n))&&p[r]&&(o=a.getRootGroup(r))&&this._setGroupPinning(p[o.id],"right")},R.prototype._verifySingleChild=function(e){if(this.getGridApi()){var t,r,o=this._hosts[0],n=this.getColumnCount(),i={};for(t=0;t<n;t++){var s=this.getColumnId(t);s&&o.isColumnVisible(t)&&(i[s]=1)}var l=Object.keys(e),u=l.length;for(t=0;t<u;t++)i[l[t]]=1;for(var a=!0;a;)for(a=!1,t=0;t<u;t++){var p=l[t],d=e[p];if(d){var h=d.children,f=h.length,g=[];for(r=0;r<f;r++){var c=h[r];i[c]&&g.push(c)}g.length<2?(delete e[p],i[p]=0,a=!0):d.children=g}}}},R.prototype._requestApplyGrouping=function(){this._rerenderTimerId||(this._rerenderTimerId=setTimeout(this._applyGrouping.bind(this),10))},R.prototype._requestGroupRendering=function(){this._groupHeaderTimerId||(this._groupHeaderTimerId=setTimeout(this.renderGroups.bind(this),10))},R.prototype._applyNearestGrouping=function(e){if(!(null==e||e<0)){var t=this.getColumnId(e),r=e-1,o=e+1,n=this.getGroupIds(r),i=this.getGroupIds(o),s=n?n.length:0,l=i?i.length:0,u=this._groupDefs.getParentId(t);if(u){var a=this._groupDefs.getGroupChildren(u),p=a?a.length:0;if(p<=1)return;if(s&&n[0]===u)return;if(l&&i[0]===u)return;if(this._groupDefs.unsetParent(t)&&1===(p=(a=this._groupDefs.getGroupChildren(u))?a.length:0)){var d=this._groupDefs.getParentId(u);d&&this._groupDefs.addGroupChild(d,a[0])}}if(s&&l)for(var h=0;h<s;h++){var f=n[h],g=i.indexOf(f);if(g>=0){this._groupDefs.addGroupChild(i[g],t);break}}}},R.prototype._spanGroupVertically=function(e){var t=this.getGridApi();if(t)for(var r=this._hosts[0],o=this._maxDepth+1,n=t.getColumnCount(),i=0;i<n;i++){var s=o,l=this._getVisibleParentGroup(this.getColumnId(i));if(l)s=o-(l.onRow+1);r.isColumnVisible(i)&&s>1&&e.setCellRowSpan(i,o-s,s)}},R.prototype._spanGroupHorizontally=function(e){var t,r,o,n,i,s,l=e,u=this._visibleGroupMap;for(var a in u){r=[],t=u[a],n=w.getLeafDescendants(u,a);var p=!!this._selectedColMap;for(s=0;s<n.length;s++){var d=n[s];(i=this._getColumnIndexById(d))>-1&&r.push(i),p&&this._selectedColMap&&(p&=this._selectedColMap[d])}if(r.sort(R._ascSortLogic),(o=r.length)>0){var h=r[0],f=r[o-1];if(l.setCellColSpan(h,t.onRow,f-h+1),t.colIndex=h,p)l.getCell(h,t.onRow).addClass("selected-group")}}},R.prototype.renderGroups=function(){this._groupHeaderTimerId=0;for(var e=this._hosts.length,t=this._visibleGroupMap,r=0;r<e;++r){var o=this._hosts[r].getSection("title");if(o)for(var n in t)this._renderGroup(t[n],o)}},R.prototype.getMutualGroupId=function(e){let t=e.length;for(let r=0;r<t;r++){"string"==typeof e[r]&&(e[r]=this.getColumnIndex(e[r]));let t=e[r],o=this.getGroupIds(t);if(!o)return"";let n=o.length;for(let t=0;t<n;t++){let r=o[t],n=this.getChildColumnIndices(r);if(u(n,e))return r}}return""},R.prototype._renderGroup=function(e,t){var r=e.colIndex;if(null!=r){var o=e.onRow,n=t.getCell(r,o),i=w.getLeafDescendants(this._visibleGroupMap,e.id),s=!1;if(this._selectedColMap){s=!0;for(var l=0;l<i.length;l++)if(!this._selectedColMap[i[l]]){s=!1;break}}if(n&&(n.setStyle("text-align",e.alignment||""),n.setTooltip(R._getTooltip(e)),n.setContent(e.name||e.title),n.addClass("no-sort"),n.setAttribute("group-id",e.id),s?n.addClass("selected-group"):n.removeClass("selected-group"),e.legacyRender&&e.legacyRender(r,n,e),e.render)){var u={};u.cell=n,u.colIndex=r,u.groupNode=e,e.render(u)}}},R.prototype._onPostSectionRender=function(e){"title"!==e.sectionType||this._restructuring||this.renderGroups()},R.prototype._requestApplyAddChildGroup=function(e){var t=e.context;(t?t.parent:null)&&(this._addingEvents.push(e),this._addingTimerId||(this._addingTimerId=setTimeout(this._applyTimeSeries.bind(this,e),10)))},R.prototype._applyTimeSeries=function(e){this._addingTimerId=0;var t=this._addingEvents;if(this._addingEvents=[],t.length>0){for(var r,o,n=[],i={},s=0;s<t.length;s++){var l,u,a=t[s];o=a.context.timeSeriesName,i[r=a.context.timeSeriesId]?(l=a.colIndex,u=this.getColumnId(l),i[r].children.push(u)):(i[r]={name:o,children:[]},l=a.colIndex,u=this.getColumnId(l),i[r].children.push(u))}for(r in i){var p="timeSerieGroup_"+r;if(this._groupDefs.getGroup(p))for(s=0;s<n.length;s++)this._groupDefs.addGroupChild(p,n[s]);else this.addGroup({id:p,title:i[r].name,children:i[r].children,timeSeriesGroup:!0})}}this._requestApplyGrouping()},R.prototype._onColumnAdded=function(e){var t=e.batches;t&&t.reset||(this._requestApplyAddChildGroup(e),this._applyNearestGrouping(e.colIndex)),this._requestApplyGrouping()},R.prototype._onColumnChanged=function(){this._requestApplyGrouping()},R.prototype._onColumnMoved=function(e){var t=e.batches;t&&t.move||this._applyNearestGrouping(e.toColIndex),this._requestApplyGrouping()},R.prototype._onColumnRemoved=function(e){var t=e.batches;if(t&&t.reset)this._requestApplyGrouping();else{var r=e.colId;r&&this._groupDefs.unsetParent(r)&&this._requestApplyGrouping()}},R.prototype._onBeforeColumnBoundUpdate=function(e){var t,r,o,n,i=e.selectedColumns,s=[],l={};for(t=0;t<i.length;t++)if(r=this.getColumnId(i[t])){if(!(n=this._groupDefs.getParentId(r))){o=r;break}l[n]=this._groupDefs.getGroup(n),s.push(r)}if(o)e.topBoundRowIndex=0;else{var u,a,p,d,h,f,g,c=this._maxDepth,_={};for(n in l)_[(a=this._groupDefs.getRootGroup(n)).id]=a,(u=l[n].onRow+1)<c&&(c=u);var m=_;for(t=0;t<c;t++)for(n in f=m,m={},f){if(a=f[n],h=!0,(d=this._groupDefs.getLeafDescendants(n)).length<=s.length){for(p=0;p<d.length;p++)if(s.indexOf(d[p])<0){h=!1;break}if(h)return void(e.topBoundRowIndex=t)}for(g=a.children,p=0;p<g.length;p++){var v=g[p];(a=this._groupDefs.getGroup(v))&&(m[v]=a)}}e.topBoundRowIndex=c}},R.prototype.addColumnToGroup=function(e,t,r){if(e){var o=this.getColumnCount();if(null!=r)this._groupDefs.getGroup(t)&&this._groupDefs.addGroupChild(t,e.id),o=r;this._realTimeGrid?this._realTimeGrid.insertColumn(e,o):this._compositeGrid&&this._compositeGrid.insertColumn(o,e),null==r&&this.setColumnParent(e.id||destColIndex,t)}},R.prototype.addGroup=function(e){return R._hasGroupId(e)?this.setGroupDefinition(e.id,e):""},R.prototype.addColumnGrouping=R.prototype.addGroup,R.prototype.removeGroup=function(e){return!!this._groupDefs.removeGroup(e)&&(this._applyGrouping(),!0)},R.prototype.getGroupDefinition=function(e){var t=this._getAvaliableChildren(e);if(t.length>1){var r=this._groupDefs.getGroup(e);return(r=R._cloneObject(r)).children=t,r}return null},R.prototype.getGroupDefinitions=function(){var e=[],t=this._groupDefs.getGroupMap();for(var r in t){var o=this.getGroupDefinition(r);o&&(delete o.parentId,e.push(o))}return e},R.prototype.setGroupDefinition=function(e,t){if(this._groupDefs.setGroup(e,t)){var r=this._groupDefs.getGroup(e);if(r){var o=this._hosts[0].getValidColumnList(r.children).map(R.getObjectId);o.length>1&&this.reorderColumns(o,o[0])}return this._applyGrouping(),e}return""},R.prototype.setGroupDefinitions=function(e){e=Array.isArray(e)?(e=e.filter(R._hasGroupId)).map(R._cloneObject):null,R._flattenGroupDefs(e),this._groupDefs.setGroups(e),this._applyGrouping()},R.prototype.setGroupChildren=function(e,t){return!!this._groupDefs.setGroupChildren(e,t)&&(this._applyGrouping(),!0)},R.prototype.setGroupName=function(e,t){if(this._groupDefs.setGroupName(e,t)){var r=this._visibleGroupMap[e];if(r){r.name=t;for(var o=this._hosts.length,n=0;n<o;++n){var i=this._hosts[n].getSection("title");i&&this._renderGroup(r,i)}}}},R.prototype._getAvaliableChildren=function(e){var t=this._groupDefs.getGroupChildren(e),r=t?t.length:0,o=[];if(r){o=this._hosts[0].getValidColumnList(t).map(R.getObjectId);for(var n=this._groupDefs.getGroupMap(),i=0;i<r;i++){var s=t[i];n[s]&&o.push(s)}}return o},R.prototype.getGroupChildren=function(e){var t=this._getAvaliableChildren(e);return t.length>1?t:null},R.prototype.getChildColumnIndices=function(e){var t=this._hosts[0],r=this._groupDefs.getLeafDescendants(e);return r?t.getValidColumnList(r).map(R.getObjectIndex):null},R.prototype.getGroupIds=function(e){if(null==e)return null;var t="number"==typeof e?this.getColumnId(e):e;return this._groupDefs.getParentIds(t)},R.prototype.getMaxGroupLevel=function(){return this._maxDepth},R.prototype.getGroupLevel=function(e){var t=this._visibleGroupMap[e];return t?t.onRow:-1},R.prototype._getColumnIndexById=function(e){if(this.getGridApi()&&e)for(var t=this._hosts[0],r=t.getColumnCount(),o=0;o<r;o++)if(this.getColumnId(o)===e&&t.isColumnVisible(o))return o;return-1},R.prototype._getVisibleParentGroup=function(e){return this._visibleGroupMap[this._groupDefs.getParentId(e)]||null},R.prototype.getCellInfo=function(e){var t=this.getGridApi(),r=e.grid||this.getRelativeGrid(e);if(!t||!r)return null;var o=r.getCellInfo(e);if(!o)return e;if(!o.cell){var n=o.section.getCell(o.colIndex,o.rowIndex);o.cell=n}var i=this.getColumnId(o.colIndex),s=this._groupDefs.getParentId(i,"title"==o.sectionType?o.rowIndex:null);if(!s)return o.columnId=i,o;var l=this._groupDefs.getGroup(s);if(l){var u="title"==o.sectionType&&o.rowIndex==this.getGroupLevel(s);u?(o.groupId=l.id,o.groupName=l.name||"",o.children=l.children):o.columnId=i,o.parent=u?l.parentId||null:l.id}return o},R.prototype.moveColumnIntoGroup=function(e,t,r){var o=this.getColumnIndex(e);if(-1!=o){var n=this._groupDefs.getGroup(r);if(n){var i=this.getChildColumnIndices(r),s=-1,l=-1;i&&i.length?(s=i[0],l=i[i.length-1]):(s=0,l=this.getColumnCount()),t<s?(t=s)>o&&(t-=1):t>l&&(t=l)<o&&(t+=1);for(var u=0;u<n.children.length;u++){var a=this.getChildColumnIndices(n.children[u]);if(a&&a.length){var p=a[0],d=a[a.length-1];t>o&&(p-=1),t<o&&(d+=1),t>p&&t<d&&(t=d)}}for(var h=this.getColumnId(o),f=this._hosts.length;--f>=0;){this._hosts[f].moveColumn(o,t)}h&&this._groupDefs.addGroupChild(r,h)&&this._applyGrouping()}else for(var g=this._hosts.length;--g>=0;){this._hosts[g].moveColumn(o,t)}}},R.prototype.setColumnParent=function(e,t){return t?this.addGroupChild(t,e):this.unsetParent(e)},R.prototype.addGroupChild=function(e,t){if(!this._groupDefs.getGroup(e))return!1;var r="";if("string"==typeof t)if(this._groupDefs.getGroup(t)){if(this._groupDefs.addGroupChild(e,t))return this._applyGrouping(),!0}else r=t;else r=this.getColumnId(t);if(!r)return!1;var o=this.getChildColumnIndices(e);return!!this._groupDefs.addGroupChild(e,r)&&(o&&o.length&&this.moveColumnById(r,o[o.length-1]+1)||this._applyGrouping(),!0)},R.prototype.removeGroupChild=function(e,t){if(!this._groupDefs.getGroup(e))return!1;var r="";if("string"==typeof t)if(this._groupDefs.getGroup(t)){if(this._groupDefs.unsetParent(t))return this._applyGrouping(),!0}else r=t;else r=this.getColumnId(t);if(!r)return!1;var o=e;0!==this._visibleGroupMap[e].onRow&&(o=this._groupDefs.getParentId(e,0));var n=this.getChildColumnIndices(o);return!!this._groupDefs.removeGroupChild(e,r)&&(n&&n.length>1&&this.moveColumnById(r,n[n.length-1]+1)||this._applyGrouping(),!0)},R.prototype.unsetParent=function(e){var t="string"==typeof e?e:this.getColumnId(e),r=this._groupDefs.getParentId(t);return!!r&&this.removeGroupChild(r,t)},R.prototype.getValidDestinationIndex=function(e,t){var r=null;(this._groupDefs.getGroup(e)||this.getColumnIndex(e)>-1)&&(r=this._getVisibleParentGroup(e));var o=-1,n=-1,i="string"==typeof t?this.getColumnIndex(t):t;if(r){var s=this.getChildColumnIndices(r.id);s&&s.length&&(o=s[0],n=s[s.length-1]),i<o&&-1!=i?i=this.getColumnId(o):(i>n||-1==i)&&(i=this.getColumnId(n+1));for(var l=this.getGroupChildren(r.id),u=0;u<l.length;u++){var a=l[u],p=this.getChildColumnIndices(a);if(p&&p.length&&(o=p[0],n=p[p.length-1],i>o&&i<=n)){i=n+1;break}}}else{var d=[],h=this.getColumnId(i),f=this._getVisibleParentGroup(h);f&&(f.parentId&&(f=this._groupDefs.getRootGroup(f.id)),d=this.getChildColumnIndices(f.id)),d&&d.length&&(o=d[0],n=d[d.length-1],i>o&&i<=n&&(i=n+1))}return i},R.prototype.moveGroup=function(e,t){var r,o=[];if(r=this._groupDefs.getGroup(e))for(var n=this.getChildColumnIndices(r.id),i=0;i<n.length;i++){var s=n[i],l=this.getColumnId(s);o.push(l)}else{if(!(this.getColumnIndex(e)>-1))return;o.push(e)}var u=this.getValidDestinationIndex(e,t),a=this.getColumnId(u);this.reorderColumns(o,a)},R.prototype.reorderColumns=function(e,t){return this._reorderColumns(e,t)},R.prototype.moveColumnById=function(e,t){return this._moveColumnById(e,t)},R.prototype.pinGroup=function(e,t){if(e){var r=this._visibleGroupMap[e];if(r){var o,n=this._hosts[0],i=n.getFrozenColumnCount()-1,s=n.getPinnedRightColumnCount(),l=this.getColumnCount(),u=this.getChildColumnIndices(e).length;if("right"===t){if(r.rightPinned)return;r.leftPinned&&(this.unpinGroup(e),i=n.getFrozenColumnCount()-1),r.rightPinned=!0,o=l-s,s+=u}else{if(r.leftPinned)return;r.rightPinned&&(this.unpinGroup(e),s=n.getPinnedRightColumnCount()),r.leftPinned=!0,o=-1===i?0:i+1,i+=u}this.moveGroup(e,o),this._freezeColumn(i,s)}}},R.prototype.unpinGroup=function(e,t){if(e){var r=this._visibleGroupMap[e];if(r&&(r.leftPinned||r.rightPinned)){var o=this._hosts[0],n=o.getFrozenColumnCount(),i=o.getPinnedRightColumnCount(),s=this.getColumnCount()-i,l=this.getChildColumnIndices(e).length,u=null;if(null!=t){var a=this.getColumnIndex(t);u=this.getColumnId(a)}r.leftPinned?(r.leftPinned=!1,this.moveGroup(e,n),this._freezeColumn(n-(1+l))):r.rightPinned&&(r.rightPinned=!1,this.moveGroup(e,s),this._freezeColumn(n-1,i-l)),null!=u&&this.moveGroup(e,u)}}},R.prototype.selectGroupHeaders=function(e){var t=this._hosts[0],r=e.length;if(t&&r){for(var o=[],n=0;n<r;n++)o.push(t.getColumnId(e[n]));var i=t.createColumnMap(o);i&&(this._selectedColMap=i)}else this._selectedColMap=null;this._requestGroupRendering()},R.getObjectIndex=function(e){return e.index},R.getObjectId=function(e){return e.id};!function(e,t){if(e&&t&&t.prototype.getName){var r=t.prototype.getName().replace(/Plugin$/,"");if(r){var o=e.tr;o||(o=e.tr={});var n=o.grid;n||(n=o.grid={}),n[r+"Plugin"]=t,o[r+"Extension"]=t}}}(window,R)}]);