!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n={inherits:function(t,e){function r(){}r.prototype=e.prototype,t.prototype=new r,t.prototype.constructor=t,t.base=function(t,r,n){r||(r="constructor");for(var i=arguments.length,o=new Array(i),u=2;u<i;u++)o[u-2]=arguments[u];return e.prototype[r].apply(t,o)}}},i=function(){};i.prototype._events=null,i.prototype._listenerCount=0,i.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var r=this._events[t];r?r.indexOf(e)<0&&(r.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},i.prototype.removeEventListener=function(t,e){var r=this._events?this._events[t]:null;if(r){var n=r.indexOf(e);n>=0&&(r.splice(n,1),--this._listenerCount)}},i.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},i.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},i.prototype.getListener=function(t,e){if(t){var r=this._events?this._events[t]:null;if(r)return e||(e=0),r[e]||null}return null},i.prototype.addListener=function(t,e){var r=t?t[e]:null;"function"==typeof r&&this.addEventListener(e,r)},i.prototype._prepareEventArguments=function(t,e){return e},i.prototype._dispatch=function(t,e){var r=this._events?this._events[t]:null;if(r){e=this._prepareEventArguments(t,e);for(var n=r.length,i=0;i<n;++i)r[i](e)}};i.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var o=function(t,e,r){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=r&&(this._ctx=r),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};o.prototype.promise=null,o.prototype._resolve=null,o.prototype._reject=null,o.prototype._resolveHandler=null,o.prototype._rejectHandler=null,o.prototype._ctx=null,o.prototype._fulfilled=!1,o.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},o.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},o.prototype.isFulfilled=function(){return this._fulfilled},o.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var u=function(){};n.inherits(u,i),u.prototype._hosts=null,u.prototype._compositeGrid=null,u.prototype._realTimeGrid=null,u.prototype._rowGetter=null,u.prototype._initializedGrid=!1,u.prototype.listen=u.prototype.addEventListener,u.prototype.unlisten=u.prototype.removeEventListener,u.prototype.afterInit=function(t,e,r){var n=null;r&&r.getCoreGrid&&(n=r.getCoreGrid()),n&&(this.getGridApi()||this.setGridWrapper("compositegrid",r),this._compositeGrid&&n.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?p:l,this._afterInit())},u.prototype._afterInit=function(){},u.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},u.prototype.hasMultiTableSupport=function(){return!1},u.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},u.prototype.getName=function(){return"GridPlugin"},u.prototype.initialize=function(t,e){},u.prototype.unload=function(t){this._dispose()},u.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var r=(e=t.target).api;if(r&&r.getCoreGrid)return r.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var n=this._hosts.length;--n>=0;){var i=this._hosts[n];if(i.getElement().contains(e))return i}return null},u.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},u.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},u.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var r=this.getColumnIndex(t),n=this._realTimeGrid.getColumnDefinition(r);if(n)return n.getName()}return""},u.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){var e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},u.prototype.getColumnIndices=function(t){var e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){for(var r,n=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),o=[],u=0;u<t.length;u++)if("number"==typeof(r=t[u]))r>=0&&r<i&&o.push(r);else{var s=n.indexOf(r);-1!==s&&o.push(s)}return o}return this._realTimeGrid.getColumnIndices(t)},u.prototype.getColumnId=function(t){if("string"==typeof t)return t;var e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var r=this._realTimeGrid.getColumnDefinition(t);return r?r.getId():""},u.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},u.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},u.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},u.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},u.prototype._moveColumnById=function(t,e){var r=this._hosts,n=r?r.length:0;if(n){for(var i=0,o=0;o<n;++o)i|=r[o].moveColumnById(t,e);return!!i}return!1},u.prototype._reorderColumns=function(t,e){var r=this._hosts,n=r?r.length:0;if(n){for(var i=0,o=0;o<n;++o)i|=r[o].reorderColumns(t,e);return!!i}return!1},u.prototype._loadPlugin=function(t,e,r){return t||(t=e.getPlugin(r))||(t=e.loadPlugin(r))&&this._initializedGrid&&(t._initializedGrid=!0),t},u.prototype._requestPlugin=function(t,e,r){return this._initializedGrid?u.requestPlugin(t,e,r,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},u.requestPlugin=function(t,e,r,n,i){var s=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(s=t),l&&(s=l.getCoreGrid(),n||i||(l.getModel?n=l:i=l))}if(!s)return Promise.reject("Cannot find grid element");var p=s.getPlugin(e);if(p)return Promise.resolve(p);var a=new o;return setTimeout(u._onPluginRequested.bind(null,{grid:s,pluginRef:e,compositeGrid:n,realTimeGrid:i,config:r,deferred:a}),10),a.promise},u._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var r=e.getPlugin(t.pluginRef);if(r)return t.deferred.resolve(r);var n=!1;return t.pluginRef.beforeInit&&(n=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(r=e.loadPlugin(t.pluginRef,t.config))?(!n&&r.beforeInit&&(n=!0,r.beforeInit(e.getElement(),t.config)),r.setGridWrapper&&(t.compositeGrid?r.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&r.setGridWrapper("realtimegrid",t.realTimeGrid)),r.afterInit&&r.afterInit(),t.deferred.resolve(r)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},u.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},u.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},u.prototype._getColumnOption=function(t,e,r){var n=this._getColumnData(t,r);return n?n[e]:null},u.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var r=e.getColumnData(t);return r||(r=e.setColumnData(t,{})),r},u.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},u.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},u.prototype._getRow=function(t,e){return a(t.getRowDataAt(e))},u.prototype._getData=function(t,e,r){var n=this._getRow(t,e);return n?n[r]:void 0},u.prototype._setData=function(t,e,r,n){if(this._realTimeGrid){var i=s(t,e);i&&i.setData(r,n)}else"number"==typeof e?t.setDataAt(e,r,n):t.setData(e,r,n)},u.prototype._setRowData=function(t,e,r){if(this._realTimeGrid){var n=s(t,e);n&&n.setRowData(r)}else"number"==typeof e?t.setRowDataAt(e,r):t.setRowData(e,r)},u.prototype._setStaticData=function(t,e,r,n){if(this._realTimeGrid){var i=s(t,e);i&&i.setStaticData(r,n)}else this._setData(t,e,r,n)},u.prototype._setColumnData=function(t,e,r,n){if(e){var i=Array.isArray(n)?n:t.getAllRowIds(!0),o=i?i.length:0;if(o)if(1!==o){var u=Array.isArray(r)?r:i.map((function(){return r}));if(this._realTimeGrid){for(var s=0;s<o;++s){var l=t.getRowData(i[s]);if(l){var p=l.ROW_DEF;p&&(p.getRowData()[e]=u[s])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,u,i)}else this._setData(t,i[0],e,Array.isArray(r)?r[0]:r)}},u.prototype._activateColumnRenderer=function(t,e,r){if(null!=t){var n=this._realTimeGrid;n?n.activateColumnRenderer(t,e,r):"function"==typeof r?this._hosts[0].setColumnDataBindingHandler(t,r):this._hosts[0].setColumnDataBindingHandler(t,null)}};var s=function(t,e){var r="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return r&&r.ROW_DEF||null},l=function(t){return t},p=function(t){return t?t.ROW_DEF.getRowData():null},a=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},h=function(t,e){return function(t,e,r){if(!t)return null;if(!e||t===e)return t;var n;if(r)for(var i=r.length,o=0;o<i;++o)(n=r[o])&&d(t,e,n);else for(n in e)d(t,e,n);return t}({},t,e)},d=function(t,e,r){var n=e[r];if(null!=n){var i=t[r];Array.isArray(i)?t[r]=i.concat(n):Array.isArray(n)&&i?t[r]=n.concat(i):t[r]=n}},f=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},g=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},c=function(t,e){if(!t)return null;var r=document.createElement("style");r.textContent="\n"+t+"\n";var n,i=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null}(e),o=!0;return i||(o=!1,i=document.head),o&&i.children&&i.children.length&&(n=i.children[0]),n?i.insertBefore(r,n):i.appendChild(r),r},_=function(){this._groupMap={},this._childToParent={}};_.prototype._groupMap,_.prototype._childToParent,_.getGroupId=function(t){return t&&t.id||""},_.calcTreeDepth=function(t,e){for(var r=-1,n=e;n;){if(++r>15){console.log("WARNING: Infinite loop detected during column group creation");break}n=t[n.parentId]}return r},_.getLeafDescendants=function(t,e){var r=t[e];if(!r)return null;for(var n=[],i=[r],o=0,u={};o<i.length;){u[(r=i[o++]).id]=!0;for(var s=r.children,l=s?s.length:0,p=0;p<l;++p){var a=s[p];(r=t[a])?u[r.id]||i.push(r):n.push(a)}}return n},_._cloneObject=function(t){var e=h(t);return Array.isArray(e.children)?e.children=e.children.slice():e.children=[],e},_._toGroupDefinition=function(t,e){var r=null;return t&&(r=Array.isArray(t)?{children:t.slice()}:_._cloneObject(t),e&&(r.id||(r.name=e),r.id=e)),r},_.prototype.toString=function(){var t=this._groupMap,e=[];for(var r in e.push("=== groupDefs ==="),t){var n=t[r];e.push(r+": "+JSON.stringify(n,["id","parentId","children"]))}return e.push("=== childToParent ==="),e.push(JSON.stringify(this._childToParent,null,2)),e.push(""),e.join("\n")},_.prototype.getGroup=function(t){return t&&this._groupMap[t]||null},_.prototype.getDefinition=_.prototype.getGroup,_.prototype.getGroups=function(){var t=[],e=this._groupMap;for(var r in e)t.push(e[r]);return t},_.prototype.getGroupIds=function(){return Object.keys(this._groupMap)},_.prototype.getGroupMap=function(){return this._groupMap},_.prototype.cloneGroupMap=function(){var t=this._groupMap,e={};for(var r in t){var n=t[r],i=_._cloneObject(n);e[r]=i}return e},_.prototype.rebuildMap=function(){var t,e,r=this._groupMap,n=this._childToParent={},i=Object.keys(r),o=i.length;for(t=0;t<o;++t)for(var u=r[e=i[t]].children,s=u?u.length:0,l=0;l<s;l++)n[u[l]]=e;for(t=0;t<o;++t){var p=n[e=i[t]];p&&(r[e].parentId=p)}},_.prototype.getGroupChildren=function(t){var e=this._groupMap[t];return e?e.children:null},_.prototype.getLeafDescendants=function(t){return _.getLeafDescendants(this._groupMap,t)},_.prototype.getGroupLevel=function(t){return _.calcTreeDepth(this._groupMap,this._groupMap[t])},_.prototype.getRootGroup=function(t){if(!t)return null;var e=this._groupMap,r=e[t]||null;if(r)for(;r.parentId;){var n=e[r.parentId];if(!n)break;r=n}return r},_.prototype.getParentGroup=function(t){return this.getGroup(this._childToParent[t])},_.prototype.getParentIds=function(t){if(t&&"string"==typeof t){var e=this._childToParent[t];if(e){for(var r=[e],n=this._groupMap[e];n&&n.parentId;)(n=this._groupMap[n.parentId])&&r.push(n.id);return r}}return null},_.prototype.getParentId=function(t,e){var r=this._childToParent[t];if(null!=e)for(var n=this.getGroupLevel(r);n>e&&r;)r=this._childToParent[r],n--;return r||""},_.prototype.removeAllGroups=function(){for(var t in this._groupMap)return this._groupMap={},this._childToParent={},!0;return!1},_.prototype.setGroups=function(t){for(var e=this._groupMap={},r=t?t.length:0,n=0;n<r;n++){var i=t[n],o=i.id;o&&(e[o]=_._cloneObject(i))}this.rebuildMap()},_.prototype.addGroup=function(t){var e=_.getGroupId(t);return e?this.setGroup(e,t):e},_.prototype.removeGroup=function(t){return!!this._groupMap[t]&&(this.removeAllChildren(t),this.unsetParent(t),delete this._groupMap[t],!0)},_.prototype.setGroup=function(t,e){if(!t)return"";if(e){var r=_._toGroupDefinition(e,t);this._ungroupChildren(r.children),this._groupMap[t]&&this.removeAllChildren(t);var n=this._childToParent[t];n&&(r.parentId=n.id),this._groupMap[t]=r;for(var i=r.children,o=i.length,u=0;u<o;++u){var s=i[u];this._childToParent[s]=t;var l=this._groupMap[s];l&&(l.parentId=t)}}else if(!this.removeGroup(t))return"";return t},_.prototype._ungroupChildren=function(t){if(Array.isArray(t))for(var e=t.length,r=0;r<e;++r)this.unsetParent(t[r])},_.prototype.hasGroupChild=function(t,e){var r=this._groupMap[t];if(e&&r){var n=r.children;if(n)return n.indexOf(e)>=0}return!1},_.prototype.contains=function(t,e){if(t&&e){if(t===e)return!0;for(var r=20,n=this._childToParent[e];n&&r;){if(t===n)return!0;--r,n=this._childToParent[n]}}return!1},_.prototype.addGroupChild=function(t,e,r){var n=this._groupMap[t];if(e&&n){var i=n.children;if(i&&i.indexOf(e)<0){this.unsetParent(e),this._childToParent[e]=t;var o=this._groupMap[e];return o&&(o.parentId=t),null!=r&&r>=0?i.splice(r,0,e):i.push(e),!0}}return!1},_.prototype.removeGroupChild=function(t,e){return null==e?this.unsetParent(t):!!this.hasGroupChild(t,e)&&this.unsetParent(e)},_.prototype.unsetParent=function(t){var e=this._childToParent[t];if(!e)return!1;this._childToParent[t]="";var r=this._groupMap[t];r&&(r.parentId="");var n=this._groupMap[e];if(n){var i=n.children;if(i&&i.length){var o=i.indexOf(t);o>=0&&i.splice(o,1)}}return!0},_.prototype.removeAllChildren=function(t){var e=this._groupMap[t];if(e){var r=e.children,n=r?r.length:0;if(n){e.children=[];for(var i=0;i<n;++i){var o=r[i];this._childToParent[o]&&(this._childToParent[o]="");var u=this._groupMap[o];u&&(u.parentId="")}return!0}}return!1},_.prototype.setGroupChildren=function(t,e){var r=this._groupMap[t];if(r){if(Array.isArray(e)){var n=e.slice();this._ungroupChildren(n),this.removeAllChildren(t),r.children=n;for(var i=r.id,o=n.length,u=0;u<o;++u){var s=n[u];this._childToParent[s]=i;var l=this._groupMap[s];l&&(l.parentId=i)}return!0}if(!e&&r.children.length)return this.removeAllChildren(t),!0}return!1},_.prototype.getGroupName=function(t){var e=this._groupMap[t];return e&&e.name||""},_.prototype.setGroupName=function(t,e){var r=this._groupMap[t];return!(!r||r.name===e)&&(r.name=e,!0)};var m=function(t){var e=this;e._hosts=[],e._onColumnChanged=e._onColumnChanged.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._onColumnMoved=e._onColumnMoved.bind(e),e._onColumnRemoved=e._onColumnRemoved.bind(e),e._requestApplyAddChildGroup=e._requestApplyAddChildGroup.bind(this),e._onPostSectionRender=e._onPostSectionRender.bind(e),e._onBeforeColumnBoundUpdate=e._onBeforeColumnBoundUpdate.bind(e),e._groupDefs=new _,t&&e.config({columnGrouping:t})};n.inherits(m,u),m.prototype._groupDefs,m.prototype._visibleGroupMap,m.prototype._maxDepth=0,m.prototype._restructuring=!1,m.prototype._rerenderTimerId=0,m.prototype._groupHeaderTimerId=0,m.prototype._addingTimerId=0,m.prototype._addingEvents=null,m.prototype._legacyColumnGroups=null,m.prototype._selectedColMap,m._ascSortLogic=function(t,e){return t-e},m._getTooltip=function(t){var e=t.tooltip,r=t.title||t.name;if(null!=e){if("string"==typeof e)return e;if(!0===e)return r;if(!1===e)return""}return r},m._hasGroupId=function(t){return!(!t||!t.id)},m._toGroupDefinition=function(t,e){var r=null;return t&&(r=Array.isArray(t)?{children:t}:m._cloneObject(t),e&&(r.id||(r.name=e),r.id=e)),r},m._cloneObject=function(t){var e=h(t);return Array.isArray(e.children)?e.children=e.children:e.children=[],e},m._flattenGroupDefs=function(t){for(var e=t?t.length:0,r=0;r<e;r++)m._recursivelyFlatten(t[r],t)},m._recursivelyFlatten=function(t,e){if(t&&t.children)for(var r,n,i=t.children,o=0;o<i.length;o++)"string"!=typeof(r=i[o])&&(n=r.id)&&(i[o]=n,e.indexOf(r)<0&&e.push(r),m._recursivelyFlatten(r,e))},m._isNotTimeSeriesGroup=function(t){return!t.timeSeriesGroup},m.prototype.getName=function(){return"ColumnGroupingPlugin"},m.prototype.hasMultiTableSupport=function(){return!0},m.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),"function"==typeof t.setColumnGrouping&&t.setColumnGrouping(this._groupDefs),this._addingEvents||(this._addingEvents=[]),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnAdded),t.listen("columnMoved",this._onColumnMoved),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnVisibilityChanged",this._onColumnChanged),t.listen("postSectionRender",this._onPostSectionRender),t.listen("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate)),this.config(e),this._legacyColumnGroups=null,this._initializedGrid&&t.getSection("title")&&this._applyGrouping(),m._styles||(m._styles=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(f).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,g)}return""}([".tr-grid .title .column .cell:not(:last-child)",["box-shadow: none;"]])),t._columnGroupingStyles||(t._columnGroupingStyles=!0,c(m._styles,t.getElement())))},m.prototype.beforeProcessOption=function(t,e){if("columnGroups"===t)return this._legacyColumnGroups=e,!1},m.prototype._afterInit=function(){this._applyGrouping()},m.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),"function"==typeof t.setColumnGrouping&&t.setColumnGrouping(null),t.unlisten("columnAdded",this._onColumnChanged),t.unlisten("columnMoved",this._onColumnMoved),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("postSectionRender",this._onPostSectionRender),t.unlisten("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate),this._hosts.length||(this._rerenderTimerId&&(clearTimeout(this._rerenderTimerId),this._rerenderTimerId=0),this._groupHeaderTimerId&&(clearTimeout(this._groupHeaderTimerId),this._groupHeaderTimerId=0),this._addingTimerId&&(clearTimeout(this._addingTimerId),this._addingTimerId=0,this._addingEvents.length=0)),this._dispose())},m.prototype.config=function(t){if(t){var e=t.columnGrouping,r=null;Array.isArray(e)&&(r=(r=e.filter(m._hasGroupId)).map(m._cloneObject));var n=t.columns;n&&(r=this._migrateLegacyStructure(r,n)),r&&(m._flattenGroupDefs(r),this._groupDefs.setGroups(r))}},m.prototype.getConfigObject=function(t){var e=t||{},r=this.getGroupDefinitions();return(r=r.filter(m._isNotTimeSeriesGroup)).length&&(e.columnGrouping=r),e},m._mapParentToChildren=function(t,e,r){if(e&&r){var n=t[e];return n||(n=t[e]=[]),n.push(r),!0}return!1},m.prototype._migrateLegacyStructure=function(t,e){var r=this._legacyColumnGroups;if(!r||!this._compositeGrid)return t;t||(t=[]);for(var n=e.length,i={},o=0;o<n;++o){var u=e[o];u&&m._mapParentToChildren(i,u.columnGroup,u.id)}var s,l,p=r.length;for(s=0;s<p;++s)(l=r[s])&&m._mapParentToChildren(i,l.parent,l.id);for(s=0;s<p;++s)if((l=m._cloneObject(r[s]))&&l.id){var a=i[l.id];l.children=a||[],l.formatter&&l.formatter.render&&(l.legacyRender=l.formatter.render,delete l.formatter),t.push(l)}return t.filter(m._hasGroupId)},m.prototype._freezeColumn=function(t,e){for(var r=this._hosts,n=0;n<r.length;n++)r[n].freezeColumn(t,e)},m.prototype._applyPinning=function(){var t,e,r,n=this.getColumnCount(),i=this.getColumnIds(),o=this._hosts[0].getFrozenColumnCount()-1,u=this._hosts[0].getFirstPinnedRightIndex(),s=!1;for(t=n;t>o;t--)if(e=this._groupDefs.getParentId(i[t]),(r=this._visibleGroupMap[e])&&r.leftPinned){o=t,s=!0;break}for(t=o;t<u;t++)if(e=this._groupDefs.getParentId(i[t]),(r=this._visibleGroupMap[e])&&r.rightPinned){u=t,s=!0;break}if(s){var l=n-u;this._freezeColumn(o,l)}},m.prototype._applyGrouping=function(){if(this._rerenderTimerId=0,!this._restructuring){var t,e,r,n,i,o;this._restructuring=!0,this._evaluateGroupStructure(),this._applyPinning();var u=this._maxDepth+1,s=this._hosts.length;for(t=s;--t>=0;)if(i=this._hosts[t].getSection("title")){for(i.setRowCount(u),i.clearCellSpans(),o=i.getColumnCount(),e=0;e<o;e++)for(r=0;r<u;r++)(n=i.getCell(e,r,!1))&&(n.removeClass("no-sort"),n.removeClass("selected-group"),n.removeAttribute("group-id"));this._spanGroupVertically(i),this._spanGroupHorizontally(i)}for(this._restructuring=!1,t=s;--t>=0;){var l=this._hosts[t].getSectionSettings("title");l&&l.rerender()}}},m.prototype._evaluateGroupStructure=function(){var t=this._visibleGroupMap=this._groupDefs.cloneGroupMap();this._verifySingleChild(t),this._verifyColumnPinning(t);var e=this._maxDepth=-1;for(var r in t){var n=t[r],i=n.parentId;i&&(t[i]||(n.parentId=""));var o=_.calcTreeDepth(t,n);n.onRow=o,o>e&&(e=o)}this._maxDepth=e+1},m.prototype._setGroupPinning=function(t,e){if(t&&!t.leftPinned&&!t.rightPinned){"left"===e?t.leftPinned=!0:t.rightPinned=!0;for(var r=t.children,n=0;n<r.length;n++){var i=r[n],o=this._visibleGroupMap[i];o&&this._setGroupPinning(o,e)}}},m.prototype._verifyColumnPinning=function(t){var e,r,n,i,o=this._hosts[0],u=o.getFrozenColumnCount()-1,s=o.getFirstPinnedRightIndex(),l=this.getColumnCount(),p=this._groupDefs,a=this._visibleGroupMap;if(u>=0)for(e=u;e>=0;e--)i=this.getColumnId(e),(r=p.getParentId(i))&&a[r]&&(n=p.getRootGroup(r))&&this._setGroupPinning(a[n.id],"left");if(s<l)for(e=s;e<l;e++)i=this.getColumnId(e),(r=p.getParentId(i))&&a[r]&&(n=p.getRootGroup(r))&&this._setGroupPinning(a[n.id],"right")},m.prototype._verifySingleChild=function(t){if(this.getGridApi()){var e,r,n=this._hosts[0],i=this.getColumnCount(),o={};for(e=0;e<i;e++){var u=this.getColumnId(e);u&&n.isColumnVisible(e)&&(o[u]=1)}var s=Object.keys(t),l=s.length;for(e=0;e<l;e++)o[s[e]]=1;for(var p=!0;p;)for(p=!1,e=0;e<l;e++){var a=s[e],h=t[a];if(h){var d=h.children,f=d.length,g=[];for(r=0;r<f;r++){var c=d[r];o[c]&&g.push(c)}g.length<2?(delete t[a],o[a]=0,p=!0):h.children=g}}}},m.prototype._requestApplyGrouping=function(){this._rerenderTimerId||(this._rerenderTimerId=setTimeout(this._applyGrouping.bind(this),10))},m.prototype._requestGroupRendering=function(){this._groupHeaderTimerId||(this._groupHeaderTimerId=setTimeout(this.renderGroups.bind(this),10))},m.prototype._applyNearestGrouping=function(t){if(!(null==t||t<0)){var e=this.getColumnId(t),r=t-1,n=t+1,i=this.getGroupIds(r),o=this.getGroupIds(n),u=i?i.length:0,s=o?o.length:0,l=this._groupDefs.getParentId(e);if(l){var p=this._groupDefs.getGroupChildren(l),a=p?p.length:0;if(a<=1)return;if(u&&i[0]===l)return;if(s&&o[0]===l)return;if(this._groupDefs.unsetParent(e)&&1===(a=(p=this._groupDefs.getGroupChildren(l))?p.length:0)){var h=this._groupDefs.getParentId(l);h&&this._groupDefs.addGroupChild(h,p[0])}}if(u&&s)for(var d=0;d<u;d++){var f=i[d],g=o.indexOf(f);if(g>=0){this._groupDefs.addGroupChild(o[g],e);break}}}},m.prototype._spanGroupVertically=function(t){var e=this.getGridApi();if(e)for(var r=this._hosts[0],n=this._maxDepth+1,i=e.getColumnCount(),o=0;o<i;o++){var u=n,s=this._getVisibleParentGroup(this.getColumnId(o));if(s)u=n-(s.onRow+1);r.isColumnVisible(o)&&u>1&&t.setCellRowSpan(o,n-u,u)}},m.prototype._spanGroupHorizontally=function(t){var e,r,n,i,o,u,s=t,l=this._visibleGroupMap;for(var p in l){r=[],e=l[p],i=_.getLeafDescendants(l,p);var a=!!this._selectedColMap;for(u=0;u<i.length;u++){var h=i[u];(o=this._getColumnIndexById(h))>-1&&r.push(o),a&&this._selectedColMap&&(a&=this._selectedColMap[h])}if(r.sort(m._ascSortLogic),(n=r.length)>0){var d=r[0],f=r[n-1];if(s.setCellColSpan(d,e.onRow,f-d+1),e.colIndex=d,a)s.getCell(d,e.onRow).addClass("selected-group")}}},m.prototype.renderGroups=function(){this._groupHeaderTimerId=0;for(var t=this._hosts.length,e=this._visibleGroupMap,r=0;r<t;++r){var n=this._hosts[r].getSection("title");if(n)for(var i in e)this._renderGroup(e[i],n)}},m.prototype._renderGroup=function(t,e){var r=t.colIndex;if(null!=r){var n=t.onRow,i=e.getCell(r,n),o=_.getLeafDescendants(this._visibleGroupMap,t.id),u=!1;if(this._selectedColMap){u=!0;for(var s=0;s<o.length;s++)if(!this._selectedColMap[o[s]]){u=!1;break}}if(i&&(i.setStyle("text-align",t.alignment||""),i.setTooltip(m._getTooltip(t)),i.setContent(t.name||t.title),i.addClass("no-sort"),i.setAttribute("group-id",t.id),u?i.addClass("selected-group"):i.removeClass("selected-group"),t.legacyRender&&t.legacyRender(r,i,t),t.render)){var l={};l.cell=i,l.colIndex=r,l.groupNode=t,t.render(l)}}},m.prototype._onPostSectionRender=function(t){"title"!==t.sectionType||this._restructuring||this.renderGroups()},m.prototype._requestApplyAddChildGroup=function(t){var e=t.context;(e?e.parent:null)&&(this._addingEvents.push(t),this._addingTimerId||(this._addingTimerId=setTimeout(this._applyTimeSeries.bind(this,t),10)))},m.prototype._applyTimeSeries=function(t){this._addingTimerId=0;var e=this._addingEvents;if(this._addingEvents=[],e.length>0){for(var r,n,i=[],o={},u=0;u<e.length;u++){var s,l,p=e[u];n=p.context.timeSeriesName,o[r=p.context.timeSeriesId]?(s=p.colIndex,l=this.getColumnId(s),o[r].children.push(l)):(o[r]={name:n,children:[]},s=p.colIndex,l=this.getColumnId(s),o[r].children.push(l))}for(r in o){var a="timeSerieGroup_"+r;if(this._groupDefs.getGroup(a))for(u=0;u<i.length;u++)this._groupDefs.addGroupChild(a,i[u]);else this.addGroup({id:a,title:o[r].name,children:o[r].children,timeSeriesGroup:!0})}}this._requestApplyGrouping()},m.prototype._onColumnAdded=function(t){var e=t.batches;e&&e.reset||(this._requestApplyAddChildGroup(t),this._applyNearestGrouping(t.colIndex)),this._requestApplyGrouping()},m.prototype._onColumnChanged=function(){this._requestApplyGrouping()},m.prototype._onColumnMoved=function(t){var e=t.batches;e&&e.move||this._applyNearestGrouping(t.toColIndex),this._requestApplyGrouping()},m.prototype._onColumnRemoved=function(t){var e=t.batches;if(e&&e.reset)this._requestApplyGrouping();else{var r=t.colId;r&&this._groupDefs.unsetParent(r)&&this._requestApplyGrouping()}},m.prototype._onBeforeColumnBoundUpdate=function(t){var e,r,n,i,o=t.selectedColumns,u=[],s={};for(e=0;e<o.length;e++)if(r=this.getColumnId(o[e])){if(!(i=this._groupDefs.getParentId(r))){n=r;break}s[i]=this._groupDefs.getGroup(i),u.push(r)}if(n)t.topBoundRowIndex=0;else{var l,p,a,h,d,f,g,c=this._maxDepth,_={};for(i in s)_[(p=this._groupDefs.getRootGroup(i)).id]=p,(l=s[i].onRow+1)<c&&(c=l);var m=_;for(e=0;e<c;e++)for(i in f=m,m={},f){if(p=f[i],d=!0,(h=this._groupDefs.getLeafDescendants(i)).length<=u.length){for(a=0;a<h.length;a++)if(u.indexOf(h[a])<0){d=!1;break}if(d)return void(t.topBoundRowIndex=e)}for(g=p.children,a=0;a<g.length;a++){var v=g[a];(p=this._groupDefs.getGroup(v))&&(m[v]=p)}}t.topBoundRowIndex=c}},m.prototype.addColumnToGroup=function(t,e,r){if(t){var n=this.getColumnCount();if(null!=r)this._groupDefs.getGroup(e)&&this._groupDefs.addGroupChild(e,t.id),n=r;this._realTimeGrid?this._realTimeGrid.insertColumn(t,n):this._compositeGrid&&this._compositeGrid.insertColumn(n,t),null==r&&this.setColumnParent(t.id||destColIndex,e)}},m.prototype.addGroup=function(t){return m._hasGroupId(t)?this.setGroupDefinition(t.id,t):""},m.prototype.addColumnGrouping=m.prototype.addGroup,m.prototype.removeGroup=function(t){return!!this._groupDefs.removeGroup(t)&&(this._applyGrouping(),!0)},m.prototype.getGroupDefinition=function(t){var e=this._getAvaliableChildren(t);if(e.length>1){var r=this._groupDefs.getGroup(t);return(r=m._cloneObject(r)).children=e,r}return null},m.prototype.getGroupDefinitions=function(){var t=[],e=this._groupDefs.getGroupMap();for(var r in e){var n=this.getGroupDefinition(r);n&&(delete n.parentId,t.push(n))}return t},m.prototype.setGroupDefinition=function(t,e){if(this._groupDefs.setGroup(t,e)){var r=this._groupDefs.getGroup(t);if(r){var n=this._hosts[0].getValidColumnList(r.children).map(m.getObjectId);n.length>1&&this.reorderColumns(n,n[0])}return this._applyGrouping(),t}return""},m.prototype.setGroupDefinitions=function(t){t=Array.isArray(t)?(t=t.filter(m._hasGroupId)).map(m._cloneObject):null,m._flattenGroupDefs(t),this._groupDefs.setGroups(t),this._applyGrouping()},m.prototype.setGroupChildren=function(t,e){return!!this._groupDefs.setGroupChildren(t,e)&&(this._applyGrouping(),!0)},m.prototype.setGroupName=function(t,e){if(this._groupDefs.setGroupName(t,e)){var r=this._visibleGroupMap[t];if(r){r.name=e;for(var n=this._hosts.length,i=0;i<n;++i){var o=this._hosts[i].getSection("title");o&&this._renderGroup(r,o)}}}},m.prototype._getAvaliableChildren=function(t){var e=this._groupDefs.getGroupChildren(t),r=e?e.length:0,n=[];if(r){n=this._hosts[0].getValidColumnList(e).map(m.getObjectId);for(var i=this._groupDefs.getGroupMap(),o=0;o<r;o++){var u=e[o];i[u]&&n.push(u)}}return n},m.prototype.getGroupChildren=function(t){var e=this._getAvaliableChildren(t);return e.length>1?e:null},m.prototype.getChildColumnIndices=function(t){var e=this._hosts[0],r=this._groupDefs.getLeafDescendants(t);return r?e.getValidColumnList(r).map(m.getObjectIndex):null},m.prototype.getGroupIds=function(t){if(null==t)return null;var e="number"==typeof t?this.getColumnId(t):t;return this._groupDefs.getParentIds(e)},m.prototype.getMaxGroupLevel=function(){return this._maxDepth},m.prototype.getGroupLevel=function(t){var e=this._visibleGroupMap[t];return e?e.onRow:-1},m.prototype._getColumnIndexById=function(t){if(this.getGridApi()&&t)for(var e=this._hosts[0],r=e.getColumnCount(),n=0;n<r;n++)if(this.getColumnId(n)===t&&e.isColumnVisible(n))return n;return-1},m.prototype._getVisibleParentGroup=function(t){return this._visibleGroupMap[this._groupDefs.getParentId(t)]||null},m.prototype.getCellInfo=function(t){var e=this.getGridApi(),r=t.grid||this.getRelativeGrid(t);if(!e||!r)return null;var n=r.getCellInfo(t);if(!n)return t;if(!n.cell){var i=n.section.getCell(n.colIndex,n.rowIndex);n.cell=i}var o=this.getColumnId(n.colIndex),u=this._groupDefs.getParentId(o,"title"==n.sectionType?n.rowIndex:null);if(!u)return n.columnId=o,n;var s=this._groupDefs.getGroup(u);if(s){var l="title"==n.sectionType&&n.rowIndex==this.getGroupLevel(u);l?(n.groupId=s.id,n.groupName=s.name||"",n.children=s.children):n.columnId=o,n.parent=l?s.parentId||null:s.id}return n},m.prototype.moveColumnIntoGroup=function(t,e,r){var n=this.getColumnIndex(t);if(-1!=n){var i=this._groupDefs.getGroup(r);if(i){var o=this.getChildColumnIndices(r),u=-1,s=-1;o&&o.length?(u=o[0],s=o[o.length-1]):(u=0,s=this.getColumnCount()),e<u?(e=u)>n&&(e-=1):e>s&&(e=s)<n&&(e+=1);for(var l=0;l<i.children.length;l++){var p=this.getChildColumnIndices(i.children[l]);if(p&&p.length){var a=p[0],h=p[p.length-1];e>n&&(a-=1),e<n&&(h+=1),e>a&&e<h&&(e=h)}}for(var d=this.getColumnId(n),f=this._hosts.length;--f>=0;){this._hosts[f].moveColumn(n,e)}d&&this._groupDefs.addGroupChild(r,d)&&this._applyGrouping()}else for(var g=this._hosts.length;--g>=0;){this._hosts[g].moveColumn(n,e)}}},m.prototype.setColumnParent=function(t,e){return e?this.addGroupChild(e,t):this.unsetParent(t)},m.prototype.addGroupChild=function(t,e){if(!this._groupDefs.getGroup(t))return!1;var r="";if("string"==typeof e)if(this._groupDefs.getGroup(e)){if(this._groupDefs.addGroupChild(t,e))return this._applyGrouping(),!0}else r=e;else r=this.getColumnId(e);if(!r)return!1;var n=this.getChildColumnIndices(t);return!!this._groupDefs.addGroupChild(t,r)&&(n&&n.length&&this.moveColumnById(r,n[n.length-1]+1)||this._applyGrouping(),!0)},m.prototype.removeGroupChild=function(t,e){if(!this._groupDefs.getGroup(t))return!1;var r="";if("string"==typeof e)if(this._groupDefs.getGroup(e)){if(this._groupDefs.unsetParent(e))return this._applyGrouping(),!0}else r=e;else r=this.getColumnId(e);if(!r)return!1;var n=t;0!==this._visibleGroupMap[t].onRow&&(n=this._groupDefs.getParentId(t,0));var i=this.getChildColumnIndices(n);return!!this._groupDefs.removeGroupChild(t,r)&&(i&&i.length>1&&this.moveColumnById(r,i[i.length-1]+1)||this._applyGrouping(),!0)},m.prototype.unsetParent=function(t){var e="string"==typeof t?t:this.getColumnId(t),r=this._groupDefs.getParentId(e);return!!r&&this.removeGroupChild(r,e)},m.prototype.getValidDestinationIndex=function(t,e){var r=null;(this._groupDefs.getGroup(t)||this.getColumnIndex(t)>-1)&&(r=this._getVisibleParentGroup(t));var n=-1,i=-1,o="string"==typeof e?this.getColumnIndex(e):e;if(r){var u=this.getChildColumnIndices(r.id);u&&u.length&&(n=u[0],i=u[u.length-1]),o<n&&-1!=o?o=this.getColumnId(n):(o>i||-1==o)&&(o=this.getColumnId(i+1));for(var s=this.getGroupChildren(r.id),l=0;l<s.length;l++){var p=s[l],a=this.getChildColumnIndices(p);if(a&&a.length&&(n=a[0],i=a[a.length-1],o>n&&o<=i)){o=i+1;break}}}else{var h=[],d=this.getColumnId(o),f=this._getVisibleParentGroup(d);f&&(f.parentId&&(f=this._groupDefs.getRootGroup(f.id)),h=this.getChildColumnIndices(f.id)),h&&h.length&&(n=h[0],i=h[h.length-1],o>n&&o<=i&&(o=i+1))}return o},m.prototype.moveGroup=function(t,e){var r,n=[];if(r=this._groupDefs.getGroup(t))for(var i=this.getChildColumnIndices(r.id),o=0;o<i.length;o++){var u=i[o],s=this.getColumnId(u);n.push(s)}else{if(!(this.getColumnIndex(t)>-1))return;n.push(t)}var l=this.getValidDestinationIndex(t,e),p=this.getColumnId(l);this.reorderColumns(n,p)},m.prototype.reorderColumns=function(t,e){return this._reorderColumns(t,e)},m.prototype.moveColumnById=function(t,e){return this._moveColumnById(t,e)},m.prototype.pinGroup=function(t,e){if(t){var r=this._visibleGroupMap[t];if(r){var n,i=this._hosts[0],o=i.getFrozenColumnCount()-1,u=i.getPinnedRightColumnCount(),s=this.getColumnCount(),l=this.getChildColumnIndices(t).length;if("right"===e){if(r.rightPinned)return;r.leftPinned&&(this.unpinGroup(t),o=i.getFrozenColumnCount()-1),r.rightPinned=!0,n=s-u,u+=l}else{if(r.leftPinned)return;r.rightPinned&&(this.unpinGroup(t),u=i.getPinnedRightColumnCount()),r.leftPinned=!0,n=-1===o?0:o+1,o+=l}this.moveGroup(t,n),this._freezeColumn(o,u)}}},m.prototype.unpinGroup=function(t,e){if(t){var r=this._visibleGroupMap[t];if(r&&(r.leftPinned||r.rightPinned)){var n=this._hosts[0],i=n.getFrozenColumnCount(),o=n.getPinnedRightColumnCount(),u=this.getColumnCount()-o,s=this.getChildColumnIndices(t).length,l=null;if(null!=e){var p=this.getColumnIndex(e);l=this.getColumnId(p)}r.leftPinned?(r.leftPinned=!1,this.moveGroup(t,i),this._freezeColumn(i-(1+s))):r.rightPinned&&(r.rightPinned=!1,this.moveGroup(t,u),this._freezeColumn(i-1,o-s)),null!=l&&this.moveGroup(t,l)}}},m.prototype.selectGroupHeaders=function(t){var e=this._hosts[0],r=t.length;if(e&&r){for(var n=[],i=0;i<r;i++)n.push(e.getColumnId(t[i]));var o=e.createColumnMap(n);o&&(this._selectedColMap=o)}else this._selectedColMap=null;this._requestGroupRendering()},m.getObjectIndex=function(t){return t.index},m.getObjectId=function(t){return t.id};!function(t,e){if(t&&e&&e.prototype.getName){var r=e.prototype.getName().replace(/Plugin$/,"");if(r){var n=t.tr;n||(n=t.tr={});var i=n.grid;i||(i=n.grid={}),i[r+"Plugin"]=e,n[r+"Extension"]=e}}}(window,m)}]);