!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=1)}([function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.d(__webpack_exports__,"d",(function(){return prettifyCss})),__webpack_require__.d(__webpack_exports__,"a",(function(){return injectCss})),__webpack_require__.d(__webpack_exports__,"b",(function(){return isTouchDevice})),__webpack_require__.d(__webpack_exports__,"c",(function(){return nestedObjectToArray})),__webpack_require__.d(__webpack_exports__,"e",(function(){return rgb2Hex}));var Util={post:function(e,t){return Util._post(e,t).then(Util.toJSON)},requestText:function(e,t){return Util._post(e,t,"text/plain").then(Util.toText)},requestByUrlEncoded:function(e,t){return Util._post(e,t,"application/x-www-form-urlencoded").then(Util.toJSON)},toJSON:function(e){return Util._logError(e)?Promise.reject(e):e.json()},toText:function(e){return Util._logError(e)?Promise.reject(e):e.text()},_logError:function(e){return!!(e&&e.status>=300)&&(console.log("Response "+e.status+": "+e.statusText),!0)},_post:function(e,t,o){var i={method:t?"POST":"GET",headers:{"Content-Type":o||"application/json"}};return t&&(i.body="string"==typeof t?t:JSON.stringify(t)),fetch(e,i)}},extendObject=function(e,t,o){if(!e)return null;if(!t||e===t)return e;var i;if(o)for(var n=o.length,r=0;r<n;++r)(i=o[r])&&extendProperty(e,t,i);else for(i in t)extendProperty(e,t,i);return e},cloneObject=function(e,t){return extendObject({},e,t)},arrayToObject=function(e,t){if(!Array.isArray(e))return e;if(!t)return null;var o=e;e={};for(var i=o.length,n=0;n<i;++n){var r=t[n];r&&void 0!==o[n]&&(e[r]=o[n])}return e},extendProperty=function(e,t,o){var i=t[o];if(null!=i){var n=e[o];Array.isArray(n)?e[o]=n.concat(i):Array.isArray(i)&&n?e[o]=i.concat(n):e[o]=i}},extendArrayProperty=function(e,t,o){var i=null;if(o){var n=e[t];i=n?Array.isArray(n)?n:e[t]=[n]:e[t]=[],Array.isArray(o)?o.length&&(o.length>1?Array.prototype.push.apply(i,o):i.push(o[0])):i.push(o)}return i},_bracketExp=new RegExp(/\[[^\[]*\]/g),parseCondition=function(expression){if(!expression)return null;if("string"!=typeof expression)return"function"==typeof expression?expression:null;for(var brackets=expression.match(_bracketExp),map={},fields=[],len=brackets?brackets.length:0,i=len;--i>=0;){var field=brackets[i];map[field]||(map[field]="f["+fields.length+"]",fields.push(field.substring(1,field.length-1)))}expression=expression.replace(_bracketExp,(function(e){return"rowData["+map[e]+"]"}));var finalExp="(function(f, rowData) { return ("+expression+"); })",fn=null;try{fn=eval(finalExp),fn=fn.bind(null,fields)}catch(e){console.log(e.message)}return fn||null},_encloseBracket=function(e){return Array.isArray(e)?"{\n"+e.join("\n")+"\n}":e},_indentBracketContent=function(e){return e.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},prettifyCss=function(e){if(e){var t="";if(Array.isArray(e))t=e.map(_encloseBracket).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else t="string"==typeof e?e:e+"";if(t)return t.replace(/{[\w\W]*?}/g,_indentBracketContent)}return""},getShadowRoot=function(e){var t;if(e&&(e.shadowRoot?t=e.shadowRoot:e.getRootNode&&(t=e.getRootNode()),t&&t!==document&&t!==e))return t;return null},injectCss=function(e,t){if(!e)return null;var o=document.createElement("style");o.textContent="\n"+e+"\n";var i,n=getShadowRoot(t),r=!0;return n||(r=!1,n=document.head),r&&n.children&&n.children.length&&(i=n.children[0]),i?n.insertBefore(o,i):n.appendChild(o),o},isIE=function(){var e=window.navigator.userAgent;return e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0},isMac=function(){return/Mac/.test(navigator.platform)},isTouchDevice=function(){return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints<256||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints<256)},nestedObjectToArray=function(e,t){for(var o in t||(t=[]),e){var i=e[o];"object"==typeof i?nestedObjectToArray(i,t):t.push(i)}return t},rgb2Hex=function(e){if(!e||"string"!=typeof e)return"";if("#"===e.charAt(0))return e;var t=e.match(/\d+/g);if(!t||t.length<3)return e;for(var o="#",i=0;i<3;i++){var n=+t[i];n>=16||(o+="0"),o+=n?n.toString(16).toUpperCase():"0"}return o},prepareTSVContent=function(e){if(null==e)return"";var t="string"==typeof e?e:e.toString();return t.length?(t.indexOf("\n")>=0&&(t=t.replace(/[\r\n]/g," ")),t.indexOf("\t")>=0&&(t=t.replace(/\t/g," "))," "!==t.charAt(0)&&" "!==t.charAt(t.length-1)||(t=t.trim()),t):""},_unused_webpack_default_export=Util},function(e,t,o){"use strict";o.r(t);var i={inherits:function(e,t){function o(){}o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.base=function(e,o,i){o||(o="constructor");for(var n=arguments.length,r=new Array(n),l=2;l<n;l++)r[l-2]=arguments[l];return t.prototype[o].apply(e,r)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(e,t){if(e&&t){this._events||(this._events={});var o=this._events[e];o?o.indexOf(t)<0&&(o.push(t),++this._listenerCount):(this._events[e]=[t],++this._listenerCount)}},n.prototype.removeEventListener=function(e,t){var o=this._events?this._events[e]:null;if(o){var i=o.indexOf(t);i>=0&&(o.splice(i,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(e){if(this._listenerCount){if(e){var t=this._events?this._events[e]:null;return!!t&&t.length>0}return!0}return!1},n.prototype.getListener=function(e,t){if(e){var o=this._events?this._events[e]:null;if(o)return t||(t=0),o[t]||null}return null},n.prototype.addListener=function(e,t){var o=e?e[t]:null;"function"==typeof o&&this.addEventListener(t,o)},n.prototype._prepareEventArguments=function(e,t){return t},n.prototype._dispatch=function(e,t){var o=this._events?this._events[e]:null;if(o){t=this._prepareEventArguments(e,t);for(var i=o.length,n=0;n<i;++n)o[n](t)}};n.preventDefault=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())};var r=function(e,t,o){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof e&&(this._resolveHandler=e),"function"==typeof t&&(this._rejectHandler=t),null!=o&&(this._ctx=o),this.promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype._fulfilled=!1,r.prototype.resolve=function(e){if(this._resolve){if(this._resolveHandler){var t=this._resolveHandler(e,this._ctx||this);null!=t&&(e=t)}this._resolve(e),this._finally()}},r.prototype.reject=function(e){if(this._reject){if(this._rejectHandler){var t=this._rejectHandler(e,this._ctx||this);null!=t&&(e=t)}this._reject(e),this._finally()}},r.prototype.isFulfilled=function(){return this._fulfilled},r.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var l=function(){};i.inherits(l,n),l.prototype._hosts=null,l.prototype._compositeGrid=null,l.prototype._realTimeGrid=null,l.prototype._rowGetter=null,l.prototype._initializedGrid=!1,l.prototype.listen=l.prototype.addEventListener,l.prototype.unlisten=l.prototype.removeEventListener,l.prototype.afterInit=function(e,t,o){var i=null;o&&o.getCoreGrid&&(i=o.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",o),this._compositeGrid&&i.loadPlugin(this,t)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?a:s,this._afterInit())},l.prototype._afterInit=function(){},l.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},l.prototype.hasMultiTableSupport=function(){return!1},l.prototype._prepareEventArguments=function(e,t){return t||(t={}),t.api=this.getGridApi(),t},l.prototype.getName=function(){return"GridPlugin"},l.prototype.initialize=function(e,t){},l.prototype.unload=function(e){this._dispose()},l.prototype.getRelativeGrid=function(e){var t=null;if(e.target){var o=(t=e.target).api;if(o&&o.getCoreGrid)return o.getCoreGrid()}else e.getElement?t=e.getElement():1===e.nodeType&&(t=e);if(t)for(var i=this._hosts.length;--i>=0;){var n=this._hosts[i];if(n.getElement().contains(t))return n}return null},l.prototype.setGridWrapper=function(e,t){e&&("compositegrid"===(e=e.toLowerCase())?this._compositeGrid=t:"realtimegrid"===e&&(this._realTimeGrid=t))},l.prototype.getGridApi=function(e){if(null==e)return this._compositeGrid||this._realTimeGrid;var t="number"==typeof e?this._hosts[e]:e;return t&&t._wrapper||null},l.prototype.getColumnName=function(e){if(this._compositeGrid){var t=this._compositeGrid.getColumnModel(e);if(t)return t.title?t.title:t.field}else{var o=this.getColumnIndex(e),i=this._realTimeGrid.getColumnDefinition(o);if(i)return i.getName()}return""},l.prototype.getColumnIndex=function(e){if("number"==typeof e)return e;if(this._compositeGrid)return this._compositeGrid.getColumnIndex(e);for(var t=this._realTimeGrid,o=t.getColumnCount(),i=0;i<o;++i){var n=t.getColumnDefinition(i);if(n&&n.getId()===e)return i}return-1},l.prototype.getColumnIndices=function(e){if(this._compositeGrid){for(var t,o=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),n=[],r=0;r<e.length;r++)if("number"==typeof(t=e[r]))t>=0&&t<i&&n.push(t);else{var l=o.indexOf(t);-1!==l&&n.push(l)}return n}return this._realTimeGrid.getColumnIndices(e)},l.prototype.getColumnId=function(e){if("string"==typeof e)return e;if(this._compositeGrid)return this._compositeGrid.getColumnId(e);var t=this._realTimeGrid.getColumnDefinition(e);return t?t.getId():""},l.prototype.getColumnCount=function(){if(this._hosts){var e=this._hosts[0];return e?e.getColumnCount():0}return 0},l.prototype._loadPlugin=function(e,t,o){return e||(e=t.getPlugin(o))||(e=t.loadPlugin(o))&&this._initializedGrid&&(e._initializedGrid=!0),e},l.prototype._requestPlugin=function(e,t,o){return this._initializedGrid?l.requestPlugin(e,t,o,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},l.requestPlugin=function(e,t,o,i,n){var s=null;if(e){var a=null;1===e.nodeType?a=e.api:e.getCoreGrid?a=e:e.getPlugin&&(s=e),a&&(s=a.getCoreGrid(),i||n||(a.getModel?i=a:n=a))}if(!s)return Promise.reject("Cannot find grid element");var u=s.getPlugin(t);if(u)return Promise.resolve(u);var c=new r;return setTimeout(l._onPluginRequested.bind(null,{grid:s,pluginRef:t,compositeGrid:i,realTimeGrid:n,config:o,deferred:c}),10),c.promise},l._onPluginRequested=function(e){var t=e.grid;if(!t.getElement())return e.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+e.pluginRef);var o=t.getPlugin(e.pluginRef);if(o)return e.deferred.resolve(o);var i=!1;return e.pluginRef.beforeInit&&(i=!0,e.pluginRef.beforeInit(t.getElement(),e.config,!0)),(o=t.loadPlugin(e.pluginRef,e.config))?(!i&&o.beforeInit&&(i=!0,o.beforeInit(t.getElement(),e.config)),o.setGridWrapper&&(e.compositeGrid?o.setGridWrapper("compositegrid",e.compositeGrid):e.realTimeGrid&&o.setGridWrapper("realtimegrid",e.realTimeGrid)),o.afterInit&&o.afterInit(),e.deferred.resolve(o)):e.deferred.reject("Unable to load required dependency: "+e.pluginRef)},l.prototype._getPlugin=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getPlugin(e):null},l.prototype._getColumnData=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getColumnData(e):null},l.prototype._getColumnOption=function(e,t,o){var i=this._getColumnData(e,o);return i?i[t]:null},l.prototype._newColumnData=function(e,t){if(null==t&&(t=this._hosts[0]),!t)return{};var o=t.getColumnData(e);return o||(o=t.setColumnData(e,{})),o},l.prototype._getField=function(e){var t=this._compositeGrid||this._realTimeGrid;return t?t.getColumnField(e):""},l.prototype._getRowData=function(e){return this._realTimeGrid&&e?e.ROW_DEF.getRowData():e},l.prototype._getRow=function(e,t){return u(e.getRowDataAt(t))},l.prototype._getData=function(e,t,o){var i=this._getRow(e,t);return i?i[o]:void 0},l.prototype._setData=function(e,t,o,i){if(this._realTimeGrid){var n=e.getRowDataAt(t);n&&n.ROW_DEF.setData(o,i)}else e.setDataAt(t,o,i)},l.prototype._setRowData=function(e,t,o){if(this._realTimeGrid){var i=e.getRowDataAt(t);i&&i.ROW_DEF.setRowData(o)}else e.setRowDataAt(t,o)},l.prototype._setColumnData=function(e,t,o,i){if(i=i||e.getAllRowIds()||[],this._realTimeGrid){for(var n=e.getDataSource(),r=n.freeze(),l=o.length<i.length?o.length:i.length,s=0;s<l;++s){var a=e.getRowData(i[s]);a&&a.ROW_DEF.setData(t,o[s])}n.freeze(r)}else e.setColumnData(t,o,i)},l.prototype._activateColumnRenderer=function(e,t,o){if(null!=e){var i=this._realTimeGrid;i?i.activateColumnRenderer(e,t,o):"function"==typeof o?this._hosts[0].setColumnDataBindingHandler(e,o):this._hosts[0].setColumnDataBindingHandler(e,null)}};var s=function(e){return e},a=function(e){return e?e.ROW_DEF.getRowData():null},u=function(e){if(e){var t=e.ROW_DEF;return t?t.getRowData():e}return null},c={create:function(e,t){var o=document.createElement(e);return t&&(o.className=t),o},div:function(e){return c.create("div",e)},text:function(e,t){var o=c.create("span",t);return(e||0===e)&&(o.textContent=e),o},appendChild:function(e,t){if(!e)return null;var o,i;Array.isArray(arguments[1])?(i=arguments[1],o=0):(i=arguments,o=1);for(var n=i.length;o<n;)e.appendChild(i[o]),++o;return e},buildTree:function(e,t){if(!e)return null;for(var o=arguments,i=o.length,n=1;n<i;++n){var r,l=o[n];if(l)Array.isArray(l)?r=c.buildTree.apply(null,l):1===l.nodeType&&(r=l),r&&e.appendChild(r)}return e},removeParent:function(e){if(!e)return null;var t=e.parentNode;return t&&t.removeChild(e),t},setParent:function(e,t){return e?t?(t.appendChild(e),t):c.removeParent(e):null},removeChildren:function(e,t){if(e){var o=e.childNodes.length;for((null==t||t>o)&&(t=o);--t>=0;)e.removeChild(e.lastChild)}},setContent:function(e,t){if(e)if(t||0===t){var o=t.nodeType;1===o||3===o?t!==e.lastChild&&(c.removeChildren(e),e.appendChild(t)):Array.isArray(t)?(c.removeChildren(e),c.appendChild(e,t)):e.textContent=t}else c.removeChildren(e)},toggleAttribute:function(e,t,o){o?e.setAttribute(t,"string"==typeof o?o:""):null==o?e.hasAttribute(t)?e.removeAttribute(t):e.setAttribute(t,""):e.removeAttribute(t)},toggleClass:function(e,t,o){o?e.classList.add(t):null==o?e.classList.contains(t)?e.classList.remove(t):e.classList.add(t):e.classList.remove(t)},addClasses:function(e,t){if(e)for(var o=Array.isArray(t)?t:arguments,i=o.length,n=0;n<i;++n){var r=o[n];r&&"string"==typeof r&&e.classList.add(r)}},removeClasses:function(e,t){if(e)for(var o=Array.isArray(t)?t:arguments,i=o.length,n=0;n<i;++n){var r=o[n];r&&"string"==typeof r&&e.classList.remove(r)}},preventDefault:function(e){e.preventDefault(),e.stopPropagation()},stopPropagation:function(e){e.stopPropagation()},getClientPosition:function(e,t){var o=t||{x:0,y:0};if(e.getBoundingClientRect){var i=e.getBoundingClientRect();o.x=i.left,o.y=i.top}else o.x=e.clientX,o.y=e.clientY;return o},getRelativePosition:function(e,t,o){o=c.getClientPosition(e,o);var i=c.getClientPosition(t);return o.x-=i.x,o.y-=i.y,o},closestElement:function(e,t){for(var o=e;o;){if(o.classList&&o.classList.contains(t))return o;o=o.parentNode||o.host}return null},closestTagName:function(e,t){for(var o=e;o;){if(o.tagName&&o.tagName==t)return o;o=o.parentNode||o.host}return null}},d=function(e,t){var o=this;o.show=o.show=o.show.bind(o),o.hide=o.hide=o.hide.bind(o),o.toggle=o.toggle=o.toggle.bind(o),o._onBlur=o._onBlur.bind(o),o._onBlurTimer=o._onBlurTimer.bind(o),o._onResize=o._onResize.bind(o),o.updatePosition=o.updatePosition.bind(o),o._onScroll=o._onScroll.bind(o),o._onMouseOver=o._onMouseOver.bind(o),o._onMouseOut=o._onMouseOut.bind(o),o._onMouseOverTimeout=o._onMouseOverTimeout.bind(o),e&&1!==e.nodeType&&(t=e,e=null),e?(o._elem=e,c.removeParent(e)):o._elem=document.createElement("div"),o._elem.style.position="fixed",o._elem.style.left="0",o._elem.style.top="0",o._elem.style.display="inline-block",o._focusElements=[o._elem],o._children=[],o._evtArg={target:o._elem,currentTarget:o._elem},o._parentElement=document.body,o.init(t)};i.inherits(d,n),d.prototype._elem=null,d.prototype._disabled=!1,d.prototype._inDoc=!1,d.prototype._autoHiding=!0,d.prototype._blurTimer=0,d.prototype._resizeTimer=0,d.prototype._attachedElem=null,d.prototype._positioning="under",d.prototype._focusElements,d.prototype._parentElement,d.prototype._children,d.prototype._evtArg,d.prototype._autoClipping=!0,d.prototype._origW=null,d.prototype._origH=null,d.prototype._hoverToShow=!1,d.prototype._hoverTimer=0,d.prototype._gap=0,d.prototype._uiBlocking=!1,d.prototype._hideOnScroll=!0,d.prototype.dispose=function(){this._removeEventListeners(),this._clearMouseOverTimer();for(var e=this._children.length;--e>=0;)this._children[e].dispose();this._inDoc=!1,c.removeParent(this._elem),c.removeParent(this._overlay),this._elem=null},d.prototype.getElement=function(){return this._elem},d.prototype.appendChild=function(e){e&&this._elem.appendChild(e)},d.prototype.disable=function(e){this._disabled=!1!==e},d.prototype.enable=function(e){this._disabled=!1===e},d.prototype.init=function(e){if(e){e.positioning&&(this._positioning=e.positioning),null!=e.autoHiding&&(this._autoHiding=!!e.autoHiding),null!=e.uiBlocking&&this.enableUIBlocking(e.uiBlocking),null!=e.hoverToShow&&(this._hoverToShow=!!e.hoverToShow),null!=e.autoClipping&&(this._autoClipping=!!e.autoClipping),null!=e.attachedElement&&this.attachTo(e.attachedElement),null!=e.contentElement&&this.appendChild(e.contentElement),null!=e.parentElement&&this.setParentElement(e.parentElement),null!=e.popupChild&&this.addPopupChild(e.popupChild),0==e.hideOnScroll&&(this._hideOnScroll=!1),this.addListener(e,"show"),this.addListener(e,"hide"),this.addListener(e,"shown"),this.addListener(e,"hidden");var t=e.focusElement||e.focusElements;if(t)if(Array.isArray(t))for(var o=t.length;--o>=0;)this.addFocusElement(t[o]);else this.addFocusElement(t)}},d.prototype.attachTo=function(e,t){e||(e=null),this._attachedElem!==e&&(this._hoverToShow&&this._attachedElem&&(this._attachedElem.removeEventListener("mouseover",this._onMouseOver,!1),this._attachedElem.removeEventListener("mouseout",this._onMouseOut,!1)),this.removeFocusElement(this._attachedElem),this._attachedElem=e,this.addFocusElement(this._attachedElem),this._hoverToShow&&this._attachedElem&&(this._attachedElem.addEventListener("mouseover",this._onMouseOver,!1),this._attachedElem.addEventListener("mouseout",this._onMouseOut,!1))),null!=t&&this.setPositioning(t)},d.prototype.setAttachedElement=d.prototype.attachTo,d.prototype.addFocusElement=function(e){e&&this._focusElements.indexOf(e)<0&&this._focusElements.push(e)},d.prototype.removeFocusElement=function(e){if(e){var t=this._focusElements.indexOf(e);t>=0&&this._focusElements.splice(t,1)}},d.prototype.addPopupChild=function(e){return e||((e=new d).setPositioning("right"),e.attachTo(this._elem)),this.addFocusElement(e.getElement()),this._children.push(e),e},d.prototype.setPopupGap=function(e){this._gap="number"==typeof e?e:0},d.prototype.setParentElement=function(e){return e instanceof Element?this._parentElement=e:this._parentElement||(this._parentElement=document.body),this._parentElement},d.prototype.show=function(e,t){var o=this;if(o._clearMouseOverTimer(),!o._disabled){var i=!1!==e;if(o._inDoc!==i){var n=i?"show":"hide";if(o._evtArg.type=n,o._dispatch(n,o._evtArg),o._evtArg.cancel)o._evtArg.cancel=!1;else{if(i)o._inDoc=!0,t instanceof Element||(t=o._parentElement),o._uiBlocking&&o._attachOverlay(t),t.appendChild(o._elem),t.addEventListener("scroll",o._onScroll,!0),o._autoHiding&&(window.addEventListener("mousedown",o._onBlur,!0),window.addEventListener("touchstart",o._onBlur,!0)),window.addEventListener("resize",o._onResize,!1),window.addEventListener("scroll",o._onScroll,!0);else if(o._inDoc){o._removeEventListeners(),o._restoreElementSize();for(var r=o._children.length;--r>=0;)o._children[r].hide();o._inDoc=!1,c.removeParent(o._elem),c.removeParent(o._overlay)}n=i?"shown":"hidden",o._evtArg.type=n,o._dispatch(n,o._evtArg),i&&o.updatePosition()}}else o.updatePosition()}},d.prototype.hide=function(e){this.show(!1===e)},d.prototype.toggle=function(e,t){null==e&&(e=!this._inDoc),e?this.show(!0,t):this.hide()},d.prototype.isShown=function(){return this._inDoc},d.prototype.isHidden=function(){return!this._inDoc},d.prototype.contains=function(e){if(e){e=Array.isArray(e)?e:[e];for(var t=this._focusElements,o=t.length;--o>=0;)if(e.indexOf(t[o])>=0||t[o].contains(e[0]))return!0}return!1},d.prototype.setPositioning=function(e){this._positioning!==e&&(this._positioning=e,this.updatePosition())},d.prototype.disableAutoHiding=function(e){var t=!1===e;this._autoHiding!==t&&(this._autoHiding=t,this._inDoc&&(t?(window.addEventListener("mousedown",this._onBlur,!0),window.addEventListener("touchstart",this._onBlur,!0)):(window.removeEventListener("mousedown",this._onBlur,!0),window.removeEventListener("touchstart",this._onBlur,!0))))},d.prototype.disableAutoClipping=function(e){var t=!1===e;this._autoClipping!==t&&(this._autoClipping=t)},d.prototype.disableHideOnScroll=function(e){var t=!1===e;this._hideOnScroll!==t&&(this._hideOnScroll=t)},d.prototype.updatePosition=function(){var e=this;if(e._resizeTimer=0,e._inDoc){if(e._attachedElem){if(!e._attachedElem.offsetWidth)return;e._autoClipping&&e._restoreElementSize();var t,o,i=c.getRelativePosition(e._attachedElem,document.body),n=i.x,r=i.y,l=window.innerWidth,s=window.innerHeight,a=null!=window.scrollX?window.scrollX:window.pageXOffset,u=null!=window.scrollY?window.scrollY:window.pageYOffset,d=l+a,p=s+u,h=e._attachedElem.offsetWidth,_=e._attachedElem.offsetHeight,f=e._elem.offsetWidth,m=e._elem.offsetHeight;"right"==e._positioning?(o=r,(t=n+h+this._gap)+f>d&&n-f>a&&(t=n-f-this._gap),o+m>p&&r+_-m>u&&(o=r+_-m)):"over"==e._positioning?((t=n)+f>d&&n+h-f>a&&(t=n+h-f),(o=r)+m>p&&r+h-m>u&&(o=r+h-m)):((t=n)+f>d&&n+h-f>a&&(t=n+h-f),(o=r+_)+m>p&&r-m>u&&(o=r-m)),e._autoClipping&&(t+f>d&&(null==e._origW&&(e._origW=e._elem.style.width),e._elem.style.width=d-t+"px"),o+m>p&&(null==e._origH&&(e._origH=e._elem.style.height),e._elem.style.height=p-o+"px")),e._elem.style.left=Math.floor(t-a)+"px",e._elem.style.top=Math.floor(o-u)+"px"}else"fixed"!=e._positioning&&"custom"!=e._positioning&&(e._elem.style.left="calc(50vw - "+Math.floor(e._elem.offsetWidth/2)+"px)",e._elem.style.top="calc(46vh - "+Math.floor(e._elem.offsetHeight/2)+"px)");e._evtArg.type="positioning",e._dispatch("positioning",e._evtArg)}},d.prototype.enableUIBlocking=function(e){var t=this._uiBlocking;return this._uiBlocking=!1!==e,t},d.prototype._attachOverlay=function(e){if(!this._overlay){var t=(this._overlay=document.createElement("div")).style;t.height="100%",t.width="100%",t.top="0",t.left="0",t.backgroundColor="rgba(0, 0, 0, 0)"}e===document.body?this._overlay.style.position="fixed":this._overlay.style.position="absolute",e.appendChild(this._overlay)},d.prototype._onBlur=function(e){if(!this._blurTimer&&this._inDoc){if(e)if(e.composedPath){if(this.contains(e.composedPath()))return}else if(this.contains(e.target))return;this._blurTimer=setTimeout(this._onBlurTimer,10)}},d.prototype._onBlurTimer=function(){this._blurTimer=0,this.contains(document.activeElement)||this.hide()},d.prototype._onResize=function(){!this._resizeTimer&&this._inDoc&&(this._resizeTimer=setTimeout(this.updatePosition,50))},d.prototype._onScroll=function(e){!this.contains(e.target)&&this._hideOnScroll&&this.hide()},d.prototype._onMouseOver=function(e){this._hoverTimer||this._inDoc||(this._hoverTimer=setTimeout(this._onMouseOverTimeout,500))},d.prototype._onMouseOut=function(e){this._hoverTimer&&(e.currentTarget.contains(e.relatedTarget)||this._clearMouseOverTimer())},d.prototype._onMouseOverTimeout=function(){this._hoverTimer=0,this.show()},d.prototype._clearMouseOverTimer=function(){this._hoverTimer&&(clearTimeout(this._hoverTimer),this._hoverTimer=0)},d.prototype._restoreElementSize=function(){null!=this._origW&&(this._elem.style.width=this._origW,this._origW=null),null!=this._origH&&(this._elem.style.height=this._origH,this._origH=null)},d.prototype._removeEventListeners=function(){this._blurTimer&&(clearTimeout(this._blurTimer),this._blurTimer=0),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=0),window.removeEventListener("mousedown",this._onBlur,!0),window.removeEventListener("touchstart",this._onBlur,!0),window.removeEventListener("resize",this._onResize,!1),window.removeEventListener("scroll",this._onScroll,!0),this._elem.parentElement&&this._elem.parentElement.removeEventListener("scroll",this._onScroll,!0)};var p=o(0),h={},_=function(e,t){"attributes"==t.type&&"lang"==t.attributeName&&(e.lang=t.target.lang||"en")},f=function(e,t,o){"attributes"===o.type&&(null!=t?o.attributeName===t&&e(o.target.getAttribute(t)):e(o.target))};h._getNewId=function(){return"observer_"+ ++h._id},h._addObserver=function(e,t,o){var i=o;i||(i={}),i.attributes=!0,h._observer.observe(e,i),h._addListener(e,t)},h._onMutationCallback=function(e){for(var t=0;t<e.length;t++)for(var o=e[t],i=h._listeners[o.target._observeId],n=0;n<i.length;n++)i[n](o)},h._addListener=function(e,t){var o=h._listeners;if(o||(o=h._listeners={}),!e._observeId){var i=h._getNewId();e._observeId=i}o[e._observeId]||(o[e._observeId]=[]);var n=o[e._observeId];n.indexOf(t)<0&&n.push(t)},h.addLanguageListener=function(e){e&&(e.lang=document.documentElement.lang||"en",h._addObserver(document.documentElement,_.bind(null,e)))},h.addAttributeListener=function(e,t,o){e&&t&&h._addObserver(e,f.bind(null,t,o))},h._observer=new MutationObserver(h._onMutationCallback),h._listeners={},h._id=0;var m={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},g={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};g.themeColors=g._defaultColors,g._components={},g._themeName="",g._elfVersion=0,g._dummyIcon=null,g._iconLoaded=!1,g._profileName=null,g._callbacks=[],g._observed=!1,g._pendingResolve=!1,g._themeLoaded=!1,g._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},g._icons["halo-theme"]=g._icons["elf-theme-halo"],g._icons["solar-theme"]=g._icons["elf-theme-solar"],g.getElfVersion=function(){if(!g._elfVersion){var e=0;if(window.EFX_GRID){var t=window.EFX_GRID.version;e=+(t=t.split("."))[0]}else if(window.elf)if(window.elf.version){var o=window.elf.version.match(/\d/);o&&o[0]&&(e=parseInt(o[0],10))}else window.elf.customElements?e=3:window.customElements&&(e=4);else window.Polymer&&(e=1);g._elfVersion=e}return g._elfVersion},g.hasComponent=function(e){var t=g._components[e];if(null==t){t=0;var o=g.getElfVersion();if(e)1===o?document.createElement(e).is===e&&(t=o):o>1&&(window.customElements&&window.customElements.get(e)||document.createElement(e).constructor!==HTMLElement)&&(t=o),g._components[e]=t}return t},g.toLangString=function(e){if(!e)return"";if("zh-hant"===(e=e.toLowerCase()))return"zh-Hant";var t=e.replace(/-.*/,"");return m[t]?t:""},g.hasTheme=function(e){return e===g.getThemeName()},g.getThemeName=function(e){return g._themeName||(g._themeName=g.getCssVariable("--theme-name",document.documentElement)),g._themeName},g.setThemeName=function(e){g._themeName=e},g.isThemeLoaded=function(){return g._themeLoaded},g.getColors=function(){return g.themeColors},g.isHaloTheme=function(e){return null==e&&(e=g.getThemeName()),!!e&&e.indexOf("halo")>=0},g.injectIcons=function(e,t){if("object"==typeof e){var o=g.getThemeName();e.themeName=o;var i=g.getElfVersion();e.elfVersion=i;var n=g._icons[o];n&&(e.icons=n)}},g.getIconList=function(){var e=g._icons[g.getThemeName()];return e?Object(p.c)(e):[]},g._onIconPreloaded=function(){if(g._dummyIcon){var e=g._dummyIcon.parentNode;e&&e.removeChild(g._dummyIcon),g._dummyIcon=null}},g.prepareIconPreloading=function(){if(!g._iconLoaded){g._iconLoaded=!0;var e=g.getIconList();if(e.length){setTimeout(g._onIconPreloaded,10);var t=g._dummyIcon=document.createElement("coral-icon");return t.style.transform="scale(0)",document.body.appendChild(t),e}}return null},g.getCssVariable=function(e,t){var o="",i=t||document.body;return window&&"string"==typeof e&&1===i.nodeType&&e.match(/^--/)&&(o=(o=window.getComputedStyle(i).getPropertyValue(e)).replace(/[\"\']/g,"")),o},g.getCssVariables=function(e,t){var o=t||document.body;if(window&&1===o.nodeType){var i=window.getComputedStyle(o);for(var n in e){var r=e[n];r&&r.match(/^--/)&&(e[n]=i.getPropertyValue(r).replace(/\"/g,""))}}return e||null},g.setRTK=function(e){null!=e&&(g._rtk=e)},g.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},g._addThemeChangedCallback=function(e){var t=g._callbacks;t.indexOf(e)<0&&t.push(e)},g.reloadThemeColors=function(){return g._deferred&&g._deferred.isFulfilled()?(g._profileName="",g._themeLoaded=!1,g.themeReady=null,g.getThemeColors()):g.themeReady},g.getThemeColors=function(e){if("function"==typeof e&&g._addThemeChangedCallback(e),g.themeReady)return g.themeReady;var t=g._deferred=new r;g.themeReady=t.promise;var o=g.getMovementColorProfile();if(o)o!==g._profileName?setTimeout(g._profileNameRetrieved,100):g._deferred.resolve(g.themeColors);else{var i={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},n=window?window.JET:null;if(g._themeLoaded=!1,g._rtk&&g._rtk.Settings)g._rtk.Settings.getAsync(i).then(g._loadingProfileSuccess).catch(g._loadingProfileFailure);else if(n&&n.Settings)try{n.Settings.read(g._loadingProfileSuccess,i)}catch(e){g._loadingProfileFailure()}else setTimeout(g._profileNameRetrieved,100)}return t.promise};var v=function(e){if(e!==g._profileName){g._retrieveThemeColors(e),g._pendingResolve&&(g._pendingResolve=!1,g._deferred.resolve(g.themeColors));for(var t=g._callbacks,o=0;o<t.length;o++)t[o]()}};g._loadingProfileSuccess=function(e){e&&document.documentElement.setAttribute("movement-color-profile",e.toLowerCase()),g._observed?g._pendingResolve=!0:g._profileNameRetrieved(e)},g._loadingProfileFailure=function(){g._retrieveThemeColors(),g._observed||(g._observed=!0,h.addAttributeListener(document.documentElement,v,"movement-color-profile")),g._deferred.reject("Failed to get movement color profile from settings.")},g._profileNameRetrieved=function(){var e=g.getMovementColorProfile();g._retrieveThemeColors(e),g._observed||(g._observed=!0,h.addAttributeListener(document.documentElement,v,"movement-color-profile")),g._deferred.resolve(g.themeColors)},g._retrieveThemeColors=function(e){g._themeLoaded=!0,g._profileName=e;var t=g.themeColors=g.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});t.up||(t.up=g._defaultColors.up,t.down=g._defaultColors.down,t.level=g._defaultColors.level,t.tickUp=g._defaultColors.tickUp,t.tickDown=g._defaultColors.tickDown),t.positive=t.up,t.negative=t.down,t.neutral=t.level;var o=document.createElement("table");o.style.visibility="hidden",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.width="0";var i=o.insertRow(-1),n=i.insertCell(-1);document.body.appendChild(o);var r=window.getComputedStyle(i);t.tableBg=r.backgroundColor;var l=window.getComputedStyle(n);t.tableText=l.color,t.tableBorder=l.borderColor,t.tableText===t.tableBorder&&(n.className="tr-lg",l=window.getComputedStyle(n),t.tableBg=l.backgroundColor,t.tableText=l.color,t.tableBorder=l.borderColor,t.tableText===t.tableBorder&&(t.tableBg=g._defaultColors.baseGrid,t.tableText=g._defaultColors.baseText,t.tableBorder="")),t.tableBg=Object(p.e)(t.tableBg),t.tableText=Object(p.e)(t.tableText),t.tableBorder=Object(p.e)(t.tableBorder),document.body.removeChild(o),t.baseGrid=t.tableBg,t.baseText=t.tableText,t.trackColor=t.primary||g._defaultColors.trackColor};var y={from:function(e){if(e){var t=e;if("string"==typeof e||"number"==typeof e?t=new Date(e):Array.isArray(e)&&(t=new Date(Date.UTC(e[0]||0,e[1]||0,e[2]||0))),y.isValid(t))return t}return null},isValid:function(e){if(e&&e.getTime){var t=e.getTime();return t==t}return!1},prefixSingleDigit:function(e){return e<10&&e>=0?"0"+e:""+e},_ymdRe:/^\d{4}\-d{2}\-\d{2}/,toYMD:function(e){if("string"==typeof e&&y._ymdRe.test(e))return e;var t=y.from(e);return t?t.getFullYear()+"-"+y.prefixSingleDigit(t.getMonth()+1)+"-"+y.prefixSingleDigit(t.getDate()):""},setDate:function(e,t){e&&(e.isAttached?e.value=y.from(t):e.value=y.toYMD(t))},getDate:function(e){return e?y.from(e.value):null},compare:function(e,t){if(e!==t)if(e=y.from(e),t=y.from(t),e){if(!t)return 1;if(e<t)return-1;if(e>t)return 1}else if(t)return-1;return 0},equal:function(e,t){return!y.compare(e,t)},extractDate:function(e){return y.isValid(e)?[e.getFullYear(),e.getMonth(),e.getDate()]:null}},C={create:function(e){if(Array.isArray(e)){for(var t=e.length,o=new Array(t),i=0;i<t;++i){var n=e[i];null!=n?"object"!=typeof n&&(n={value:n}):n={value:""};var r=n.label;r||"string"==typeof r||(n.label=n.value+""),o[i]=n}return o}return null}},b=function(e){var t=this;t._onDoubleClick=t._onDoubleClick.bind(t),t._onPopupHide=t._onPopupHide.bind(t),t._onScroll=t._onScroll.bind(t),t._onTextKeyDown=t._onTextKeyDown.bind(t),t._onTextKeyUp=t._onTextKeyUp.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onTouchEnd=t._onTouchEnd.bind(t),t._onTouchTimer=t._onTouchTimer.bind(t),t._createContentEditor=t._createContentEditor.bind(t),t._createTitleEditor=t._createTitleEditor.bind(t),t._onColumnAdded=t._onColumnAdded.bind(t),t._onValueChanged=t._onValueChanged.bind(t),t._onAutoSuggestItemSelected=t._onAutoSuggestItemSelected.bind(t),t._hosts=[],e&&this.config({inCellEditing:e})};i.inherits(b,l),b._uiElementTypesMap={input:"input",text:"input",number:"coral-number-field",select:"coral-select",dropdown:"coral-select",date:"emerald-datetime-picker",checkbox:"coral-checkbox",boolean:"coral-checkbox",combobox:"coral-combo-box"},b.prototype._editableTitle=!1,b.prototype._editableContent=!1,b.prototype._activePos=null,b.prototype._activeCell=null,b.prototype._activeRowId="",b.prototype._lastActiveGrid=null,b.prototype._prevContent=null,b.prototype._initialText="",b.prototype._headerInCellCache=null,b.prototype._activeInCellCache=null,b.prototype._usingBalloon=!1,b.prototype._balloonMode=!1,b.prototype._dataBinding=!0,b.prototype._dblClick=!0,b.prototype._autoCommitText=!1,b.prototype._touchTimerId=0,b.prototype._longPressTime=1e3,b.prototype._editing=!1,b.prototype._customElement=null,b.prototype._customElementPopup=null,b.prototype._tabToMove=!1,b.prototype._contentSource="textContent",b.prototype._inlineStyling=!1,b.prototype._disablingScroll=!1,b.prototype._uiBlocking=!1,b.prototype._autoSuggest=null,b.prototype._defaultTag="input",b.prototype._rowClosing=!1,b.prototype._closingOnScroll=!0,b.prototype._editorTimerId=0,b._scrolling=!1,b.prototype._elfVersion=0,b._primaryColor="",b._styles=Object(p.d)([":host .cell.editing input[type=text]",["border-style: solid;"]]),b._onThemeLoaded=function(){var e=g.getColors();b._primaryColor=e.primary},b.prototype._createInputElement=function(e){var t=this,o=document.createElement(e),i=b._uiElementTypesMap;return o.style.width="100%",o.style.height="100%",o.style.margin="0",o.style.borderColor=b._primaryColor||"#ee7600",o.style.maxHeight="unset",e===i.checkbox?(o.style.borderStyle="solid",o.style.borderWidth="1px",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.addEventListener("keydown",(function(e){13===e.keyCode&&e.preventDefault()}))):e===i.select||e===i.combobox||e===i.date?o.addEventListener("value-changed",t._onValueChanged):"coral-input"===e?o.setAttribute("type","number"):e===i.input&&o.setAttribute("type","text"),this._autoSuggest&&(this._autoSuggest.addEventListener("item-select",t._onAutoSuggestItemSelected),this._autoSuggest.addEventListener("wheel",t._stopPropagation,!1)),o.addEventListener("keydown",t._onTextKeyDown,!1),o.addEventListener("keyup",t._onTextKeyUp,!1),o.addEventListener("mousedown",t._stopPropagation,!1),o.addEventListener("mouseup",t._stopPropagation,!1),o.addEventListener("click",t._stopPropagation,!1),o.addEventListener("copy",t._stopPropagation,!1),o.addEventListener("cut",t._stopPropagation,!1),o.addEventListener("paste",t._stopPropagation,!1),o},b.prototype._createEditor=function(){var e=document.createElement("div");return e.className="cell editing",e.style.position="absolute",e},b.prototype._createBalloonPopup=function(e){return new d(e,{positioning:"over"})},b.prototype._createInCellCache=function(e,t){var o=this._createEditor(),i=this._createInputElement(t),n=new d(o,{positioning:"over"});return o.appendChild(i),{grid:e,inputElement:i,editor:o,balloonPopup:n}},b.prototype._createTitleEditor=function(e){var t=this;return t._headerInCellCache||(t._headerInCellCache=t._createInCellCache(e,"input")),t._headerInCellCache},b.prototype._createContentEditor=function(e,t){var o=this,i=b._uiElementTypesMap,n=o._getColumnData(e,t),r=n.inCellEditing,l=i[r&&r.type]||o._defaultTag;n.inCellCache||(n.inCellCache=o._createInCellCache(t,l));var s=n.inCellCache;return l!==i.select&&l!==i.combobox||(s.inputElement.data=r&&r.entries),s},b.prototype.getName=function(){return"InCellEditingPlugin"},b.prototype._onColumnAdded=function(e){e.context&&null!=e.colIndex&&this._retrieveColumnOption(e.context,e.colIndex)},b.prototype.initialize=function(e,t){this._hosts.indexOf(e)>=0||(this._hosts.length||window.addEventListener("scroll",this._onScroll),e.listen("columnAdded",this._onColumnAdded),e.getVScrollbar().listen("scroll",this._onScroll),e.getHScrollbar().listen("scroll",this._onScroll),this._dblClick&&(e.listen("dblclick",this._onDoubleClick),Object(p.b)()&&(e.listen("touchstart",this._onTouchStart),e.listen("touchend",this._onTouchEnd),e.listen("touchcancel",this._onTouchEnd))),this._hosts.push(e),g.getElfVersion()<4&&(b._uiElementTypesMap.number="coral-input"),g.isHaloTheme()&&(e._inCellEditingStyles||(e._inCellEditingStyles=!0,Object(p.a)(b._styles,e.getElement()))),this.config(t),b._primaryColor||g.getThemeColors().then(b._onThemeLoaded).catch(b._onThemeLoaded))},b.prototype.beforeProcessOption=function(e,t){if("cellEditing"==e)return null},b.prototype._afterInit=function(){this._elfVersion=g.getElfVersion()},b.prototype.config=function(e){if(e){var t=this,o=e.columns;if(o)for(var i=o.length,n=0;n<i;++n)t._retrieveColumnOption(o[n],n);var r=e.inCellEditing;r&&(r.type&&(t._defaultTag=b._uiElementTypesMap[r.type]),r.balloonMode&&t.enableBalloonMode(r.balloonMode),r.editableTitle&&t.enableTitleEditing(r.editableTitle),r.editableContent&&(t._editableContent=!0),r.tabToMove&&(t._tabToMove=!0),r.autoCommitText&&t.enableAutoCommitText(r.autoCommitText),null!=r.dataBinding&&t.disableDataBinding(!r.dataBinding),null!=r.contentSource&&(t._contentSource=r.contentSource),r.popupElement&&t.setPopupElement(r.popupElement),null!=r.doubleClick&&t.disableDblClick(!r.doubleClick),r.inlineStyling&&(t._inlineStyling=!0),r.disablingScroll&&(t._disablingScroll=!0),r.uiBlocking&&(t._uiBlocking=!0),r.autoSuggest&&(t._autoSuggest=r.autoSuggest),0==r.closingOnScroll&&(t._closingOnScroll=!1),t.addListener(r,"preEditorOpening"),t.addListener(r,"editorOpened"),t.addListener(r,"beforeCommit"),t.addListener(r,"editorClosed"),t.addListener(r,"keyUp"),t.addListener(r,"beforeRowCommit"),t.addListener(r,"rowEditorClosed"))}},b.prototype.getConfigObject=function(e){var t=e||{},o=t.columns;o||(o=t.columns=[]);for(var i=this.getColumnCount(),n=0;n<i;++n){var r=o[n];r||(r=o[n]={});var l=this._getColumnData(n);l&&(null!=l.editableContent&&(r.editableContent=l.editableContent),null!=l.inCellEditing&&(r.inCellEditing=l.inCellEditing))}var s=t.inCellEditing;return s||(s=t.inCellEditing={}),s.balloonMode=this._balloonMode,s.editableTitle=this._editableTitle,s.editableContent=this._editableContent,s.tabToMove=this._tabToMove,s.autoCommitText=this._autoCommitText,s.dataBinding=this._dataBinding,s.contentSource=this._contentSource,s.doubleClick=this._dblClick,s.inlineStyling=this._inlineStyling,s.disablingScroll=this._disablingScroll,s.uiBlocking=this._uiBlocking,t},b.prototype._retrieveColumnOption=function(e,t){var o=e.inCellEditing,i=e.editableContent;if(null!=o||null!=i){var n=this._newColumnData(t);null!=o&&(n.inCellEditing=o,o.entries=C.create(o.entries)),null!=i&&(n.editableContent=i)}},b.prototype.unload=function(e){var t=this._hosts.indexOf(e);t<0||(this._hosts.splice(t,1),e.unlisten("columnAdded",this._onColumnAdded),e.getVScrollbar().unlisten("scroll",this._onScroll),e.getHScrollbar().unlisten("scroll",this._onScroll),e.unlisten("dblclick",this._onDoubleClick),e.unlisten("touchstart",this._onTouchStart),e.unlisten("touchend",this._onTouchEnd),e.unlisten("touchcancel",this._onTouchEnd),this._hosts.length||(this._touchTimerId=0,this._editorTimerId=0,window.removeEventListener("scroll",this._onScroll)),this._dispose())},b.prototype.openEditor=function(e,t,o,i){if(i||(i=this._hosts[0])){var n=i.getSectionSettings(o||"content"),r=this._activePos;if(r){var l=n?n.getType():"";if(r.colIndex===e&&r.rowIndex===t&&r.sectionName===l&&r.grid===i)return;this.closeCellEditor()}var s=n?n.getSection():null,a=s?s.getCell(e,t):null;a&&(i.scrollToColumn(e),i.scrollToRow(null,t),setTimeout(this._openEditor.bind(this,a,i),100))}},b.prototype.closeCellEditor=function(e){this._commitText(e||this._autoCommitText)},b.prototype.enableBalloonMode=function(e){this._balloonMode=!1!==e},b.prototype.enableTitleEditing=function(e){this._editableTitle=!1!==e},b.prototype.disableTitleEditing=function(e){this._editableTitle=!1===e},b.prototype.disableCellEditing=function(e,t){e&&e.enableClass("no-editing",!1!==t)},b.prototype.disableDataBinding=function(e){this._dataBinding=!1===e},b.prototype.disableDblClick=function(e){var t=!1===e;if(this._dblClick!==t){this._dblClick=t;for(var o=this._hosts.length;--o>=0;)this._listenForTriggering(this._hosts[o],t)}},b.prototype.isEditing=function(){return this._editing},b.prototype.getTextBox=function(e,t){if(this._activeRowId){if(t=t||this._hosts[0]){var o=this._getColumnData(e,t).inCellCache;if(o)return o.inputElement}}else if(this._activeInCellCache)return this._activeInCellCache.inputElement;return null},b.prototype.getInitialText=function(){return this._initialText},b.prototype._getSourceContent=function(e,t,o,i){if("field"==this._contentSource)return this._getData(e,t,o);var n,r;if(i)for(var l=i.childNodes.length,s=0;s<l;++s)if(3===i.childNodes[s].nodeType){n=i.childNodes[s];break}return n?r=n.textContent:i&&(r=i.textContent),r},b.prototype._getRowIndex=function(e){if(e&&this._lastActiveGrid){var t=this._lastActiveGrid.getDataSource();if(t)return t.getRowIndex(e)}return-1},b.prototype._getRowId=function(e){if(null!=e&&this._lastActiveGrid){var t=this._lastActiveGrid.getDataSource();if(t)return t.getRowId(e)}return""},b.prototype.getActiveGrid=function(){return this._activePos?this._activePos.grid:null},b.prototype.getActiveColIndex=function(){if(this._activePos){var e=this._activePos.colIndex;if(null!=e)return e}return-1},b.prototype.getActiveRowIndex=function(){if(this._activeRowId)return this._getRowIndex(this._activeRowId);if(this._activePos){var e=this._activePos.rowIndex;if(null!=e)return e}return-1},b.prototype.getInputElementPosition=function(){return this._activePos||null},b.prototype.enableAutoCommitText=function(e){this._autoCommitText=!1!==e},b.prototype.isColumnEditable=function(e){var t=this._getColumnOption(e,"editableContent");return null==t?this._editableContent:t},b.prototype._onDoubleClick=function(e,t){var o=this,i=t||o.getRelativeGrid(e);if(!o.isEditing()&&i){var n=i.getRelativePosition(e),r=n.sectionType;("content"!==r||o.isColumnEditable(n.colIndex))&&("title"!==r||o._editableTitle)&&"header"!==r&&(e.preventDefault&&c.preventDefault(e),o.openEditor(n.colIndex,n.rowIndex,n.section,i))}},b.prototype._openEditor=function(e,t,o){var i=this;if(t.getElement()&&!(this._hosts.indexOf(t)<0)&&(o||(o=t.getRelativePosition(e)),o.hit&&(i._dispatch("preEditorOpening",o),!o.cancel))){var n=o.colIndex,r=o.rowIndex,l=o.section,s=l.getCell(n,r),a=1,u=l.getStretchedCell(s,r);if(u?s=u:a=l.getCellRowSpan(n,r),s&&!s.hasClass("no-editing")){i.closeRowEditor(!1,t),l.addClass("edit-mode"),i._lastActiveGrid=t,i._activePos=o,o.cell=i._activeCell=s,o.content=i._prevContent=s.getContent(),o.field=i._getField(n);var c=o.dataSource;if(null!=c){var d=o.rowId=this._getRowId(o.rowIndex);o.groupHeader=c.isSegmentSeparator(d)||c.getGroupByRowId(d),o.rowData=this._getRow(c,d)}"title"===o.sectionType?i._activeInCellCache=i._createTitleEditor(t):i._activeInCellCache=i._createContentEditor(n,t);var p=o.inputElement=i._activeInCellCache.inputElement,h=o.editor=i._activeInCellCache.editor,_=i._activeInCellCache.balloonPopup,f=o?i._getSourceContent(o.dataSource,o.rowIndex,o.field,o.content):"";r+1>=l.getRowCount()?p.classList.add("bottom"):p.classList.remove("bottom"),i._usingBalloon=i._isBalloonMode(s),i._usingBalloon?h.classList.add("balloon"):h.classList.remove("balloon");var m=h.style;(this._elfVersion||i._inlineStyling)&&(m.backgroundColor=l.getComputedStyle().backgroundColor);var g=l.getRowHeight(r),v=s.getWidth();if(!t.isPinnedColumn(n)){var y=t.getHScrollbar();if(y.isActive()){var C=y.getPaneSize();v>C&&(v=C)}}!i._usingBalloon||v>208?m.width=v+"px":m.width="",m.height=a>1?s.getHeight()+"px":g+"px";var b=document.body;if(i._compositeGrid||i._realTimeGrid){var E=i.getActiveGrid();E&&(b=E.getElement().parentElement)}_.enableUIBlocking(i._uiBlocking),_.addEventListener("hidden",i._onPopupHide),_.disableAutoHiding(!1),_.disableHideOnScroll(!0),_.attachTo(s.getElement()),_.show(!0,b),this._updateEditorPopup(i._activeInCellCache,s,t),i._customElement&&(i._customElementPopup.attachTo(h),i._customElementPopup.show(!0,b),i._customElementPopup.disableAutoHiding(!1),o.popupElement=i._customElement),i._setText(f,p),o.initialText=i._initialText=f,i._disablingScroll&&i._freezeScrolling(t,!0),o.autoSuggest=i._autoSuggest,i._autoSuggest&&(i._autoSuggest.attach===p&&(i._autoSuggest.attach=null),i._autoSuggest.parentNode!==h&&h.appendChild(i._autoSuggest),i._autoSuggest.attach=p,i._autoSuggest.positionTarget=p),i._dispatch("editorOpened",o),p.focus(),"function"==typeof p.select&&p.select(),o.initialText=i._initialText=i.getText(),i._editing=!0}}},b.prototype.openRowEditor=function(e,t){var o=this;if(t=t||o._hosts[0],o._getRowIndex(o._activeRowId)!==e&&t){var i,n;o.closeRowEditor(!1,t),o._commitText(!1);var r=t.getSection("content"),l=t.getDataSource(),s=(r.getColumnCount()||0)-1,a=e+1>=r.getRowCount(),u=this._elfVersion||o._inlineStyling?r.getComputedStyle().backgroundColor:null,c=r.getRowHeight(e),d=document.body;(o._compositeGrid||o._realTimeGrid)&&(d=t.getElement().parentElement);for(var p=0;p<=s;p++)if(o.isColumnEditable(p)){var h=r.getCell(p,e);if(h&&!h.hasClass("no-editing")){var _=o._createContentEditor(p,t),f=h.getContent(),m=o._getField(p),g=o._getSourceContent(l,e,m,f),v=_.inputElement,y=_.editor,C=_.balloonPopup;i?C.enableUIBlocking(!1):(i=v,n=C,C.enableUIBlocking(o._uiBlocking)),o._setText(g,v),a?v.classList.add("bottom"):v.classList.remove("bottom");var b=y.style;u&&(b.backgroundColor=u),b.height=c+"px";var E=r.getCellWidth(p,e);b.width=E+"px",y.classList.remove("balloon"),C.disableAutoHiding(!0),C.disableHideOnScroll(!0),C.attachTo(h.getElement()),C.show(!0,d),this._updateEditorPopup(_,h,t)}}i&&(n.addEventListener("hidden",o._onPopupHide),o._lastActiveGrid=t,o._editing=!0,o._activeRowId=this._getRowId(e),i.focus(),r.addClass("edit-mode"),o._disablingScroll&&o._freezeScrolling(t,!0))}},b.prototype.closeRowEditor=function(e){var t=this,o=t._lastActiveGrid;if(t._activeRowId&&o){var i=t._activeRowId,n=t._getRowIndex(i);e=!(n<=-1)&&!1!==e;for(var r,l=o.getSection("content"),s=o.getColumnCount(),a={},u=[],c=0;c<s;c++){var d=t._getColumnData(c,o);if((r=d&&d.inCellCache)&&(r.columnIndex=c,u.push(r),e)){var p=t._getField(c);r.field=p,a[p]=this._getValue(r.inputElement)}}var h,_,f=u.length;if(e&&(t.hasListener("beforeRowCommit")&&(_={grid:o,rowIndex:n,fieldValue:a,cancel:!1,rowId:t._activeRowId},t._dispatch("beforeRowCommit",_),e=!_.cancel),e)){var m=o.getDataSource();for(h=0;h<f;h++){var g=a[(r=u[h]).field];m&&t._setData(m,n,r.field,g);var v=l.getCell(r.columnIndex,n),y=v.getContent();y&&y.classList.contains("text")&&v.setContent(g)}}for(t.hasListener("rowEditorClosed")&&(_={grid:o,rowIndex:n,fieldValue:a,committed:e},t._dispatch("rowEditorClosed",_)),h=0;h<f;h++){var C=u[h].balloonPopup;C.removeEventListener("hidden",t._onPopupHide),C.hide()}t._freezeScrolling(o,!1),l.removeClass("edit-mode"),t._editing=!1,t._activeRowId="",t._lastActiveGrid=null,o.focus()}},b.prototype.toggleRowEditor=function(e,t,o){this._getRowIndex(this._activeRowId)===e?this.closeRowEditor(t,o):this._activeRowId?(this.closeRowEditor(t,o),this.openRowEditor(e,o)):this.openRowEditor(e,o)},b.prototype._onScroll=function(e){if(this._scrolling=!0,!this._closingOnScroll&&this._editing)if(this._activeInCellCache)this._activeInCellCache.balloonPopup.hide();else if(this._activeRowId)for(var t=this.getActiveGrid()||this._lastActiveGrid,o=(t.getSection("content").getColumnCount()||0)-1,i=0;i<=o;i++){var n=this._getColumnData(i,t).inCellCache;if(n){var r=n.balloonPopup;r&&r.hide()}}this._onPopupHide(),this._scrolling=!1},b.prototype._onPopupHide=function(e){this._closingOnScroll||!this._scrolling?(this._commitText(this._autoCommitText),this.closeRowEditor(!1)):this.requestShowEditorPopup()},b.prototype._onAutoSuggestItemSelected=function(e){if(e.detail.target){var t=e.detail.method,o=e.detail.target.value;"enter"!==t&&"click"!==t||o&&(this.setText(o),this._commitText(!0))}},b.prototype._onValueChanged=function(e){this._activeRowId||this._commitText(!0)},b.prototype._onTextKeyDown=function(e){e.stopPropagation(),this._activeRowId||(27===e.keyCode&&this._commitText(this._autoCommitText),9===e.keyCode&&(this._autoSuggest&&this._autoSuggest.suggestions.length>0&&this._activeInCellCache.inputElement.focus(),e.preventDefault()))},b.prototype._onTextKeyUp=function(e){if(e.stopPropagation(),!this._activeRowId){this.hasListener("keyUp")&&(this._activePos.text=this._activePos.enteredText=this._activeInCellCache.inputElement.value,this._dispatch("keyUp",this._activePos));var t=9===e.keyCode;if(t||13===e.keyCode){var o=this.getText(),i=this._activePos;if(this._initialText!==o){if(e.preventDefault(),this._autoSuggest&&this._autoSuggest.suggestions.length>0)return this._activeInCellCache.inputElement.focus(),void(this._autoSuggest.suggestions=[]);this._commitText(!0)}else this._commitText(!1);if(t&&this._tabToMove&&!e.altKey&&!e.ctrlKey){var n=i?i.grid:null;if(n&&n.getCellInfo)for(var r=n.getDataSource();i;)if((i=e.shiftKey?n.getPrevCell(i):n.getNextCell(i))&&i.cell){if(r.getRowDataAt(i.rowIndex)&&this.isColumnEditable(i.colIndex)){this.openEditor(i.colIndex,i.rowIndex,i.sectionName,i.grid);break}}else i=null}}}},b.prototype._commitText=function(e){var t=this,o=t._activePos;if(t.isEditing()&&o){o.section.removeClass("edit-mode"),t._editing=!1;var i=o.text=this.getValue(),n=o.groupHeader||!1;if(e&&(t.hasListener("beforeCommit")&&(t._dispatch("beforeCommit",o),e=!o.cancel,i=o.text),e&&t._dataBinding&&!n)){var r=o.sectionSettings,l=r.getType();if("content"===l){var s=r.getDataSource();s&&(t._setData(s,o.rowIndex,o.field,i),t._prevContent&&t._prevContent.classList.contains("text")&&t._activeCell.setContent(i))}else if("title"===l){var a=this._compositeGrid||this._realTimeGrid||null;a&&a.setColumnName(o.colIndex,i)}else t._activeCell.setContent(i)}t.hasListener("editorClosed")&&(o.canceled=o.cancelled=!e,o.committed=e,t._dispatch("editorClosed",o)),t._activeInCellCache&&t._activeInCellCache.balloonPopup&&(t._activeInCellCache.balloonPopup.removeEventListener("hidden",t._onPopupHide),t._activeInCellCache.balloonPopup.hide()),c.removeParent(t._customElement),t._freezeScrolling(o.grid,!1),o.grid.focus(),t._activePos=t._activeCell=t._prevContent=t._lastActiveGrid=t._activeInCellCache=null}},b.prototype._stopPropagation=function(e){e.stopPropagation()},b.prototype._isBalloonMode=function(e){var t=e.getElement(),o=t?window.getComputedStyle(t):{};return this._balloonMode||"none"===o.display||"hidden"===o.visibility},b.prototype._listenForTriggering=function(e,t){t?(e.listen("dblclick",this._onDoubleClick),Object(p.b)()&&(e.listen("touchstart",this._onTouchStart),e.listen("touchend",this._onTouchEnd),e.listen("touchcancel",this._onTouchEnd))):(e.unlisten("dblclick",this._onDoubleClick),e.unlisten("touchstart",this._onTouchStart),e.unlisten("touchend",this._onTouchEnd),e.unlisten("touchcancel",this._onTouchEnd))},b.prototype._onTouchStart=function(e){this._resetTouchTimer(),this._touchTimerId=setTimeout(this._onTouchTimer,this._longPressTime)},b.prototype._onTouchTimer=function(e){this._touchTimerId=0},b.prototype._onTouchEnd=function(e){this._resetTouchTimer()||this._onDoubleClick(e)},b.prototype._resetTouchTimer=function(){return!!this._touchTimerId&&(clearTimeout(this._touchTimerId),this._touchTimerId=0,!0)},b.prototype.setPopupElement=function(e){var t=this._activeInCellCache&&this._activeInCellCache.balloonPopup;this._customElement&&(t&&t.removeFocusElement(this._customElement),this._customElementPopup.dispose(),this._customElementPopup=null),this._customElement=e,this._customElement&&(this._customElementPopup=new d(this._customElement),t&&t.addFocusElement(this._customElement))},b.prototype.setText=function(e){this._activeInCellCache&&this._setText(e,this._activeInCellCache.inputElement)},b.prototype._setText=function(e,t){t._origValue=e;var o=t.tagName.toLowerCase(),i=b._uiElementTypesMap;if(o===i.checkbox)!!e&&!("f"===e||"false"===e)?t.setAttribute("checked","true"):t.removeAttribute("checked");else if(o===i.combobox)this._elfVersion<=3?(t.value="",t.value={value:e,label:e}):t.value=e;else if(o===i.date)y.setDate(t,e);else{var n="";null!=e&&(n="string"==typeof e?e:e+""),t.value=n}},b.prototype.getText=function(){return this._activeInCellCache?this._getText(this._activeInCellCache.inputElement):""},b.prototype._getText=function(e){var t=e.tagName.toLowerCase(),o=b._uiElementTypesMap;if(t===o.checkbox)return e.checked+"";if(t===o.combobox){if(this._elfVersion<=3)return e.value?e.value.value:""}else if(t===o.date)return e.value+"";return e.value},b.prototype.getValue=function(){return this._activeInCellCache?this._getValue(this._activeInCellCache.inputElement):null},b.prototype._getValue=function(e){var t=e.tagName.toLowerCase(),o=b._uiElementTypesMap;return t===o.checkbox?!!e.checked:t===o.date?y.getDate(e):t===o.number||"number"==typeof e._origValue?+e.value:this._getText(e)},b.prototype.clearText=function(){this.setText("")},b.prototype.appendText=function(e){e&&this._activeInCellCache&&(this._activeInCellCache.inputElement.value+=e)},b.prototype.commitText=function(e){e&&this.setText(e),this._commitText(!0)},b.prototype.getBalloonPopup=function(){return this._activeInCellCache?this._activeInCellCache.balloonPopup:null},b.prototype.getAutoSuggest=function(){return this._autoSuggest},b.prototype.setDisablingScroll=function(e){var t=e;return this._disablingScroll=e,t},b.prototype._freezeScrolling=function(e,t){if(e){var o=e.getVScrollbar(),i=e.getHScrollbar();o&&o.freezeScrolling(t),i&&i.freezeScrolling(t)}},b.prototype.requestShowEditorPopup=function(){this._editorTimerId||(this._editorTimerId=setTimeout(this._onUpdateEditorPopup.bind(this),100))},b.prototype._onUpdateEditorPopup=function(){this._editorTimerId=0;var e=this.getActiveGrid()||this._lastActiveGrid;if(e){var t=document.body;if((this._compositeGrid||this._realTimeGrid)&&(t=e.getElement().parentElement),this._activeInCellCache){var o=this._activePos;if(o){var i=e.getSection(o.sectionType).getCell(o.colIndex,o.rowIndex);if(i){var n=this._activeInCellCache.balloonPopup;n.attachTo(i.getElement()),n.show(!0,t),this._updateEditorPopup(this._activeInCellCache,i,e)}}}else if(this._activeRowId){var r=e.getSection("content"),l=this._getRowIndex(this._activeRowId);if(r.isRowVisible(l))for(var s=(r.getColumnCount()||0)-1,a=0;a<=s;a++){var u=this._getColumnData(a,e).inCellCache,c=r.getCell(a,l);if(u&&c){var d=u.balloonPopup;d.attachTo(c.getElement()),d.show(!0,t),this._updateEditorPopup(u,c,e)}}}e.focus()}},b.prototype._updateEditorPopup=function(e,t,o){var i=e.balloonPopup,n=e.editor,r=i.getElement(),l=o.getRelativePosition(t),s=t.getWidth(),a=t.getHeight(),u=o.getColumnRect(0,o.getColumnCount()),c=o.getRowRect(0,o.getRowCount()),d=u.scrollViewSize,p=c.scrollViewSize,h=0,_="content"==l.sectionType?c.scrollViewTop:0,f=a,m=s,g="inline-block",v=0,y=0;if(-1!=u.leftPinnedIndex){var C=0;o.getVScrollbar().isActive()&&(C-=8),d+=C+=u.width-u.scrollViewSize,h+=C}if(n.classList.contains("balloon")&&!this._activeRowId&&(r.style.display="",n.style.width="",n.style.marginLeft="",n.style.marginTop="",v=-4,y=-4,m=i.getElement().offsetWidth),l.hit){var b=l.x+m,E=l.y-_+f;l.x<h&&(m-=h-l.x,v+=Math.abs(l.x-h)),b>d&&(m-=b-d),l.y<_&&(f=f+l.y-_,y+=Math.abs(l.y-_)),E>p&&(f-=E-p),(m<48&&m!=s||f<16&&f!=a)&&(g="none")}else g="none";r.style.display=g,n.style.width=m?m+"px":"",n.style.height=f?f+"px":"",n.style.marginLeft=v?v+"px":0,n.style.marginTop=y?y+"px":0};!function(e,t){if(e&&t&&t.prototype.getName){var o=t.prototype.getName().replace(/Plugin$/,"");if(o){var i=e.tr;i||(i=e.tr={});var n=i.grid;n||(n=i.grid={}),n[o+"Plugin"]=t,i[o+"Extension"]=t}}}(window,b)}]);