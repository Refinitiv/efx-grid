!function(e){var t={};function o(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,i){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(i,n,function(t){return e[t]}.bind(null,n));return i},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var i={inherits:function(e,t){function o(){}o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.base=function(e,o,i){o||(o="constructor");for(var n=arguments.length,r=new Array(n),l=2;l<n;l++)r[l-2]=arguments[l];return t.prototype[o].apply(e,r)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(e,t){if(e&&t){this._events||(this._events={});var o=this._events[e];o?o.indexOf(t)<0&&(o.push(t),++this._listenerCount):(this._events[e]=[t],++this._listenerCount)}},n.prototype.removeEventListener=function(e,t){var o=this._events?this._events[e]:null;if(o){var i=o.indexOf(t);i>=0&&(o.splice(i,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(e){if(this._listenerCount){if(e){var t=this._events?this._events[e]:null;return!!t&&t.length>0}return!0}return!1},n.prototype.getListener=function(e,t){if(e){var o=this._events?this._events[e]:null;if(o)return t||(t=0),o[t]||null}return null},n.prototype.addListener=function(e,t){var o=e?e[t]:null;"function"==typeof o&&this.addEventListener(t,o)},n.prototype._prepareEventArguments=function(e,t){return t},n.prototype._dispatch=function(e,t){var o=this._events?this._events[e]:null;if(o){t=this._prepareEventArguments(e,t);for(var i=o.length,n=0;n<i;++n)o[n](t)}};n.preventDefault=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())};var r=function(e,t,o){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof e&&(this._resolveHandler=e),"function"==typeof t&&(this._rejectHandler=t),null!=o&&(this._ctx=o),this.promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype._fulfilled=!1,r.prototype.resolve=function(e){if(this._resolve){if(this._resolveHandler){var t=this._resolveHandler(e,this._ctx||this);null!=t&&(e=t)}this._resolve(e),this._finally()}},r.prototype.reject=function(e){if(this._reject){if(this._rejectHandler){var t=this._rejectHandler(e,this._ctx||this);null!=t&&(e=t)}this._reject(e),this._finally()}},r.prototype.isFulfilled=function(){return this._fulfilled},r.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var l=function(){};i.inherits(l,n),l.prototype._hosts=null,l.prototype._compositeGrid=null,l.prototype._realTimeGrid=null,l.prototype._rowGetter=null,l.prototype._initializedGrid=!1,l.prototype.listen=l.prototype.addEventListener,l.prototype.unlisten=l.prototype.removeEventListener,l.prototype.afterInit=function(e,t,o){var i=null;o&&o.getCoreGrid&&(i=o.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",o),this._compositeGrid&&i.loadPlugin(this,t)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?u:a,this._afterInit())},l.prototype._afterInit=function(){},l.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},l.prototype.hasMultiTableSupport=function(){return!1},l.prototype._prepareEventArguments=function(e,t){return t||(t={}),t.api=this.getGridApi(),t},l.prototype.getName=function(){return"GridPlugin"},l.prototype.initialize=function(e,t){},l.prototype.unload=function(e){this._dispose()},l.prototype.getRelativeGrid=function(e){var t=null;if(e.target){var o=(t=e.target).api;if(o&&o.getCoreGrid)return o.getCoreGrid()}else e.getElement?t=e.getElement():1===e.nodeType&&(t=e);if(t)for(var i=this._hosts.length;--i>=0;){var n=this._hosts[i];if(n.getElement().contains(t))return n}return null},l.prototype.setGridWrapper=function(e,t){e&&("compositegrid"===(e=e.toLowerCase())?this._compositeGrid=t:"realtimegrid"===e&&(this._realTimeGrid=t))},l.prototype.getGridApi=function(e){if(null==e)return this._compositeGrid||this._realTimeGrid;var t="number"==typeof e?this._hosts[e]:e;return t&&t._wrapper||null},l.prototype.getColumnName=function(e){if(this._compositeGrid){var t=this._compositeGrid.getColumnModel(e);if(t)return t.title?t.title:t.field}else{var o=this.getColumnIndex(e),i=this._realTimeGrid.getColumnDefinition(o);if(i)return i.getName()}return""},l.prototype.getColumnIndex=function(e){if("number"==typeof e)return e;if(this._compositeGrid){var t=this._compositeGrid.getColumnFields().indexOf(e);return t>-1?t:this._compositeGrid.getColumnIndex(e)}return this._realTimeGrid.getColumnIndex(e)},l.prototype.getColumnIndices=function(e){if(this._compositeGrid){for(var t,o=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),n=[],r=0;r<e.length;r++)if("number"==typeof(t=e[r]))t>=0&&t<i&&n.push(t);else{var l=o.indexOf(t);-1!==l&&n.push(l)}return n}return this._realTimeGrid.getColumnIndices(e)},l.prototype.getColumnId=function(e){if("string"==typeof e)return e;var t=this.getColumnCount();if(e<0||e>=t)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(e);var o=this._realTimeGrid.getColumnDefinition(e);return o?o.getId():""},l.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},l.prototype.getColumnField=function(e){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(e):""},l.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},l.prototype.getColumnCount=function(){if(this._hosts){var e=this._hosts[0];return e?e.getColumnCount():0}return 0},l.prototype._moveColumnById=function(e,t){var o=this._hosts,i=o?o.length:0;if(i){for(var n=0,r=0;r<i;++r)n|=o[r].moveColumnById(e,t);return!!n}return!1},l.prototype._reorderColumns=function(e,t){var o=this._hosts,i=o?o.length:0;if(i){for(var n=0,r=0;r<i;++r)n|=o[r].reorderColumns(e,t);return!!n}return!1},l.prototype._loadPlugin=function(e,t,o){return e||(e=t.getPlugin(o))||(e=t.loadPlugin(o))&&this._initializedGrid&&(e._initializedGrid=!0),e},l.prototype._requestPlugin=function(e,t,o){return this._initializedGrid?l.requestPlugin(e,t,o,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},l.requestPlugin=function(e,t,o,i,n){var s=null;if(e){var a=null;1===e.nodeType?a=e.api:e.getCoreGrid?a=e:e.getPlugin&&(s=e),a&&(s=a.getCoreGrid(),i||n||(a.getModel?i=a:n=a))}if(!s)return Promise.reject("Cannot find grid element");var u=s.getPlugin(t);if(u)return Promise.resolve(u);var d=new r;return setTimeout(l._onPluginRequested.bind(null,{grid:s,pluginRef:t,compositeGrid:i,realTimeGrid:n,config:o,deferred:d}),10),d.promise},l._onPluginRequested=function(e){var t=e.grid;if(!t.getElement())return e.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+e.pluginRef);var o=t.getPlugin(e.pluginRef);if(o)return e.deferred.resolve(o);var i=!1;return e.pluginRef.beforeInit&&(i=!0,e.pluginRef.beforeInit(t.getElement(),e.config,!0)),(o=t.loadPlugin(e.pluginRef,e.config))?(!i&&o.beforeInit&&(i=!0,o.beforeInit(t.getElement(),e.config)),o.setGridWrapper&&(e.compositeGrid?o.setGridWrapper("compositegrid",e.compositeGrid):e.realTimeGrid&&o.setGridWrapper("realtimegrid",e.realTimeGrid)),o.afterInit&&o.afterInit(),e.deferred.resolve(o)):e.deferred.reject("Unable to load required dependency: "+e.pluginRef)},l.prototype._getPlugin=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getPlugin(e):null},l.prototype._getColumnData=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getColumnData(e):null},l.prototype._getColumnOption=function(e,t,o){var i=this._getColumnData(e,o);return i?i[t]:null},l.prototype._newColumnData=function(e,t){if(null==t&&(t=this._hosts[0]),!t)return{};var o=t.getColumnData(e);return o||(o=t.setColumnData(e,{})),o},l.prototype._getField=function(e){var t=this._compositeGrid||this._realTimeGrid;return t?t.getColumnField(e):""},l.prototype._getRowData=function(e){return this._realTimeGrid&&e?e.ROW_DEF.getRowData():e},l.prototype._getRow=function(e,t){return d(e.getRowDataAt(t))},l.prototype._getData=function(e,t,o){var i=this._getRow(e,t);return i?i[o]:void 0},l.prototype._setData=function(e,t,o,i){if(this._realTimeGrid){var n=s(e,t);n&&n.setData(o,i)}else"number"==typeof t?e.setDataAt(t,o,i):e.setData(t,o,i)},l.prototype._setRowData=function(e,t,o){if(this._realTimeGrid){var i=s(e,t);i&&i.setRowData(o)}else"number"==typeof t?e.setRowDataAt(t,o):e.setRowData(t,o)},l.prototype._setStaticData=function(e,t,o,i){if(this._realTimeGrid){var n=s(e,t);n&&n.setStaticData(o,i)}else this._setData(e,t,o,i)},l.prototype._setColumnData=function(e,t,o,i){if(t){var n=Array.isArray(i)?i:e.getAllRowIds(!0),r=n?n.length:0;if(r)if(1!==r){var l=Array.isArray(o)?o:n.map((function(){return o}));if(this._realTimeGrid){for(var s=0;s<r;++s){var a=e.getRowData(n[s]);if(a){var u=a.ROW_DEF;u&&(u.getRowData()[t]=l[s])}}e.dispatchGlobalChange||(e=e.getDataSource()),e&&e.dispatchGlobalChange&&e.dispatchGlobalChange()}else e.setColumnData(t,l,n)}else this._setData(e,n[0],t,Array.isArray(o)?o[0]:o)}},l.prototype._activateColumnRenderer=function(e,t,o){if(null!=e){var i=this._realTimeGrid;i?i.activateColumnRenderer(e,t,o):"function"==typeof o?this._hosts[0].setColumnDataBindingHandler(e,o):this._hosts[0].setColumnDataBindingHandler(e,null)}};var s=function(e,t){var o="number"==typeof t?e.getRowDataAt(t):e.getRowData(t);return o&&o.ROW_DEF||null},a=function(e){return e},u=function(e){return e?e.ROW_DEF.getRowData():null},d=function(e){if(e){var t=e.ROW_DEF;return t?t.getRowData():e}return null},c={create:function(e,t){var o=document.createElement(e);return t&&(o.className=t),o},div:function(e){return c.create("div",e)},text:function(e,t){var o=c.create("span",t);return(e||0===e)&&(o.textContent=e),o},appendChild:function(e,t){if(!e)return null;var o,i;Array.isArray(arguments[1])?(i=arguments[1],o=0):(i=arguments,o=1);for(var n=i.length;o<n;)e.appendChild(i[o]),++o;return e},buildTree:function(e,t){if(!e)return null;for(var o=arguments,i=o.length,n=1;n<i;++n){var r,l=o[n];if(l)Array.isArray(l)?r=c.buildTree.apply(null,l):1===l.nodeType&&(r=l),r&&e.appendChild(r)}return e},removeParent:function(e){if(!e)return null;var t=e.parentNode;return t&&t.removeChild(e),t},setParent:function(e,t){return e?t?(t.appendChild(e),t):c.removeParent(e):null},removeChildren:function(e,t){if(e){var o=e.childNodes.length;for((null==t||t>o)&&(t=o);--t>=0;)e.removeChild(e.lastChild)}},setContent:function(e,t){if(e)if(t||0===t){var o=t.nodeType;1===o||3===o?t!==e.lastChild&&(c.removeChildren(e),e.appendChild(t)):Array.isArray(t)?(c.removeChildren(e),c.appendChild(e,t)):e.textContent=t}else c.removeChildren(e)},toggleAttribute:function(e,t,o){o?e.setAttribute(t,"string"==typeof o?o:""):null==o?e.hasAttribute(t)?e.removeAttribute(t):e.setAttribute(t,""):e.removeAttribute(t)},toggleClass:function(e,t,o){o?e.classList.add(t):null==o?e.classList.contains(t)?e.classList.remove(t):e.classList.add(t):e.classList.remove(t)},addClasses:function(e,t){if(e)for(var o=Array.isArray(t)?t:arguments,i=o.length,n=0;n<i;++n){var r=o[n];r&&"string"==typeof r&&e.classList.add(r)}},removeClasses:function(e,t){if(e)for(var o=Array.isArray(t)?t:arguments,i=o.length,n=0;n<i;++n){var r=o[n];r&&"string"==typeof r&&e.classList.remove(r)}},preventDefault:function(e){e.preventDefault(),e.stopPropagation()},stopPropagation:function(e){e.stopPropagation()},getClientPosition:function(e,t){var o=t||{x:0,y:0};if(e.getBoundingClientRect){var i=e.getBoundingClientRect();o.x=i.left,o.y=i.top}else o.x=e.clientX,o.y=e.clientY;return o},getRelativePosition:function(e,t,o){o=c.getClientPosition(e,o);var i=c.getClientPosition(t);return o.x-=i.x,o.y-=i.y,o},closestElement:function(e,t){for(var o=e;o;){if(o.classList&&o.classList.contains(t))return o;o=o.parentNode||o.host}return null},closestTagName:function(e,t){for(var o=e;o;){if(o.tagName&&o.tagName==t)return o;o=o.parentNode||o.host}return null}},p=function(e,t){var o=this;o.show=o.show=o.show.bind(o),o.hide=o.hide=o.hide.bind(o),o.toggle=o.toggle=o.toggle.bind(o),o._onBlur=o._onBlur.bind(o),o._onBlurTimer=o._onBlurTimer.bind(o),o._onResize=o._onResize.bind(o),o.updatePosition=o.updatePosition.bind(o),o._onScroll=o._onScroll.bind(o),o._onMouseOver=o._onMouseOver.bind(o),o._onMouseOut=o._onMouseOut.bind(o),o._onMouseOverTimeout=o._onMouseOverTimeout.bind(o),e&&1!==e.nodeType&&(t=e,e=null),e?(o._elem=e,c.removeParent(e)):o._elem=document.createElement("div"),o._elem.style.position="fixed",o._elem.style.left="0",o._elem.style.top="0",o._elem.style.display="inline-block",o._focusElements=[o._elem],o._children=[],o._evtArg={target:o._elem,currentTarget:o._elem},o._parentElement=document.body,o.init(t)};i.inherits(p,n),p.prototype._elem=null,p.prototype._disabled=!1,p.prototype._inDoc=!1,p.prototype._autoHiding=!0,p.prototype._blurTimer=0,p.prototype._resizeTimer=0,p.prototype._attachedElem=null,p.prototype._positioning="under",p.prototype._focusElements,p.prototype._parentElement,p.prototype._children,p.prototype._evtArg,p.prototype._autoClipping=!0,p.prototype._origW=null,p.prototype._origH=null,p.prototype._hoverToShow=!1,p.prototype._hoverTimer=0,p.prototype._gap=0,p.prototype._uiBlocking=!1,p.prototype._hideOnScroll=!0,p.prototype._autoRepositioning=!0,p.prototype.dispose=function(){this._removeEventListeners(),this._clearMouseOverTimer();for(var e=this._children.length;--e>=0;)this._children[e].dispose();this._inDoc=!1,c.removeParent(this._elem),c.removeParent(this._overlay),this._elem=null},p.prototype.getElement=function(){return this._elem},p.prototype.appendChild=function(e){e&&this._elem.appendChild(e)},p.prototype.disable=function(e){this._disabled=!1!==e},p.prototype.enable=function(e){this._disabled=!1===e},p.prototype.init=function(e){if(e){e.positioning&&(this._positioning=e.positioning),null!=e.autoHiding&&(this._autoHiding=!!e.autoHiding),null!=e.uiBlocking&&this.enableUIBlocking(e.uiBlocking),null!=e.hoverToShow&&(this._hoverToShow=!!e.hoverToShow),null!=e.autoClipping&&(this._autoClipping=!!e.autoClipping),null!=e.attachedElement&&this.attachTo(e.attachedElement),null!=e.contentElement&&this.appendChild(e.contentElement),null!=e.parentElement&&this.setParentElement(e.parentElement),null!=e.popupChild&&this.addPopupChild(e.popupChild),0==e.hideOnScroll&&(this._hideOnScroll=!1),0==e.autoRepositioning&&(this._autoRepositioning=!1),this.addListener(e,"show"),this.addListener(e,"hide"),this.addListener(e,"shown"),this.addListener(e,"hidden");var t=e.focusElement||e.focusElements;if(t)if(Array.isArray(t))for(var o=t.length;--o>=0;)this.addFocusElement(t[o]);else this.addFocusElement(t)}},p.prototype.attachTo=function(e,t){e||(e=null),this._attachedElem!==e&&(this._hoverToShow&&this._attachedElem&&(this._attachedElem.removeEventListener("mouseover",this._onMouseOver,!1),this._attachedElem.removeEventListener("mouseout",this._onMouseOut,!1)),this.removeFocusElement(this._attachedElem),this._attachedElem=e,this.addFocusElement(this._attachedElem),this._hoverToShow&&this._attachedElem&&(this._attachedElem.addEventListener("mouseover",this._onMouseOver,!1),this._attachedElem.addEventListener("mouseout",this._onMouseOut,!1))),null!=t&&this.setPositioning(t)},p.prototype.setAttachedElement=p.prototype.attachTo,p.prototype.addFocusElement=function(e){e&&this._focusElements.indexOf(e)<0&&this._focusElements.push(e)},p.prototype.removeFocusElement=function(e){if(e){var t=this._focusElements.indexOf(e);t>=0&&this._focusElements.splice(t,1)}},p.prototype.addPopupChild=function(e){return e||((e=new p).setPositioning("right"),e.attachTo(this._elem)),this.addFocusElement(e.getElement()),this._children.push(e),e},p.prototype.setPopupGap=function(e){this._gap="number"==typeof e?e:0},p.prototype.setParentElement=function(e){return e instanceof Element?this._parentElement=e:this._parentElement||(this._parentElement=document.body),this._parentElement},p.prototype.show=function(e,t){var o=this;if(o._clearMouseOverTimer(),!o._disabled){var i=!1!==e;if(o._inDoc!==i){var n=i?"show":"hide";if(o._evtArg.type=n,o._dispatch(n,o._evtArg),o._evtArg.cancel)o._evtArg.cancel=!1;else{if(i)o._inDoc=!0,t instanceof Element||(t=o._parentElement),o._uiBlocking&&o._attachOverlay(t),t.appendChild(o._elem),t.addEventListener("scroll",o._onScroll,!0),o._autoHiding&&(window.addEventListener("mousedown",o._onBlur,!0),window.addEventListener("touchstart",o._onBlur,!0)),window.addEventListener("resize",o._onResize,!1),window.addEventListener("scroll",o._onScroll,!0);else if(o._inDoc){o._removeEventListeners(),o._restoreElementSize();for(var r=o._children.length;--r>=0;)o._children[r].hide();o._inDoc=!1,c.removeParent(o._elem),c.removeParent(o._overlay)}n=i?"shown":"hidden",o._evtArg.type=n,o._dispatch(n,o._evtArg),i&&o.updatePosition()}}else o.updatePosition()}},p.prototype.hide=function(e){this.show(!1===e)},p.prototype.toggle=function(e,t){null==e&&(e=!this._inDoc),e?this.show(!0,t):this.hide()},p.prototype.isShown=function(){return this._inDoc},p.prototype.isHidden=function(){return!this._inDoc},p.prototype.contains=function(e){if(e){e=Array.isArray(e)?e:[e];for(var t=this._focusElements,o=t.length;--o>=0;)if(e.indexOf(t[o])>=0||t[o].contains(e[0]))return!0}return!1},p.prototype.setPositioning=function(e){this._positioning!==e&&(this._positioning=e,this.updatePosition())},p.prototype.disableAutoHiding=function(e){var t=!1===e;this._autoHiding!==t&&(this._autoHiding=t,this._inDoc&&(t?(window.addEventListener("mousedown",this._onBlur,!0),window.addEventListener("touchstart",this._onBlur,!0)):(window.removeEventListener("mousedown",this._onBlur,!0),window.removeEventListener("touchstart",this._onBlur,!0))))},p.prototype.disableAutoRepositioning=function(e){var t=!1===e;this._autoRepositioning!==t&&(this._autoRepositioning=t)},p.prototype.disableAutoClipping=function(e){var t=!1===e;this._autoClipping!==t&&(this._autoClipping=t)},p.prototype.disableHideOnScroll=function(e){var t=!1===e;this._hideOnScroll!==t&&(this._hideOnScroll=t)},p.prototype.updatePosition=function(e){null==e&&(e=!0);var t=this;if(t._resizeTimer=0,t._inDoc){if(t._attachedElem){if(!t._attachedElem.offsetWidth)return;t._autoClipping&&t._restoreElementSize();var o=document.body;"over"===t._positioning&&(o=document.documentElement);var i,n,r=c.getRelativePosition(t._attachedElem,o),l=r.x,s=r.y,a=window.innerWidth,u=window.innerHeight,d=null!=window.scrollX?window.scrollX:window.pageXOffset,p=null!=window.scrollY?window.scrollY:window.pageYOffset,h=a+d,_=u+p,m=t._attachedElem.offsetWidth,g=t._attachedElem.offsetHeight,f=t._elem.offsetWidth,v=t._elem.offsetHeight;"right"==t._positioning?(i=l+m+this._gap,n=s):"over"==t._positioning?(i=l,n=s):(i=l,n=s+g),e&&("right"==t._positioning?(i+f>h&&l-f>d&&(i=l-f-this._gap),n+v>_&&s+g-v>p&&(n=s+g-v)):"over"==t._positioning?(i+f>h&&l+m-f>d&&(i=l+m-f),n+v>_&&s+m-v>p&&(n=s+m-v)):(i+f>h&&l+m-f>d&&(i=l+m-f),n+v>_&&(s-v>p?n=s-v:(n-=n+v-_)<0&&(n=0)))),t._autoClipping&&(i+f>h&&(null==t._origW&&(t._origW=t._elem.style.width),t._elem.style.width=h-i+"px"),n+v>_&&(null==t._origH&&(t._origH=t._elem.style.height),t._elem.style.height=_-n+"px")),t._elem.style.left=Math.floor(i-d)+"px",t._elem.style.top=Math.floor(n-p)+"px"}else"fixed"!=t._positioning&&"custom"!=t._positioning&&(t._elem.style.left="calc(50vw - "+Math.floor(t._elem.offsetWidth/2)+"px)",t._elem.style.top="calc(46vh - "+Math.floor(t._elem.offsetHeight/2)+"px)");t._evtArg.type="positioning",t._dispatch("positioning",t._evtArg)}},p.prototype.enableUIBlocking=function(e){var t=this._uiBlocking;return this._uiBlocking=!1!==e,t},p.prototype._attachOverlay=function(e){if(!this._overlay){var t=(this._overlay=document.createElement("div")).style;t.height="100%",t.width="100%",t.top="0",t.left="0",t.backgroundColor="rgba(0, 0, 0, 0)"}e===document.body?this._overlay.style.position="fixed":this._overlay.style.position="absolute",e.appendChild(this._overlay)},p.prototype._onBlur=function(e){if(!this._blurTimer&&this._inDoc){if(e)if(e.composedPath){if(this.contains(e.composedPath()))return}else if(this.contains(e.target))return;this._blurTimer=setTimeout(this._onBlurTimer,10)}},p.prototype._onBlurTimer=function(){this._blurTimer=0,this.contains(document.activeElement)||this.hide()},p.prototype._onResize=function(){!this._resizeTimer&&this._inDoc&&this._autoRepositioning&&(this._resizeTimer=setTimeout(this.updatePosition,50))},p.prototype._onScroll=function(e){!this.contains(e.target)&&this._hideOnScroll&&this.hide()},p.prototype._onMouseOver=function(e){this._hoverTimer||this._inDoc||(this._hoverTimer=setTimeout(this._onMouseOverTimeout,500))},p.prototype._onMouseOut=function(e){this._hoverTimer&&(e.currentTarget.contains(e.relatedTarget)||this._clearMouseOverTimer())},p.prototype._onMouseOverTimeout=function(){this._hoverTimer=0,this.show()},p.prototype._clearMouseOverTimer=function(){this._hoverTimer&&(clearTimeout(this._hoverTimer),this._hoverTimer=0)},p.prototype._restoreElementSize=function(){null!=this._origW&&(this._elem.style.width=this._origW,this._origW=null),null!=this._origH&&(this._elem.style.height=this._origH,this._origH=null)},p.prototype._removeEventListeners=function(){this._blurTimer&&(clearTimeout(this._blurTimer),this._blurTimer=0),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=0),window.removeEventListener("mousedown",this._onBlur,!0),window.removeEventListener("touchstart",this._onBlur,!0),window.removeEventListener("resize",this._onResize,!1),window.removeEventListener("scroll",this._onScroll,!0),this._elem.parentElement&&this._elem.parentElement.removeEventListener("scroll",this._onScroll,!0)};var h=function(e){return Array.isArray(e)?"{\n"+e.join("\n")+"\n}":e},_=function(e){return e.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},m=function(e,t){if(!e)return null;var o=document.createElement("style");o.textContent="\n"+e+"\n";var i,n=function(e){var t;if(e&&(e.shadowRoot?t=e.shadowRoot:e.getRootNode&&(t=e.getRootNode()),t&&t!==document&&t!==e))return t;return null}(t),r=!0;return n||(r=!1,n=document.head),r&&n.children&&n.children.length&&(i=n.children[0]),i?n.insertBefore(o,i):n.appendChild(o),o},g=function(){return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints<256||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints<256)},f=function(e,t){for(var o in t||(t=[]),e){var i=e[o];"object"==typeof i?f(i,t):t.push(i)}return t},v=function(e){if(!e||"string"!=typeof e)return"";if("#"===e.charAt(0))return e;var t=e.match(/\d+/g);if(!t||t.length<3)return e;for(var o="#",i=0;i<3;i++){var n=+t[i];n>=16||(o+="0"),o+=n?n.toString(16).toUpperCase():"0"}return o},y={},C=function(e,t){"attributes"==t.type&&"lang"==t.attributeName&&(e.lang=t.target.lang||"en")},b=function(e,t,o){"attributes"===o.type&&(null!=t?o.attributeName===t&&e(o.target.getAttribute(t)):e(o.target))};y._getNewId=function(){return"observer_"+ ++y._id},y._addObserver=function(e,t,o){var i=o;i||(i={}),i.attributes=!0,y._observer.observe(e,i),y._addListener(e,t)},y._onMutationCallback=function(e){for(var t=0;t<e.length;t++)for(var o=e[t],i=y._listeners[o.target._observeId],n=0;n<i.length;n++)i[n](o)},y._addListener=function(e,t){var o=y._listeners;if(o||(o=y._listeners={}),!e._observeId){var i=y._getNewId();e._observeId=i}o[e._observeId]||(o[e._observeId]=[]);var n=o[e._observeId];n.indexOf(t)<0&&n.push(t)},y.addLanguageListener=function(e){e&&(e.lang=document.documentElement.lang||"en",y._addObserver(document.documentElement,C.bind(null,e)))},y.addAttributeListener=function(e,t,o){e&&t&&y._addObserver(e,b.bind(null,t,o))},y._observer=new MutationObserver(y._onMutationCallback),y._listeners={},y._id=0;var E={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},T={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};T.themeColors=T._defaultColors,T._components={},T._themeName="",T._elfVersion=0,T._dummyIcon=null,T._iconLoaded=!1,T._profileName=null,T._callbacks=[],T._observed=!1,T._pendingResolve=!1,T._themeLoaded=!1,T._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},T._icons["halo-theme"]=T._icons["elf-theme-halo"],T._icons["solar-theme"]=T._icons["elf-theme-solar"],T.getElfVersion=function(){if(!T._elfVersion){var e=0;if(window.EFX_GRID){var t=window.EFX_GRID.version;e=+(t=t.split("."))[0]}else if(window.elf)if(window.elf.version){var o=window.elf.version.match(/\d/);o&&o[0]&&(e=parseInt(o[0],10))}else window.elf.customElements?e=3:window.customElements&&(e=4);else window.Polymer&&(e=1);T._elfVersion=e}return T._elfVersion},T.hasComponent=function(e){var t=T._components[e];if(null==t){t=0;var o=T.getElfVersion();if(e)1===o?document.createElement(e).is===e&&(t=o):o>1&&(window.customElements&&window.customElements.get(e)||document.createElement(e).constructor!==HTMLElement)&&(t=o),T._components[e]=t}return t},T.toLangString=function(e){if(!e)return"";if("zh-hant"===(e=e.toLowerCase()))return"zh-Hant";var t=e.replace(/-.*/,"");return E[t]?t:""},T.hasTheme=function(e){return e===T.getThemeName()},T.getThemeName=function(e){return T._themeName||(T._themeName=T.getCssVariable("--theme-name",document.documentElement)),T._themeName},T.setThemeName=function(e){T._themeName=e},T.isThemeLoaded=function(){return T._themeLoaded},T.getColors=function(){return T.themeColors},T.isHaloTheme=function(e){return null==e&&(e=T.getThemeName()),!!e&&e.indexOf("halo")>=0},T.injectIcons=function(e,t){if("object"==typeof e){var o=T.getThemeName();e.themeName=o;var i=T.getElfVersion();e.elfVersion=i;var n=T._icons[o];n&&(e.icons=n)}},T.getIconList=function(){var e=T._icons[T.getThemeName()];return e?f(e):[]},T._onIconPreloaded=function(){if(T._dummyIcon){var e=T._dummyIcon.parentNode;e&&e.removeChild(T._dummyIcon),T._dummyIcon=null}},T.prepareIconPreloading=function(){if(!T._iconLoaded){T._iconLoaded=!0;var e=T.getIconList();if(e.length){setTimeout(T._onIconPreloaded,10);var t=T._dummyIcon=document.createElement("coral-icon");return t.style.transform="scale(0)",document.body.appendChild(t),e}}return null},T.getCssVariable=function(e,t){var o="",i=t||document.body;return window&&"string"==typeof e&&1===i.nodeType&&e.match(/^--/)&&(o=(o=window.getComputedStyle(i).getPropertyValue(e)).replace(/[\"\']/g,"")),o},T.getCssVariables=function(e,t){var o=t||document.body;if(window&&1===o.nodeType){var i=window.getComputedStyle(o);for(var n in e){var r=e[n];r&&r.match(/^--/)&&(e[n]=i.getPropertyValue(r).replace(/\"/g,""))}}return e||null},T.setRTK=function(e){null!=e&&(T._rtk=e)},T.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},T._addThemeChangedCallback=function(e){var t=T._callbacks;t.indexOf(e)<0&&t.push(e)},T.reloadThemeColors=function(){return T._deferred&&T._deferred.isFulfilled()?(T._profileName="",T._themeLoaded=!1,T.themeReady=null,T.getThemeColors()):T.themeReady},T.getThemeColors=function(e){if("function"==typeof e&&T._addThemeChangedCallback(e),T.themeReady)return T.themeReady;var t=T._deferred=new r;T.themeReady=t.promise;var o=T.getMovementColorProfile();if(o)o!==T._profileName?setTimeout(T._profileNameRetrieved,100):T._deferred.resolve(T.themeColors);else{var i={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},n=window?window.JET:null;if(T._themeLoaded=!1,T._rtk&&T._rtk.Settings)T._rtk.Settings.getAsync(i).then(T._loadingProfileSuccess).catch(T._loadingProfileFailure);else if(n&&n.Settings)try{n.Settings.read(T._loadingProfileSuccess,i)}catch(e){T._loadingProfileFailure()}else setTimeout(T._profileNameRetrieved,100)}return t.promise};var w=function(e){if(e!==T._profileName){T._retrieveThemeColors(e),T._pendingResolve&&(T._pendingResolve=!1,T._deferred.resolve(T.themeColors));for(var t=T._callbacks,o=0;o<t.length;o++)t[o]()}};T._loadingProfileSuccess=function(e){e&&document.documentElement.setAttribute("movement-color-profile",e.toLowerCase()),T._observed?T._pendingResolve=!0:T._profileNameRetrieved(e)},T._loadingProfileFailure=function(){T._retrieveThemeColors(),T._observed||(T._observed=!0,y.addAttributeListener(document.documentElement,w,"movement-color-profile")),T._deferred.reject("Failed to get movement color profile from settings.")},T._profileNameRetrieved=function(){var e=T.getMovementColorProfile();T._retrieveThemeColors(e),T._observed||(T._observed=!0,y.addAttributeListener(document.documentElement,w,"movement-color-profile")),T._deferred.resolve(T.themeColors)},T._retrieveThemeColors=function(e){T._themeLoaded=!0,T._profileName=e;var t=T.themeColors=T.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});t.up||(t.up=T._defaultColors.up,t.down=T._defaultColors.down,t.level=T._defaultColors.level,t.tickUp=T._defaultColors.tickUp,t.tickDown=T._defaultColors.tickDown),t.positive=t.up,t.negative=t.down,t.neutral=t.level;var o=document.createElement("table");o.style.visibility="hidden",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.width="0";var i=o.insertRow(-1),n=i.insertCell(-1);document.body.appendChild(o);var r=window.getComputedStyle(i);t.tableBg=r.backgroundColor;var l=window.getComputedStyle(n);t.tableText=l.color,t.tableBorder=l.borderColor,t.tableText===t.tableBorder&&(n.className="tr-lg",l=window.getComputedStyle(n),t.tableBg=l.backgroundColor,t.tableText=l.color,t.tableBorder=l.borderColor,t.tableText===t.tableBorder&&(t.tableBg=T._defaultColors.baseGrid,t.tableText=T._defaultColors.baseText,t.tableBorder="")),t.tableBg=v(t.tableBg),t.tableText=v(t.tableText),t.tableBorder=v(t.tableBorder),document.body.removeChild(o),t.baseGrid=t.tableBg,t.baseText=t.tableText,t.trackColor=t.primary||T._defaultColors.trackColor};var x={from:function(e){if(e){var t=e;if("string"==typeof e||"number"==typeof e?t=new Date(e):Array.isArray(e)&&(t=new Date(Date.UTC(e[0]||0,e[1]||0,e[2]||0))),x.isValid(t))return t}return null},isValid:function(e){if(e&&e.getTime){var t=e.getTime();return t==t}return!1},prefixSingleDigit:function(e){return e<10&&e>=0?"0"+e:""+e},_ymdRe:/^\d{4}\-d{2}\-\d{2}/,toYMD:function(e){if("string"==typeof e&&x._ymdRe.test(e))return e;var t=x.from(e);return t?t.getFullYear()+"-"+x.prefixSingleDigit(t.getMonth()+1)+"-"+x.prefixSingleDigit(t.getDate()):""},setDate:function(e,t){e&&(e.isAttached?e.value=x.from(t):e.value=x.toYMD(t))},getDate:function(e){return e?x.from(e.value):null},compare:function(e,t){if(e!==t)if(e=x.from(e),t=x.from(t),e){if(!t)return 1;if(e<t)return-1;if(e>t)return 1}else if(t)return-1;return 0},equal:function(e,t){return!x.compare(e,t)},extractDate:function(e){return x.isValid(e)?[e.getFullYear(),e.getMonth(),e.getDate()]:null}},S={create:function(e){if(Array.isArray(e)){for(var t=e.length,o=new Array(t),i=0;i<t;++i){var n=e[i];null!=n?"object"!=typeof n&&(n={value:n}):n={value:""};var r=n.label;r||"string"==typeof r||(n.label=n.value+""),o[i]=n}return o}return null}},I=function(e){var t=this;t._onDoubleClick=t._onDoubleClick.bind(t),t._onPopupHide=t._onPopupHide.bind(t),t._onScroll=t._onScroll.bind(t),t._onTextKeyDown=t._onTextKeyDown.bind(t),t._onTextKeyUp=t._onTextKeyUp.bind(t),t._onTouchStart=t._onTouchStart.bind(t),t._onTouchEnd=t._onTouchEnd.bind(t),t._onTouchTimer=t._onTouchTimer.bind(t),t._createContentEditor=t._createContentEditor.bind(t),t._createTitleEditor=t._createTitleEditor.bind(t),t._onColumnAdded=t._onColumnAdded.bind(t),t._onValueChanged=t._onValueChanged.bind(t),t._onMultiSelectionValueChanged=t._onMultiSelectionValueChanged.bind(t),t._onMultiSelectionEditorChanged=t._onMultiSelectionEditorChanged.bind(t),t._onAutoSuggestItemSelected=t._onAutoSuggestItemSelected.bind(t),t._hosts=[],e&&this.config({inCellEditing:e})};i.inherits(I,l),I._uiElementTypesMap={input:"input",text:"input",number:"coral-number-field",select:"coral-select",dropdown:"coral-select",date:"emerald-datetime-picker",checkbox:"coral-checkbox",boolean:"coral-checkbox",combobox:"coral-combo-box"},I.prototype._editableTitle=!1,I.prototype._editableContent=!1,I.prototype._activePos=null,I.prototype._activeCell=null,I.prototype._activeRowId="",I.prototype._lastActiveGrid=null,I.prototype._prevContent=null,I.prototype._initialText="",I.prototype._headerInCellCache=null,I.prototype._activeInCellCache=null,I.prototype._usingBalloon=!1,I.prototype._balloonMode=!1,I.prototype._dataBinding=!0,I.prototype._dblClick=!0,I.prototype._autoCommitText=!1,I.prototype._touchTimerId=0,I.prototype._longPressTime=1e3,I.prototype._editing=!1,I.prototype._customElement=null,I.prototype._customElementPopup=null,I.prototype._tabToMove=!1,I.prototype._contentSource="textContent",I.prototype._inlineStyling=!1,I.prototype._disablingScroll=!1,I.prototype._uiBlocking=!1,I.prototype._autoSuggest=null,I.prototype._defaultTag="input",I.prototype._rowClosing=!1,I.prototype._closingOnScroll=!0,I.prototype._editorTimerId=0,I._scrolling=!1,I.prototype._elfVersion=0,I._primaryColor="",I._styles=function(e){if(e){var t="";if(Array.isArray(e))t=e.map(h).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else t="string"==typeof e?e:e+"";if(t)return t.replace(/{[\w\W]*?}/g,_)}return""}([":host .cell.editing input[type=text]",["border-style: solid;"],":host .cell.editing",["z-index: 2;"]]),I._onThemeLoaded=function(){var e=T.getColors();I._primaryColor=e.primary},I.prototype._createInputElement=function(e,t){var o=this,i=document.createElement(e);for(var n in t)i.setAttribute(n,t[n]);var r=I._uiElementTypesMap;return i.style.width="100%",i.style.height="100%",i.style.margin="0",i.style.borderColor=I._primaryColor||"#ee7600",i.style.maxHeight="unset",e===r.checkbox?(i.style.borderStyle="solid",i.style.borderWidth="1px",i.style.boxSizing="border-box",i.style.display="flex",i.style.justifyContent="center",i.addEventListener("keydown",(function(e){13===e.keyCode&&e.preventDefault()}))):e===r.select||e===r.combobox||e===r.date?e===r.combobox&&t&&t.multiple?(i.addEventListener("value-changed",o._onMultiSelectionValueChanged),i.addEventListener("opened-changed",o._onMultiSelectionEditorChanged)):i.addEventListener("value-changed",o._onValueChanged):"coral-input"===e?i.setAttribute("type","number"):e===r.input&&i.setAttribute("type","text"),this._autoSuggest&&(this._autoSuggest.addEventListener("item-select",o._onAutoSuggestItemSelected),this._autoSuggest.addEventListener("wheel",o._stopPropagation,!1)),i.addEventListener("keydown",o._onTextKeyDown,!1),i.addEventListener("keyup",o._onTextKeyUp,!1),i.addEventListener("mousedown",o._stopPropagation,!1),i.addEventListener("mouseup",o._stopPropagation,!1),i.addEventListener("click",o._stopPropagation,!1),i.addEventListener("copy",o._stopPropagation,!1),i.addEventListener("cut",o._stopPropagation,!1),i.addEventListener("paste",o._stopPropagation,!1),i},I.prototype._createEditor=function(){var e=document.createElement("div");return e.className="cell editing",e.style.position="absolute",e},I.prototype._createBalloonPopup=function(e){return new p(e,{positioning:"over"})},I.prototype._createInCellCache=function(e,t,o){var i=this._createEditor(),n=this._createInputElement(t,o),r=new p(i,{positioning:"over"});return i.appendChild(n),{grid:e,inputElement:n,editor:i,balloonPopup:r}},I.prototype._createTitleEditor=function(e){var t=this;return t._headerInCellCache||(t._headerInCellCache=t._createInCellCache(e,"input")),t._headerInCellCache},I.prototype._createContentEditor=function(e,t){var o=this,i=I._uiElementTypesMap,n=o._getColumnData(e,t),r=n.inCellEditing,l=i[r&&r.type]||o._defaultTag;if(!n.inCellCache){var s=r?r.attributes:null;n.inCellCache=o._createInCellCache(t,l,s)}var a=n.inCellCache;return l!==i.select&&l!==i.combobox||(a.inputElement.data=r&&r.entries),a},I.prototype.getName=function(){return"InCellEditingPlugin"},I.prototype._onColumnAdded=function(e){e.context&&null!=e.colIndex&&this._retrieveColumnOption(e.context,e.colIndex)},I.prototype.initialize=function(e,t){this._hosts.indexOf(e)>=0||(this._hosts.length||window.addEventListener("scroll",this._onScroll),e.listen("columnAdded",this._onColumnAdded),e.getVScrollbar().listen("scroll",this._onScroll),e.getHScrollbar().listen("scroll",this._onScroll),this._dblClick&&(e.listen("dblclick",this._onDoubleClick),g()&&(e.listen("touchstart",this._onTouchStart),e.listen("touchend",this._onTouchEnd),e.listen("touchcancel",this._onTouchEnd))),this._hosts.push(e),T.getElfVersion()<4&&(I._uiElementTypesMap.number="coral-input"),T.isHaloTheme()&&(e._inCellEditingStyles||(e._inCellEditingStyles=!0,m(I._styles,e.getElement()))),this.config(t),I._primaryColor||T.getThemeColors().then(I._onThemeLoaded).catch(I._onThemeLoaded))},I.prototype.beforeProcessOption=function(e,t){if("cellEditing"==e)return null},I.prototype._afterInit=function(){this._elfVersion=T.getElfVersion()},I.prototype.config=function(e){if(e){var t=this,o=e.columns;if(o)for(var i=o.length,n=0;n<i;++n)t._retrieveColumnOption(o[n],n);var r=e.inCellEditing;r&&(r.type&&(t._defaultTag=I._uiElementTypesMap[r.type]),r.balloonMode&&t.enableBalloonMode(r.balloonMode),r.editableTitle&&t.enableTitleEditing(r.editableTitle),r.editableContent&&(t._editableContent=!0),r.tabToMove&&(t._tabToMove=!0),r.autoCommitText&&t.enableAutoCommitText(r.autoCommitText),null!=r.dataBinding&&t.disableDataBinding(!r.dataBinding),null!=r.contentSource&&(t._contentSource=r.contentSource),r.popupElement&&t.setPopupElement(r.popupElement),null!=r.doubleClick&&t.disableDblClick(!r.doubleClick),r.inlineStyling&&(t._inlineStyling=!0),r.disablingScroll&&(t._disablingScroll=!0),r.uiBlocking&&(t._uiBlocking=!0),r.autoSuggest&&(t._autoSuggest=r.autoSuggest),0==r.closingOnScroll&&(t._closingOnScroll=!1),t.addListener(r,"preEditorOpening"),t.addListener(r,"editorOpened"),t.addListener(r,"beforeCommit"),t.addListener(r,"editorClosed"),t.addListener(r,"keyUp"),t.addListener(r,"beforeRowCommit"),t.addListener(r,"rowEditorClosed"))}},I.prototype.getConfigObject=function(e){var t=e||{},o=t.columns;o||(o=t.columns=[]);for(var i,n,r=this.getColumnCount(),l=0;l<r;++l){var s=o[l];s||(s=o[l]={}),(n=this._getColumnData(l))&&(null!=n.editableContent&&(s.editableContent=n.editableContent),null!=n.inCellEditing&&(s.inCellEditing={},null!=(i=n.inCellEditing.type)&&(s.inCellEditing.type=i),null!=(i=n.inCellEditing.entries)&&(s.inCellEditing.entries=i),null!=(i=n.inCellEditing.attributes)&&(s.inCellEditing.attributes=i)))}var a=t.inCellEditing;return a||(a=t.inCellEditing={}),a.balloonMode=this._balloonMode,a.editableTitle=this._editableTitle,a.editableContent=this._editableContent,a.tabToMove=this._tabToMove,a.autoCommitText=this._autoCommitText,a.dataBinding=this._dataBinding,a.contentSource=this._contentSource,a.doubleClick=this._dblClick,a.inlineStyling=this._inlineStyling,a.disablingScroll=this._disablingScroll,a.uiBlocking=this._uiBlocking,t},I.prototype._retrieveColumnOption=function(e,t){var o=e.inCellEditing,i=e.editableContent;if(null!=o||null!=i){var n=this._newColumnData(t);null!=o&&(n.inCellEditing=o,o.entries=S.create(o.entries)),null!=i&&(n.editableContent=i)}},I.prototype.unload=function(e){var t=this._hosts.indexOf(e);t<0||(this._hosts.splice(t,1),e.unlisten("columnAdded",this._onColumnAdded),e.getVScrollbar().unlisten("scroll",this._onScroll),e.getHScrollbar().unlisten("scroll",this._onScroll),e.unlisten("dblclick",this._onDoubleClick),e.unlisten("touchstart",this._onTouchStart),e.unlisten("touchend",this._onTouchEnd),e.unlisten("touchcancel",this._onTouchEnd),this._hosts.length||(this._touchTimerId=0,this._editorTimerId=0,window.removeEventListener("scroll",this._onScroll)),this._dispose())},I.prototype.openEditor=function(e,t,o,i){if(i||(i=this._hosts[0])){var n=i.getSectionSettings(o||"content"),r=this._activePos;if(r){var l=n?n.getType():"";if(r.colIndex===e&&r.rowIndex===t&&r.sectionName===l&&r.grid===i)return;this.closeCellEditor()}var s=n?n.getSection():null,a=s?s.getCell(e,t):null;a&&(i.scrollToColumn(e),i.scrollToRow(null,t),setTimeout(this._openEditor.bind(this,a,i),100))}},I.prototype.closeCellEditor=function(e){this._commitText(e||this._autoCommitText)},I.prototype.enableBalloonMode=function(e){this._balloonMode=!1!==e},I.prototype.enableTitleEditing=function(e){this._editableTitle=!1!==e},I.prototype.disableTitleEditing=function(e){this._editableTitle=!1===e},I.prototype.disableCellEditing=function(e,t){e&&e.enableClass("no-editing",!1!==t)},I.prototype.disableDataBinding=function(e){this._dataBinding=!1===e},I.prototype.disableDblClick=function(e){var t=!1===e;if(this._dblClick!==t){this._dblClick=t;for(var o=this._hosts.length;--o>=0;)this._listenForTriggering(this._hosts[o],t)}},I.prototype.isEditing=function(){return this._editing},I.prototype.getTextBox=function(e,t){if(this._activeRowId){if(t=t||this._hosts[0]){var o=this._getColumnData(e,t).inCellCache;if(o)return o.inputElement}}else if(this._activeInCellCache)return this._activeInCellCache.inputElement;return null},I.prototype.getInitialText=function(){return this._initialText},I.prototype._getSourceContent=function(e,t,o,i){if("field"==this._contentSource)return this._getData(e,t,o);var n,r;if(i)for(var l=i.childNodes.length,s=0;s<l;++s)if(3===i.childNodes[s].nodeType){n=i.childNodes[s];break}return n?r=n.textContent:i&&(r=i.textContent),r},I.prototype._getRowIndex=function(e){if(e&&this._lastActiveGrid){var t=this._lastActiveGrid.getDataSource();if(t)return t.getRowIndex(e)}return-1},I.prototype._getRowId=function(e){if(null!=e&&this._lastActiveGrid){var t=this._lastActiveGrid.getDataSource();if(t)return t.getRowId(e)}return""},I.prototype.getActiveGrid=function(){return this._activePos?this._activePos.grid:null},I.prototype.getActiveColIndex=function(){if(this._activePos){var e=this._activePos.colIndex;if(null!=e)return e}return-1},I.prototype.getActiveRowIndex=function(){if(this._activeRowId)return this._getRowIndex(this._activeRowId);if(this._activePos){var e=this._activePos.rowIndex;if(null!=e)return e}return-1},I.prototype.getInputElementPosition=function(){return this._activePos||null},I.prototype.enableAutoCommitText=function(e){this._autoCommitText=!1!==e},I.prototype.isColumnEditable=function(e){var t=this._getColumnOption(e,"editableContent");return null==t?this._editableContent:t},I.prototype._onDoubleClick=function(e,t){var o=this,i=t||o.getRelativeGrid(e);if(!o.isEditing()&&i){var n=i.getRelativePosition(e),r=n.sectionType;("content"!==r||o.isColumnEditable(n.colIndex))&&("title"!==r||o._editableTitle)&&"header"!==r&&(e.preventDefault&&c.preventDefault(e),o.openEditor(n.colIndex,n.rowIndex,n.section,i))}},I.prototype._openEditor=function(e,t,o){var i=this;if(t.getElement()&&!(this._hosts.indexOf(t)<0)&&(o||(o=t.getRelativePosition(e)),o.hit&&(i._dispatch("preEditorOpening",o),!o.cancel))){var n=o.colIndex,r=o.rowIndex,l=o.section,s=l.getCell(n,r),a=1,u=l.getStretchedCell(s,r);if(u?s=u:a=l.getCellRowSpan(n,r),s&&!s.hasClass("no-editing")){i.closeRowEditor(!1,t),l.addClass("edit-mode"),i._lastActiveGrid=t,i._activePos=o,o.cell=i._activeCell=s,o.content=i._prevContent=s.getContent(),o.field=i._getField(n);var d=o.dataSource;if(null!=d){var c=o.rowId=this._getRowId(o.rowIndex);o.groupHeader=d.isSegmentSeparator(c)||d.getGroupByRowId(c),o.rowData=this._getRow(d,c)}"title"===o.sectionType?i._activeInCellCache=i._createTitleEditor(t):i._activeInCellCache=i._createContentEditor(n,t);var p=o.inputElement=i._activeInCellCache.inputElement,h=o.editor=i._activeInCellCache.editor,_=i._activeInCellCache.balloonPopup,m=o?i._getSourceContent(o.dataSource,o.rowIndex,o.field,o.content):"";r+1>=l.getRowCount()?p.classList.add("bottom"):p.classList.remove("bottom"),i._usingBalloon=i._isBalloonMode(s),i._usingBalloon?h.classList.add("balloon"):h.classList.remove("balloon");var g=h.style;(this._elfVersion||i._inlineStyling)&&(g.backgroundColor=l.getComputedStyle().backgroundColor);var f=l.getRowHeight(r),v=s.getWidth();if(!t.isPinnedColumn(n)){var y=t.getHScrollbar();if(y.isActive()){var C=y.getPaneSize();v>C&&(v=C)}}!i._usingBalloon||v>208?g.width=v+"px":g.width="",g.height=a>1?s.getHeight()+"px":f+"px";var b=document.body;if(i._compositeGrid||i._realTimeGrid){var E=i.getActiveGrid();E&&(b=E.getElement().parentElement)}_.enableUIBlocking(i._uiBlocking),_.addEventListener("hidden",i._onPopupHide),_.disableAutoHiding(!1),_.disableHideOnScroll(!0),_.attachTo(s.getElement()),_.show(!0,b),this._updateEditorPopup(i._activeInCellCache,s,t),i._customElement&&(i._customElementPopup.attachTo(h),i._customElementPopup.show(!0,b),i._customElementPopup.disableAutoHiding(!1),o.popupElement=i._customElement),i._setText(m,p),o.initialText=i._initialText=m,i._disablingScroll&&i._freezeScrolling(t,!0),o.autoSuggest=i._autoSuggest,i._autoSuggest&&(i._autoSuggest.attach===p&&(i._autoSuggest.attach=null),i._autoSuggest.parentNode!==h&&h.appendChild(i._autoSuggest),i._autoSuggest.attach=p,i._autoSuggest.positionTarget=p),i._dispatch("editorOpened",o),p.focus(),"function"==typeof p.select&&p.select(),o.initialText=i._initialText=i.getText(),i._editing=!0}}},I.prototype.openRowEditor=function(e,t){var o=this;if(t=t||o._hosts[0],o._getRowIndex(o._activeRowId)!==e&&t){var i,n;o.closeRowEditor(!1,t),o._commitText(!1);var r=t.getSection("content"),l=t.getDataSource(),s=(r.getColumnCount()||0)-1,a=e+1>=r.getRowCount(),u=this._elfVersion||o._inlineStyling?r.getComputedStyle().backgroundColor:null,d=r.getRowHeight(e),c=document.body;(o._compositeGrid||o._realTimeGrid)&&(c=t.getElement().parentElement);for(var p=0;p<=s;p++)if(o.isColumnEditable(p)){var h=r.getCell(p,e);if(h&&!h.hasClass("no-editing")){var _=o._createContentEditor(p,t),m=h.getContent(),g=o._getField(p),f=o._getSourceContent(l,e,g,m),v=_.inputElement,y=_.editor,C=_.balloonPopup;i?C.enableUIBlocking(!1):(i=v,n=C,C.enableUIBlocking(o._uiBlocking)),o._setText(f,v),a?v.classList.add("bottom"):v.classList.remove("bottom");var b=y.style;u&&(b.backgroundColor=u),b.height=d+"px";var E=r.getCellWidth(p,e);b.width=E+"px",y.classList.remove("balloon"),C.disableAutoHiding(!0),C.disableHideOnScroll(!0),C.attachTo(h.getElement()),C.show(!0,c),this._updateEditorPopup(_,h,t)}}i&&(n.addEventListener("hidden",o._onPopupHide),o._lastActiveGrid=t,o._editing=!0,o._activeRowId=this._getRowId(e),i.focus(),r.addClass("edit-mode"),o._disablingScroll&&o._freezeScrolling(t,!0))}},I.prototype.closeRowEditor=function(e){var t=this,o=t._lastActiveGrid;if(t._activeRowId&&o){var i=t._activeRowId,n=t._getRowIndex(i);e=!(n<=-1)&&!1!==e;for(var r,l=o.getSection("content"),s=o.getColumnCount(),a={},u=[],d=0;d<s;d++){var c=t._getColumnData(d,o);if((r=c&&c.inCellCache)&&(r.columnIndex=d,u.push(r),e)){var p=t._getField(d);r.field=p,a[p]=this._getValue(r.inputElement)}}var h,_,m=u.length;if(e&&(t.hasListener("beforeRowCommit")&&(_={grid:o,rowIndex:n,fieldValue:a,cancel:!1,rowId:t._activeRowId},t._dispatch("beforeRowCommit",_),e=!_.cancel),e)){var g=o.getDataSource();for(h=0;h<m;h++){var f=a[(r=u[h]).field];g&&t._setData(g,n,r.field,f);var v=l.getCell(r.columnIndex,n),y=v.getContent();y&&y.classList.contains("text")&&v.setContent(f)}}for(t.hasListener("rowEditorClosed")&&(_={grid:o,rowIndex:n,fieldValue:a,committed:e},t._dispatch("rowEditorClosed",_)),h=0;h<m;h++){var C=u[h].balloonPopup;C.removeEventListener("hidden",t._onPopupHide),C.hide()}t._freezeScrolling(o,!1),l.removeClass("edit-mode"),t._editing=!1,t._activeRowId="",t._lastActiveGrid=null,o.focus()}},I.prototype.toggleRowEditor=function(e,t,o){this._getRowIndex(this._activeRowId)===e?this.closeRowEditor(t,o):this._activeRowId?(this.closeRowEditor(t,o),this.openRowEditor(e,o)):this.openRowEditor(e,o)},I.prototype._onScroll=function(e){if(this._scrolling=!0,!this._closingOnScroll&&this._editing)if(this._activeInCellCache)this._activeInCellCache.balloonPopup.hide();else if(this._activeRowId)for(var t=this.getActiveGrid()||this._lastActiveGrid,o=(t.getSection("content").getColumnCount()||0)-1,i=0;i<=o;i++){var n=this._getColumnData(i,t).inCellCache;if(n){var r=n.balloonPopup;r&&r.hide()}}this._onPopupHide(),this._scrolling=!1},I.prototype._onPopupHide=function(e){this._closingOnScroll||!this._scrolling?(this._commitText(this._autoCommitText),this.closeRowEditor(!1)):this.requestShowEditorPopup()},I.prototype._onAutoSuggestItemSelected=function(e){var t=e.detail;if(t){var o=t.target;if(o){var i=t.method;"click"!==i&&"enter"!==i||(this.setText(o.value),this._commitText(!0,t.suggestion))}}},I.prototype._onValueChanged=function(e){this._activeRowId||this._commitText(!0)},I.prototype._onMultiSelectionValueChanged=function(e){e.currentTarget.dirty=!0},I.prototype._onMultiSelectionEditorChanged=function(e){if(e.detail&&!1===e.detail.value&&this._activePos){var t=this._activePos.inputElement;t.dirty&&(this._onValueChanged(e),t.dirty=!1)}},I.prototype._onTextKeyDown=function(e){e.stopPropagation(),this._activeRowId||(27===e.keyCode&&this._commitText(this._autoCommitText),9===e.keyCode&&(this._autoSuggest&&this._autoSuggest.suggestions.length>0&&this._activeInCellCache.inputElement.focus(),e.preventDefault()))},I.prototype._onTextKeyUp=function(e){if(e.stopPropagation(),!this._activeRowId){this.hasListener("keyUp")&&(this._activePos.text=this._activePos.enteredText=this._activeInCellCache.inputElement.value,this._dispatch("keyUp",this._activePos));var t=9===e.keyCode;if(t||13===e.keyCode){var o=this.getText(),i=this._activePos;if(this._initialText!==o){if(e.preventDefault(),this._autoSuggest&&this._autoSuggest.suggestions.length>0)return this._activeInCellCache.inputElement.focus(),void(this._autoSuggest.suggestions=[]);this._commitText(!0)}else this._commitText(!1);if(t&&this._tabToMove&&!e.altKey&&!e.ctrlKey){var n=i?i.grid:null;if(n&&n.getCellInfo)for(var r=n.getDataSource();i;)if((i=e.shiftKey?n.getPrevCell(i):n.getNextCell(i))&&i.cell){if(r.getRowDataAt(i.rowIndex)&&this.isColumnEditable(i.colIndex)){this.openEditor(i.colIndex,i.rowIndex,i.sectionName,i.grid);break}}else i=null}}}},I.prototype._commitText=function(e,t){var o=this,i=o._activePos;if(o.isEditing()&&i){i.section.removeClass("edit-mode"),o._editing=!1;var n=i.text=this.getValue(),r=i.groupHeader||!1;if(e&&(t&&(i.suggestionDetail=t),o.hasListener("beforeCommit")&&(o._dispatch("beforeCommit",i),e=!i.cancel,n=i.text),e&&o._dataBinding&&!r)){var l=i.sectionSettings,s=l.getType();if("content"===s){if(this._realTimeGrid&&"X_RIC_NAME"===i.field){var a=null;if(t){var u=t.value;if(u.p){var d=u.p.PermId;d&&(a={permId:d})}}this._realTimeGrid.setRic(i.rowId,n,a)}else{var p=l.getDataSource();p&&(this._realTimeGrid?o._setStaticData(p,i.rowIndex,i.field,n):o._setData(p,i.rowIndex,i.field,n))}o._prevContent&&!o._prevContent.classList.contains("text")||o._activeCell.setContent(n)}else if("title"===s){var h=this.getGridApi();h&&h.setColumnName(i.colIndex,n)}else o._activeCell.setContent(n)}o.hasListener("editorClosed")&&(i.canceled=i.cancelled=!e,i.committed=e,o._dispatch("editorClosed",i)),o._activeInCellCache&&o._activeInCellCache.balloonPopup&&(o._activeInCellCache.balloonPopup.removeEventListener("hidden",o._onPopupHide),o._activeInCellCache.balloonPopup.hide()),c.removeParent(o._customElement),o._freezeScrolling(i.grid,!1),i.grid.focus(),o._activePos=o._activeCell=o._prevContent=o._lastActiveGrid=o._activeInCellCache=null}},I.prototype._stopPropagation=function(e){e.stopPropagation()},I.prototype._isBalloonMode=function(e){var t=e.getElement(),o=t?window.getComputedStyle(t):{};return this._balloonMode||"none"===o.display||"hidden"===o.visibility},I.prototype._listenForTriggering=function(e,t){t?(e.listen("dblclick",this._onDoubleClick),g()&&(e.listen("touchstart",this._onTouchStart),e.listen("touchend",this._onTouchEnd),e.listen("touchcancel",this._onTouchEnd))):(e.unlisten("dblclick",this._onDoubleClick),e.unlisten("touchstart",this._onTouchStart),e.unlisten("touchend",this._onTouchEnd),e.unlisten("touchcancel",this._onTouchEnd))},I.prototype._onTouchStart=function(e){this._resetTouchTimer(),this._touchTimerId=setTimeout(this._onTouchTimer,this._longPressTime)},I.prototype._onTouchTimer=function(e){this._touchTimerId=0},I.prototype._onTouchEnd=function(e){this._resetTouchTimer()||this._onDoubleClick(e)},I.prototype._resetTouchTimer=function(){return!!this._touchTimerId&&(clearTimeout(this._touchTimerId),this._touchTimerId=0,!0)},I.prototype.setPopupElement=function(e){var t=this._activeInCellCache&&this._activeInCellCache.balloonPopup;this._customElement&&(t&&t.removeFocusElement(this._customElement),this._customElementPopup.dispose(),this._customElementPopup=null),this._customElement=e,this._customElement&&(this._customElementPopup=new p(this._customElement),t&&t.addFocusElement(this._customElement))},I.prototype.setText=function(e){this._activeInCellCache&&this._setText(e,this._activeInCellCache.inputElement)},I.prototype._setText=function(e,t){t._origValue=e;var o=t.tagName.toLowerCase(),i=I._uiElementTypesMap;if(o===i.checkbox)!!e&&!("f"===e||"false"===e)?t.setAttribute("checked","true"):t.removeAttribute("checked");else if(o===i.combobox){t.getAttribute("multiple")?t.values=e.split(/, */):this._elfVersion<=3?(t.value="",t.value={value:e,label:e}):t.value=e}else if(o===i.date)x.setDate(t,e);else{var n="";null!=e&&(n="string"==typeof e?e:e+""),t.value=n}},I.prototype.getText=function(){return this._activeInCellCache?this._getText(this._activeInCellCache.inputElement):""},I.prototype._getText=function(e){var t=e.tagName.toLowerCase(),o=I._uiElementTypesMap;if(t===o.checkbox)return e.checked+"";if(t===o.combobox){if(this._elfVersion<=3)return e.value?e.value.value:""}else if(t===o.date)return e.value+"";return e.value},I.prototype.getValue=function(){return this._activeInCellCache?this._getValue(this._activeInCellCache.inputElement):null},I.prototype._getValue=function(e){var t=e.tagName.toLowerCase(),o=I._uiElementTypesMap;return t===o.checkbox?!!e.checked:t===o.date?x.getDate(e):t===o.number||"number"==typeof e._origValue?+e.value:t===o.combobox&&e.getAttribute("multiple")?e.values.join(", "):this._getText(e)},I.prototype.clearText=function(){this.setText("")},I.prototype.appendText=function(e){e&&this._activeInCellCache&&(this._activeInCellCache.inputElement.value+=e)},I.prototype.commitText=function(e){e&&this.setText(e),this._commitText(!0)},I.prototype.getBalloonPopup=function(){return this._activeInCellCache?this._activeInCellCache.balloonPopup:null},I.prototype.getAutoSuggest=function(){return this._autoSuggest},I.prototype.setDisablingScroll=function(e){var t=e;return this._disablingScroll=e,t},I.prototype._freezeScrolling=function(e,t){if(e){var o=e.getVScrollbar(),i=e.getHScrollbar();o&&o.freezeScrolling(t),i&&i.freezeScrolling(t)}},I.prototype.requestShowEditorPopup=function(){this._editorTimerId||(this._editorTimerId=setTimeout(this._onUpdateEditorPopup.bind(this),100))},I.prototype._onUpdateEditorPopup=function(){this._editorTimerId=0;var e=this.getActiveGrid()||this._lastActiveGrid;if(e){var t,o,i=document.body;if((this._compositeGrid||this._realTimeGrid)&&(i=e.getElement().parentElement),this._activeInCellCache){var n=this._activePos;if(n){t=n.rowIndex,o=n.colIndex;var r=e.getSection(n.sectionType),l=r.getCell(o,t),s=r.getStretchedCell(l,t);if(s&&(l=s),l){var a=this._activeInCellCache.balloonPopup;a.attachTo(l.getElement()),a.show(!0,i),this._updateEditorPopup(this._activeInCellCache,l,e)}}}else if(this._activeRowId){var u=e.getSection("content");if(t=this._getRowIndex(this._activeRowId),u.isRowVisible(t))for(var d=(u.getColumnCount()||0)-1,c=0;c<=d;c++){var p=this._getColumnData(c,e).inCellCache,h=u.getCell(c,t);if(p&&h){var _=p.balloonPopup;_.attachTo(h.getElement()),_.show(!0,i),this._updateEditorPopup(p,h,e)}}}}},I.prototype._updateEditorPopup=function(e,t,o){var i=e.balloonPopup,n=e.editor,r=e.inputElement,l=i.getElement(),s=o.getRelativePosition(t),a=t.getWidth(),u=t.getHeight(),d=o.getColumnRect(0,o.getColumnCount()),c=o.getRowRect(0,o.getRowCount()),p=d.scrollViewSize,h=c.scrollViewSize,_=0,m="content"==s.sectionType?c.scrollViewTop:0,g=u,f=a,v="inline-block",y=0,C=0;if(-1!=d.leftPinnedIndex){var b=0;o.getVScrollbar().isActive()&&(b-=8),p+=b+=d.width-d.scrollViewSize,_+=b}if(n.classList.contains("balloon")&&!this._activeRowId&&(l.style.display="",n.style.width="",n.style.marginLeft="",n.style.marginTop="",y=-4,C=-4,f=i.getElement().offsetWidth),s.hit){var E=s.x+f,T=s.y-m+g;o.isPinnedColumn(s.colIndex)||s.x<_&&(f-=_-s.x,y+=Math.abs(s.x-_)),E>p&&(f-=E-p),s.y<m&&(g=g+s.y-m,C+=Math.abs(s.y-m)),T>h&&(g-=T-h),(f<48&&f!=a||g<16&&g!=u)&&(v="none")}else v="none";l.style.display=v,n.style.width=f?f+"px":"",n.style.height=g?g+"px":"",n.style.marginLeft=y?y+"px":0,n.style.marginTop=C?C+"px":0,r.focus()};!function(e,t){if(e&&t&&t.prototype.getName){var o=t.prototype.getName().replace(/Plugin$/,"");if(o){var i=e.tr;i||(i=e.tr={});var n=i.grid;n||(n=i.grid={}),n[o+"Plugin"]=t,i[o+"Extension"]=t}}}(window,I)}]);