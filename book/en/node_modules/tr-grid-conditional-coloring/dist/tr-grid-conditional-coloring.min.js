!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);let o={inherits:function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){n||(n="constructor");let i=arguments.length,l=new Array(i);for(let e=2;e<i;e++)l[e-2]=arguments[e];return t.prototype[n].apply(e,l)}}};let i=function(){};i.prototype._events=null,i.prototype._listenerCount=0,i.prototype.addEventListener=function(e,t){if(!e||!t)return;this._events||(this._events={});let n=this._events[e];n?n.indexOf(t)<0&&(n.push(t),++this._listenerCount):(this._events[e]=[t],++this._listenerCount)},i.prototype.removeEventListener=function(e,t){let n=this._events?this._events[e]:null;if(n){let e=n.indexOf(t);e>=0&&(n.splice(e,1),--this._listenerCount)}},i.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},i.prototype.hasListener=function(e){if(this._listenerCount){if(e){let t=this._events?this._events[e]:null;return!!t&&t.length>0}return!0}return!1},i.prototype.getListener=function(e,t){if(e){let n=this._events?this._events[e]:null;if(n)return t||(t=0),n[t]||null}return null},i.prototype.addListener=function(e,t){let n=e?e[t]:null;"function"==typeof n&&this.addEventListener(t,n)},i.prototype._prepareEventArguments=function(e,t){return t},i.prototype._dispatch=function(e,t){let n=this._events?this._events[e]:null;if(n){t=this._prepareEventArguments(e,t);let o=n.length;for(let e=0;e<o;++e)n[e](t)}};i.preventDefault=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())};let l=function(e,t,n){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof e&&(this._resolveHandler=e),"function"==typeof t&&(this._rejectHandler=t),null!=n&&(this._ctx=n),this.promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this))};l.prototype.promise=null,l.prototype._resolve=null,l.prototype._reject=null,l.prototype._resolveHandler=null,l.prototype._rejectHandler=null,l.prototype._ctx=null,l.prototype._fulfilled=!1,l.prototype.resolve=function(e){if(this._resolve){if(this._resolveHandler){let t=this._resolveHandler(e,this._ctx||this);null!=t&&(e=t)}this._resolve(e),this._finally()}},l.prototype.reject=function(e){if(this._reject){if(this._rejectHandler){let t=this._rejectHandler(e,this._ctx||this);null!=t&&(e=t)}this._reject(e),this._finally()}},l.prototype.isFulfilled=function(){return this._fulfilled},l.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};let r=function(e,t,n){if(!e)return null;if(!t||e===t)return e;let o;if(n){let i=n.length;for(let l=0;l<i;++l)o=n[l],o&&s(e,t,o)}else for(o in t)s(e,t,o);return e},s=function(e,t,n){let o=t[n];if(null!=o){let t=e[n];Array.isArray(t)?e[n]=t.concat(o):Array.isArray(o)&&t?e[n]=o.concat(t):e[n]=o}},u=function(e){return Array.isArray(e)?"{\n"+e.join("\n")+"\n}":e},a=function(e){return e.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},d=function(e,t){if(!e)return null;let n=document.createElement("style");n.textContent="\n"+e+"\n";let o,i=function(e){if(e){let t;if(e.shadowRoot?t=e.shadowRoot:e.getRootNode&&(t=e.getRootNode()),t&&t!==document&&t!==e)return t}return null}(t),l=!0;return i||(l=!1,i=document.head),l&&i.children&&i.children.length&&(o=i.children[0]),o?i.insertBefore(n,o):i.appendChild(n),n},c=function(e,t){t||(t=[]);for(let n in e){let o=e[n];"object"==typeof o?c(o,t):t.push(o)}return t},p=function(e){if(!e||"string"!=typeof e)return"";if("#"===e.charAt(0))return e;let t=e.match(/\d+/g);if(!t||t.length<3)return e;let n="#";for(let e=0;e<3;e++){let o=+t[e];o>=16||(n+="0"),n+=o?o.toString(16).toUpperCase():"0"}return n};let f={},h=function(e,t){"attributes"==t.type&&"lang"==t.attributeName&&(e.lang=t.target.lang||"en")},_=function(e,t,n){"attributes"===n.type&&(null!=t?n.attributeName===t&&e(n.target.getAttribute(t)):e(n.target))};f._getNewId=function(){return"observer_"+ ++f._id},f._addObserver=function(e,t,n){let o=n;o||(o={}),o.attributes=!0,f._observer.observe(e,o),f._addListener(e,t)},f._onMutationCallback=function(e){for(let t=0;t<e.length;t++){let n=e[t],o=f._listeners[n.target._observeId];for(let e=0;e<o.length;e++)o[e](n)}},f._addListener=function(e,t){let n=f._listeners;if(n||(n=f._listeners={}),!e._observeId){let t=f._getNewId();e._observeId=t}n[e._observeId]||(n[e._observeId]=[]);let o=n[e._observeId];o.indexOf(t)<0&&o.push(t)},f.addLanguageListener=function(e){e&&(e.lang=document.documentElement.lang||"en",f._addObserver(document.documentElement,h.bind(null,e)))},f.addAttributeListener=function(e,t,n){e&&t&&f._addObserver(e,_.bind(null,t,n))},f._observer=new MutationObserver(f._onMutationCallback),f._listeners={},f._id=0;let g={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},m={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};m.themeColors=m._defaultColors,m._components={},m._themeName="",m._elfVersion=0,m._dummyIcon=null,m._iconLoaded=!1,m._profileName=null,m._callbacks=[],m._observed=!1,m._pendingResolve=!1,m._themeLoaded=!1,m._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},m._icons["halo-theme"]=m._icons["elf-theme-halo"],m._icons["solar-theme"]=m._icons["elf-theme-solar"],m.getElfVersion=function(){if(!m._elfVersion){let e=0;if(window.EFX_GRID){let t=window.EFX_GRID.version;t=t.split("."),e=+t[0]}else if(window.elf)if(window.elf.version){let t=window.elf.version.match(/\d/);t&&t[0]&&(e=parseInt(t[0],10))}else window.elf.customElements?e=3:window.customElements&&(e=4);else window.Polymer&&(e=1);m._elfVersion=e}return m._elfVersion},m.hasComponent=function(e){let t=m._components[e];if(null==t){t=0;let n=m.getElfVersion();if(e){let o;1===n?(o=document.createElement(e),o.is===e&&(t=n)):n>1&&(window.customElements&&window.customElements.get(e)||document.createElement(e).constructor!==HTMLElement)&&(t=n),m._components[e]=t}}return t},m.toLangString=function(e){if(!e)return"";if("zh-hant"===(e=e.toLowerCase()))return"zh-Hant";let t=e.replace(/-.*/,"");return g[t]?t:""},m.hasTheme=function(e){return e===m.getThemeName()},m.getThemeName=function(e){return m._themeName||(m._themeName=m.getCssVariable("--theme-name",document.documentElement)),m._themeName},m.setThemeName=function(e){m._themeName=e},m.isThemeLoaded=function(){return m._themeLoaded},m.getColors=function(){return m.themeColors},m.isHaloTheme=function(e){return null==e&&(e=m.getThemeName()),!!e&&e.indexOf("halo")>=0},m.injectIcons=function(e,t){if("object"!=typeof e)return;let n=m.getThemeName();e.themeName=n;let o=m.getElfVersion();e.elfVersion=o;let i=m._icons[n];i&&(e.icons=i)},m.getIconList=function(){let e=m._icons[m.getThemeName()];return e?c(e):[]},m._onIconPreloaded=function(){if(m._dummyIcon){let e=m._dummyIcon.parentNode;e&&e.removeChild(m._dummyIcon),m._dummyIcon=null}},m.prepareIconPreloading=function(){if(!m._iconLoaded){m._iconLoaded=!0;let e=m.getIconList();if(e.length){setTimeout(m._onIconPreloaded,10);let t=m._dummyIcon=document.createElement("coral-icon");return t.style.transform="scale(0)",document.body.appendChild(t),e}}return null},m.getCssVariable=function(e,t){let n="",o=t||document.body;return window&&"string"==typeof e&&1===o.nodeType&&e.match(/^--/)&&(n=window.getComputedStyle(o).getPropertyValue(e),n=n.replace(/[\"\']/g,"")),n},m.getCssVariables=function(e,t){let n=t||document.body;if(window&&1===n.nodeType){let t=window.getComputedStyle(n);for(let n in e){let o=e[n];o&&o.match(/^--/)&&(e[n]=t.getPropertyValue(o).replace(/\"/g,""))}}return e||null},m.setRTK=function(e){null!=e&&(m._rtk=e)},m.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},m._addThemeChangedCallback=function(e){let t=m._callbacks;t.indexOf(e)<0&&t.push(e)},m.reloadThemeColors=function(){return m._deferred&&m._deferred.isFulfilled()?(m._profileName="",m._themeLoaded=!1,m.themeReady=null,m.getThemeColors()):m.themeReady},m.getThemeColors=function(e){if("function"==typeof e&&m._addThemeChangedCallback(e),m.themeReady)return m.themeReady;let t=m._deferred=new l;m.themeReady=t.promise;let n=m.getMovementColorProfile();if(n)n!==m._profileName?setTimeout(m._profileNameRetrieved,100):m._deferred.resolve(m.themeColors);else{let e={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},t=window?window.JET:null;if(m._themeLoaded=!1,m._rtk&&m._rtk.Settings)m._rtk.Settings.getAsync(e).then(m._loadingProfileSuccess).catch(m._loadingProfileFailure);else if(t&&t.Settings)try{t.Settings.read(m._loadingProfileSuccess,e)}catch(e){m._loadingProfileFailure()}else setTimeout(m._profileNameRetrieved,100)}return t.promise};let C=function(e){if(e!==m._profileName){m._retrieveThemeColors(e),m._pendingResolve&&(m._pendingResolve=!1,m._deferred.resolve(m.themeColors));let t=m._callbacks;for(let e=0;e<t.length;e++)t[e]()}};m._loadingProfileSuccess=function(e){e&&document.documentElement.setAttribute("movement-color-profile",e.toLowerCase()),m._observed?m._pendingResolve=!0:m._profileNameRetrieved(e)},m._loadingProfileFailure=function(){m._retrieveThemeColors(),m._observed||(m._observed=!0,f.addAttributeListener(document.documentElement,C,"movement-color-profile")),m._deferred.reject("Failed to get movement color profile from settings.")},m._profileNameRetrieved=function(){let e=m.getMovementColorProfile();m._retrieveThemeColors(e),m._observed||(m._observed=!0,f.addAttributeListener(document.documentElement,C,"movement-color-profile")),m._deferred.resolve(m.themeColors)},m._retrieveThemeColors=function(e){m._themeLoaded=!0,m._profileName=e;let t=m.themeColors=m.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});t.up||(t.up=m._defaultColors.up,t.down=m._defaultColors.down,t.level=m._defaultColors.level,t.tickUp=m._defaultColors.tickUp,t.tickDown=m._defaultColors.tickDown),t.positive=t.up,t.negative=t.down,t.neutral=t.level;let n=document.createElement("table");n.style.visibility="hidden",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0";let o=n.insertRow(-1),i=o.insertCell(-1);document.body.appendChild(n);let l=window.getComputedStyle(o);t.tableBg=l.backgroundColor;let r=window.getComputedStyle(i);t.tableText=r.color,t.tableBorder=r.borderColor,t.tableText===t.tableBorder&&(i.className="tr-lg",r=window.getComputedStyle(i),t.tableBg=r.backgroundColor,t.tableText=r.color,t.tableBorder=r.borderColor,t.tableText===t.tableBorder&&(t.tableBg=m._defaultColors.baseGrid,t.tableText=m._defaultColors.baseText,t.tableBorder="")),t.tableBg=p(t.tableBg),t.tableText=p(t.tableText),t.tableBorder=p(t.tableBorder),document.body.removeChild(n),t.baseGrid=t.tableBg,t.baseText=t.tableText,t.trackColor=t.primary||m._defaultColors.trackColor};let y=function(){};o.inherits(y,i),y.prototype._hosts=null,y.prototype._compositeGrid=null,y.prototype._realTimeGrid=null,y.prototype._rowGetter=null,y.prototype._initializedGrid=!1,y.prototype.listen=y.prototype.addEventListener,y.prototype.unlisten=y.prototype.removeEventListener,y.prototype.afterInit=function(e,t,n){let o=null;n&&n.getCoreGrid&&(o=n.getCoreGrid()),o&&(this.getGridApi()||this.setGridWrapper("compositegrid",n),this._compositeGrid&&o.loadPlugin(this,t)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?w:k,this._afterInit())},y.prototype._afterInit=function(){},y.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},y.prototype.hasMultiTableSupport=function(){return!1},y.prototype._prepareEventArguments=function(e,t){return t||(t={}),t.api=this.getGridApi(),t},y.prototype.getName=function(){return"GridPlugin"},y.prototype.initialize=function(e,t){},y.prototype.unload=function(e){this._dispose()},y.prototype.getRelativeGrid=function(e){let t=null;if(e.target){t=e.target;let n=t.api;if(n&&n.getCoreGrid)return n.getCoreGrid()}else e.getElement?t=e.getElement():1===e.nodeType&&(t=e);if(t)for(let e=this._hosts.length;--e>=0;){let n=this._hosts[e];if(n.getElement().contains(t))return n}return null},y.prototype.setGridWrapper=function(e,t){e&&("compositegrid"===(e=e.toLowerCase())?this._compositeGrid=t:"realtimegrid"===e&&(this._realTimeGrid=t))},y.prototype.getGridApi=function(e){if(null==e)return this._compositeGrid||this._realTimeGrid;{let t="number"==typeof e?this._hosts[e]:e;return t&&t._wrapper||null}},y.prototype.getColumnName=function(e){if(this._compositeGrid){let t=this._compositeGrid.getColumnModel(e);if(t)return t.title?t.title:t.field}else{let t=this.getColumnIndex(e),n=this._realTimeGrid.getColumnDefinition(t);if(n)return n.getName()}return""},y.prototype.getColumnIndex=function(e){if("number"==typeof e)return e;if(this._compositeGrid){let t=this._compositeGrid.getColumnFields().indexOf(e);return t>-1?t:this._compositeGrid.getColumnIndex(e)}return this._realTimeGrid.getColumnIndex(e)},y.prototype.getColumnIndices=function(e){let t=this.getGridApi();if(t.getColumnIndices)return t.getColumnIndices(e);if(this._compositeGrid){let t,n=this._compositeGrid.getColumnFields(),o=this._compositeGrid.getColumnCount(),i=[];for(let l=0;l<e.length;l++)if(t=e[l],"number"==typeof t)t>=0&&t<o&&i.push(t);else{let e=n.indexOf(t);-1!==e&&i.push(e)}return i}return this._realTimeGrid.getColumnIndices(e)},y.prototype.getColumnId=function(e){if("string"==typeof e)return e;let t=this.getColumnCount();if(e<0||e>=t)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(e);{let t=this._realTimeGrid.getColumnDefinition(e);if(t)return t.getId()}return""},y.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},y.prototype.getColumnField=function(e){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(e):""},y.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},y.prototype.getColumnCount=function(){if(this._hosts){let e=this._hosts[0];return e?e.getColumnCount():0}return 0},y.prototype._moveColumnById=function(e,t){let n=this._hosts,o=n?n.length:0;if(o){let i=0;for(let l=0;l<o;++l)i|=n[l].moveColumnById(e,t);return!!i}return!1},y.prototype._reorderColumns=function(e,t){let n=this._hosts,o=n?n.length:0;if(o){let i=0;for(let l=0;l<o;++l)i|=n[l].reorderColumns(e,t);return!!i}return!1},y.prototype._loadPlugin=function(e,t,n){return e||(e=t.getPlugin(n))||(e=t.loadPlugin(n))&&this._initializedGrid&&(e._initializedGrid=!0),e},y.prototype._requestPlugin=function(e,t,n){return this._initializedGrid?y.requestPlugin(e,t,n,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},y.requestPlugin=function(e,t,n,o,i){let r=null;if(e){let t=null;1===e.nodeType?t=e.api:e.getCoreGrid?t=e:e.getPlugin&&(r=e),t&&(r=t.getCoreGrid(),o||i||(t.getModel?o=t:i=t))}if(!r)return Promise.reject("Cannot find grid element");let s=r.getPlugin(t);if(s)return Promise.resolve(s);{let e=new l;return setTimeout(y._onPluginRequested.bind(null,{grid:r,pluginRef:t,compositeGrid:o,realTimeGrid:i,config:n,deferred:e}),10),e.promise}},y._onPluginRequested=function(e){let t=e.grid;if(!t.getElement())return e.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+e.pluginRef);let n=t.getPlugin(e.pluginRef);if(n)return e.deferred.resolve(n);let o=!1;return e.pluginRef.beforeInit&&(o=!0,e.pluginRef.beforeInit(t.getElement(),e.config,!0)),n=t.loadPlugin(e.pluginRef,e.config),n?(!o&&n.beforeInit&&n.beforeInit(t.getElement(),e.config),n.setGridWrapper&&(e.compositeGrid?n.setGridWrapper("compositegrid",e.compositeGrid):e.realTimeGrid&&n.setGridWrapper("realtimegrid",e.realTimeGrid)),n.afterInit&&n.afterInit(),e.deferred.resolve(n)):e.deferred.reject("Unable to load required dependency: "+e.pluginRef)},y.prototype._getPlugin=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getPlugin(e):null},y.prototype._getColumnData=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getColumnData(e):null},y.prototype._getColumnOption=function(e,t,n){let o=this._getColumnData(e,n);return o?o[t]:null},y.prototype._newColumnData=function(e,t){if(null==t&&(t=this._hosts[0]),!t)return{};let n=t.getColumnData(e);return n||(n=t.setColumnData(e,{})),n},y.prototype._getField=function(e){let t=this._compositeGrid||this._realTimeGrid;return t?t.getColumnField(e):""},y.prototype._getRowData=function(e){return this._realTimeGrid&&e?e.ROW_DEF.getRowData():e},y.prototype._getRow=function(e,t){return D(e.getRowDataAt(t))},y.prototype._getData=function(e,t,n){let o=this._getRow(e,t);return o?o[n]:void 0},y.prototype._setData=function(e,t,n,o){if(this._realTimeGrid){let i=v(e,t);i&&i.setData(n,o)}else"number"==typeof t?e.setDataAt(t,n,o):e.setData(t,n,o)},y.prototype._setRowData=function(e,t,n){if(this._realTimeGrid){let o=v(e,t);o&&o.setRowData(n)}else"number"==typeof t?e.setRowDataAt(t,n):e.setRowData(t,n)},y.prototype._setStaticData=function(e,t,n,o){if(this._realTimeGrid){let i=v(e,t);i&&i.setStaticData(n,o)}else this._setData(e,t,n,o)},y.prototype._setColumnData=function(e,t,n,o){if(!t)return;let i=Array.isArray(o)?o:e.getAllRowIds(!0),l=i?i.length:0;if(!l)return;if(1===l)return void this._setData(e,i[0],t,Array.isArray(n)?n[0]:n);let r=Array.isArray(n)?n:i.map((function(){return n}));if(this._realTimeGrid){for(let n=0;n<l;++n){let o=e.getRowData(i[n]);if(o){let e=o.ROW_DEF;e&&(e.getRowData()[t]=r[n])}}e.dispatchGlobalChange||(e=e.getDataSource()),e&&e.dispatchGlobalChange&&e.dispatchGlobalChange()}else e.setColumnData(t,r,i)},y.prototype._activateColumnRenderer=function(e,t,n){if(null==e)return;let o=this._realTimeGrid;o?o.activateColumnRenderer(e,t,n):"function"==typeof n?this._hosts[0].setColumnDataBindingHandler(e,n):this._hosts[0].setColumnDataBindingHandler(e,null)};let b=function(){},T={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};y.prototype._mockMouseEvent=function(e,t,n){null==e&&(e=0),null==t&&(t=0);let o=n||{};if(o.preventDefault=b,o.stopPropagation=b,e>=0&&t>=0){let n=this._activeGrid||this._hosts[0],i=n?n.getCell(o.sectionType||"content",e,t):null;o.target=i?i.getElement():null}return o},y.prototype._mockKeyboardEvent=function(e,t){let n=t||{};if(n.preventDefault=b,n.stopPropagation=b,"string"==typeof e){let t=T[e.toLowerCase()]||0;e=t||e.charCodeAt(0)}return n.keyCode=e,n},y._staticStyles={},y._themeLoaders={},y._themeLoadSuccess=function(e,t){let n=this.getName(),o=y._staticStyles[n]=e(t);this.applyStyles(o,n)},y.prototype.applyStaticStyles=function(e){let t=this.getName(),n=y._staticStyles[t];n?this.applyStyles(n,t):e&&(y._themeLoaders[t]||(y._themeLoaders[t]=m.getThemeColors()),y._themeLoaders[t].then(y._themeLoadSuccess.bind(this,e)))},y.prototype.applyStyles=function(e,t,n){t||(t=this.getName());let o,i,l="_style"+t,r=this._hosts,s=r.length;if(s)if(n)for(o=0;o<s;o++)i=r[o],this.revokeStyles(i,t),i[l]=d(e,i.getElement());else for(o=0;o<s;o++)i=r[o],i[l]||(d(e,i.getElement()),i[l]=!0)},y.prototype.revokeStyles=function(e,t){if(!e||!t)return;let n=e[t="_style"+t];n&&1===n.nodeType&&(n.parentNode.removeChild(n),e[t]=null)};let v=function(e,t){let n="number"==typeof t?e.getRowDataAt(t):e.getRowData(t);return n&&n.ROW_DEF||null},k=function(e){return e},w=function(e){return e?e.ROW_DEF.getRowData():null},D=function(e){if(e){let t=e.ROW_DEF;return t?t.getRowData():e}return null};let N={"⇧":1,"B⇧":1,"↑":1,"B↑":1,26:1,1:1,'"1"':1,"-1":-1,"⇩":-1,"B⇩":-1,"↓":-1,"B↓":-1,27:-1,2:-1,'"2"':-1},S={CF_TICK:1,PRCTCK_1:1,BID_TICK:1,ASK_TICK:1};let E={"||":1,"&&":2,"<":3,">":3,"<=":3,">=":3,"!=":3,"=":3,"==":3,"===":3,"+":4,"-":4,"*":5,"%":6,"/":6,"!":7,"!!":7},A={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"!":function(e,t){return!e},"!!":function(e,t){return!!e}},x={"+":2,"-":2,"*":2,"/":2,"%":2,"<":2,">":2,"<=":2,">=":2,"==":2,"!=":2,"&&":2,"||":2,"!":1,"!!":1},R=function(e,t,n,o){let i={value:t,type:n};return o&&(i.dataType=o),"operator"===n?i.precedence=E[t]:"parenthesis"===n&&(i.precedence=0),e.push(i),e.length-1},F={_tokens:[],_withString:function(e){return" #"+R(F._tokens,e.substring(1,e.length-1),"literal","string")+"#"},_withField:function(e){return" #"+R(F._tokens,e,"literal","variable")+"#"},_withFieldInBrackets:function(e){return F._withField(e.substring(1,e.length-1))},_withNegativeNumber:function(e){let t=+e;if(t==t){return" #"+R(F._tokens,t,"literal","number")+"#"}return""},_withPositiveNumber:function(e){return 35===e.charCodeAt(0)?e:F._withNegativeNumber(e)},_withOperator:function(e){if(E[e]){return"="!=e&&"==="!=e||(e="=="),"#"+R(F._tokens,e,"operator")+"#"}return""},_withParenthesis:function(e){return"#"+R(F._tokens,e,"parenthesis")+"#"},_tester:function(e){let t=e._rpn,n=t.length,o=0,i=0;for(let e=0;e<n;++e){let n=t[e];if("literal"!==n.type){let e=x[n.value];if(!(o>=e))return console.warn("Cannot parse an expression with insufficient number of operands"),!0;o-=e}o++,o>i&&(i=o)}return 1!==o||(e._stackSize=i,!1)},_filter:function(e,t){let n,o=e._rpn,i=new Array(e._stackSize),l=o.length,r=0;for(let e=0;e<l;++e){let l=o[e],s=l.value;"literal"===l.type?n="variable"!==l.dataType?s:t?t[s]:null:1===x[s]?(n=A[s](i[r-1]),r-=1):(n=A[s](i[r-2],i[r-1]),r-=2),i[r++]=n}return!!i[0]},parse:function(e){if("function"==typeof e)return e;if(!e||"string"!=typeof e)return null;let t=e.trim();if(!t)return null;F._tokens.length=0,t=t.replace(/".+?"/g,F._withString),t=t.replace(/'.+?'/g,F._withString),t=t.replace(/\[.+?\]/g,F._withFieldInBrackets),t=t.replace(/-[0-9.]+/g,F._withNegativeNumber),t=t.replace(/[0-9.#]+/g,F._withPositiveNumber),t=t.replace(/[a-zA-Z_]\w*/g,F._withField),t=t.replace(/[\-\/+*%!=<>&|]+/g,F._withOperator),t=t.replace(/[()]/g,F._withParenthesis);let n=F._tokens,o=n.length;if(!o)return null;let i,l,r,s=[],u=t.match(/#[0-9]+#/g);for(i=0;i<o;++i){let e=u[i];if(l=n[+e.substring(1,e.length-1)],r=l.type,"literal"===r){let e=s[s.length-1];if(e&&"literal"===e.type){if(!(l.value<0&&"number"===l.dataType))return console.warn("Cannot parse an expression with insufficient number of operators"),null;R(s,"-","operator"),l.value*=-1}}s.push(l)}F._tokens.length=0,o=s.length;let a=[],d=[],c=null,p=!1;for(i=0;i<o;++i)if(l=s[i],r=l.type,"literal"===r)a.push(l);else if("parenthesis"===r)if("("===l.value)d.push(l);else{for(p=!1;d.length;){if(c=d.pop(),"("===c.value&&"parenthesis"===c.type){p=!0;break}a.push(c)}p||console.warn("No left parenthesis paired with the right one")}else{for(;d.length&&!(l.precedence>d[d.length-1].precedence);)a.push(d.pop());d.push(l)}for(p=!1;d.length;)c=d.pop(),"("===c.value&&"parenthesis"===c.type?p=!0:a.push(c);if(p&&console.warn("No right parenthesis paired with the left one"),!a.length)return null;let f={_rpn:a};return F._tester(f)?null:F._filter.bind(null,f)}};let I=function(){this._conditions=[],this._scopes=[],I._painters.push(this)};I.ColoringTypes={TEXT:1,HEATMAP:2,CONDITIONAL:3},I.prototype._coloringType=0,I.prototype._conditions=null,I.prototype._effectiveStyles=null,I.prototype._blinkCondition=null,I.prototype._scopes,I.prototype._columnStats=null,I.prototype._levelColorDisabled=!1,I.prototype._blinkingDuration=250,I._runningBlinkId=0,I._painters=[],I._emptyAry=[],I._emptyObj={},I._bgObj={backgroundColor:"",color:""},I._colorObj={color:""},I.bgStyles=["backgroundColor","color"],I.nonBgStyles=["fontSize","fontWeight","fontStyle","textAlign","textDecoration"],I.supportedStyles=I.bgStyles.concat(I.nonBgStyles),I.themeReady=null,I.parse=F.parse,I.prototype.dispose=function(){let e=I._painters.indexOf(this);e>=0&&I._painters.splice(e,1),this.reset(),this._conditions=null,this._scopes.length=0,this._blinkCondition=null},I.prototype.reset=function(){this._setColoringType(0);let e=this._scopes.length;if(e){for(let t=0;t<e;++t){let e=this._scopes[t];I._clearBlinkTimer(e)&&e._restorer();let n=e.cell;n&&delete n.blinking,e.cell=null}this._scopes.length=0}this._blinkCondition=null},I.prototype.resetColoring=function(){this._setColoringType(0),this._effectiveStyles=null,this._conditions.length=0},I.prototype.resetBlinking=function(){this._blinkCondition=null,this._scopes.length=0},I.prototype.clearBlinking=function(){this._blinkCondition=null;let e=this._scopes.length;if(e){for(let t=0;t<e;++t){let e=this._scopes[t];I._clearBlinkTimer(e)&&e._restorer();let n=e.cell;n&&delete n.blinking,e.cell=null}this._scopes.length=0}},I.prototype.resetHeatMap=function(){this._conditions.length=0,this._columnStats=null},I.prototype.clearHeatMap=function(){return this._blinkCondition?(this._setColoringType(0),this.resetHeatMap(),!1):(this.dispose(),!0)},I.prototype.applyThemeColor=function(){let e=m.getColors();if(this._coloringType===I.ColoringTypes.HEATMAP){let t=this._conditions[0];if(t&&(t.textMode?t.baseColor=e.baseText:t.baseColor=e.baseGrid,t.useThemeColor)){let n=e.up,o=e.down,i=e.level===e.baseText?"":e.level;I._setUpDownColors(t,n,o,i)}}this._blinkCondition&&this._blinkCondition.useThemeColor&&I._setUpDownColors(this._blinkCondition,e.up,e.down,e.level,!0)},I.prototype.getConditions=function(){return this._conditions},I.prototype.getColoringType=function(){return this._coloringType},I.prototype._setColoringType=function(e){this._coloringType!==e&&(this._coloringType=e)},I.prototype.setEffectiveStyles=function(e){this._effectiveStyles=e},I.prototype.getEffectiveStyles=function(){return this._effectiveStyles},I.prototype.setConditions=function(e){this._conditions.length=0,this._setColoringType(I.ColoringTypes.CONDITIONAL);let t=e.length;for(let n=0;n<t;n++)this._addCondition(e[n])},I.prototype.setColumnStats=function(e){this._columnStats=e&&e.getMin?e:null},I.prototype.getColumnStats=function(){return this._columnStats},I.prototype._addCondition=function(e){let t=e.expression;t&&(e._fn=F.parse(t.text||t),this._conditions.push(e))},I.prototype.addHeatmap=function(e,t,n,o,i,l){this._setColoringType(I.ColoringTypes.HEATMAP);let r={heatmap:!0};return r.field=e,r.expression=I._heatMapCondition.bind(r),r.midPoint=t,I._setUpDownColors(r,n,o),r.baseColor=i,!0!==l&&"text"!==l||(r.textMode=!0),this._addCondition(r),r},I.prototype.addHeatmapWithTheme=function(e,t,n){let o=m.themeColors,i=this.addHeatmap(e,t,o.up,o.down,o.baseGrid,n);return!0!==n&&"text"!==n||(i.baseColor=o.baseText),i.useThemeColor=!0,i},I.prototype._addColorText=function(e,t,n,o,i){this._setColoringType(I.ColoringTypes.TEXT);let l={};return l.field=t,l.expression=e.bind(null,t),l.upClass=n,l.downClass=o,l.levelClass=i,this._addCondition(l),l},I.prototype.addColorText=function(e,t,n,o){return this._addColorText(S[e]?I._tickColorTextCondition:I._colorTextCondition,e,t,n,o)},I.prototype.addColorTextWithTheme=function(e){return this.addColorText(e,"positive","negative","neutral")},I.prototype.addTickColorText=function(e,t,n){return this.addColorText("CF_TICK",e,t,n)},I.prototype.addTickColorTextWithTheme=function(){let e=m.themeColors,t=this.addTickColorText(e.tickUp,e.tickDown,e.level);return t.useThemeColor=!0,t},I.prototype.addTickBlink=function(e,t,n,o){return this.addBlink("CF_TICK",e,t,n,o)},I.prototype.addTickBlinkWithTheme=function(e){let t=m.themeColors,n=this.addTickBlink(t.tickUp,t.tickDown,t.level,e);return n.useThemeColor=!0,n},I.prototype.addBlink=function(e,t,n,o,i){return this._addBlink(S[e]?I._tickBlinkCondition:I._fieldBlinkCondition,e,t,n,o,i)},I.prototype.addBlinkWithTheme=function(e,t){let n=m.themeColors,o=this.addBlink(e,n.up,n.down,n.level,t);return o.useThemeColor=!0,o},I.prototype._addBlink=function(e,t,n,o,i,l){let r=this._blinkCondition={};return r.blink=!0,r.blinkId=I._runningBlinkId++,r.field=t,r._fn=r.expression=e,!0!==l&&"border"!==l||(r.border=!0),I._setUpDownColors(r,n,o,i,!0),r},I.prototype.renderForPrinting=function(e,t,n,o){if(!e)return;let i=this._getStyles(t,n,o),l=i.cssClass;null!=l?(elem._coloringCssClass&&elem._coloringCssClass!==l&&(elem.classList.remove(elem._coloringCssClass),elem._coloringCssClass=null),l&&(elem.classList.add(l),elem._coloringCssClass=l)):(e._coloringCssClass&&(e.classList.remove(e._coloringCssClass),e._coloringCssClass=null),e.style.backgroundColor=i.backgroundColor||"",e.style.color=i.color||"")},I._colorTextCondition=function(e,t){let n=t[e];if(n||0===n){if(n>0)return 1;if(n<0)return-1}return"u"},I._tickColorTextCondition=function(e,t){return N[t[e]]},I._heatMapCondition=function(e,t,n){let o,i=e[this.field],l=i||0===i?i-this.midPoint:NaN;if(0===l||l!=l)return 0;let r=1;return l>0?(r=n-this.midPoint,r<0&&(r=t-this.midPoint)):(r=t-this.midPoint,r>0&&(r=n-this.midPoint)),r<0&&(r=-r),o=l/r,o},I._tickBlinkCondition=function(e){return N[e]},I._fieldBlinkCondition=function(e,t){return e>t?1:e<t?-1:0},I._borderRestorer=function(e){e.blinkTimer=0;let t=e.cell.getElement();t&&(t.style.border="")},I._cellRestorer=function(e){e.blinkTimer=0;let t=e.cell.getElement();if(t){let n=e.rowData,o=NaN,i=NaN;if(this._coloringType===I.ColoringTypes.HEATMAP){let e=this._columnStats;e&&(o=e.getMin(),i=e.getMax())}let l=this._getStyles(n,o,i),r=l.cssClass;null!=r?(t._coloringCssClass&&t._coloringCssClass!==r&&(t.classList.remove(t._coloringCssClass),t._coloringCssClass=null),r&&(t.classList.add(r),t._coloringCssClass=r),t.style.backgroundColor="",t.style.color=""):(t._coloringCssClass&&(t.classList.remove(t._coloringCssClass),t._coloringCssClass=null),t.style.backgroundColor=l.backgroundColor||"",t.style.color=l.color||"")}},I.prototype._getStyles=function(e,t,n){if(!e)return I._emptyObj;let o=this._conditions.length;for(let i=0;i<o;++i){let o,l=this._conditions[i],r=l._fn;try{o=r&&r(e,t,n)}catch(e){}if(o){if(this._coloringType===I.ColoringTypes.HEATMAP){let e;return e=o>0?I.blendColor(l.baseColor,l.upColor,o):I.blendColor(l.baseColor,l.downColor,-o),l.textMode?(I._colorObj.color=I.num2Hex(e),I._colorObj):(I._bgObj.backgroundColor=I.num2Hex(e),I._bgObj.color=I.blackAndWhite(e),I._bgObj)}return this._coloringType===I.ColoringTypes.TEXT?(l.cssClass=o>0?l.upClass:o<0?l.downClass:this._levelColorDisabled?"":l.levelClass,l.cssClass=l.cssClass||"",l):l}}return I._emptyObj},I.blendColor=function(e,t,n){n>1?n=1:n<0&&(n=0);let o=I.hex2Num(e),i=I.hex2Num(t),l=[];for(let e=0;e<3;++e){let t=(i[e]-o[e])*n;l.push(o[e]+t)}return l},I.blackAndWhite=function(e){return Math.sqrt(e[0]*e[0]*.241+e[1]*e[1]*.691+e[2]*e[2]*.068)>=135?"#000000":"#FFFFFF"},I.rgb2Hex=p,I.num2Hex=function(e){return"#"+(16777216+(e[2]|e[1]<<8|e[0]<<16)).toString(16).slice(1)},I.num2Rgb=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},I.hex2Num=function(e){let t=parseInt(e.replace(/[^0-9A-F]/gi,""),16);return[t>>16&255,t>>8&255,255&t]},I.hex2Rgb=function(e){if(e){let t=parseInt(e.replace(/[^0-9A-F]/gi,""),16);return"rgb("+(t>>16&255)+", "+(t>>8&255)+", "+(255&t)+")"}return""},I.themeChanged=function(){},I.setThemeColors=function(){},I._onThemeChanged=function(){let e=I._painters;for(let t=e.length;--t>=0;)e[t].applyThemeColor()},I.loadThemeColors=function(){return I.themeReady||(I.themeReady=m.getThemeColors(I._onThemeChanged).then(I._onThemeChanged).catch(I._onThemeChanged)),I.themeReady},I.reloadThemeColors=function(){return I.themeReady=m.reloadThemeColors().then(I._onThemeChanged).catch(I._onThemeChanged),I.themeReady},I.clearCellStyle=function(e,t){let n=e.getElement();if(!n)return;let o=e.blinking;if(o&&(I._clearBlinkTimer(o),delete e.blinking,o.cell=null),n._coloringCssClass&&n.classList.remove(n._coloringCssClass),t||(t=I.supportedStyles),Array.isArray(t))for(let e=t.length;--e>=0;)n.style[t[e]]="";else for(let e in t)n.style[e]=""},I._setUpDownColors=function(e,t,n,o,i){e.upColor=t,null!=t&&i&&(e.contrastUpColor=I.getOppositeColor(t)),e.downColor=n,null!=n&&i&&(e.contrastDownColor=I.getOppositeColor(n)),e.levelColor=o,null!=o&&i&&(e.contrastLevelColor=I.getOppositeColor(o))},I._clearBlinkTimer=function(e,t){return!!e.blinkTimer&&(clearTimeout(e.blinkTimer),e.blinkTimer=0,!0)},I.getOppositeColor=function(e){if("string"==typeof e){if("#"===e.charAt(0)){let t=I.hex2Num(e);return I.blackAndWhite(t)}}else if(Array.isArray(e))return I.blackAndWhite(e);return""},I.prototype.render=function(e,t,n,o,i){null!=n&&n==n?this._paintCell(e,t,n,o):this._conditions.length&&this._coloringType===I.ColoringTypes.CONDITIONAL&&this._paintCell(e,t)},I.prototype.renderHeatMap=function(e,t,n,o){this._paintCell(e,t,n,o)},I.prototype.renderColoring=function(e,t){this._paintCell(e,t)},I.prototype._paintCell=function(e,t,n,o){if(!e)return;let i=e.getElement();if(!i)return;let l,r=this._blinkCondition;if(r&&(l=e.blinking,l&&l.blinkTimer&&!r.border))return;let s=this._getStyles(t,n,o),u=i.style,a=s.cssClass;i._coloringCssClass&&i._coloringCssClass!==a&&(i.classList.remove(i._coloringCssClass),i._coloringCssClass=null),null!=a?a&&(i.classList.add(a),i._coloringCssClass=a):(s.backgroundColor?u.backgroundColor=s.backgroundColor:this._effectiveStyles&&!this._effectiveStyles.backgroundColor||(u.backgroundColor=""),s.color?u.color=s.color:this._effectiveStyles&&!this._effectiveStyles.color||(u.color=""))},I.prototype.blink=function(e,t,n){this._blinkCell(e,n,t)},I.prototype.blinkCell=function(e,t,n,o){if(!this._blinkCondition)return!1;let i=this._blinkCondition._fn(t,n);return this._blinkCell(e,o,i)},I.prototype._blinkCell=function(e,t,n){if(!e)return!1;if(this._levelColorDisabled&&!n)return!1;let o=e.getElement();if(!o)return!1;let i=this._blinkCondition;if(!i)return!1;let l,r,s=e.blinking;if(s||(s={},s.cell=e,e.blinking=s,this._scopes.push(s)),s.blinkId!==i.blinkId){s.blinkId=i.blinkId,s.field=i.field;let e=i.border?I._borderRestorer:I._cellRestorer;s._restorer=e.bind(this,s)}s.rowData=t,n>0?(l=i.upColor,r=i.contrastUpColor):n<0?(l=i.downColor,r=i.contrastDownColor):(l=i.levelColor,r=i.contrastLevelColor);let u=!0;return i.border?(o.style.border="1px solid "+l,u=!1):(o.style.backgroundColor=l,o.style.color=r),I._clearBlinkTimer(s),s.blinkTimer=setTimeout(s._restorer,this._blinkingDuration),u},I.prototype.verifyBlinking=function(e,t){let n=e.blinking;n&&n.blinkTimer&&n.rowData!==t&&(n.rowData=t,I._clearBlinkTimer(n)&&n._restorer())},I.prototype.disableLevelColor=function(e){this._levelColorDisabled=!1!==e},I.prototype.setBlinkingDuration=function(e){"number"==typeof e&&(this._blinkingDuration=e)};let G={EQ:{id:"EQ",name:"Equal to",type:"string",positive:1,caseSensitive:1,formula:"str == input"},NEQ:{id:"NEQ",name:"Not equal to",type:"string",positive:0,caseSensitive:1,formula:"str != input"},NUMEQ:{id:"NUMEQ",name:"Number equal to",type:"number",positive:1,caseSensitive:1,formula:"val == input"},NUMNEQ:{id:"NUMNEQ",name:"Number not equal to",type:"number",positive:0,caseSensitive:1,formula:"val != input"},GT:{id:"GT",name:"Greater than",type:"number",positive:1,caseSensitive:1,formula:"val > input"},GTE:{id:"GTE",name:"Greater than or equal to",type:"number",positive:1,caseSensitive:1,formula:"val >= input"},LT:{id:"LT",name:"Less than",type:"number",positive:1,caseSensitive:1,formula:"val < input"},LTE:{id:"LTE",name:"Less than or equal to",type:"number",positive:1,caseSensitive:1,formula:"val <= input"},BEGIN:{id:"BEGIN",name:"Begin with",type:"string",positive:1,caseSensitive:0,formula:"str.indexOf(input) === 0"},NBEGIN:{id:"NBEGIN",name:"Not begin with",type:"string",positive:0,caseSensitive:0,formula:"str.indexOf(input) !== 0"},END:{id:"END",name:"End with",type:"string",positive:1,caseSensitive:0,formula:"(str.length >= input.length) && str.lastIndexOf(input) === (str.length - input.length)"},NEND:{id:"NEND",name:"Not end with",type:"string",positive:0,caseSensitive:0,formula:"(str.length < input.length) || str.lastIndexOf(input) !== (str.length - input.length)"},CONT:{id:"CONT",name:"Contain",type:"string",positive:1,caseSensitive:0,formula:"str.indexOf(input) >= 0"},NCONT:{id:"NCONT",name:"Not contain",type:"string",positive:0,caseSensitive:0,formula:"str.indexOf(input) < 0"},EQ_BLANK:{id:"EQ_BLANK",name:"Equal to blank value",type:"blank",positive:1,caseSensitive:1,formula:"!val && val !== 0"},EQ_NBLANK:{id:"EQ_NBLANK",name:"Equal to non blank value",type:"blank",positive:1,caseSensitive:1,formula:"(val || val === 0) ? true : false"},DT:{id:"DT",name:"Date is",type:"date",positive:1,caseSensitive:1,formula:"ts === input"},DTA:{id:"DTA",name:"Date is After",type:"date",positive:1,caseSensitive:1,formula:"ts > input"},DTB:{id:"DTB",name:"Date is Before",type:"date",positive:1,caseSensitive:1,formula:"ts < input"}};G.TXTEQ=G.EQ,G.BLANK=G.EQ_BLANK,G.NBLANK=G.EQ_NBLANK,G.NEQ_BLANK=G.EQ_NBLANK,G.GREATER_THAN=G.GT,G.GREATER_THAN_OR_EQUAL_TO=G.GTE,G.EQUAL_TO=G.EQ,G.LESS_THAN=G.LT,G.LESS_THAN_OR_EQUAL_TO=G.LTE,G.TEXT_THAT_CONTAINS=G.CONT,G.TEXT_THAT_NOT_CONTAINS=G.NCONT,G.TEXT_IS=G.EQ,G.NOT_BLANK=G.EQ_NBLANK;let O={EQ:function(e,t){return e==t},NEQ:function(e,t){return e!=t},NUMEQ:function(e,t){return e==t},NUMNEQ:function(e,t){return e!=t},GT:function(e,t){return e>t},GTE:function(e,t){return e>=t},LT:function(e,t){return e<t},LTE:function(e,t){return e<=t},BEGIN:function(e,t){return 0===e.indexOf(t)},NBEGIN:function(e,t){return 0!==e.indexOf(t)},END:function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},NEND:function(e,t){return e.length<t.length||e.lastIndexOf(t)!==e.length-t.length},CONT:function(e,t){return e.indexOf(t)>=0},NCONT:function(e,t){return e.indexOf(t)<0},EQ_BLANK:function(e,t){return!e&&0!==e},EQ_NBLANK:function(e,t){return!(!e&&0!==e)},DT:function(e,t){return e===t},DTA:function(e,t){return e>t},DTB:function(e,t){return e<t}};let B={or:1,OR:1,Or:1,oR:1,"||":1},L=function(e){return"number"==typeof e?e:e?Number(e):!1===e?0:NaN},P=/^\w{3} \w{3}/,U=function(e){if("string"==typeof e){let t=new Date(e),n=t.getTime();if(n==n&&P.test(e))return t}return e},j=function(e){return"string"==typeof e?e:e?e+"":0===e?"0":!1===e?"false":""},M=function(e,t){return e&&e.getTime?t?1e4*e.getUTCFullYear()+100*e.getUTCMonth()+e.getUTCDate():1e4*e.getFullYear()+100*e.getMonth()+e.getDate():NaN},H=function(e,t){let n=e._conds,o=n?n.length:0;if(!o)return!0;let i,l,r,s,u=e._fieldName,a=e._formattedFieldName,d=t[u];e._rawDataAccessor&&(d=e._rawDataAccessor(d));let c=!1;for(let p=0;p<o;++p){let o=0;if(p>0)if(o=B[n[p-1].connector],o){if(c)return!0}else if(!c)continue;let f=n[p],h=G[f.operatorId],_=!1,g=h.type,m=h.id,C=O[m];"blank"===g?_=C(d):"number"===g?(null==r&&(r=L(d)),_=C(r,f.value)):"date"===g?(null==s&&(s=M(d,!1)),_=C(s,f.value)):(null==i&&(e._formattedDataAccessor?i=e._formattedDataAccessor(t[u]):e._formatter?i=e._formatter(t):a!==u?(i=t[a],null==i&&(i=d)):i=d,i=j(i)),h.caseSensitive?_=C(i,f.value):(null==l&&(l=i.toLowerCase()),_=C(l,f.value))),c=p>0?o?c||_:c&&_:_}return c},Q=function(e,t){let n=t[e._fieldName];return e._rawDataAccessor&&(n=e._rawDataAccessor(n)),!!e._itemMap[n]},z=function(e){return[e.operatorId,e.origValue,e.connector]},K=function(e){this._initStaticVariables(),this._conditions=[],this.init(e)};K.prototype._initStaticVariables=function(){if(!K._initStatic){K._initStatic=!0,K._updateTimezoneOffset();let e=864e5-new Date%864e5;setTimeout(K._setUpdateInterval,e)}},K._initStatic=!1,K.prototype._fieldName="",K.prototype._formattedFieldName="",K.prototype._formatter=null,K.prototype._useUTCTime=!1,K.prototype._rawDataAccessor=null,K.prototype._formattedDataAccessor=null,K.prototype._conditions,K._timezoneOffset=0,K._updateTimezoneOffset=function(){K._timezoneOffset=60*(new Date).getTimezoneOffset()},K._setUpdateInterval=function(){K._updateTimezoneOffset(),setInterval(K._updateTimezoneOffset,864e5)},K.prototype.reset=function(){this.setFieldDefinition(""),this._rawDataAccessor=this._formattedDataAccessor=null},K.prototype.init=function(e){if(!e)return;let t=e.field;t?this.setFieldDefinition(t,e.formatter,e.formattedField):null!=t&&this.setFieldDefinition("");let n=e.useUTCTime;null!=n&&(this._useUTCTime=!!n);let o=e.rawDataAccessor,i=e.formattedDataAccessor;null==o&&null==i||this.setDataAccessors(o,i)},K.prototype.setFieldDefinition=function(e,t,n){this._fieldName=e,this._formattedFieldName=n||this._fieldName+"_FORMATTED",this._formatter=t||null,this._conditions.length=0},K.prototype.setDefaultUTCUsage=function(e){this._useUTCTime=!!e},K.prototype.setDataAccessors=function(e,t){this._rawDataAccessor="function"==typeof e?e:null,this._formattedDataAccessor="function"==typeof t?t:null},K.prototype.addCondition=function(e,t,n,o){let i=e?e.toUpperCase():"",l=G[i];if(!l)return!1;if("{}"===t||"{*}"===t)i=l.positive^"{}"===t?"EQ_NBLANK":"EQ_BLANK",l=G[i];else if(!t&&"blank"!==l.type&&0!==t&&!1!==t)return!1;let r={operatorId:i,origValue:t,connector:n||""};return null!=o&&(r.useUTCTime=o),this._conditions.push(r),!0},K.prototype.addConditions=function(e){let t=0;if(Array.isArray(e)){let n=e.length;for(let o=0;o<n;++o){let n=e[o];Array.isArray(n)&&this.addCondition(n[0],n[1],n[2],n[3])&&++t}n>1&&!t&&!Array.isArray(e[0])&&this.addCondition(e[0],e[1],e[2])&&++t}return t},K.prototype.getConditions=function(){return this._conditions.length?this._conditions.map(z):null},K.prototype.buildFilter=function(){if(!this._fieldName)return null;let e=this._conditions.length;if(!e)return null;let t=this._formatter,n=this._conditions.slice();for(let t=0;t<e;++t){let e=n[t],o=G[e.operatorId],i=o.type,l=e.origValue;if("number"===i)l=U(l),l=L(l);else if("date"===i){let t=null;l instanceof Date?t=l:"number"!=typeof l&&"string"!=typeof l||(t=new Date(l)),l=M(t,null!=e.useUTCTime?e.useUTCTime:this._useUTCTime)}else"string"===i&&(l=j(l),o.caseSensitive||(l=l.toLowerCase()));e.value=l}let o={_conds:n,_fieldName:this._fieldName||"",_formatter:t||null,_formattedFieldName:this._formattedFieldName||"",_rawDataAccessor:this._rawDataAccessor||null,_formattedDataAccessor:this._formattedDataAccessor||null};return this._conditions.length=0,H.bind(null,o)},K.prototype.buildMonitorFilter=function(e,t,n,o){this.setFieldDefinition(t,n,o);let i=t.lastIndexOf("_LOCAL")===t.length-6,l=e.split("♣");for(let e=0;e<l.length;e++){let t=l[e].split("♦");i&&(t[1]=(t[1]-K._timezoneOffset)%86400+""),this.addCondition(t[0],t[1],t[2])}return this.buildFilter()};K.prototype.parse=function(e,t,n,o,i,l){let r=typeof e;return"string"===r?e.indexOf("♦")>=0?this.buildMonitorFilter(e,t,n,o):F.parse(e):"function"===r?e:Array.isArray(e)?(t&&(this.setFieldDefinition(t,n,o),this.setDataAccessors(i,l)),this.addConditions(e),this.buildFilter()):"object"===r?function(e,t,n){if(!e||!t)return null;let o={_fieldName:t,_itemMap:e};return n&&(o._rawDataAccessor=n),Q.bind(null,o)}(e,t,i):null};const V={backgroundColor:1},W={color:1},q={backgroundColor:1,color:1};let X=/\[[^\[\]]*\]/g,Y=function(e){let t=[];if(e&&"string"==typeof e){let n=e.match(X);for(let e=0;e<n.length;e++)t.push(n[e].replace(/[\[\]]/g,""))}return t},$=function(){this._onSectionBinding=this._onSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onThemeLoaded=this._onThemeLoaded.bind(this),$.cleanUpPrevRows=$.cleanUpPrevRows.bind(this),$._cleanUpPrevFields=$._cleanUpPrevFields.bind(this),this._hosts=[]};o.inherits($,y),$._cleanUpTimer=0,$._controlClass="predefined-conditional-color",$._colorTextStyles,$.prototype._blinkingEnabled=!1,$.prototype._pendingFields,$.prototype._predefinedColors=null,$.prototype._blinkingDuration=250,$.prototype._insertionBlinking=!1,$._predefinedColorsStyles,$.prototype.getName=function(){return"ConditionalColoringPlugin"},$.prototype.hasMultiTableSupport=function(){return!0},$.prototype.initialize=function(e,t){e._prevDataRows={};let n=this._hosts;if(n.indexOf(e)>=0)return;n.push(e);let o=t.conditionalColoring;if(o){let t=o.predefinedColors;null!=t&&"object"==typeof t&&(this._predefinedColors||(this._predefinedColors=t,this._predefinedColorsStyles=this._prepareStyles(t)),this._injectPredefinedColors(e),e.enableClass($._controlClass));let n=o.blinkingDuration;null!=n&&"number"==typeof n&&(this._blinkingDuration=n);let i=o.insertionBlinking;null!=i&&(this._insertionBlinking=i)}1===n.length?this.config(t):(this._applyStyle(e,t),this._injectColorTextStyles()),e.listen("postSectionDataBinding",this._onSectionBinding),e.listen("columnAdded",this._onColumnAdded),e.listen("columnRemoved",this._onColumnRemoved),I.themeReady||I.loadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded),m.getThemeColors(this._onThemeLoaded)},$.prototype._afterInit=function(){let e=this._pendingFields;if(e){let t,n,o;for(let i=0;i<e.length;i++)t=e[i][0],n=e[i][1],o=e[i][2],this._addDataFields(t,n,o);this._pendingFields=null}},$.prototype.unload=function(e){let t=this._hosts.indexOf(e);t<0||(this._hosts.splice(t,1),e.unlisten("postSectionDataBinding",this._onSectionBinding),e.unlisten("columnAdded",this._onColumnAdded),e.unlisten("columnRemoved",this._onColumnRemoved),e._prevDataRows=null,this._dispose())},$.prototype.beforeProcessOption=function(e,t){if("blinker"==e)return null},$.prototype.config=function(e){if(!e)return;let t=e.columns;if(!t)return;let n=t.length;for(let e=0;e<n;++e)this.setColumnColoring(e,t[e])},$.prototype.getConfigObject=function(e){let t=e||{},n=t.conditionalColoring;n||(n=t.conditionalColoring={}),null!=this._predefinedColors&&(n.predefinedColors=this._predefinedColors),250!==this._blinkingDuration&&(n.blinkingDuration=this._blinkingDuration),!1!==this._insertionBlinking&&(n.insertionBlinking=this._insertionBlinking);let o=t.columns;o||(o=t.columns=[]);let i=this.getColumnCount();for(let e=0;e<i;++e){let t=o[e];t||(t=o[e]={}),this.getColumnColoring(e,t)}return t},$.prototype.getColumnColoring=function(e,t){t||(t={});let n=this._hosts[0],o=this._getColumnOption(e,"conditions",n);if(Array.isArray(o)&&o.length>0){t.conditions=[];let e=["expression","backgroundColor","color","cssClass","field"],n=o.length;for(let i=0;i<n;i++){let n={},l=o[i];if(r(n,l,e),"function"==typeof n.expression){let e=l.origExpression;e&&(n.expression=e)}t.conditions.push(n)}}let i=this._getColumnOption(e,"colorText",n);i&&(t.colorText=i);let l=this._getColumnOption(e,"tickColor",n);l&&(t.tickColor=l);let s=this._getColumnOption(e,"blinking",n);s&&(t.blinking=s);let u=this._getField(e);return u&&(t.field=u),t},$.prototype._applyStyle=function(e,t){if(!t)return;let n,o=t.columns;if(!o)return;let i=o.length;for(let t=0;t<i;++t)n=this.getColumnPainter(t),this._isValidPainter(n)&&e.enableColumnClass(t,"conditionally-colored",!0)},$.prototype._enableColumnStyle=function(e,t){t=!1!==t;let n,o=this._hosts;for(let i=o.length;--i>=0;)n=o[i],n.enableColumnClass(e,"conditionally-colored",t)},$.prototype._isValidPainter=function(e){if(!e)return!1;return e.getColoringType()!==I.ColoringTypes.HEATMAP},$.prototype._clearCellStyles=function(e,t){let n,o,i,l,r,s,u=this._hosts;for(n=u.length;--n>=0;)for(o=u[n],i=o.getSection("content"),l=i.getRowCount(),r=0;r<l;++r)s=i.getCell(e,r,!1),s&&I.clearCellStyle(s,t)},$.prototype._cachePreviousValue=function(){let e,t,n,o=this.getColumnCount(),i=this._hosts,l=i.length;for(e=0;e<l;e++)for(n=i[e],t=0;t<o;++t)this._cacheColumnPreviousValue(t,n)},$.prototype._cacheColumnPreviousValue=function(e,t){let n=t._prevDataRows||{},o=t.getDataSource(),i=o.getRowCount(),l=this._getColumnData(e);if(l.blinking){let r,s,u,a,d=l.blinkingField||this._getField(e);for(r=0;r<i;r++)s=o.getRowId(r),u=this._getData(o,r,d),null!=u&&(a=n[s],a||(a=n[s]={}),a[d]=u);t._prevDataRows=n}},$.prototype._addDataFields=function(e,t,n){if(!this._realTimeGrid||!e||!n)return;let o=null;if(null!=t){let e="object"==typeof t?t:this._realTimeGrid.getColumnDefinition(t);o=e?e.getId()+"_"+n:null}this._realTimeGrid.addDataFields(e,o)},$.prototype._removeDataFields=function(e,t,n){if(!this._realTimeGrid||!e||!n)return;let o=null;if(null!=t){let e="object"==typeof t?t:this._realTimeGrid.getColumnDefinition(t);o=e?e.getId()+"_"+n:null}this._realTimeGrid.removeDataFields(e,o)},$.prototype._removeFieldReferrer=function(e,t){if(!this._realTimeGrid||!t)return;let n=null;if(null!=e){let o=e;if("number"==typeof e){let t=this._realTimeGrid.getColumnDefinition(e);t&&(o=t.getId())}n=o?o+"_"+t:null,this._realTimeGrid.removeFieldReferrer(n)}},$.prototype.setColumnColoring=function(e,t){let n,o;t&&(n=t.blinking,o=t.field),this.setColumnBlinking(e,n,o),this.setConditionalColoring(e,t);let i=this._newColumnData(e);!i.painter||i.coloringFields||i.blinkingField||this._clearPainter(i)},$.prototype.setConditionalColoring=function(e,t){let n=this._newColumnData(e);n.conditions=null,t?(n.colorText=t.colorText,n.tickColor=t.tickColor,n.field=t.field):(n.colorText=null,n.tickColor=null);let o=n.painter,i=n.coloringFields?Object.keys(n.coloringFields):null,l=this._prepareColorOptions(e,t);if(this._isValidPainter(o)){if(i){let t=o.getEffectiveStyles();this._clearCellStyles(e,t)}o.resetColoring()}if(l.hasColor){n.conditions=t.conditions;let r=l.fields;if(o){if(i){let t,n=[];for(let e=0;e<i.length;e++)t=i[e],r[t]||n.push(t);n.length&&this._removeDataFields(n,e,"coloring")}}else o=n.painter=new I;if(l.condColoring){let e=l.condColoring.conditions;o.setConditions(e),this._setEffectiveStyles(o,e)}else if(l.colorText){let e=l.colorText;if(e.useThemeColors){if(!$._colorTextStyles){let e={positive:{color:"var(--color-scheme-positive)"},negative:{color:"var(--color-scheme-negative)"},neutral:{color:"var(--color-scheme-neutral)"}};$._colorTextStyles=this._prepareStyles(e)}this._injectColorTextStyles(),o.addColorTextWithTheme(l.colorText.field)}else o.addColorText(e.field,e.upClass,e.downClass,e.levelClass)}let s=Object.keys(r);this._initializedGrid?this._addDataFields(s,e,"coloring"):(this._pendingFields||(this._pendingFields=[]),this._pendingFields.push([s,e,"coloring"])),this._enableColumnStyle(e,!0),o.inputField=l.inputField,n.coloringFields=r}else i&&this._removeFieldReferrer(e,"coloring"),n.coloringFields=null,this._enableColumnStyle(e,!1);if(this._initializedGrid){let e=this._hosts[0];if(e){let t=e.getPlugin("RowColoringPlugin");t&&t.forceUpdateRowColor&&t.forceUpdateRowColor()}this._requestRowRefresh()}},$.prototype.setColumnBlinking=function(e,t,n){let o=this._newColumnData(e),i=o.blinkingField;o.blinking=t;let l=o.painter,r=this._prepareBlinkingOptions(e,t,n);if(r){let t=r.field;l?i&&(l.clearBlinking(),i!==t&&this._removeDataFields(i,e,"blinking")):o.painter=l=new I;let n=r.duration||this._blinkingDuration;if(l.setBlinkingDuration(n),l.disableLevelColor(!1===r.level),r.customColor?l.addBlink(t,r.up,r.down,r.level,r.border):l.addBlinkWithTheme(t,r.border),o.blinkingField=t,this._blinkingEnabled=!0,!i&&(this._compositeGrid||this._initializedGrid)){let t,n=this._hosts;for(let o=0;o<n.length;o++)t=n[o],this._cacheColumnPreviousValue(e,t)}$._startCleanUpInterval(),this._initializedGrid?this._addDataFields(t,e,"blinking"):(this._pendingFields||(this._pendingFields=[]),this._pendingFields.push([t,e,"blinking"]))}else i&&(l&&(l.clearBlinking(),$._cleanUpPrevFields()),this._removeFieldReferrer(e,"blinking")),o.blinkingField=null},$.prototype.blinkRow=function(e,t,n){if(!(n=n||this._hosts[0]))return;let o=n.getDataSource();if(!o)return;let i=n.getSection("content");if(!i)return;let l=o.getRowDataAt(e),r=i.getColumnCount();for(let n=0;n<r;++n){let o=this.getColumnPainter(n);if(!o)continue;let r=i.getCell(n,e,!1);r&&o.blink(r,t,l)}},$.prototype._prepareBlinkingOptions=function(e,t,n){if(null==e||!t)return null;let o={},i=n||this._getField(e),l=i;return"string"==typeof t?l=t:"object"==typeof t&&(l=t.field||i,o.border=t.border,o.duration=t.duration,(t.up||t.down||t.level)&&(o.customColor=!0,o.up=t.up,o.down=t.down,o.level=t.level),!1===t.level&&(o.level=!1)),o.field=$._convertKeyword(l,i),o.inputField=l,o};let J=function(e,t){if(t)if(Array.isArray(t)){let n=t.length;for(let o=0;o<n;++o)e[t[o]]=!0}else e[t]=!0};$.prototype._prepareColorOptions=function(e,t){if(!t)return{};let n=this._getField(e),o=t.inputField||"",i=$._convertKeyword(o,n);t.field&&(i=t.field);let l=0,r={},s=t.colorText||t.tickColor,u=t.conditions,a=u?u.length:0,d={};if(a){d.condColoring={},d.condColoring.conditions=u;let e=i==n?t.textFormatter:null,o=$.getFilterBuilder();for(let t=a;--t>=0;){let n=u[t],s=n?n.expression:null;if(Array.isArray(s)){let e=n.field||i;n.expression=o.parse(s,e,null,e),n.expression&&(n.origExpression=s,l=1,r[e]=!0)}else if("function"==typeof s)l=1,J(r,n.fields||n.field);else if("string"==typeof s)l=1,J(r,Y(s));else if(i&&n.condition){l=1,o.setFieldDefinition(i,e,i);let t=n.condition,s=n.value1,u=n.value2;"BTW"!==t?o.addCondition(t,s):(o.addCondition("GTE",s),o.addCondition("LTE",u)),n.expression=o.buildFilter(),r[i]=!0}}}else s&&(d.colorText={},d.colorText.useThemeColors=!0,"string"==typeof s?i=s:"object"==typeof s&&(i=s.field||i,(s.upClass||s.downClass||s.levelClass)&&(d.colorText.useThemeColors=!1,d.colorText.upClass=s.upClass,d.colorText.downClass=s.downClass,d.colorText.levelClass=s.levelClass)),i&&(d.colorText.field=i,l=1,r[i]=!0));return l?(d.hasColor=1,d.fields=r,d.inputField=o,d):{}},$._convertKeyword=function(e,t){return e&&e.indexOf("THIS_COLUMN")<0?e:t},$._mapInsertedRowId=function(e){let t={},n=e?e.length:0;for(let o=0;o<n;++o){let n=e[o];"inserted"===n.type&&(t[n.rid]=!0)}return t},$._mergeUpdates=function(e){let t,n,o=e.events,i=o?o.length:0,l=e.dataSource,r=[];for(n=0;n<i;++n)if(t=o[n],"updated"===t.type){let e=l.getRowIndex(t.rid);r[e]||(r[e]={changed:{},rid:t.rid});let n=r[e].changed,o=t.changes;for(let e in o)n[e]=1}return r},$.prototype._prepareStyles=function(e){let t,n,o,i=".tr-grid."+$._controlClass+" .column.conditionally-colored .cell",l=[];for(let r in e)l.push(i+"."+r),t=[],n=e[r],o=n.backgroundColor,o&&t.push("background-color: "+o+";"),o=n.color,o&&t.push("color: "+o+";"),l.push(t);return function(e){if(e){let t="";if(Array.isArray(e)){t=e.map(u).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {")}else t="string"==typeof e?e:e+"";if(t)return t.replace(/{[\w\W]*?}/g,a)}return""}(l)},$.prototype._injectColorTextStyles=function(){if($._colorTextStyles){let e=this._hosts,t=e.length;for(let n=0;n<t;n++){let t=e[n];t.enableClass($._controlClass),t._colorTextStyles||(d($._colorTextStyles,t.getElement()),t._colorTextStyles=!0)}}},$.prototype._injectPredefinedColors=function(e){e._conditionalColoringStyleTag&&(e._conditionalColoringStyleTag.parentNode.removeChild(e._conditionalColoringStyleTag),e._conditionalColoringStyleTag=null),e._conditionalColoringStyleTag=d(this._predefinedColorsStyles,e.getElement())},$.prototype.setPredefinedColors=function(e){if(null!=e&&"object"==typeof e){this._predefinedColors=e,this._predefinedColorsStyles=this._prepareStyles(e);let t=this._hosts,n=t.length;for(let e=0;e<n;e++)this._injectPredefinedColors(t[e])}},$.prototype.setInsertionBlinking=function(e){null!=e&&(this._insertionBlinking=e)},$.getFilterBuilder=function(){return $._fb||($._fb=new K),$._fb},$._fb=null,$.prototype._requestRowRefresh=function(){if(this._hasColoring())for(let e=this._hosts.length;--e>=0;)this._hosts[e].requestRowRefresh()},$.prototype.getColumnPainter=function(e){return this._getColumnOption(e,"painter")},$.prototype.applyColor=function(e,t,n){let o=this.getColumnPainter(e);if(!o)return;n||(n={});let i={};i[this._getField(e)]=1,o.render(t,n,NaN,NaN,i)},$.prototype._onSectionBinding=function(e){let t,n,o,i,l,r,s,u,a,d,c,p,f,h,_=e.dataRows;if(!_)return;let g=e.section,m=g.getColumnCount(),C=e.fromRowIndex,y=e.toRowIndex,b=e.actualUpdate,T=e.dataSource,v=e.sender,k=b&&this._blinkingEnabled;k&&(c=$._mapInsertedRowId(e.events),this._compositeGrid&&(a=$._mergeUpdates(e)));let w,D=v._prevDataRows,N=Object.keys(D).length;for(n=C;n<y;++n){if(d=this._rowGetter(_[n]),!d)continue;l=null;let e=!1,C=null;for(k&&(this._realTimeGrid?(r=d.ROW_DEF,r&&(s=r.getRowId(),l=r.getUpdates())):(u=a[n],u&&(s=u.rid,l=u.changed)),C=s?c[s]:null,e=!C||this._insertionBlinking,e||(l=null)),s||(this._realTimeGrid?(r=d.ROW_DEF,s=r?r.getRowId():""):s=T.getRowId(n)),w=D[s],f={},h=!1,t=0;t<m;++t)if(o=g.getCell(t,n,!1),o&&(i=this.getColumnPainter(t),i)){p=this._getColumnData(t);let n=!1;if(p.blinking&&b){let r=!1,s=p.blinkingField||this._getField(t),u=d[s];if(e)if(w){let e=w[s];null!=e&&l&&l[s]&&(r=!0,n=i.blinkCell(o,u,e,d,d))}else N&&C&&(r=!0,n=i.blinkCell(o,u,u,d,d));r||i.verifyBlinking(o,d),f[s]=u,h=!0}p.coloringFields&&!n&&i.renderColoring(o,d)}h&&(D[s]=f),s=null}},$.prototype._onColumnAdded=function(e){e.context&&this.setColumnColoring(e.colIndex,e.context,e.sender)},$.prototype._onColumnRemoved=function(e){let t=e.columnData;if(!t)return;this._clearPainter(t);let n=e.colId;n&&(t.coloringFields&&this._removeFieldReferrer(n,"coloring"),t.blinkingField&&this._removeFieldReferrer(n,"blinking"));let o=t.field;if(o){let e=t.COL_DEF;if(!e||!e.isRealTimeField()){let e=this.getColumnCount();for(let n=0;n<e;n++)t=this._getColumnData(n),t.coloringFields&&t.coloringFields[o]&&this.setConditionalColoring(n,null),t.blinkingField===o&&this.setColumnBlinking(n,null)}}},$.prototype._onThemeLoaded=function(){this._requestRowRefresh()},$.prototype._clearPainter=function(e){if(e){$._cleanUpPrevFields();let t=e.painter;if(t){if(this._isValidPainter(t))return t.dispose(),e.painter=null,!0;t.clearBlinking()}}return!1},$.prototype._setEffectiveStyles=function(e,t){let n=null,o=!1,i=!1,l=t?t.length:0;for(let e=0;e<l;e++){let n=t[e];n.color&&(o=!0),n.backgroundColor&&(i=!0)}o&&i?n=q:o?n=W:i&&(n=V),e.setEffectiveStyles(n)},$._cleanUpPrevFields=function(){let e,t=this.getColumnCount(),n={},o=!1;for(let i=0;i<t;i++)e=this._getColumnData(i),e.blinking&&(n[e.blinkingField]=o=!0);let i,l,r=this._hosts,s=r.length;if(o){let e,t,o,u;for(l=0;l<s;l++)for(o in i=r[l],t=i._prevDataRows,t)for(u in e=t[o],e)n[u]||delete e[u]}else{for(l=0;l<s;l++)i=r[l],i._prevDataRows={};$._stopCleanUpInterval()}},$.cleanUpPrevRows=function(){let e,t,n,o,i,l,r,s=this._hosts,u=s.length;for(n=0;n<u;n++)if(e=s[n],t=e.getDataSource(),t)for(r=e._prevDataRows,i=Object.keys(r),o=0;o<i.length;o++)l=i[o],t.getRowData(l)||delete r[l]},$._startCleanUpInterval=function(){$._cleanUpTimer||($._cleanUpTimer=setInterval($.cleanUpPrevRows,18e5))},$._stopCleanUpInterval=function(){$._cleanUpTimer&&(clearInterval($._cleanUpTimer),$._cleanUpTimer=0)},$.prototype._hasColoring=function(){let e=this._hosts[0],t=this.getColumnCount();for(let n=0;n<t;n++)if(e.hasColumnClass(n,"conditionally-colored"))return!0;return!1},$.setThemeColors=I.setThemeColors,$.prototype.reloadThemeColors=function(){return I.reloadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded)};!function(e,t){if(!e||!t)return;if(!t.prototype.getName)return;let n=t.prototype.getName().replace(/Plugin$/,"");if(!n)return;let o=e.tr;o||(o=e.tr={});let i=o.grid;i||(i=o.grid={}),i[n+"Plugin"]=t,o[n+"Extension"]=t}(window,$)}]);