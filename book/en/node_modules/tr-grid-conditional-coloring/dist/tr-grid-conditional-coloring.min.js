!function(e){var t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(o,i,function(t){return e[t]}.bind(null,i));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o={inherits:function(e,t){function n(){}n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.base=function(e,n,o){n||(n="constructor");for(var i=arguments.length,r=new Array(i),l=2;l<i;l++)r[l-2]=arguments[l];return t.prototype[n].apply(e,r)}}},i=function(){};i.prototype._events=null,i.prototype._listenerCount=0,i.prototype.addEventListener=function(e,t){if(e&&t){this._events||(this._events={});var n=this._events[e];n?n.indexOf(t)<0&&(n.push(t),++this._listenerCount):(this._events[e]=[t],++this._listenerCount)}},i.prototype.removeEventListener=function(e,t){var n=this._events?this._events[e]:null;if(n){var o=n.indexOf(t);o>=0&&(n.splice(o,1),--this._listenerCount)}},i.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},i.prototype.hasListener=function(e){if(this._listenerCount){if(e){var t=this._events?this._events[e]:null;return!!t&&t.length>0}return!0}return!1},i.prototype.getListener=function(e,t){if(e){var n=this._events?this._events[e]:null;if(n)return t||(t=0),n[t]||null}return null},i.prototype.addListener=function(e,t){var n=e?e[t]:null;"function"==typeof n&&this.addEventListener(t,n)},i.prototype._prepareEventArguments=function(e,t){return t},i.prototype._dispatch=function(e,t){var n=this._events?this._events[e]:null;if(n){t=this._prepareEventArguments(e,t);for(var o=n.length,i=0;i<o;++i)n[i](t)}};i.preventDefault=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())};var r=function(e,t,n){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof e&&(this._resolveHandler=e),"function"==typeof t&&(this._rejectHandler=t),null!=n&&(this._ctx=n),this.promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype._fulfilled=!1,r.prototype.resolve=function(e){if(this._resolve){if(this._resolveHandler){var t=this._resolveHandler(e,this._ctx||this);null!=t&&(e=t)}this._resolve(e),this._finally()}},r.prototype.reject=function(e){if(this._reject){if(this._rejectHandler){var t=this._rejectHandler(e,this._ctx||this);null!=t&&(e=t)}this._reject(e),this._finally()}},r.prototype.isFulfilled=function(){return this._fulfilled},r.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var l=function(){};o.inherits(l,i),l.prototype._hosts=null,l.prototype._compositeGrid=null,l.prototype._realTimeGrid=null,l.prototype._rowGetter=null,l.prototype._initializedGrid=!1,l.prototype.listen=l.prototype.addEventListener,l.prototype.unlisten=l.prototype.removeEventListener,l.prototype.afterInit=function(e,t,n){var o=null;n&&n.getCoreGrid&&(o=n.getCoreGrid()),o&&(this.getGridApi()||this.setGridWrapper("compositegrid",n),this._compositeGrid&&o.loadPlugin(this,t)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?u:a,this._afterInit())},l.prototype._afterInit=function(){},l.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},l.prototype.hasMultiTableSupport=function(){return!1},l.prototype._prepareEventArguments=function(e,t){return t||(t={}),t.api=this.getGridApi(),t},l.prototype.getName=function(){return"GridPlugin"},l.prototype.initialize=function(e,t){},l.prototype.unload=function(e){this._dispose()},l.prototype.getRelativeGrid=function(e){var t=null;if(e.target){var n=(t=e.target).api;if(n&&n.getCoreGrid)return n.getCoreGrid()}else e.getElement?t=e.getElement():1===e.nodeType&&(t=e);if(t)for(var o=this._hosts.length;--o>=0;){var i=this._hosts[o];if(i.getElement().contains(t))return i}return null},l.prototype.setGridWrapper=function(e,t){e&&("compositegrid"===(e=e.toLowerCase())?this._compositeGrid=t:"realtimegrid"===e&&(this._realTimeGrid=t))},l.prototype.getGridApi=function(e){if(null==e)return this._compositeGrid||this._realTimeGrid;var t="number"==typeof e?this._hosts[e]:e;return t&&t._wrapper||null},l.prototype.getColumnName=function(e){if(this._compositeGrid){var t=this._compositeGrid.getColumnModel(e);if(t)return t.title?t.title:t.field}else{var n=this.getColumnIndex(e),o=this._realTimeGrid.getColumnDefinition(n);if(o)return o.getName()}return""},l.prototype.getColumnIndex=function(e){if("number"==typeof e)return e;if(this._compositeGrid){var t=this._compositeGrid.getColumnFields().indexOf(e);return t>-1?t:this._compositeGrid.getColumnIndex(e)}return this._realTimeGrid.getColumnIndex(e)},l.prototype.getColumnIndices=function(e){var t=this.getGridApi();if(t.getColumnIndices)return t.getColumnIndices(e);if(this._compositeGrid){for(var n,o=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),r=[],l=0;l<e.length;l++)if("number"==typeof(n=e[l]))n>=0&&n<i&&r.push(n);else{var s=o.indexOf(n);-1!==s&&r.push(s)}return r}return this._realTimeGrid.getColumnIndices(e)},l.prototype.getColumnId=function(e){if("string"==typeof e)return e;var t=this.getColumnCount();if(e<0||e>=t)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(e);var n=this._realTimeGrid.getColumnDefinition(e);return n?n.getId():""},l.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},l.prototype.getColumnField=function(e){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(e):""},l.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},l.prototype.getColumnCount=function(){if(this._hosts){var e=this._hosts[0];return e?e.getColumnCount():0}return 0},l.prototype._moveColumnById=function(e,t){var n=this._hosts,o=n?n.length:0;if(o){for(var i=0,r=0;r<o;++r)i|=n[r].moveColumnById(e,t);return!!i}return!1},l.prototype._reorderColumns=function(e,t){var n=this._hosts,o=n?n.length:0;if(o){for(var i=0,r=0;r<o;++r)i|=n[r].reorderColumns(e,t);return!!i}return!1},l.prototype._loadPlugin=function(e,t,n){return e||(e=t.getPlugin(n))||(e=t.loadPlugin(n))&&this._initializedGrid&&(e._initializedGrid=!0),e},l.prototype._requestPlugin=function(e,t,n){return this._initializedGrid?l.requestPlugin(e,t,n,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},l.requestPlugin=function(e,t,n,o,i){var s=null;if(e){var a=null;1===e.nodeType?a=e.api:e.getCoreGrid?a=e:e.getPlugin&&(s=e),a&&(s=a.getCoreGrid(),o||i||(a.getModel?o=a:i=a))}if(!s)return Promise.reject("Cannot find grid element");var u=s.getPlugin(t);if(u)return Promise.resolve(u);var d=new r;return setTimeout(l._onPluginRequested.bind(null,{grid:s,pluginRef:t,compositeGrid:o,realTimeGrid:i,config:n,deferred:d}),10),d.promise},l._onPluginRequested=function(e){var t=e.grid;if(!t.getElement())return e.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+e.pluginRef);var n=t.getPlugin(e.pluginRef);if(n)return e.deferred.resolve(n);var o=!1;return e.pluginRef.beforeInit&&(o=!0,e.pluginRef.beforeInit(t.getElement(),e.config,!0)),(n=t.loadPlugin(e.pluginRef,e.config))?(!o&&n.beforeInit&&(o=!0,n.beforeInit(t.getElement(),e.config)),n.setGridWrapper&&(e.compositeGrid?n.setGridWrapper("compositegrid",e.compositeGrid):e.realTimeGrid&&n.setGridWrapper("realtimegrid",e.realTimeGrid)),n.afterInit&&n.afterInit(),e.deferred.resolve(n)):e.deferred.reject("Unable to load required dependency: "+e.pluginRef)},l.prototype._getPlugin=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getPlugin(e):null},l.prototype._getColumnData=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getColumnData(e):null},l.prototype._getColumnOption=function(e,t,n){var o=this._getColumnData(e,n);return o?o[t]:null},l.prototype._newColumnData=function(e,t){if(null==t&&(t=this._hosts[0]),!t)return{};var n=t.getColumnData(e);return n||(n=t.setColumnData(e,{})),n},l.prototype._getField=function(e){var t=this._compositeGrid||this._realTimeGrid;return t?t.getColumnField(e):""},l.prototype._getRowData=function(e){return this._realTimeGrid&&e?e.ROW_DEF.getRowData():e},l.prototype._getRow=function(e,t){return d(e.getRowDataAt(t))},l.prototype._getData=function(e,t,n){var o=this._getRow(e,t);return o?o[n]:void 0},l.prototype._setData=function(e,t,n,o){if(this._realTimeGrid){var i=s(e,t);i&&i.setData(n,o)}else"number"==typeof t?e.setDataAt(t,n,o):e.setData(t,n,o)},l.prototype._setRowData=function(e,t,n){if(this._realTimeGrid){var o=s(e,t);o&&o.setRowData(n)}else"number"==typeof t?e.setRowDataAt(t,n):e.setRowData(t,n)},l.prototype._setStaticData=function(e,t,n,o){if(this._realTimeGrid){var i=s(e,t);i&&i.setStaticData(n,o)}else this._setData(e,t,n,o)},l.prototype._setColumnData=function(e,t,n,o){if(t){var i=Array.isArray(o)?o:e.getAllRowIds(!0),r=i?i.length:0;if(r)if(1!==r){var l=Array.isArray(n)?n:i.map((function(){return n}));if(this._realTimeGrid){for(var s=0;s<r;++s){var a=e.getRowData(i[s]);if(a){var u=a.ROW_DEF;u&&(u.getRowData()[t]=l[s])}}e.dispatchGlobalChange||(e=e.getDataSource()),e&&e.dispatchGlobalChange&&e.dispatchGlobalChange()}else e.setColumnData(t,l,i)}else this._setData(e,i[0],t,Array.isArray(n)?n[0]:n)}},l.prototype._activateColumnRenderer=function(e,t,n){if(null!=e){var o=this._realTimeGrid;o?o.activateColumnRenderer(e,t,n):"function"==typeof n?this._hosts[0].setColumnDataBindingHandler(e,n):this._hosts[0].setColumnDataBindingHandler(e,null)}};var s=function(e,t){var n="number"==typeof t?e.getRowDataAt(t):e.getRowData(t);return n&&n.ROW_DEF||null},a=function(e){return e},u=function(e){return e?e.ROW_DEF.getRowData():null},d=function(e){if(e){var t=e.ROW_DEF;return t?t.getRowData():e}return null},c=function(e,t,n){if(!e)return null;if(!t||e===t)return e;var o;if(n)for(var i=n.length,r=0;r<i;++r)(o=n[r])&&p(e,t,o);else for(o in t)p(e,t,o);return e},p=function(e,t,n){var o=t[n];if(null!=o){var i=e[n];Array.isArray(i)?e[n]=i.concat(o):Array.isArray(o)&&i?e[n]=o.concat(i):e[n]=o}},f=function(e){return Array.isArray(e)?"{\n"+e.join("\n")+"\n}":e},h=function(e){return e.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},_=function(e,t){if(!e)return null;var n=document.createElement("style");n.textContent="\n"+e+"\n";var o,i=function(e){var t;if(e&&(e.shadowRoot?t=e.shadowRoot:e.getRootNode&&(t=e.getRootNode()),t&&t!==document&&t!==e))return t;return null}(t),r=!0;return i||(r=!1,i=document.head),r&&i.children&&i.children.length&&(o=i.children[0]),o?i.insertBefore(n,o):i.appendChild(n),n},g=function(e,t){for(var n in t||(t=[]),e){var o=e[n];"object"==typeof o?g(o,t):t.push(o)}return t},m=function(e){if(!e||"string"!=typeof e)return"";if("#"===e.charAt(0))return e;var t=e.match(/\d+/g);if(!t||t.length<3)return e;for(var n="#",o=0;o<3;o++){var i=+t[o];i>=16||(n+="0"),n+=i?i.toString(16).toUpperCase():"0"}return n},v={"⇧":1,"B⇧":1,"↑":1,"B↑":1,26:1,1:1,'"1"':1,"-1":-1,"⇩":-1,"B⇩":-1,"↓":-1,"B↓":-1,27:-1,2:-1,'"2"':-1},C={CF_TICK:1,PRCTCK_1:1,BID_TICK:1,ASK_TICK:1},y={},b=function(e,t){"attributes"==t.type&&"lang"==t.attributeName&&(e.lang=t.target.lang||"en")},T=function(e,t,n){"attributes"===n.type&&(null!=t?n.attributeName===t&&e(n.target.getAttribute(t)):e(n.target))};y._getNewId=function(){return"observer_"+ ++y._id},y._addObserver=function(e,t,n){var o=n;o||(o={}),o.attributes=!0,y._observer.observe(e,o),y._addListener(e,t)},y._onMutationCallback=function(e){for(var t=0;t<e.length;t++)for(var n=e[t],o=y._listeners[n.target._observeId],i=0;i<o.length;i++)o[i](n)},y._addListener=function(e,t){var n=y._listeners;if(n||(n=y._listeners={}),!e._observeId){var o=y._getNewId();e._observeId=o}n[e._observeId]||(n[e._observeId]=[]);var i=n[e._observeId];i.indexOf(t)<0&&i.push(t)},y.addLanguageListener=function(e){e&&(e.lang=document.documentElement.lang||"en",y._addObserver(document.documentElement,b.bind(null,e)))},y.addAttributeListener=function(e,t,n){e&&t&&y._addObserver(e,T.bind(null,t,n))},y._observer=new MutationObserver(y._onMutationCallback),y._listeners={},y._id=0;var k={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},w={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};w.themeColors=w._defaultColors,w._components={},w._themeName="",w._elfVersion=0,w._dummyIcon=null,w._iconLoaded=!1,w._profileName=null,w._callbacks=[],w._observed=!1,w._pendingResolve=!1,w._themeLoaded=!1,w._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},w._icons["halo-theme"]=w._icons["elf-theme-halo"],w._icons["solar-theme"]=w._icons["elf-theme-solar"],w.getElfVersion=function(){if(!w._elfVersion){var e=0;if(window.EFX_GRID){var t=window.EFX_GRID.version;e=+(t=t.split("."))[0]}else if(window.elf)if(window.elf.version){var n=window.elf.version.match(/\d/);n&&n[0]&&(e=parseInt(n[0],10))}else window.elf.customElements?e=3:window.customElements&&(e=4);else window.Polymer&&(e=1);w._elfVersion=e}return w._elfVersion},w.hasComponent=function(e){var t=w._components[e];if(null==t){t=0;var n=w.getElfVersion();if(e)1===n?document.createElement(e).is===e&&(t=n):n>1&&(window.customElements&&window.customElements.get(e)||document.createElement(e).constructor!==HTMLElement)&&(t=n),w._components[e]=t}return t},w.toLangString=function(e){if(!e)return"";if("zh-hant"===(e=e.toLowerCase()))return"zh-Hant";var t=e.replace(/-.*/,"");return k[t]?t:""},w.hasTheme=function(e){return e===w.getThemeName()},w.getThemeName=function(e){return w._themeName||(w._themeName=w.getCssVariable("--theme-name",document.documentElement)),w._themeName},w.setThemeName=function(e){w._themeName=e},w.isThemeLoaded=function(){return w._themeLoaded},w.getColors=function(){return w.themeColors},w.isHaloTheme=function(e){return null==e&&(e=w.getThemeName()),!!e&&e.indexOf("halo")>=0},w.injectIcons=function(e,t){if("object"==typeof e){var n=w.getThemeName();e.themeName=n;var o=w.getElfVersion();e.elfVersion=o;var i=w._icons[n];i&&(e.icons=i)}},w.getIconList=function(){var e=w._icons[w.getThemeName()];return e?g(e):[]},w._onIconPreloaded=function(){if(w._dummyIcon){var e=w._dummyIcon.parentNode;e&&e.removeChild(w._dummyIcon),w._dummyIcon=null}},w.prepareIconPreloading=function(){if(!w._iconLoaded){w._iconLoaded=!0;var e=w.getIconList();if(e.length){setTimeout(w._onIconPreloaded,10);var t=w._dummyIcon=document.createElement("coral-icon");return t.style.transform="scale(0)",document.body.appendChild(t),e}}return null},w.getCssVariable=function(e,t){var n="",o=t||document.body;return window&&"string"==typeof e&&1===o.nodeType&&e.match(/^--/)&&(n=(n=window.getComputedStyle(o).getPropertyValue(e)).replace(/[\"\']/g,"")),n},w.getCssVariables=function(e,t){var n=t||document.body;if(window&&1===n.nodeType){var o=window.getComputedStyle(n);for(var i in e){var r=e[i];r&&r.match(/^--/)&&(e[i]=o.getPropertyValue(r).replace(/\"/g,""))}}return e||null},w.setRTK=function(e){null!=e&&(w._rtk=e)},w.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},w._addThemeChangedCallback=function(e){var t=w._callbacks;t.indexOf(e)<0&&t.push(e)},w.reloadThemeColors=function(){return w._deferred&&w._deferred.isFulfilled()?(w._profileName="",w._themeLoaded=!1,w.themeReady=null,w.getThemeColors()):w.themeReady},w.getThemeColors=function(e){if("function"==typeof e&&w._addThemeChangedCallback(e),w.themeReady)return w.themeReady;var t=w._deferred=new r;w.themeReady=t.promise;var n=w.getMovementColorProfile();if(n)n!==w._profileName?setTimeout(w._profileNameRetrieved,100):w._deferred.resolve(w.themeColors);else{var o={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},i=window?window.JET:null;if(w._themeLoaded=!1,w._rtk&&w._rtk.Settings)w._rtk.Settings.getAsync(o).then(w._loadingProfileSuccess).catch(w._loadingProfileFailure);else if(i&&i.Settings)try{i.Settings.read(w._loadingProfileSuccess,o)}catch(e){w._loadingProfileFailure()}else setTimeout(w._profileNameRetrieved,100)}return t.promise};var D=function(e){if(e!==w._profileName){w._retrieveThemeColors(e),w._pendingResolve&&(w._pendingResolve=!1,w._deferred.resolve(w.themeColors));for(var t=w._callbacks,n=0;n<t.length;n++)t[n]()}};w._loadingProfileSuccess=function(e){e&&document.documentElement.setAttribute("movement-color-profile",e.toLowerCase()),w._observed?w._pendingResolve=!0:w._profileNameRetrieved(e)},w._loadingProfileFailure=function(){w._retrieveThemeColors(),w._observed||(w._observed=!0,y.addAttributeListener(document.documentElement,D,"movement-color-profile")),w._deferred.reject("Failed to get movement color profile from settings.")},w._profileNameRetrieved=function(){var e=w.getMovementColorProfile();w._retrieveThemeColors(e),w._observed||(w._observed=!0,y.addAttributeListener(document.documentElement,D,"movement-color-profile")),w._deferred.resolve(w.themeColors)},w._retrieveThemeColors=function(e){w._themeLoaded=!0,w._profileName=e;var t=w.themeColors=w.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});t.up||(t.up=w._defaultColors.up,t.down=w._defaultColors.down,t.level=w._defaultColors.level,t.tickUp=w._defaultColors.tickUp,t.tickDown=w._defaultColors.tickDown),t.positive=t.up,t.negative=t.down,t.neutral=t.level;var n=document.createElement("table");n.style.visibility="hidden",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0";var o=n.insertRow(-1),i=o.insertCell(-1);document.body.appendChild(n);var r=window.getComputedStyle(o);t.tableBg=r.backgroundColor;var l=window.getComputedStyle(i);t.tableText=l.color,t.tableBorder=l.borderColor,t.tableText===t.tableBorder&&(i.className="tr-lg",l=window.getComputedStyle(i),t.tableBg=l.backgroundColor,t.tableText=l.color,t.tableBorder=l.borderColor,t.tableText===t.tableBorder&&(t.tableBg=w._defaultColors.baseGrid,t.tableText=w._defaultColors.baseText,t.tableBorder="")),t.tableBg=m(t.tableBg),t.tableText=m(t.tableText),t.tableBorder=m(t.tableBorder),document.body.removeChild(n),t.baseGrid=t.tableBg,t.baseText=t.tableText,t.trackColor=t.primary||w._defaultColors.trackColor};var N={"||":1,"&&":2,"<":3,">":3,"<=":3,">=":3,"!=":3,"=":3,"==":3,"===":3,"+":4,"-":4,"*":5,"%":6,"/":6,"!":7,"!!":7},A={"+":function(e,t){return e+t},"-":function(e,t){return e-t},"*":function(e,t){return e*t},"/":function(e,t){return e/t},"%":function(e,t){return e%t},"<":function(e,t){return e<t},">":function(e,t){return e>t},"<=":function(e,t){return e<=t},">=":function(e,t){return e>=t},"==":function(e,t){return e==t},"!=":function(e,t){return e!=t},"&&":function(e,t){return e&&t},"||":function(e,t){return e||t},"!":function(e,t){return!e},"!!":function(e,t){return!!e}},E={"+":2,"-":2,"*":2,"/":2,"%":2,"<":2,">":2,"<=":2,">=":2,"==":2,"!=":2,"&&":2,"||":2,"!":1,"!!":1},S=function(e,t,n,o){var i={value:t,type:n};return o&&(i.dataType=o),"operator"===n?i.precedence=N[t]:"parenthesis"===n&&(i.precedence=0),e.push(i),e.length-1},x={_tokens:[],_withString:function(e){return" #"+S(x._tokens,e.substring(1,e.length-1),"literal","string")+"#"},_withField:function(e){return" #"+S(x._tokens,e,"literal","variable")+"#"},_withFieldInBrackets:function(e){return x._withField(e.substring(1,e.length-1))},_withNegativeNumber:function(e){var t=+e;return t==t?" #"+S(x._tokens,t,"literal","number")+"#":""},_withPositiveNumber:function(e){return 35===e.charCodeAt(0)?e:x._withNegativeNumber(e)},_withOperator:function(e){return N[e]?("="!=e&&"==="!=e||(e="=="),"#"+S(x._tokens,e,"operator")+"#"):""},_withParenthesis:function(e){return"#"+S(x._tokens,e,"parenthesis")+"#"},_tester:function(e){for(var t=e._rpn,n=t.length,o=0,i=0,r=0;r<n;++r){var l=t[r];if("literal"!==l.type){var s=E[l.value];if(!(o>=s))return console.warn("Cannot parse an expression with insufficient number of operands"),!0;o-=s}++o>i&&(i=o)}return 1!==o||(e._stackSize=i,!1)},_filter:function(e,t){for(var n,o=e._rpn,i=new Array(e._stackSize),r=o.length,l=0,s=0;s<r;++s){var a=o[s],u=a.value;"literal"===a.type?n="variable"!==a.dataType?u:t?t[u]:null:1===E[u]?(n=A[u](i[l-1]),l-=1):(n=A[u](i[l-2],i[l-1]),l-=2),i[l++]=n}return!!i[0]},parse:function(e){if("function"==typeof e)return e;if(!e||"string"!=typeof e)return null;var t=e.trim();if(!t)return null;x._tokens.length=0,t=(t=(t=(t=(t=(t=(t=(t=t.replace(/".+?"/g,x._withString)).replace(/'.+?'/g,x._withString)).replace(/\[.+?\]/g,x._withFieldInBrackets)).replace(/-[0-9.]+/g,x._withNegativeNumber)).replace(/[0-9.#]+/g,x._withPositiveNumber)).replace(/[a-zA-Z_]\w*/g,x._withField)).replace(/[\-\/+*%!=<>&|]+/g,x._withOperator)).replace(/[()]/g,x._withParenthesis);var n=x._tokens,o=n.length;if(!o)return null;var i,r,l,s=[],a=t.match(/#[0-9]+#/g);for(i=0;i<o;++i){var u=a[i];if("literal"===(l=(r=n[+u.substring(1,u.length-1)]).type)){var d=s[s.length-1];if(d&&"literal"===d.type){if(!(r.value<0&&"number"===r.dataType))return console.warn("Cannot parse an expression with insufficient number of operators"),null;S(s,"-","operator"),r.value*=-1}}s.push(r)}x._tokens.length=0,o=s.length;var c=[],p=[],f=null,h=!1;for(i=0;i<o;++i)if("literal"===(l=(r=s[i]).type))c.push(r);else if("parenthesis"===l)if("("===r.value)p.push(r);else{for(h=!1;p.length;){if("("===(f=p.pop()).value&&"parenthesis"===f.type){h=!0;break}c.push(f)}h||console.warn("No left parenthesis paired with the right one")}else{for(;p.length&&!(r.precedence>p[p.length-1].precedence);)c.push(p.pop());p.push(r)}for(h=!1;p.length;)"("===(f=p.pop()).value&&"parenthesis"===f.type?h=!0:c.push(f);if(h&&console.warn("No right parenthesis paired with the left one"),!c.length)return null;var _={_rpn:c};return x._tester(_)?null:x._filter.bind(null,_)}},R=function(){this._conditions=[],this._scopes=[],R._painters.push(this)};R.ColoringTypes={TEXT:1,HEATMAP:2,CONDITIONAL:3},R.prototype._coloringType=0,R.prototype._conditions=null,R.prototype._effectiveStyles=null,R.prototype._blinkCondition=null,R.prototype._scopes,R.prototype._columnStats=null,R.prototype._levelColorDisabled=!1,R.prototype._blinkingDuration=250,R._runningBlinkId=0,R._painters=[],R._emptyAry=[],R._emptyObj={},R._bgObj={backgroundColor:"",color:""},R._colorObj={color:""},R.bgStyles=["backgroundColor","color"],R.nonBgStyles=["fontSize","fontWeight","fontStyle","textAlign","textDecoration"],R.supportedStyles=R.bgStyles.concat(R.nonBgStyles),R.themeReady=null,R.parse=x.parse,R.prototype.dispose=function(){var e=R._painters.indexOf(this);e>=0&&R._painters.splice(e,1),this.reset(),this._conditions=null,this._scopes.length=0,this._blinkCondition=null},R.prototype.reset=function(){this._setColoringType(0);var e=this._scopes.length;if(e){for(var t=0;t<e;++t){var n=this._scopes[t];R._clearBlinkTimer(n)&&n._restorer();var o=n.cell;o&&delete o.blinking,n.cell=null}this._scopes.length=0}this._blinkCondition=null},R.prototype.resetColoring=function(){this._setColoringType(0),this._effectiveStyles=null,this._conditions.length=0},R.prototype.resetBlinking=function(){this._blinkCondition=null,this._scopes.length=0},R.prototype.clearBlinking=function(){this._blinkCondition=null;var e=this._scopes.length;if(e){for(var t=0;t<e;++t){var n=this._scopes[t];R._clearBlinkTimer(n)&&n._restorer();var o=n.cell;o&&delete o.blinking,n.cell=null}this._scopes.length=0}},R.prototype.resetHeatMap=function(){this._conditions.length=0,this._columnStats=null},R.prototype.clearHeatMap=function(){return this._blinkCondition?(this._setColoringType(0),this.resetHeatMap(),!1):(this.dispose(),!0)},R.prototype.applyThemeColor=function(){var e=w.getColors();if(this._coloringType===R.ColoringTypes.HEATMAP){var t=this._conditions[0];if(t&&(t.textMode?t.baseColor=e.baseText:t.baseColor=e.baseGrid,t.useThemeColor)){var n=e.up,o=e.down,i=e.level===e.baseText?"":e.level;R._setUpDownColors(t,n,o,i)}}this._blinkCondition&&this._blinkCondition.useThemeColor&&R._setUpDownColors(this._blinkCondition,e.up,e.down,e.level,!0)},R.prototype.getConditions=function(){return this._conditions},R.prototype.getColoringType=function(){return this._coloringType},R.prototype._setColoringType=function(e){this._coloringType!==e&&(this._coloringType=e)},R.prototype.setEffectiveStyles=function(e){this._effectiveStyles=e},R.prototype.getEffectiveStyles=function(){return this._effectiveStyles},R.prototype.setConditions=function(e){this._conditions.length=0,this._setColoringType(R.ColoringTypes.CONDITIONAL);for(var t=e.length,n=0;n<t;n++)this._addCondition(e[n])},R.prototype.setColumnStats=function(e){this._columnStats=e&&e.getMin?e:null},R.prototype.getColumnStats=function(){return this._columnStats},R.prototype._addCondition=function(e){var t=e.expression;t&&(e._fn=x.parse(t.text||t),this._conditions.push(e))},R.prototype.addHeatmap=function(e,t,n,o,i,r){this._setColoringType(R.ColoringTypes.HEATMAP);var l={heatmap:!0};return l.field=e,l.expression=R._heatMapCondition.bind(l),l.midPoint=t,R._setUpDownColors(l,n,o),l.baseColor=i,!0!==r&&"text"!==r||(l.textMode=!0),this._addCondition(l),l},R.prototype.addHeatmapWithTheme=function(e,t,n){var o=w.themeColors,i=this.addHeatmap(e,t,o.up,o.down,o.baseGrid,n);return!0!==n&&"text"!==n||(i.baseColor=o.baseText),i.useThemeColor=!0,i},R.prototype._addColorText=function(e,t,n,o,i){this._setColoringType(R.ColoringTypes.TEXT);var r={};return r.field=t,r.expression=e.bind(null,t),r.upClass=n,r.downClass=o,r.levelClass=i,this._addCondition(r),r},R.prototype.addColorText=function(e,t,n,o){return this._addColorText(C[e]?R._tickColorTextCondition:R._colorTextCondition,e,t,n,o)},R.prototype.addColorTextWithTheme=function(e){return this.addColorText(e,"positive","negative","neutral")},R.prototype.addTickColorText=function(e,t,n){return this.addColorText("CF_TICK",e,t,n)},R.prototype.addTickColorTextWithTheme=function(){var e=w.themeColors,t=this.addTickColorText(e.tickUp,e.tickDown,e.level);return t.useThemeColor=!0,t},R.prototype.addTickBlink=function(e,t,n,o){return this.addBlink("CF_TICK",e,t,n,o)},R.prototype.addTickBlinkWithTheme=function(e){var t=w.themeColors,n=this.addTickBlink(t.tickUp,t.tickDown,t.level,e);return n.useThemeColor=!0,n},R.prototype.addBlink=function(e,t,n,o,i){return this._addBlink(C[e]?R._tickBlinkCondition:R._fieldBlinkCondition,e,t,n,o,i)},R.prototype.addBlinkWithTheme=function(e,t){var n=w.themeColors,o=this.addBlink(e,n.up,n.down,n.level,t);return o.useThemeColor=!0,o},R.prototype._addBlink=function(e,t,n,o,i,r){var l=this._blinkCondition={};return l.blink=!0,l.blinkId=R._runningBlinkId++,l.field=t,l._fn=l.expression=e,!0!==r&&"border"!==r||(l.border=!0),R._setUpDownColors(l,n,o,i,!0),l},R.prototype.renderForPrinting=function(e,t,n,o){if(e){var i=this._getStyles(t,n,o),r=i.cssClass;null!=r?(elem._coloringCssClass&&elem._coloringCssClass!==r&&(elem.classList.remove(elem._coloringCssClass),elem._coloringCssClass=null),r&&(elem.classList.add(r),elem._coloringCssClass=r)):(e._coloringCssClass&&(e.classList.remove(e._coloringCssClass),e._coloringCssClass=null),e.style.backgroundColor=i.backgroundColor||"",e.style.color=i.color||"")}},R._colorTextCondition=function(e,t){var n=t[e];if(n||0===n){if(n>0)return 1;if(n<0)return-1}return"u"},R._tickColorTextCondition=function(e,t){var n=v[t[e]];if(n)return n},R._heatMapCondition=function(e,t,n){var o=e[this.field],i=o||0===o?o-this.midPoint:NaN;if(0===i||i!=i)return 0;var r=1;return i>0?(r=n-this.midPoint)<0&&(r=t-this.midPoint):(r=t-this.midPoint)>0&&(r=n-this.midPoint),r<0&&(r=-r),i/r},R._tickBlinkCondition=function(e){var t=v[e];if(t)return t},R._fieldBlinkCondition=function(e,t){return e>t?1:e<t?-1:0},R._borderRestorer=function(e){e.blinkTimer=0;var t=e.cell.getElement();t&&(t.style.border="")},R._cellRestorer=function(e){e.blinkTimer=0;var t=e.cell.getElement();if(t){var n=e.rowData,o=NaN,i=NaN;if(this._coloringType===R.ColoringTypes.HEATMAP){var r=this._columnStats;r&&(o=r.getMin(),i=r.getMax())}var l=this._getStyles(n,o,i),s=l.cssClass;null!=s?(t._coloringCssClass&&t._coloringCssClass!==s&&(t.classList.remove(t._coloringCssClass),t._coloringCssClass=null),s&&(t.classList.add(s),t._coloringCssClass=s),t.style.backgroundColor="",t.style.color=""):(t._coloringCssClass&&(t.classList.remove(t._coloringCssClass),t._coloringCssClass=null),t.style.backgroundColor=l.backgroundColor||"",t.style.color=l.color||"")}},R.prototype._getStyles=function(e,t,n){if(!e)return R._emptyObj;for(var o=this._conditions.length,i=0;i<o;++i){var r,l=this._conditions[i],s=l._fn;try{var a=s&&s(e,t,n)}catch(e){}if(a)return this._coloringType===R.ColoringTypes.HEATMAP?(r=a>0?R.blendColor(l.baseColor,l.upColor,a):R.blendColor(l.baseColor,l.downColor,-a),l.textMode?(R._colorObj.color=R.num2Hex(r),R._colorObj):(R._bgObj.backgroundColor=R.num2Hex(r),R._bgObj.color=R.blackAndWhite(r),R._bgObj)):this._coloringType===R.ColoringTypes.TEXT?(l.cssClass=a>0?l.upClass:a<0?l.downClass:this._levelColorDisabled?"":l.levelClass,l.cssClass=l.cssClass||"",l):l}return R._emptyObj},R.blendColor=function(e,t,n){n>1?n=1:n<0&&(n=0);for(var o=R.hex2Num(e),i=R.hex2Num(t),r=[],l=0;l<3;++l){var s=(i[l]-o[l])*n;r.push(o[l]+s)}return r},R.blackAndWhite=function(e){return Math.sqrt(e[0]*e[0]*.241+e[1]*e[1]*.691+e[2]*e[2]*.068)>=135?"#000000":"#FFFFFF"},R.rgb2Hex=m,R.num2Hex=function(e){return"#"+(16777216+(e[2]|e[1]<<8|e[0]<<16)).toString(16).slice(1)},R.num2Rgb=function(e){return"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},R.hex2Num=function(e){var t=parseInt(e.replace(/[^0-9A-F]/gi,""),16);return[t>>16&255,t>>8&255,255&t]},R.hex2Rgb=function(e){if(e){var t=parseInt(e.replace(/[^0-9A-F]/gi,""),16);return"rgb("+(t>>16&255)+", "+(t>>8&255)+", "+(255&t)+")"}return""},R.themeChanged=function(){},R.setThemeColors=function(){},R._onThemeChanged=function(){for(var e=R._painters,t=e.length;--t>=0;)e[t].applyThemeColor()},R.loadThemeColors=function(){return R.themeReady||(R.themeReady=w.getThemeColors(R._onThemeChanged).then(R._onThemeChanged).catch(R._onThemeChanged)),R.themeReady},R.reloadThemeColors=function(){return R.themeReady=w.reloadThemeColors().then(R._onThemeChanged).catch(R._onThemeChanged),R.themeReady},R.clearCellStyle=function(e,t){var n=e.getElement();if(n){var o=e.blinking;if(o&&(R._clearBlinkTimer(o),delete e.blinking,o.cell=null),n._coloringCssClass&&n.classList.remove(n._coloringCssClass),t||(t=R.supportedStyles),Array.isArray(t))for(var i=t.length;--i>=0;)n.style[t[i]]="";else for(var r in t)n.style[r]=""}},R._setUpDownColors=function(e,t,n,o,i){e.upColor=t,null!=t&&i&&(e.contrastUpColor=R.getOppositeColor(t)),e.downColor=n,null!=n&&i&&(e.contrastDownColor=R.getOppositeColor(n)),e.levelColor=o,null!=o&&i&&(e.contrastLevelColor=R.getOppositeColor(o))},R._clearBlinkTimer=function(e,t){return!!e.blinkTimer&&(clearTimeout(e.blinkTimer),e.blinkTimer=0,!0)},R.getOppositeColor=function(e){if("string"==typeof e){if("#"===e.charAt(0)){var t=R.hex2Num(e);return R.blackAndWhite(t)}}else if(Array.isArray(e))return R.blackAndWhite(e);return""},R.prototype.render=function(e,t,n,o,i){null!=n&&n==n?this._paintCell(e,t,n,o):this._conditions.length&&this._coloringType===R.ColoringTypes.CONDITIONAL&&this._paintCell(e,t)},R.prototype.renderHeatMap=function(e,t,n,o){this._paintCell(e,t,n,o)},R.prototype.renderColoring=function(e,t){this._paintCell(e,t)},R.prototype._paintCell=function(e,t,n,o){if(e){var i=e.getElement();if(i){var r,l=this._blinkCondition;if(!(l&&(r=e.blinking)&&r.blinkTimer)||l.border){var s=this._getStyles(t,n,o),a=i.style,u=s.cssClass;i._coloringCssClass&&i._coloringCssClass!==u&&(i.classList.remove(i._coloringCssClass),i._coloringCssClass=null),null!=u?u&&(i.classList.add(u),i._coloringCssClass=u):(s.backgroundColor?a.backgroundColor=s.backgroundColor:this._effectiveStyles&&!this._effectiveStyles.backgroundColor||(a.backgroundColor=""),s.color?a.color=s.color:this._effectiveStyles&&!this._effectiveStyles.color||(a.color=""))}}}},R.prototype.blink=function(e,t,n){this._blinkCell(e,n,t)},R.prototype.blinkCell=function(e,t,n,o){if(!this._blinkCondition)return!1;var i=this._blinkCondition._fn(t,n);return this._blinkCell(e,o,i)},R.prototype._blinkCell=function(e,t,n){if(!e)return!1;if(this._levelColorDisabled&&!n)return!1;var o=e.getElement();if(!o)return!1;var i=this._blinkCondition;if(!i)return!1;var r,l,s=e.blinking;if(s||((s={}).cell=e,e.blinking=s,this._scopes.push(s)),s.blinkId!==i.blinkId){s.blinkId=i.blinkId,s.field=i.field;var a=i.border?R._borderRestorer:R._cellRestorer;s._restorer=a.bind(this,s)}s.rowData=t,n>0?(r=i.upColor,l=i.contrastUpColor):n<0?(r=i.downColor,l=i.contrastDownColor):(r=i.levelColor,l=i.contrastLevelColor);var u=!0;return i.border?(o.style.border="1px solid "+r,u=!1):(o.style.backgroundColor=r,o.style.color=l),R._clearBlinkTimer(s),s.blinkTimer=setTimeout(s._restorer,this._blinkingDuration),u},R.prototype.verifyBlinking=function(e,t){var n=e.blinking;n&&n.blinkTimer&&n.rowData!==t&&(n.rowData=t,R._clearBlinkTimer(n)&&n._restorer())},R.prototype.disableLevelColor=function(e){this._levelColorDisabled=!1!==e},R.prototype.setBlinkingDuration=function(e){"number"==typeof e&&(this._blinkingDuration=e)};var F={EQ:{id:"EQ",name:"Equal to",type:"string",positive:1,caseSensitive:1,formula:"str == input"},NEQ:{id:"NEQ",name:"Not equal to",type:"string",positive:0,caseSensitive:1,formula:"str != input"},NUMEQ:{id:"NUMEQ",name:"Number equal to",type:"number",positive:1,caseSensitive:1,formula:"val == input"},NUMNEQ:{id:"NUMNEQ",name:"Number not equal to",type:"number",positive:0,caseSensitive:1,formula:"val != input"},GT:{id:"GT",name:"Greater than",type:"number",positive:1,caseSensitive:1,formula:"val > input"},GTE:{id:"GTE",name:"Greater than or equal to",type:"number",positive:1,caseSensitive:1,formula:"val >= input"},LT:{id:"LT",name:"Less than",type:"number",positive:1,caseSensitive:1,formula:"val < input"},LTE:{id:"LTE",name:"Less than or equal to",type:"number",positive:1,caseSensitive:1,formula:"val <= input"},BEGIN:{id:"BEGIN",name:"Begin with",type:"string",positive:1,caseSensitive:0,formula:"str.indexOf(input) === 0"},NBEGIN:{id:"NBEGIN",name:"Not begin with",type:"string",positive:0,caseSensitive:0,formula:"str.indexOf(input) !== 0"},END:{id:"END",name:"End with",type:"string",positive:1,caseSensitive:0,formula:"(str.length >= input.length) && str.lastIndexOf(input) === (str.length - input.length)"},NEND:{id:"NEND",name:"Not end with",type:"string",positive:0,caseSensitive:0,formula:"(str.length < input.length) || str.lastIndexOf(input) !== (str.length - input.length)"},CONT:{id:"CONT",name:"Contain",type:"string",positive:1,caseSensitive:0,formula:"str.indexOf(input) >= 0"},NCONT:{id:"NCONT",name:"Not contain",type:"string",positive:0,caseSensitive:0,formula:"str.indexOf(input) < 0"},EQ_BLANK:{id:"EQ_BLANK",name:"Equal to blank value",type:"blank",positive:1,caseSensitive:1,formula:"!val && val !== 0"},EQ_NBLANK:{id:"EQ_NBLANK",name:"Equal to non blank value",type:"blank",positive:1,caseSensitive:1,formula:"(val || val === 0) ? true : false"},DT:{id:"DT",name:"Date is",type:"date",positive:1,caseSensitive:1,formula:"ts === input"},DTA:{id:"DTA",name:"Date is After",type:"date",positive:1,caseSensitive:1,formula:"ts > input"},DTB:{id:"DTB",name:"Date is Before",type:"date",positive:1,caseSensitive:1,formula:"ts < input"}};F.TXTEQ=F.EQ,F.BLANK=F.EQ_BLANK,F.NBLANK=F.EQ_NBLANK,F.NEQ_BLANK=F.EQ_NBLANK,F.GREATER_THAN=F.GT,F.GREATER_THAN_OR_EQUAL_TO=F.GTE,F.EQUAL_TO=F.EQ,F.LESS_THAN=F.LT,F.LESS_THAN_OR_EQUAL_TO=F.LTE,F.TEXT_THAT_CONTAINS=F.CONT,F.TEXT_THAT_NOT_CONTAINS=F.NCONT,F.TEXT_IS=F.EQ,F.NOT_BLANK=F.EQ_NBLANK;var I={EQ:function(e,t){return e==t},NEQ:function(e,t){return e!=t},NUMEQ:function(e,t){return e==t},NUMNEQ:function(e,t){return e!=t},GT:function(e,t){return e>t},GTE:function(e,t){return e>=t},LT:function(e,t){return e<t},LTE:function(e,t){return e<=t},BEGIN:function(e,t){return 0===e.indexOf(t)},NBEGIN:function(e,t){return 0!==e.indexOf(t)},END:function(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length},NEND:function(e,t){return e.length<t.length||e.lastIndexOf(t)!==e.length-t.length},CONT:function(e,t){return e.indexOf(t)>=0},NCONT:function(e,t){return e.indexOf(t)<0},EQ_BLANK:function(e,t){return!e&&0!==e},EQ_NBLANK:function(e,t){return!(!e&&0!==e)},DT:function(e,t){return e===t},DTA:function(e,t){return e>t},DTB:function(e,t){return e<t}},G={or:1,OR:1,Or:1,oR:1,"||":1},O=function(e){return"number"==typeof e?e:e?Number(e):!1===e?0:NaN},B=function(e){return"string"==typeof e?e:e?e+"":0===e?"0":!1===e?"false":""},L=function(e,t){return e&&e.getTime?t?1e4*e.getUTCFullYear()+100*e.getUTCMonth()+e.getUTCDate():1e4*e.getFullYear()+100*e.getMonth()+e.getDate():NaN},P=function(e,t){var n=e._conds,o=n?n.length:0;if(!o)return!0;var i,r,l,s,a=e._fieldName,u=e._formattedFieldName,d=t[a];e._rawDataAccessor&&(d=e._rawDataAccessor(d));for(var c=!1,p=!1,f=0;f<o;++f){var h=0;if(f>0)if(h=G[n[f-1].connector]){if(c)return!0}else if(!c)continue;var _=n[f],g=F[_.operatorId];p=!1;var m=g.type,v=g.id,C=I[v];"blank"===m?p=C(d):"number"===m?(null==l&&(l=O(d)),p=C(l,_.value)):"date"===m?(null==s&&(s=L(d,!1)),p=C(s,_.value)):(null==i&&(e._formattedDataAccessor?i=e._formattedDataAccessor(t[a]):e._formatter?i=e._formatter(t):u!==a?null==(i=t[u])&&(i=d):i=d,i=B(i)),g.caseSensitive?p=C(i,_.value):(null==r&&(r=i.toLowerCase()),p=C(r,_.value))),c=f>0?h?c||p:c&&p:p}return c},U=function(e,t){var n=t[e._fieldName];return e._rawDataAccessor&&(n=e._rawDataAccessor(n)),!!e._itemMap[n]},j=function(e){return[e.operatorId,e.origValue,e.connector]},M=function(e){this._initStaticVariables(),this._conditions=[],this.init(e)};M.prototype._initStaticVariables=function(){if(!M._initStatic){M._initStatic=!0,M._updateTimezoneOffset();var e=864e5-new Date%864e5;setTimeout(M._setUpdateInterval,e)}},M._initStatic=!1,M.prototype._fieldName="",M.prototype._formattedFieldName="",M.prototype._formatter=null,M.prototype._useUTCTime=!1,M.prototype._rawDataAccessor=null,M.prototype._formattedDataAccessor=null,M.prototype._conditions,M._timezoneOffset=0,M._updateTimezoneOffset=function(){M._timezoneOffset=60*(new Date).getTimezoneOffset()},M._setUpdateInterval=function(){M._updateTimezoneOffset(),setInterval(M._updateTimezoneOffset,864e5)},M.prototype.reset=function(){this.setFieldDefinition(""),this._rawDataAccessor=this._formattedDataAccessor=null},M.prototype.init=function(e){if(e){var t=e.field;t?this.setFieldDefinition(t,e.formatter,e.formattedField):null!=t&&this.setFieldDefinition("");var n=e.useUTCTime;null!=n&&(this._useUTCTime=!!n);var o=e.rawDataAccessor,i=e.formattedDataAccessor;null==o&&null==i||this.setDataAccessors(o,i)}},M.prototype.setFieldDefinition=function(e,t,n){this._fieldName=e,this._formattedFieldName=n||this._fieldName+"_FORMATTED",this._formatter=t||null,this._conditions.length=0},M.prototype.setDefaultUTCUsage=function(e){this._useUTCTime=!!e},M.prototype.setDataAccessors=function(e,t){this._rawDataAccessor="function"==typeof e?e:null,this._formattedDataAccessor="function"==typeof t?t:null},M.prototype.addCondition=function(e,t,n,o){var i=e?e.toUpperCase():"",r=F[i];if(!r)return!1;if("{}"===t||"{*}"===t)i=r.positive^"{}"===t?"EQ_NBLANK":"EQ_BLANK",r=F[i];else if(!t&&"blank"!==r.type&&0!==t&&!1!==t)return!1;var l={operatorId:i,origValue:t,connector:n||""};return null!=o&&(l.useUTCTime=o),this._conditions.push(l),!0},M.prototype.addConditions=function(e){var t=0;if(Array.isArray(e)){for(var n=e.length,o=0;o<n;++o){var i=e[o];Array.isArray(i)&&this.addCondition(i[0],i[1],i[2],i[3])&&++t}n>1&&!t&&!Array.isArray(e[0])&&this.addCondition(e[0],e[1],e[2])&&++t}return t},M.prototype.getConditions=function(){return this._conditions.length?this._conditions.map(j):null},M.prototype.buildFilter=function(){if(!this._fieldName)return null;var e=this._conditions.length;if(!e)return null;for(var t=this._formatter,n=this._conditions.slice(),o=0;o<e;++o){var i=n[o],r=F[i.operatorId],l=r.type,s=i.origValue;if("number"===l)s=O(s);else if("date"===l){var a=null;s instanceof Date?a=s:"number"!=typeof s&&"string"!=typeof s||(a=new Date(s)),s=L(a,null!=i.useUTCTime?i.useUTCTime:this._useUTCTime)}else"string"===l&&(s=B(s),r.caseSensitive||(s=s.toLowerCase()));i.value=s}var u={_conds:n,_fieldName:this._fieldName||"",_formatter:t||null,_formattedFieldName:this._formattedFieldName||"",_rawDataAccessor:this._rawDataAccessor||null,_formattedDataAccessor:this._formattedDataAccessor||null};return this._conditions.length=0,P.bind(null,u)},M.prototype.buildMonitorFilter=function(e,t,n,o){this.setFieldDefinition(t,n,o);for(var i=t.lastIndexOf("_LOCAL")===t.length-6,r=e.split("♣"),l=0;l<r.length;l++){var s=r[l].split("♦");i&&(s[1]=(s[1]-M._timezoneOffset)%86400+""),this.addCondition(s[0],s[1],s[2])}return this.buildFilter()};M.prototype.parse=function(e,t,n,o,i,r){var l=typeof e;return"string"===l?e.indexOf("♦")>=0?this.buildMonitorFilter(e,t,n,o):x.parse(e):"function"===l?e:Array.isArray(e)?(t&&(this.setFieldDefinition(t,n,o),this.setDataAccessors(i,r)),this.addConditions(e),this.buildFilter()):"object"===l?function(e,t,n){if(!e||!t)return null;var o={_fieldName:t,_itemMap:e};return n&&(o._rawDataAccessor=n),U.bind(null,o)}(e,t,i):null};var H={backgroundColor:1},Q={color:1},z={backgroundColor:1,color:1},K=/\[[^\[\]]*\]/g,V=function(e){var t=[];if(e&&"string"==typeof e)for(var n=e.match(K),o=0;o<n.length;o++)t.push(n[o].replace(/[\[\]]/g,""));return t},W=function(){this._onSectionBinding=this._onSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onThemeLoaded=this._onThemeLoaded.bind(this),W.cleanUpPrevRows=W.cleanUpPrevRows.bind(this),W._cleanUpPrevFields=W._cleanUpPrevFields.bind(this),this._hosts=[]};o.inherits(W,l),W._cleanUpTimer=0,W._controlClass="predefined-conditional-color",W._colorTextStyles,W.prototype._blinkingEnabled=!1,W.prototype._pendingFields,W.prototype._predefinedColors=null,W.prototype._blinkingDuration=250,W.prototype._insertionBlinking=!1,W._predefinedColorsStyles,W.prototype.getName=function(){return"ConditionalColoringPlugin"},W.prototype.hasMultiTableSupport=function(){return!0},W.prototype.initialize=function(e,t){e._prevDataRows={};var n=this._hosts;if(!(n.indexOf(e)>=0)){n.push(e);var o=t.conditionalColoring;if(o){var i=o.predefinedColors;null!=i&&"object"==typeof i&&(this._predefinedColors||(this._predefinedColors=i,this._predefinedColorsStyles=this._prepareStyles(i)),this._injectPredefinedColors(e),e.enableClass(W._controlClass));var r=o.blinkingDuration;null!=r&&"number"==typeof r&&(this._blinkingDuration=r);var l=o.insertionBlinking;null!=l&&(this._insertionBlinking=l)}1===n.length?this.config(t):(this._applyStyle(e,t),this._injectColorTextStyles()),e.listen("postSectionDataBinding",this._onSectionBinding),e.listen("columnAdded",this._onColumnAdded),e.listen("columnRemoved",this._onColumnRemoved),R.themeReady||R.loadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded),w.getThemeColors(this._onThemeLoaded)}},W.prototype._afterInit=function(){var e=this._pendingFields;if(e){for(var t,n,o,i=0;i<e.length;i++)t=e[i][0],n=e[i][1],o=e[i][2],this._addDataFields(t,n,o);this._pendingFields=null}},W.prototype.unload=function(e){var t=this._hosts.indexOf(e);t<0||(this._hosts.splice(t,1),e.unlisten("postSectionDataBinding",this._onSectionBinding),e.unlisten("columnAdded",this._onColumnAdded),e.unlisten("columnRemoved",this._onColumnRemoved),e._prevDataRows=null,this._dispose())},W.prototype.beforeProcessOption=function(e,t){if("blinker"==e)return null},W.prototype.config=function(e){if(e){var t=e.columns;if(t)for(var n=t.length,o=0;o<n;++o)this.setColumnColoring(o,t[o])}},W.prototype.getConfigObject=function(e){var t=e||{},n=t.conditionalColoring;n||(n=t.conditionalColoring={}),null!=this._predefinedColors&&(n.predefinedColors=this._predefinedColors),250!==this._blinkingDuration&&(n.blinkingDuration=this._blinkingDuration),!1!==this._insertionBlinking&&(n.insertionBlinking=this._insertionBlinking);var o=t.columns;o||(o=t.columns=[]);for(var i=this.getColumnCount(),r=0;r<i;++r){var l=o[r];l||(l=o[r]={}),this.getColumnColoring(r,l)}return t},W.prototype.getColumnColoring=function(e,t){t||(t={});var n=this._hosts[0],o=this._getColumnOption(e,"conditions",n);if(Array.isArray(o)&&o.length>0){t.conditions=[];for(var i=["expression","backgroundColor","color","cssClass","field"],r=o.length,l=0;l<r;l++){var s={},a=o[l];if(c(s,a,i),"function"==typeof s.expression){var u=a.origExpression;u&&(s.expression=u)}t.conditions.push(s)}}var d=this._getColumnOption(e,"colorText",n);d&&(t.colorText=d);var p=this._getColumnOption(e,"tickColor",n);p&&(t.tickColor=p);var f=this._getColumnOption(e,"blinking",n);f&&(t.blinking=f);var h=this._getField(e);return h&&(t.field=h),t},W.prototype._applyStyle=function(e,t){if(t){var n=t.columns;if(n)for(var o,i=n.length,r=0;r<i;++r)o=this.getColumnPainter(r),this._isValidPainter(o)&&e.enableColumnClass(r,"conditionally-colored",!0)}},W.prototype._enableColumnStyle=function(e,t){t=!1!==t;for(var n=this._hosts,o=n.length;--o>=0;)n[o].enableColumnClass(e,"conditionally-colored",t)},W.prototype._isValidPainter=function(e){return!!e&&e.getColoringType()!==R.ColoringTypes.HEATMAP},W.prototype._clearCellStyles=function(e,t){var n,o,i,r,l,s=this._hosts;for(n=s.length;--n>=0;)for(i=(o=s[n].getSection("content")).getRowCount(),r=0;r<i;++r)(l=o.getCell(e,r,!1))&&R.clearCellStyle(l,t)},W.prototype._cachePreviousValue=function(){var e,t,n,o=this.getColumnCount(),i=this._hosts,r=i.length;for(e=0;e<r;e++)for(n=i[e],t=0;t<o;++t)this._cacheColumnPreviousValue(t,n)},W.prototype._cacheColumnPreviousValue=function(e,t){var n=t._prevDataRows||{},o=t.getDataSource(),i=o.getRowCount(),r=this._getColumnData(e);if(r.blinking){var l,s,a,u,d=r.blinkingField||this._getField(e);for(l=0;l<i;l++)s=o.getRowId(l),null!=(a=this._getData(o,l,d))&&((u=n[s])||(u=n[s]={}),u[d]=a);t._prevDataRows=n}},W.prototype._addDataFields=function(e,t,n){if(this._realTimeGrid&&e&&n){var o=null;if(null!=t){var i="object"==typeof t?t:this._realTimeGrid.getColumnDefinition(t);o=i?i.getId()+"_"+n:null}this._realTimeGrid.addDataFields(e,o)}},W.prototype._removeDataFields=function(e,t,n){if(this._realTimeGrid&&e&&n){var o=null;if(null!=t){var i="object"==typeof t?t:this._realTimeGrid.getColumnDefinition(t);o=i?i.getId()+"_"+n:null}this._realTimeGrid.removeDataFields(e,o)}},W.prototype._removeFieldReferrer=function(e,t){if(this._realTimeGrid&&t){var n=null;if(null!=e){var o=e;if("number"==typeof e){var i=this._realTimeGrid.getColumnDefinition(e);i&&(o=i.getId())}n=o?o+"_"+t:null,this._realTimeGrid.removeFieldReferrer(n)}}},W.prototype.setColumnColoring=function(e,t){var n,o;t&&(n=t.blinking,o=t.field),this.setColumnBlinking(e,n,o),this.setConditionalColoring(e,t);var i=this._newColumnData(e);!i.painter||i.coloringFields||i.blinkingField||this._clearPainter(i)},W.prototype.setConditionalColoring=function(e,t){var n=this._newColumnData(e);n.conditions=null,t?(n.colorText=t.colorText,n.tickColor=t.tickColor,n.field=t.field):(n.colorText=null,n.tickColor=null);var o=n.painter,i=n.coloringFields?Object.keys(n.coloringFields):null,r=this._prepareColorOptions(e,t);if(this._isValidPainter(o)){if(i){var l=o.getEffectiveStyles();this._clearCellStyles(e,l)}o.resetColoring()}if(r.hasColor){n.conditions=t.conditions;var s=r.fields;if(o){if(i){for(var a,u=[],d=0;d<i.length;d++)s[a=i[d]]||u.push(a);u.length&&this._removeDataFields(u,e,"coloring")}}else o=n.painter=new R;if(r.condColoring){var c=r.condColoring.conditions;o.setConditions(c),this._setEffectiveStyles(o,c)}else if(r.colorText){var p=r.colorText;if(p.useThemeColors){if(!W._colorTextStyles){W._colorTextStyles=this._prepareStyles({positive:{color:"var(--color-scheme-positive)"},negative:{color:"var(--color-scheme-negative)"},neutral:{color:"var(--color-scheme-neutral)"}})}this._injectColorTextStyles(),o.addColorTextWithTheme(r.colorText.field)}else o.addColorText(p.field,p.upClass,p.downClass,p.levelClass)}var f=Object.keys(s);this._initializedGrid?this._addDataFields(f,e,"coloring"):(this._pendingFields||(this._pendingFields=[]),this._pendingFields.push([f,e,"coloring"])),this._enableColumnStyle(e,!0),o.inputField=r.inputField,n.coloringFields=s}else i&&this._removeFieldReferrer(e,"coloring"),n.coloringFields=null,this._enableColumnStyle(e,!1);if(this._initializedGrid){var h=this._hosts[0];if(h){var _=h.getPlugin("RowColoringPlugin");_&&_.forceUpdateRowColor&&_.forceUpdateRowColor()}this._requestRowRefresh()}},W.prototype.setColumnBlinking=function(e,t,n){var o=this._newColumnData(e),i=o.blinkingField;o.blinking=t;var r=o.painter,l=this._prepareBlinkingOptions(e,t,n);if(l){var s=l.field;r?i&&(r.clearBlinking(),i!==s&&this._removeDataFields(i,e,"blinking")):o.painter=r=new R;var a=l.duration||this._blinkingDuration;if(r.setBlinkingDuration(a),r.disableLevelColor(!1===l.level),l.customColor?r.addBlink(s,l.up,l.down,l.level,l.border):r.addBlinkWithTheme(s,l.border),o.blinkingField=s,this._blinkingEnabled=!0,!i&&(this._compositeGrid||this._initializedGrid))for(var u,d=this._hosts,c=0;c<d.length;c++)u=d[c],this._cacheColumnPreviousValue(e,u);W._startCleanUpInterval(),this._initializedGrid?this._addDataFields(s,e,"blinking"):(this._pendingFields||(this._pendingFields=[]),this._pendingFields.push([s,e,"blinking"]))}else i&&(r&&(r.clearBlinking(),W._cleanUpPrevFields()),this._removeFieldReferrer(e,"blinking")),o.blinkingField=null},W.prototype.blinkRow=function(e,t,n){if(n=n||this._hosts[0]){var o=n.getDataSource();if(o){var i=n.getSection("content");if(i)for(var r=o.getRowDataAt(e),l=i.getColumnCount(),s=0;s<l;++s){var a=this.getColumnPainter(s);if(a){var u=i.getCell(s,e,!1);u&&a.blink(u,t,r)}}}}},W.prototype._prepareBlinkingOptions=function(e,t,n){if(null==e||!t)return null;var o={},i=n||this._getField(e),r=i;return"string"==typeof t?r=t:"object"==typeof t&&(r=t.field||i,o.border=t.border,o.duration=t.duration,(t.up||t.down||t.level)&&(o.customColor=!0,o.up=t.up,o.down=t.down,o.level=t.level),!1===t.level&&(o.level=!1)),o.field=W._convertKeyword(r,i),o.inputField=r,o};var q=function(e,t){if(t)if(Array.isArray(t))for(var n=t.length,o=0;o<n;++o)e[t[o]]=!0;else e[t]=!0};W.prototype._prepareColorOptions=function(e,t){if(!t)return{};var n=this._getField(e),o=t.inputField||"",i=W._convertKeyword(o,n);t.field&&(i=t.field);var r=0,l={},s=t.colorText||t.tickColor,a=t.conditions,u=a?a.length:0,d={};if(u){d.condColoring={},d.condColoring.conditions=a;for(var c=i==n?t.textFormatter:null,p=W.getFilterBuilder(),f=u;--f>=0;){var h=a[f],_=h?h.expression:null;if(Array.isArray(_)){var g=h.field||i;h.expression=p.parse(_,g,null,g),h.expression&&(h.origExpression=_,r=1,l[g]=!0)}else if("function"==typeof _)r=1,q(l,h.fields||h.field);else if("string"==typeof _)r=1,q(l,V(_));else if(i&&h.condition){r=1,p.setFieldDefinition(i,c,i);var m=h.condition,v=h.value1,C=h.value2;"BTW"!==m?p.addCondition(m,v):(p.addCondition("GTE",v),p.addCondition("LTE",C)),h.expression=p.buildFilter(),l[i]=!0}}}else s&&(d.colorText={},d.colorText.useThemeColors=!0,"string"==typeof s?i=s:"object"==typeof s&&(i=s.field||i,(s.upClass||s.downClass||s.levelClass)&&(d.colorText.useThemeColors=!1,d.colorText.upClass=s.upClass,d.colorText.downClass=s.downClass,d.colorText.levelClass=s.levelClass)),i&&(d.colorText.field=i,r=1,l[i]=!0));return r?(d.hasColor=1,d.fields=l,d.inputField=o,d):{}},W._convertKeyword=function(e,t){return e&&e.indexOf("THIS_COLUMN")<0?e:t},W._mapInsertedRowId=function(e){for(var t={},n=e?e.length:0,o=0;o<n;++o){var i=e[o];"inserted"===i.type&&(t[i.rid]=!0)}return t},W._mergeUpdates=function(e){var t,n,o=e.events,i=o?o.length:0,r=e.dataSource,l=[];for(n=0;n<i;++n)if("updated"===(t=o[n]).type){var s=r.getRowIndex(t.rid);l[s]||(l[s]={changed:{},rid:t.rid});var a=l[s].changed,u=t.changes;for(var d in u)a[d]=1}return l},W.prototype._prepareStyles=function(e){var t,n,o,i=".tr-grid."+W._controlClass+" .column.conditionally-colored .cell",r=[];for(var l in e)r.push(i+"."+l),t=[],(o=(n=e[l]).backgroundColor)&&t.push("background-color: "+o+";"),(o=n.color)&&t.push("color: "+o+";"),r.push(t);return function(e){if(e){var t="";if(Array.isArray(e))t=e.map(f).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else t="string"==typeof e?e:e+"";if(t)return t.replace(/{[\w\W]*?}/g,h)}return""}(r)},W.prototype._injectColorTextStyles=function(){if(W._colorTextStyles)for(var e=this._hosts,t=e.length,n=0;n<t;n++){var o=e[n];o.enableClass(W._controlClass),o._colorTextStyles||(_(W._colorTextStyles,o.getElement()),o._colorTextStyles=!0)}},W.prototype._injectPredefinedColors=function(e){e._conditionalColoringStyleTag&&(e._conditionalColoringStyleTag.parentNode.removeChild(e._conditionalColoringStyleTag),e._conditionalColoringStyleTag=null),e._conditionalColoringStyleTag=_(this._predefinedColorsStyles,e.getElement())},W.prototype.setPredefinedColors=function(e){if(null!=e&&"object"==typeof e){this._predefinedColors=e,this._predefinedColorsStyles=this._prepareStyles(e);for(var t=this._hosts,n=t.length,o=0;o<n;o++)this._injectPredefinedColors(t[o])}},W.prototype.setInsertionBlinking=function(e){null!=e&&(this._insertionBlinking=e)},W.getFilterBuilder=function(){return W._fb||(W._fb=new M),W._fb},W._fb=null,W.prototype._requestRowRefresh=function(){for(var e=this._hosts.length;--e>=0;)this._hosts[e].requestRowRefresh()},W.prototype.getColumnPainter=function(e){return this._getColumnOption(e,"painter")},W.prototype.applyColor=function(e,t,n){var o=this.getColumnPainter(e);if(o){n||(n={});var i={};i[this._getField(e)]=1,o.render(t,n,NaN,NaN,i)}},W.prototype._onSectionBinding=function(e){var t=e.dataRows;if(t){var n,o,i,r,l,s,a,u,d,c,p,f,h,_,g,m,v,C,y=e.section,b=y.getColumnCount(),T=e.fromRowIndex,k=e.toRowIndex,w=e.actualUpdate,D=e.dataSource,N=e.sender,A=w&&this._blinkingEnabled;A&&(h=W._mapInsertedRowId(e.events),this._compositeGrid&&(d=W._mergeUpdates(e)));var E,S=N._prevDataRows,x=Object.keys(S).length;for(o=T;o<k;++o)if(f=this._rowGetter(t[o])){for(l=null,A&&(this._realTimeGrid?(c=!(p=h[a=(s=f.ROW_DEF)?s.getRowId():""])||this._insertionBlinking,a&&c&&(l=s.getUpdates())):(u=d[o])&&(c=!(p=h[a=u.rid])||this._insertionBlinking)&&(l=u.changed)),a||(a=this._realTimeGrid?(s=f.ROW_DEF)?s.getRowId():"":D.getRowId(o)),E=S[a],v={},C=!1,n=0;n<b;++n)if((i=y.getCell(n,o,!1))&&(r=this.getColumnPainter(n))){if(m=!1,g=!1,(_=this._getColumnData(n)).blinking&&w&&c){var R=_.blinkingField||this._getField(n),F=f[R];if(E){var I=E[R];null!=I&&l&&l[R]&&(g=!0,m=r.blinkCell(i,F,I,f,f))}else x&&p&&(g=!0,m=r.blinkCell(i,F,F,f,f));g||r.verifyBlinking(i,f),v[R]=F,C=!0}_.coloringFields&&!m&&r.renderColoring(i,f)}C&&(S[a]=v),a=null}}},W.prototype._onColumnAdded=function(e){e.context&&this.setColumnColoring(e.colIndex,e.context,e.sender)},W.prototype._onColumnRemoved=function(e){var t=e.columnData;if(t){this._clearPainter(t);var n=e.colId;n&&(t.coloringFields&&this._removeFieldReferrer(n,"coloring"),t.blinkingField&&this._removeFieldReferrer(n,"blinking"));var o=t.field;if(o){var i=t.COL_DEF;if(!i||!i.isRealTimeField())for(var r=this.getColumnCount(),l=0;l<r;l++)(t=this._getColumnData(l)).coloringFields&&t.coloringFields[o]&&this.setConditionalColoring(l,null),t.blinkingField===o&&this.setColumnBlinking(l,null)}}},W.prototype._onThemeLoaded=function(){this._requestRowRefresh()},W.prototype._clearPainter=function(e){if(e){W._cleanUpPrevFields();var t=e.painter;if(t){if(this._isValidPainter(t))return t.dispose(),e.painter=null,!0;t.clearBlinking()}}return!1},W.prototype._setEffectiveStyles=function(e,t){for(var n=null,o=!1,i=!1,r=t?t.length:0,l=0;l<r;l++){var s=t[l];s.color&&(o=!0),s.backgroundColor&&(i=!0)}o&&i?n=z:o?n=Q:i&&(n=H),e.setEffectiveStyles(n)},W._cleanUpPrevFields=function(){for(var e,t=this.getColumnCount(),n={},o=!1,i=0;i<t;i++)(e=this._getColumnData(i)).blinking&&(n[e.blinkingField]=o=!0);var r,l=this._hosts,s=l.length;if(o){var a,u,d,c;for(r=0;r<s;r++)for(d in u=l[r]._prevDataRows)for(c in a=u[d])n[c]||delete a[c]}else{for(r=0;r<s;r++)l[r]._prevDataRows={};W._stopCleanUpInterval()}},W.cleanUpPrevRows=function(){var e,t,n,o,i,r,l,s=this._hosts,a=s.length;for(n=0;n<a;n++)if(t=(e=s[n]).getDataSource())for(l=e._prevDataRows,i=Object.keys(l),o=0;o<i.length;o++)r=i[o],t.getRowData(r)||delete l[r]},W._startCleanUpInterval=function(){W._cleanUpTimer||(W._cleanUpTimer=setInterval(W.cleanUpPrevRows,18e5))},W._stopCleanUpInterval=function(){W._cleanUpTimer&&(clearInterval(W._cleanUpTimer),W._cleanUpTimer=0)},W.setThemeColors=R.setThemeColors,W.prototype.reloadThemeColors=function(){return R.reloadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded)};!function(e,t){if(e&&t&&t.prototype.getName){var n=t.prototype.getName().replace(/Plugin$/,"");if(n){var o=e.tr;o||(o=e.tr={});var i=o.grid;i||(i=o.grid={}),i[n+"Plugin"]=t,o[n+"Extension"]=t}}}(window,W)}]);