!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);let i={inherits:function(t,e){function o(){}o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t,t.base=function(t,o,i){o||(o="constructor");let n=arguments.length,r=new Array(n);for(let t=2;t<n;t++)r[t-2]=arguments[t];return e.prototype[o].apply(t,r)}}};let n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(t,e){if(!t||!e)return;this._events||(this._events={});let o=this._events[t];o?o.indexOf(e)<0&&(o.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)},n.prototype.removeEventListener=function(t,e){let o=this._events?this._events[t]:null;if(o){let t=o.indexOf(e);t>=0&&(o.splice(t,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(t){if(this._listenerCount){if(t){let e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},n.prototype.getListener=function(t,e){if(t){let o=this._events?this._events[t]:null;if(o)return e||(e=0),o[e]||null}return null},n.prototype.addListener=function(t,e){let o=t?t[e]:null;"function"==typeof o&&this.addEventListener(e,o)},n.prototype._prepareEventArguments=function(t,e){return e},n.prototype._dispatch=function(t,e){let o=this._events?this._events[t]:null;if(o){e=this._prepareEventArguments(t,e);let i=o.length;for(let t=0;t<i;++t)o[t](e)}};n.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};let r=function(t,e,o){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=o&&(this._ctx=o),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype._fulfilled=!1,r.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){let e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},r.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){let e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},r.prototype.isFulfilled=function(){return this._fulfilled},r.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};let s=function(t,e){return function(t,e,o){if(!t)return null;if(!e||t===e)return t;let i;if(o){let n=o.length;for(let r=0;r<n;++r)i=o[r],i&&l(t,e,i)}else for(i in e)l(t,e,i);return t}({},t,e)},l=function(t,e,o){let i=e[o];if(null!=i){let e=t[o];Array.isArray(e)?t[o]=e.concat(i):Array.isArray(i)&&e?t[o]=i.concat(e):t[o]=i}},u=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},c=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},h=function(t,e){if(!t)return null;let o=document.createElement("style");o.textContent="\n"+t+"\n";let i,n=function(t){if(t){let e;if(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t)return e}return null}(e),r=!0;return n||(r=!1,n=document.head),r&&n.children&&n.children.length&&(i=n.children[0]),i?n.insertBefore(o,i):n.appendChild(o),o},a=function(t,e){e||(e=[]);for(let o in t){let i=t[o];"object"==typeof i?a(i,e):e.push(i)}return e},p=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;let e=t.match(/\d+/g);if(!e||e.length<3)return t;let o="#";for(let t=0;t<3;t++){let i=+e[t];i>=16||(o+="0"),o+=i?i.toString(16).toUpperCase():"0"}return o},d=function(t){if(null==t)return"";let e="string"==typeof t?t:t.toString();return e.length?(e.indexOf("\n")>=0&&(e=e.replace(/[\r\n]/g," ")),e.indexOf("\t")>=0&&(e=e.replace(/\t/g," "))," "!==e.charAt(0)&&" "!==e.charAt(e.length-1)||(e=e.trim()),e):""};let _={},f=function(t,e){"attributes"==e.type&&"lang"==e.attributeName&&(t.lang=e.target.lang||"en")},m=function(t,e,o){"attributes"===o.type&&(null!=e?o.attributeName===e&&t(o.target.getAttribute(e)):t(o.target))};_._getNewId=function(){return"observer_"+ ++_._id},_._addObserver=function(t,e,o){let i=o;i||(i={}),i.attributes=!0,_._observer.observe(t,i),_._addListener(t,e)},_._onMutationCallback=function(t){for(let e=0;e<t.length;e++){let o=t[e],i=_._listeners[o.target._observeId];for(let t=0;t<i.length;t++)i[t](o)}},_._addListener=function(t,e){let o=_._listeners;if(o||(o=_._listeners={}),!t._observeId){let e=_._getNewId();t._observeId=e}o[t._observeId]||(o[t._observeId]=[]);let i=o[t._observeId];i.indexOf(e)<0&&i.push(e)},_.addLanguageListener=function(t){t&&(t.lang=document.documentElement.lang||"en",_._addObserver(document.documentElement,f.bind(null,t)))},_.addAttributeListener=function(t,e,o){t&&e&&_._addObserver(t,m.bind(null,e,o))},_._observer=new MutationObserver(_._onMutationCallback),_._listeners={},_._id=0;let g={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},y={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};y.themeColors=y._defaultColors,y._components={},y._themeName="",y._elfVersion=0,y._dummyIcon=null,y._iconLoaded=!1,y._profileName=null,y._callbacks=[],y._observed=!1,y._pendingResolve=!1,y._themeLoaded=!1,y._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},y._icons["halo-theme"]=y._icons["elf-theme-halo"],y._icons["solar-theme"]=y._icons["elf-theme-solar"],y.getElfVersion=function(){if(!y._elfVersion){let t=0;if(window.EFX_GRID){let e=window.EFX_GRID.version;e=e.split("."),t=+e[0]}else if(window.elf)if(window.elf.version){let e=window.elf.version.match(/\d/);e&&e[0]&&(t=parseInt(e[0],10))}else window.elf.customElements?t=3:window.customElements&&(t=4);else window.Polymer&&(t=1);y._elfVersion=t}return y._elfVersion},y.hasComponent=function(t){let e=y._components[t];if(null==e){e=0;let o=y.getElfVersion();if(t){let i;1===o?(i=document.createElement(t),i.is===t&&(e=o)):o>1&&(window.customElements&&window.customElements.get(t)||document.createElement(t).constructor!==HTMLElement)&&(e=o),y._components[t]=e}}return e},y.toLangString=function(t){if(!t)return"";if("zh-hant"===(t=t.toLowerCase()))return"zh-Hant";let e=t.replace(/-.*/,"");return g[e]?e:""},y.hasTheme=function(t){return t===y.getThemeName()},y.getThemeName=function(t){return y._themeName||(y._themeName=y.getCssVariable("--theme-name",document.documentElement)),y._themeName},y.setThemeName=function(t){y._themeName=t},y.isThemeLoaded=function(){return y._themeLoaded},y.getColors=function(){return y.themeColors},y.isHaloTheme=function(t){return null==t&&(t=y.getThemeName()),!!t&&t.indexOf("halo")>=0},y.injectIcons=function(t,e){if("object"!=typeof t)return;let o=y.getThemeName();t.themeName=o;let i=y.getElfVersion();t.elfVersion=i;let n=y._icons[o];n&&(t.icons=n)},y.getIconList=function(){let t=y._icons[y.getThemeName()];return t?a(t):[]},y._onIconPreloaded=function(){if(y._dummyIcon){let t=y._dummyIcon.parentNode;t&&t.removeChild(y._dummyIcon),y._dummyIcon=null}},y.prepareIconPreloading=function(){if(!y._iconLoaded){y._iconLoaded=!0;let t=y.getIconList();if(t.length){setTimeout(y._onIconPreloaded,10);let e=y._dummyIcon=document.createElement("coral-icon");return e.style.transform="scale(0)",document.body.appendChild(e),t}}return null},y.getCssVariable=function(t,e){let o="",i=e||document.body;return window&&"string"==typeof t&&1===i.nodeType&&t.match(/^--/)&&(o=window.getComputedStyle(i).getPropertyValue(t),o=o.replace(/[\"\']/g,"")),o},y.getCssVariables=function(t,e){let o=e||document.body;if(window&&1===o.nodeType){let e=window.getComputedStyle(o);for(let o in t){let i=t[o];i&&i.match(/^--/)&&(t[o]=e.getPropertyValue(i).replace(/\"/g,""))}}return t||null},y.setRTK=function(t){null!=t&&(y._rtk=t)},y.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},y._addThemeChangedCallback=function(t){let e=y._callbacks;e.indexOf(t)<0&&e.push(t)},y.reloadThemeColors=function(){return y._deferred&&y._deferred.isFulfilled()?(y._profileName="",y._themeLoaded=!1,y.themeReady=null,y.getThemeColors()):y.themeReady},y.getThemeColors=function(t){if("function"==typeof t&&y._addThemeChangedCallback(t),y.themeReady)return y.themeReady;let e=y._deferred=new r;y.themeReady=e.promise;let o=y.getMovementColorProfile();if(o)o!==y._profileName?setTimeout(y._profileNameRetrieved,100):y._deferred.resolve(y.themeColors);else{let t={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},e=window?window.JET:null;if(y._themeLoaded=!1,y._rtk&&y._rtk.Settings)y._rtk.Settings.getAsync(t).then(y._loadingProfileSuccess).catch(y._loadingProfileFailure);else if(e&&e.Settings)try{e.Settings.read(y._loadingProfileSuccess,t)}catch(t){y._loadingProfileFailure()}else setTimeout(y._profileNameRetrieved,100)}return e.promise};let v=function(t){if(t!==y._profileName){y._retrieveThemeColors(t),y._pendingResolve&&(y._pendingResolve=!1,y._deferred.resolve(y.themeColors));let e=y._callbacks;for(let t=0;t<e.length;t++)e[t]()}};y._loadingProfileSuccess=function(t){t&&document.documentElement.setAttribute("movement-color-profile",t.toLowerCase()),y._observed?y._pendingResolve=!0:y._profileNameRetrieved(t)},y._loadingProfileFailure=function(){y._retrieveThemeColors(),y._observed||(y._observed=!0,_.addAttributeListener(document.documentElement,v,"movement-color-profile")),y._deferred.reject("Failed to get movement color profile from settings.")},y._profileNameRetrieved=function(){let t=y.getMovementColorProfile();y._retrieveThemeColors(t),y._observed||(y._observed=!0,_.addAttributeListener(document.documentElement,v,"movement-color-profile")),y._deferred.resolve(y.themeColors)},y._retrieveThemeColors=function(t){y._themeLoaded=!0,y._profileName=t;let e=y.themeColors=y.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});e.up||(e.up=y._defaultColors.up,e.down=y._defaultColors.down,e.level=y._defaultColors.level,e.tickUp=y._defaultColors.tickUp,e.tickDown=y._defaultColors.tickDown),e.positive=e.up,e.negative=e.down,e.neutral=e.level;let o=document.createElement("table");o.style.visibility="hidden",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.width="0";let i=o.insertRow(-1),n=i.insertCell(-1);document.body.appendChild(o);let r=window.getComputedStyle(i);e.tableBg=r.backgroundColor;let s=window.getComputedStyle(n);e.tableText=s.color,e.tableBorder=s.borderColor,e.tableText===e.tableBorder&&(n.className="tr-lg",s=window.getComputedStyle(n),e.tableBg=s.backgroundColor,e.tableText=s.color,e.tableBorder=s.borderColor,e.tableText===e.tableBorder&&(e.tableBg=y._defaultColors.baseGrid,e.tableText=y._defaultColors.baseText,e.tableBorder="")),e.tableBg=p(e.tableBg),e.tableText=p(e.tableText),e.tableBorder=p(e.tableBorder),document.body.removeChild(o),e.baseGrid=e.tableBg,e.baseText=e.tableText,e.trackColor=e.primary||y._defaultColors.trackColor};let b=function(){};i.inherits(b,n),b.prototype._hosts=null,b.prototype._compositeGrid=null,b.prototype._realTimeGrid=null,b.prototype._rowGetter=null,b.prototype._initializedGrid=!1,b.prototype.listen=b.prototype.addEventListener,b.prototype.unlisten=b.prototype.removeEventListener,b.prototype.afterInit=function(t,e,o){let i=null;o&&o.getCoreGrid&&(i=o.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",o),this._compositeGrid&&i.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?T:R,this._afterInit())},b.prototype._afterInit=function(){},b.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},b.prototype.hasMultiTableSupport=function(){return!1},b.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},b.prototype.getName=function(){return"GridPlugin"},b.prototype.initialize=function(t,e){},b.prototype.unload=function(t){this._dispose()},b.prototype.getRelativeGrid=function(t){let e=null;if(t.target){e=t.target;let o=e.api;if(o&&o.getCoreGrid)return o.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(let t=this._hosts.length;--t>=0;){let o=this._hosts[t];if(o.getElement().contains(e))return o}return null},b.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},b.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;{let e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null}},b.prototype.getColumnName=function(t){if(this._compositeGrid){let e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{let e=this.getColumnIndex(t),o=this._realTimeGrid.getColumnDefinition(e);if(o)return o.getName()}return""},b.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){let e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},b.prototype.getColumnIndices=function(t){let e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){let e,o=this._compositeGrid.getColumnFields(),i=this._compositeGrid.getColumnCount(),n=[];for(let r=0;r<t.length;r++)if(e=t[r],"number"==typeof e)e>=0&&e<i&&n.push(e);else{let t=o.indexOf(e);-1!==t&&n.push(t)}return n}return this._realTimeGrid.getColumnIndices(t)},b.prototype.getColumnId=function(t){if("string"==typeof t)return t;let e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);{let e=this._realTimeGrid.getColumnDefinition(t);if(e)return e.getId()}return""},b.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},b.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},b.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},b.prototype.getColumnCount=function(){if(this._hosts){let t=this._hosts[0];return t?t.getColumnCount():0}return 0},b.prototype._moveColumnById=function(t,e){let o=this._hosts,i=o?o.length:0;if(i){let n=0;for(let r=0;r<i;++r)n|=o[r].moveColumnById(t,e);return!!n}return!1},b.prototype._reorderColumns=function(t,e){let o=this._hosts,i=o?o.length:0;if(i){let n=0;for(let r=0;r<i;++r)n|=o[r].reorderColumns(t,e);return!!n}return!1},b.prototype._loadPlugin=function(t,e,o){return t||(t=e.getPlugin(o))||(t=e.loadPlugin(o))&&this._initializedGrid&&(t._initializedGrid=!0),t},b.prototype._requestPlugin=function(t,e,o){return this._initializedGrid?b.requestPlugin(t,e,o,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},b.requestPlugin=function(t,e,o,i,n){let s=null;if(t){let e=null;1===t.nodeType?e=t.api:t.getCoreGrid?e=t:t.getPlugin&&(s=t),e&&(s=e.getCoreGrid(),i||n||(e.getModel?i=e:n=e))}if(!s)return Promise.reject("Cannot find grid element");let l=s.getPlugin(e);if(l)return Promise.resolve(l);{let t=new r;return setTimeout(b._onPluginRequested.bind(null,{grid:s,pluginRef:e,compositeGrid:i,realTimeGrid:n,config:o,deferred:t}),10),t.promise}},b._onPluginRequested=function(t){let e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);let o=e.getPlugin(t.pluginRef);if(o)return t.deferred.resolve(o);let i=!1;return t.pluginRef.beforeInit&&(i=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),o=e.loadPlugin(t.pluginRef,t.config),o?(!i&&o.beforeInit&&o.beforeInit(e.getElement(),t.config),o.setGridWrapper&&(t.compositeGrid?o.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&o.setGridWrapper("realtimegrid",t.realTimeGrid)),o.afterInit&&o.afterInit(),t.deferred.resolve(o)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},b.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},b.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},b.prototype._getColumnOption=function(t,e,o){let i=this._getColumnData(t,o);return i?i[e]:null},b.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};let o=e.getColumnData(t);return o||(o=e.setColumnData(t,{})),o},b.prototype._getField=function(t){let e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},b.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},b.prototype._getRow=function(t,e){return x(t.getRowDataAt(e))},b.prototype._getData=function(t,e,o){let i=this._getRow(t,e);return i?i[o]:void 0},b.prototype._setData=function(t,e,o,i){if(this._realTimeGrid){let n=S(t,e);n&&n.setData(o,i)}else"number"==typeof e?t.setDataAt(e,o,i):t.setData(e,o,i)},b.prototype._setRowData=function(t,e,o){if(this._realTimeGrid){let i=S(t,e);i&&i.setRowData(o)}else"number"==typeof e?t.setRowDataAt(e,o):t.setRowData(e,o)},b.prototype._setStaticData=function(t,e,o,i){if(this._realTimeGrid){let n=S(t,e);n&&n.setStaticData(o,i)}else this._setData(t,e,o,i)},b.prototype._setColumnData=function(t,e,o,i){if(!e)return;let n=Array.isArray(i)?i:t.getAllRowIds(!0),r=n?n.length:0;if(!r)return;if(1===r)return void this._setData(t,n[0],e,Array.isArray(o)?o[0]:o);let s=Array.isArray(o)?o:n.map((function(){return o}));if(this._realTimeGrid){for(let o=0;o<r;++o){let i=t.getRowData(n[o]);if(i){let t=i.ROW_DEF;t&&(t.getRowData()[e]=s[o])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,s,n)},b.prototype._activateColumnRenderer=function(t,e,o){if(null==t)return;let i=this._realTimeGrid;i?i.activateColumnRenderer(t,e,o):"function"==typeof o?this._hosts[0].setColumnDataBindingHandler(t,o):this._hosts[0].setColumnDataBindingHandler(t,null)};let C=function(){},w={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};b.prototype._mockMouseEvent=function(t,e,o){null==t&&(t=0),null==e&&(e=0);let i=o||{};if(i.preventDefault=C,i.stopPropagation=C,t>=0&&e>=0){let o=this._activeGrid||this._hosts[0],n=o?o.getCell(i.sectionType||"content",t,e):null;i.target=n?n.getElement():null}return i},b.prototype._mockKeyboardEvent=function(t,e){let o=e||{};if(o.preventDefault=C,o.stopPropagation=C,"string"==typeof t){let e=w[t.toLowerCase()]||0;t=e||t.charCodeAt(0)}return o.keyCode=t,o},b._staticStyles={},b._themeLoaders={},b._themeLoadSuccess=function(t,e){let o=this.getName(),i=b._staticStyles[o]=t(e);this.applyStyles(i,o)},b.prototype.applyStaticStyles=function(t){let e=this.getName(),o=b._staticStyles[e];o?this.applyStyles(o,e):t&&(b._themeLoaders[e]||(b._themeLoaders[e]=y.getThemeColors()),b._themeLoaders[e].then(b._themeLoadSuccess.bind(this,t)))},b.prototype.applyStyles=function(t,e,o){e||(e=this.getName());let i,n,r="_style"+e,s=this._hosts,l=s.length;if(l)if(o)for(i=0;i<l;i++)n=s[i],this.revokeStyles(n,e),n[r]=h(t,n.getElement());else for(i=0;i<l;i++)n=s[i],n[r]||(h(t,n.getElement()),n[r]=!0)},b.prototype.revokeStyles=function(t,e){if(!t||!e)return;let o=t[e="_style"+e];o&&1===o.nodeType&&(o.parentNode.removeChild(o),t[e]=null)};let S=function(t,e){let o="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return o&&o.ROW_DEF||null},R=function(t){return t},T=function(t){return t?t.ROW_DEF.getRowData():null},x=function(t){if(t){let e=t.ROW_DEF;return e?e.getRowData():t}return null};let E=function(t,e){this._onTouchStart=this._dispatch.bind(this,"touchStart"),this._onTouchEnd=this._dispatch.bind(this,"touchEnd"),this._onTouchMove=this._dispatch.bind(this,"touchMove"),e&&("boolean"==typeof e?this._touchMove=!0:(e.useTouchMove&&(this._touchMove=!0),e.preventDefault&&(this._defaultPrevented=!0))),this._defaultPrevented||(this._evtOptions=E.passive),this.setElement(t)};i.inherits(E,n),E.prototype._elem,E.prototype._onTouchStart,E.prototype._onTouchEnd,E.prototype._onTouchMove,E.prototype._touchMove=!1,E.prototype._defaultPrevented=!1,E.prototype._evtOptions,E.passive={passive:!0},E.prototype.getElement=function(){return this._elem},E.prototype.setElement=function(t){this.detachTouchEvents(),this._elem=t||null,this.attachTouchEvents(this._touchMove)},E.prototype.applyTrait=E.prototype.setElement,E.prototype.dispose=function(){this.setElement(null)},E.prototype.addTouchListeners=function(t,e,o){t&&this.addEventListener("touchStart",t),e&&this.addEventListener("touchEnd",e),o&&this.addEventListener("touchMove",o)},E.prototype.removeTouchListeners=E.prototype.unlistenAll,E.prototype.attachTouchMoveEvent=function(){let t=this._elem;t&&(this._defaultPrevented&&t.addEventListener("touchmove",n.preventDefault),t.addEventListener("touchmove",this._onTouchMove,this._evtOptions))},E.prototype.detachTouchMoveEvent=function(){let t=this._elem;t&&(this._defaultPrevented&&t.removeEventListener("touchmove",n.preventDefault),t.removeEventListener("touchmove",this._onTouchMove,this._evtOptions))},E.prototype.attachTouchEvents=function(t){let e=this._elem;e&&(e.addEventListener("touchstart",this._onTouchStart,this._evtOptions),e.addEventListener("touchend",this._onTouchEnd,this._evtOptions),e.addEventListener("touchcancel",this._onTouchEnd,this._evtOptions),t&&this.attachTouchMoveEvent())},E.prototype.detachTouchEvents=function(){let t=this._elem;t&&(t.removeEventListener("touchstart",this._onTouchStart,this._evtOptions),t.removeEventListener("touchend",this._onTouchEnd,this._evtOptions),t.removeEventListener("touchcancel",this._onTouchEnd,this._evtOptions),this.detachTouchMoveEvent())},E.getButtonType=function(t){return t.changedTouches?0:t.button||0},E.getPosition=function(t,e){let o=t.changedTouches,i=o?o[o.length-1]:t;return e||(e={}),e.x=e.pageX=i.pageX,e.y=e.pageY=i.pageY,e.clientX=i.clientX,e.clientY=i.clientY,e.timeStamp=t.timeStamp,e};let M=function(t,e){let o;if(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseMove=this._dispatch.bind(this,"mouseMove"),e)if("string"==typeof e){let t=e.charAt(0).toLowerCase();"m"===t?this._whichBtn=1:"r"===t&&(this._whichBtn=2)}else o=e,e.useDragStart&&(this._useDrag=!0);this._tchProxy=new E(null,o),this._tchProxy.addTouchListeners(this._onMouseDown,this._onMouseUp,this._onMouseMove),this.setElement(t)};i.inherits(M,n),M.prototype._tchProxy,M.prototype._down=null,M.prototype._whichBtn=0,M.prototype._useDrag=!1,M.prototype._disabled=!1,M.prototype._onMouseMove,M.prototype.dispose=function(){this.unlistenAll(),this._tchProxy.dispose(),window.removeEventListener("mouseup",this._onMouseUp,!1)},M.prototype.disable=function(t){this._disabled=!1!==t,this._disabled||this.reset()},M.prototype.enable=function(t){this.disable(!1===t)},M.prototype.getElement=function(){return this._tchProxy.getElement()},M.prototype.setElement=function(t){let e=this._tchProxy.getElement();e&&(e.removeEventListener("dragstart",n.preventDefault,!1),this._useDrag?(e.removeEventListener("dragstart",this._onMouseDown,!1),e.removeAttribute("draggable")):e.removeEventListener("mousedown",this._onMouseDown,!1)),this._tchProxy.setElement(t),e=this._tchProxy.getElement(),e&&(e.addEventListener("dragstart",n.preventDefault,!1),this._useDrag?(e.addEventListener("dragstart",this._onMouseDown,!1),e.setAttribute("draggable","true")):e.addEventListener("mousedown",this._onMouseDown,!1))},M.prototype.reset=function(){this._down=null},M.prototype.getMouseDown=function(){return this._down},M.prototype.isMouseDown=function(){return!!this._down},M.prototype.isMouseUp=function(){return!this._down},M.prototype.getDuration=function(t){if(this._down){return(t?t.getTime():Date.now())-this._down.timeStamp}return 0},M.prototype._onMouseDown=function(t){this._disabled||this._isValidButton(t)&&(window.addEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&(window.addEventListener("mousemove",this._onMouseMove,!1),this._tchProxy.attachTouchMoveEvent()),this._down||(this._down=E.getPosition(t),this._dispatch("change",t)),this._dispatch("mouseDown",t))},M.prototype._onMouseUp=function(t){this._disabled||this._isValidButton(t)&&(window.removeEventListener("mousemove",this._onMouseMove,!1),window.removeEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&this._tchProxy.detachTouchMoveEvent(),this._down&&(t.duration=t.timeStamp-this._down.timeStamp,t.up=!0,this._dispatch("change",t)),this._down=null,this._dispatch("mouseUp",t))},M.prototype._isValidButton=function(t){return E.getButtonType(t)===this._whichBtn};let I=function(t){this._textRange=document.createRange(),this._isIE=function(){let t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0}(),this._unselectables={title:!0,header:!0,content:!1},this._hosts=[],this._map=[],this._curRect={},this._curRect.left=0,this._curRect.right=0,this._curRect.top=0,this._curRect.bottom=0,this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onBlur=this._onBlur.bind(this),this._onCopy=this._onCopy.bind(this),this._onTab=this._onTab.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),t&&this.config({cellSelection:t})};i.inherits(I,b),I._styles=function(t){if(t){let e="";if(Array.isArray(t)){e=t.map(u).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {")}else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,c)}return""}([":host .tr-grid .cell.selection",["background-image: none;","background-color: var(--grid-selection-bgcolor);"]]),I._applyStyles=function(t){t&&!t._cellSelectionStyles&&y.isHaloTheme()&&(t._cellSelectionStyles=!0,h(I._styles,t.getElement()))},I.prototype._textRange=null,I.prototype._anchor=null,I.prototype._curMouse=null,I.prototype._curRect,I.prototype._map,I.prototype._hasCellSpan=!1,I.prototype._mode="cell",I.prototype._unselectables,I.prototype._lastSelection=null,I.prototype._lastMouseUpTimeStamp,I.prototype._autoDeselecting=!0,I.prototype._disabled=!1,I.prototype._mouseTrait=null,I.prototype._allowMultipleSelection=!0,I.prototype._dirty=!1,I.prototype._tabToSelect=!1,I.prototype._isIE,I.prototype._unclickableMapping={A:1,INPUT:1,BUTTON:1,SELECT:1,CHECKBOX:1,"EMERALD-DATETIME-PICKER":1,"EMERALD-MULTI-SELECT":1},I.prototype._dirVectors=null,I.prototype._mouseOutOfGrid=!1,I.prototype._timeoutID=null,I.prototype._scrollSpeed=500,I.prototype._prevRect={},I.prototype._draggable=!1,I.prototype.getName=function(){return"CellSelectionPlugin"},I.prototype.hasMultiTableSupport=function(){return!0},I.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._mouseTrait=new M(t.getElement()),this._mouseTrait.addEventListener("mouseDown",this._onMouseDown),this._mouseTrait.addEventListener("mouseUp",this._onMouseUp),this._mouseTrait.addEventListener("mouseMove",this._onMouseMove),t.getParent().addEventListener("blur",this._onBlur,!0),t.listen("focusout",this._onBlur),t.listen("copy",this._onCopy),this._tabToSelect&&t.listen("keydown",this._onTab),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnMoved",this._onColumnMoved),t.enableClass("no-text-select",!0),1===this._hosts.length&&this.config(e),I._applyStyles(t))},I.prototype.unload=function(t){let e=this._hosts.indexOf(t);e<0||(this._mouseTrait.removeEventListener("mouseDown",this._onMouseDown),this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),this._mouseTrait.removeEventListener("mouseUp",this._onMouseUp),t.unlisten("copy",this._onCopy),t.getParent().removeEventListener("blur",this._onBlur),t.unlisten("keydown",this._onTab),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnMoved",this._onColumnMoved),this.deselectAll(),t.enableClass("no-text-select",!1),this._hosts.splice(e,1),this._hosts.length||(this._compositeGrid=null,this._realTimeGrid=null))},I.prototype.config=function(t){if(!t)return;let e=t.cellSelection;if(!e)return;let o=e.mode;this._mode=o||this._mode,o=e.multipleSelection,this._allowMultipleSelection=null!=o?o:this._allowMultipleSelection,this._allowMultipleSelection||this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),o=e.autoDeselecting,this._autoDeselecting=null!=o?o:this._autoDeselecting,o=e.selectableSections,o&&this.setSelectableSections(o),o=e.tabToSelect,o&&(this._tabToSelect=!0,this._hosts[0]&&this._hosts[0].listen("keydown",this._onTab)),this.addListener(e,"selectionChanged"),this.addListener(e,"copy"),this.addListener(e,"beforeMouseDown")},I.prototype.getConfigObject=function(t){let e=t||{},o=e.cellSelection;o||(o=e.cellSelection={}),o.mode=this._mode,this._allowMultipleSelection||(o.multipleSelection=!1),this._autoDeselecting||(o.autoDeselecting=!1),this._tabToSelect&&(o.tabToSelect=!0);let i=this._unselectables,n=[];for(let t in i)i[t]||n.push(t);return n.length>0&&n.length<3&&(o.selectableSections=n),e},I.prototype.mockMouseClick=function(t,e){this._hosts[0].focus();let o=this._mockMouseEvent(t,e);this._onMouseDown(o),this._onMouseUp(o)},I.prototype.mockMouseDown=function(t,e){let o=this._mockMouseEvent(t,e);this._onMouseDown(o)},I.prototype.mockMouseUp=function(t,e){let o=this._mockMouseEvent(t,e);this._onMouseUp(o)},I.prototype.mockMouseMove=function(t,e,o,i,n){let r={clientX:o,clientY:i};r=this._mockMouseEvent(t,e,r),n?(r.target=n,r.path=[n]):r.path=[r.target],this._onMouseMove(r)},I.prototype._onMouseDown=function(t){if(this._draggable=!1,this._disabled||!this._isClickable(t.target))return;let e=this.getRelativeGrid(t).getRelativePosition(t);this._unselectables[e.sectionType]||(this._dispatch("beforeMouseDown",e),e.cancel||(this._dirty=!0,this.selectSingleCell(e),this._draggable=!0))},I.prototype._onMouseMove=function(t){if(this._disabled||!this._anchor||!this._draggable)return;let e=this._getActiveGrid(),o=e.getRelativePosition(t);if(0===o.sectionIndex)return;if(!o.hit){let t=e.getHeight(),i=e.getWidth();if(0===e.getScrollWidth()&&0===e.getScrollHeight())return;if(t>=o.y&&!(o.y<0)&&i>=o.x&&!(o.x<0))return;let n=0,r=0;o.x>i?n=o.x-i:o.x<0&&(n=o.x),o.y>t?r=o.y-t:o.y<0&&(r=o.y);let s={x:n,y:r};this._setScrollSpeed(s);let l=this._checkIsSameProps(s);if(this._mouseOutOfGrid&&l)return;return this._dirVectors=s,void this._setScrollInterval(s)}if(this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),this._isTheSamePosition(this._curMouse,o))return;this._curMouse=o,this._dirty=!0;let i=this._newSelectionRect();this._updateSelection(i)},I.prototype._getActiveGrid=function(){let t=this._anchor;return t&&t.grid?t.grid:this._hosts[0]},I.prototype._setScrollSpeed=function(t){let e=Math.floor(300-Math.abs((t.x+t.y)/2));e%10==0&&(this._scrollSpeed=e>0||e<=500?e:50)},I.prototype._detectDir=function(t){let e=null;return t<0?e="minus":0===t?e="zero":t>0&&(e="positive"),e},I.prototype._checkIsSameProps=function(t){if(!this._dirVectors||!t)return!1;let e=this._detectDir(this._dirVectors.x)===this._detectDir(t.x),o=this._detectDir(this._dirVectors.y)===this._detectDir(t.y);return e&&o},I.prototype._setScrollInterval=function(t){this._timeoutID&&clearTimeout(this._timeoutID),this._mouseOutOfGrid||(this._mouseOutOfGrid=!0);let e=this._newSelectionRect(),o=this._scrollSpeed||500;this._timeoutID=setInterval(function(){if(o!==this._scrollSpeed)return void this._setScrollInterval(t);let i=this._hosts[0].getScrollTop(),n=this._hosts[0].getScrollLeft(),r=t.y>0,l=t.x>0,u=this._map[0].section.getCellWidth(),c=this._map[0].section.getCellHeight(),h=r?i+u:i-u,a=l?n+c:n-c;if(0!==t.y){this._hosts[0].setScrollTop(h);let t=this._hosts[0].getVScrollbar(),o=this._hosts[0].getRowVirtualizer(),i=this._isEndOfVerticalScroll(),n=t.getHeight(),s=o.getViewOffset();if(r){let t=o.getContentStart(e.bottom+1)-s;if(t<=n)for(;t<=n;)e.bottom+=1,t=o.getContentStart(e.bottom+1)-s;else i&&(e.bottom=this._hosts[0].getRowCount())}else{let t=o.getContentStart(e.top-1)-s;if(t>=0)for(;t>=0;)e.top-=1,t=o.getContentStart(e.top-1)-s;else i&&(e.top=1)}}if(0!==t.x){this._hosts[0].setScrollLeft(Math.floor(a));let t=this._isEndOfHorizontalScroll(),o=this._hosts[0].getHScrollbar(),i=o.getTrackSize();if(l){let n=0;this._hosts[0].getPinnedLeftColumnCount()&&(n=this._hosts[0].getContentWidth()-o.getContentWidth()),this._hosts[0].getColumnRight(e.right)-n<=i?e.right+=1:t&&(e.right=this._hosts[0].getColumnCount())}else{this._hosts[0].getColumnLeft(e.left-1)>=0?e.left-=1:t&&(e.left=0)}}this._updateSelection(e),this._prevRect=s(e)}.bind(this),o)},I.prototype._isEndOfVerticalScroll=function(){let t=this._hosts[0].getScrollTop();return 0===t||t+this._hosts[0].getHeight()>this._hosts[0].getScrollHeight()},I.prototype._isEndOfHorizontalScroll=function(){return this._hosts[0].getHScrollbar().isEndOfHorizontalScroll()||0==this._hosts[0].getScrollLeft()},I.prototype._onMouseUp=function(t){this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._disabled&&this._dirty&&(this._draggable=!1,this._isIE&&(this._lastMouseUpTimeStamp=t.timeStamp),this._updateSelectionText(),this._dispatch("selectionChanged",{}),this._dirty=!1)},I.prototype._updateSelectionText=function(){let t=this._getGridHiddenInput();if(t){let e,o=window.getSelection();e=this._isIE?this._textRange.htmlText:o.toString(),e||(this._textRange.setStart(t.parentNode,0),this._textRange.setEnd(t,0),o.removeAllRanges(),o.addRange(this._textRange),this._isIE&&this._getActiveGrid().focus())}},I.prototype._onBlur=function(t){this._dirty||this._autoDeselecting&&(this._lastMouseUpTimeStamp&&t.timeStamp-this._lastMouseUpTimeStamp<100||this.deselectAll()&&this._dispatch("selectionChanged",{}))},I.prototype._onColumnMoved=function(t){let e,o=this._curRect,i=t.fromColIndex,n=t.toColIndex;if(!(i<o.left&&n<o.left||i>=o.right&&n>=o.right)){if(i<o.left)e=o.left-1;else if(i>=o.right)e=o.right;else{if(!(n<o.left||n>=o.right))return;e=n}for(let t=o.top;t<o.bottom;t++){let o=this._map[t];o.section.selectCell(e,o.rowIndex,!1)}this._updateSelectionText()}},I.prototype._isClickable=function(t,e){return!(!this._hosts[0]||!t||"CORAL-ICON"!==t.tagName&&"CORAL-HEADER"!==t.tagName&&0===t.tagName.indexOf("CORAL-"))&&!(this._unclickableMapping[t.tagName]&&!t.classList.contains("valigner"))},I.prototype._onCopy=function(t){let e,o,i,r={grid:this._hosts[0],sender:this,data:"",format:"",clipboards:[]};if(this._dispatch("copy",r),e=this._isIE?this._textRange.htmlText:window.getSelection().toString(),e)return;if(t.clipboardData?(o=t.clipboardData,i="text/plain"):(o=window.clipboardData,i="Text"),r.data)o.setData(r.format||i,r.data);else{let t=this.getSelectedText();t&&o.setData(i,t)}let s=r.clipboards?r.clipboards.length:0;for(let t=0;t<s;++t){let e=r.clipboards[t];e.format&&o.setData(e.format,e.data||"")}n.preventDefault(t)},I.prototype._onTab=function(t){if(9===t.keyCode){if(t.altKey||t.ctrlKey)return;(t.shiftKey?this.selectPrevCell():this.selectNextCell())&&n.preventDefault(t)}},I.prototype._onPostSectionDataBinding=function(t){let e=this._getActiveGrid();if(this.getSelectionCount()>0&&e===t.sender){let e,o,i=t.section.getRowOffset(),n=this._curRect.top-i,r=this._curRect.bottom-i,s=this._curRect.left,l=this._curRect.right;for(e=t.fromRowIndex;e<t.toRowIndex;e++)if(e>=n&&e<r)for(o=s;o<l;o++)t.section.selectCell(o,e,!0);else for(o=s;o<l;o++)t.section.selectCell(o,e,!1)}},I.prototype._isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},I.prototype._cacheSectionMap=function(){let t=this._hosts[0].getSectionCount(),e=0,o=0;this._hasCellSpan=!1;let i=this._getActiveGrid();for(let n=0;n<t;++n){let t=i.getSectionSettings(n),r=t.getSection(),s=r.hasCellSpan(),l=r.getRowCount();for(let i=0;i<l;++i){let l={};l.section=r,l.hasCellSpan=s,l.sectionIndex=n,l.rowIndex=i,l.rowOffset=o,l.type=t.getType(),this._map[e]=l,e++}o+=l,this._hasCellSpan|=s}this._map.length=e},I.prototype._getCumulativeIndex=function(t){let e=t.section;return e?"string"!=typeof e&&"number"!=typeof e||(e=this._hosts[0].getSection(e)):e=this._hosts[0].getSection("content"),e.getRowOffset()+t.rowIndex},I.prototype._newSelectionRect=function(){if(!this._anchor||!this._curMouse)return this._curRect;let t={};"row"!==this._mode?this._anchor.colIndex<=this._curMouse.colIndex?(t.left=this._anchor.colIndex,t.right=this._curMouse.colIndex+1):(t.left=this._curMouse.colIndex,t.right=this._anchor.colIndex+1):(t.left=0,t.right=this._hosts[0].getColumnCount());let e=this._getCumulativeIndex(this._curMouse),o=this._getCumulativeIndex(this._anchor);return"column"!==this._mode?o<=e?(t.top=o,t.bottom=e+1):(t.top=e,t.bottom=o+1):(t.top=0,t.bottom=this._hosts[0].getRowCount()),this._scanCellSpans(t),t},I.prototype._scanCellSpans=function(t){if(!this._hasCellSpan)return;let e=0,o=0,i=!1;do{for(i=!1,e=t.left;e<t.right;++e)i|=this._expandRect(e,t.top,t);for(e=t.right-1,o=t.top+1;o<t.bottom;++o)i|=this._expandRect(e,o,t);for(o=t.bottom-1,e=t.right-1;--e>=t.left;)i|=this._expandRect(e,o,t);for(o=t.bottom-1;--o>=t.top;)i|=this._expandRect(t.left,o,t)}while(i)},I.prototype._expandRect=function(t,e,o){let i=this._map[e];if(!i.hasCellSpan)return!1;if(!0===this._unselectables[i.type])return!1;let n=!1,r=0,s=i.section.getCellColSpan(t,i.rowIndex);s>1?(r=t+s,r>o.right&&(o.right=r,n=!0)):s<0&&(r=t+s,r<o.left&&(o.left=r,n=!0),s=i.section.getCellColSpan(r,i.rowIndex),r+=s,r>o.right&&(o.right=r,n=!0));let l=i.section.getCellRowSpan(t,i.rowIndex);return l>1?(r=i.section.getRowOffset()+i.rowIndex+l,r>o.bottom&&(o.bottom=r,n=!0)):l<0&&(r=i.section.getRowOffset()+i.rowIndex+l,r<o.top&&(o.top=r,n=!0),l=i.section.getCellRowSpan(t,r),r+=l,r>o.bottom&&(o.bottom=r,n=!0)),n},I.prototype._updateSelection=function(t){this._updateColumnSelection(t.left,this._curRect.left),this._curRect.left=t.left,this._updateColumnSelection(this._curRect.right,t.right),this._curRect.right=t.right,this._updateRowSelection(t.top,this._curRect.top),this._curRect.top=t.top,this._updateRowSelection(this._curRect.bottom,t.bottom),this._curRect.bottom=t.bottom;let e=this._getActiveGrid();if(e){let t=this._curRect.left,o=this._curRect.top,i=this._map[o],n=0,r=0;!!i&&"content"===i.type&&(n=this._curRect.right-t,r=this._curRect.bottom-o,o-=i.rowOffset);let s=e.getSection("content");s&&s.setCellBounds(t,o,n,r)}},I.prototype._updateColumnSelection=function(t,e){if(t===e)return;let o,i;if(t<e)for(i=this._curRect.top;i<this._curRect.bottom;++i)for(o=t;o<e;++o)this._selectAsPosition(i,o,!0);else for(i=this._curRect.top;i<this._curRect.bottom;++i)for(o=t;--o>=e;)this._selectAsPosition(i,o,!1)},I.prototype._updateRowSelection=function(t,e){if(t===e)return;let o,i;if(t<e)for(i=t;i<e;++i)for(o=this._curRect.left;o<this._curRect.right;++o)this._selectAsPosition(i,o,!0);else for(i=t;--i>=e;)for(o=this._curRect.left;o<this._curRect.right;++o)this._selectAsPosition(i,o,!1)},I.prototype._selectAsPosition=function(t,e,o){let i=this._map[t];i&&!this._unselectables[i.type]&&i.section.selectCell(e,i.rowIndex,o)},I.prototype._isTheSamePosition=function(t,e){return null===t&&null===e||null!==t&&null!==e&&(t.rowIndex===e.rowIndex&&t.colIndex===e.colIndex&&t.sectionIndex===e.sectionIndex)},I.prototype._getGridHiddenInput=function(){return this._hosts[0]?this._hosts[0].getHiddenInput():null},I.prototype.getSelectedText=function(){let t=this._getActiveGrid();if(!t||!this.getGridApi()||this.getSelectionCount()<=0)return"";let e="",o=t.getDataSource();for(let t=this._curRect.top;t<this._curRect.bottom;++t){let i=this._map[t];t!==this._curRect.top&&(e+="\n");let n=null;if(!0!==this._unselectables[i.type]){"content"===i.type&&(n=this._getRow(o,i.rowIndex));for(let t=this._curRect.left;t<this._curRect.right;++t)if(t!==this._curRect.left&&(e+="\t"),"content"===i.type){if(n){let o=this._getField(t);e+=d(n[o])}}else{let o=i.section.getCell(t,i.rowIndex).getTextContent();e+=d(o)}}}return e},I.prototype.selectAll=function(){let t=this._getActiveGrid(),e={left:0,right:t.getColumnCount(),top:0,bottom:t.getRowCount()};this.deselectAll(),this._anchor={grid:t},this._cacheSectionMap(),this._scanCellSpans(e),this._updateSelection(e),this._dispatch("selectionChanged",{})},I.prototype.deselectAll=function(){if(this.getSelectionCount()<=0)return!1;let t=this._getActiveGrid();if(t){let e=t.getElement().querySelectorAll("div.cell.selection"),o=e.length;for(let t=0;t<o;t++)e[t].classList.remove("selection");let i=t.getSection("content");i&&i.setCellBounds(0,0,0,0)}return this._lastSelection=this.getSelectionBounds(),this._anchor=null,this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top,!0},I.prototype.getSelectionCount=function(){return(this._curRect.right-this._curRect.left)*(this._curRect.bottom-this._curRect.top)},I.prototype.getSelectionBounds=function(t){if(this.getSelectionCount()<=0)return null;let e=null!=t?t:{};if(e.left=this._curRect.left,e.right=this._curRect.right-1,e.top=this._curRect.top,e.bottom=this._curRect.bottom-1,this._map.length>0&&e.bottom<this._map.length){let t=this._map[e.top];e.startSection=t.sectionIndex,e.startSectionRow=t.rowIndex,t=this._map[e.bottom],e.endSection=t.sectionIndex,e.endSectionRow=t.rowIndex}return e},I.prototype.getLastSelectionBounds=function(t){if(null===this._lastSelection)return null;let e=null!=t?t:{};for(let t in this._lastSelection)e[t]=this._lastSelection[t];return e},I.prototype.setSelectableSections=function(t){if(this._unselectables.content=!0,this._unselectables.header=!0,this._unselectables.title=!0,!t)return this._unselectables.content=!1,this._unselectables.header=!1,void(this._unselectables.title=!1);let e="string"==typeof t?[t]:t;for(let t=e.length;--t>=0;)this._unselectables[e[t]]=!1},I.prototype.selectSingleCell=function(t){if(this.deselectAll(),!t)return;this._anchor=t,this._curMouse=t,this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;let e=this._newSelectionRect();this._updateSelection(e)},I.prototype.selectCells=function(t){if(this.deselectAll(),!t)return;this._anchor=t,this._curMouse={rowIndex:t.rowIndex+(t.height-1),colIndex:t.colIndex+(t.width-1)},this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;let e=this._newSelectionRect();this._updateSelection(e)},I.prototype.selectNextCell=function(){let t;if(this._anchor){let e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex+1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex+1,rowIndex:0}):(t=e.getNextCell(this._anchor),t&&!t.cell&&(t=null)),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},I.prototype.selectPrevCell=function(){let t;if(this._anchor){let e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex-1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex-1,rowIndex:0}):(t=e.getPrevCell(this._anchor),t&&!t.cell&&(t=null)),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},I.prototype.getAnchorInfo=function(){return this._getActiveGrid().getCellInfo(this._anchor)},I.prototype.getSelectedCells=function(){let t=[];for(let e=this._curRect.top;e<this._curRect.bottom;++e){let o=this._map[e],i=[];for(let t=this._curRect.left;t<this._curRect.right;++t){let e=o.section.getCell(t,o.rowIndex);i.push(e)}t.push(i)}return t},I.prototype.disableSelection=function(t){this._disabled=!1!==t},I.prototype.setAutoDeselectingOnBlur=function(t){this._autoDeselecting=t},I.prototype.getAutoDeselectingOnBlur=function(){return this._autoDeselecting};!function(t,e){if(!t||!e)return;if(!e.prototype.getName)return;let o=e.prototype.getName().replace(/Plugin$/,"");if(!o)return;let i=t.tr;i||(i=t.tr={});let n=i.grid;n||(n=i.grid={}),n[o+"Plugin"]=e,i[o+"Extension"]=e}(window,I)}]);