!function(t){var e={};function o(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,e,i){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},o.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(o.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)o.d(i,n,function(e){return t[e]}.bind(null,n));return i},o.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="",o(o.s=0)}([function(t,e,o){"use strict";o.r(e);var i={inherits:function(t,e){function o(){}o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t,t.base=function(t,o,i){o||(o="constructor");for(var n=arguments.length,r=new Array(n),s=2;s<n;s++)r[s-2]=arguments[s];return e.prototype[o].apply(t,r)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var o=this._events[t];o?o.indexOf(e)<0&&(o.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},n.prototype.removeEventListener=function(t,e){var o=this._events?this._events[t]:null;if(o){var i=o.indexOf(e);i>=0&&(o.splice(i,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},n.prototype.getListener=function(t,e){if(t){var o=this._events?this._events[t]:null;if(o)return e||(e=0),o[e]||null}return null},n.prototype.addListener=function(t,e){var o=t?t[e]:null;"function"==typeof o&&this.addEventListener(e,o)},n.prototype._prepareEventArguments=function(t,e){return e},n.prototype._dispatch=function(t,e){var o=this._events?this._events[t]:null;if(o){e=this._prepareEventArguments(t,e);for(var i=o.length,n=0;n<i;++n)o[n](e)}};n.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};var r=function(t,e,o){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=o&&(this._ctx=o),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};r.prototype.promise=null,r.prototype._resolve=null,r.prototype._reject=null,r.prototype._resolveHandler=null,r.prototype._rejectHandler=null,r.prototype._ctx=null,r.prototype._fulfilled=!1,r.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},r.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},r.prototype.isFulfilled=function(){return this._fulfilled},r.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(t,e){return function(t,e,o){if(!t)return null;if(!e||t===e)return t;var i;if(o)for(var n=o.length,r=0;r<n;++r)(i=o[r])&&l(t,e,i);else for(i in e)l(t,e,i);return t}({},t,e)},l=function(t,e,o){var i=e[o];if(null!=i){var n=t[o];Array.isArray(n)?t[o]=n.concat(i):Array.isArray(i)&&n?t[o]=i.concat(n):t[o]=i}},a=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},u=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},c=function(t,e){if(!t)return null;var o=document.createElement("style");o.textContent="\n"+t+"\n";var i,n=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null}(e),r=!0;return n||(r=!1,n=document.head),r&&n.children&&n.children.length&&(i=n.children[0]),i?n.insertBefore(o,i):n.appendChild(o),o},h=function(t,e){for(var o in e||(e=[]),t){var i=t[o];"object"==typeof i?h(i,e):e.push(i)}return e},p=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var o="#",i=0;i<3;i++){var n=+e[i];n>=16||(o+="0"),o+=n?n.toString(16).toUpperCase():"0"}return o},d=function(t){if(null==t)return"";var e="string"==typeof t?t:t.toString();return e.length?(e.indexOf("\n")>=0&&(e=e.replace(/[\r\n]/g," ")),e.indexOf("\t")>=0&&(e=e.replace(/\t/g," "))," "!==e.charAt(0)&&" "!==e.charAt(e.length-1)||(e=e.trim()),e):""},_={},f=function(t,e){"attributes"==e.type&&"lang"==e.attributeName&&(t.lang=e.target.lang||"en")},m=function(t,e,o){"attributes"===o.type&&(null!=e?o.attributeName===e&&t(o.target.getAttribute(e)):t(o.target))};_._getNewId=function(){return"observer_"+ ++_._id},_._addObserver=function(t,e,o){var i=o;i||(i={}),i.attributes=!0,_._observer.observe(t,i),_._addListener(t,e)},_._onMutationCallback=function(t){for(var e=0;e<t.length;e++)for(var o=t[e],i=_._listeners[o.target._observeId],n=0;n<i.length;n++)i[n](o)},_._addListener=function(t,e){var o=_._listeners;if(o||(o=_._listeners={}),!t._observeId){var i=_._getNewId();t._observeId=i}o[t._observeId]||(o[t._observeId]=[]);var n=o[t._observeId];n.indexOf(e)<0&&n.push(e)},_.addLanguageListener=function(t){t&&(t.lang=document.documentElement.lang||"en",_._addObserver(document.documentElement,f.bind(null,t)))},_.addAttributeListener=function(t,e,o){t&&e&&_._addObserver(t,m.bind(null,e,o))},_._observer=new MutationObserver(_._onMutationCallback),_._listeners={},_._id=0;var g={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},v={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};v.themeColors=v._defaultColors,v._components={},v._themeName="",v._elfVersion=0,v._dummyIcon=null,v._iconLoaded=!1,v._profileName=null,v._callbacks=[],v._observed=!1,v._pendingResolve=!1,v._themeLoaded=!1,v._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},v._icons["halo-theme"]=v._icons["elf-theme-halo"],v._icons["solar-theme"]=v._icons["elf-theme-solar"],v.getElfVersion=function(){if(!v._elfVersion){var t=0;if(window.EFX_GRID){var e=window.EFX_GRID.version;t=+(e=e.split("."))[0]}else if(window.elf)if(window.elf.version){var o=window.elf.version.match(/\d/);o&&o[0]&&(t=parseInt(o[0],10))}else window.elf.customElements?t=3:window.customElements&&(t=4);else window.Polymer&&(t=1);v._elfVersion=t}return v._elfVersion},v.hasComponent=function(t){var e=v._components[t];if(null==e){e=0;var o=v.getElfVersion();if(t)1===o?document.createElement(t).is===t&&(e=o):o>1&&(window.customElements&&window.customElements.get(t)||document.createElement(t).constructor!==HTMLElement)&&(e=o),v._components[t]=e}return e},v.toLangString=function(t){if(!t)return"";if("zh-hant"===(t=t.toLowerCase()))return"zh-Hant";var e=t.replace(/-.*/,"");return g[e]?e:""},v.hasTheme=function(t){return t===v.getThemeName()},v.getThemeName=function(t){return v._themeName||(v._themeName=v.getCssVariable("--theme-name",document.documentElement)),v._themeName},v.setThemeName=function(t){v._themeName=t},v.isThemeLoaded=function(){return v._themeLoaded},v.getColors=function(){return v.themeColors},v.isHaloTheme=function(t){return null==t&&(t=v.getThemeName()),!!t&&t.indexOf("halo")>=0},v.injectIcons=function(t,e){if("object"==typeof t){var o=v.getThemeName();t.themeName=o;var i=v.getElfVersion();t.elfVersion=i;var n=v._icons[o];n&&(t.icons=n)}},v.getIconList=function(){var t=v._icons[v.getThemeName()];return t?h(t):[]},v._onIconPreloaded=function(){if(v._dummyIcon){var t=v._dummyIcon.parentNode;t&&t.removeChild(v._dummyIcon),v._dummyIcon=null}},v.prepareIconPreloading=function(){if(!v._iconLoaded){v._iconLoaded=!0;var t=v.getIconList();if(t.length){setTimeout(v._onIconPreloaded,10);var e=v._dummyIcon=document.createElement("coral-icon");return e.style.transform="scale(0)",document.body.appendChild(e),t}}return null},v.getCssVariable=function(t,e){var o="",i=e||document.body;return window&&"string"==typeof t&&1===i.nodeType&&t.match(/^--/)&&(o=(o=window.getComputedStyle(i).getPropertyValue(t)).replace(/[\"\']/g,"")),o},v.getCssVariables=function(t,e){var o=e||document.body;if(window&&1===o.nodeType){var i=window.getComputedStyle(o);for(var n in t){var r=t[n];r&&r.match(/^--/)&&(t[n]=i.getPropertyValue(r).replace(/\"/g,""))}}return t||null},v.setRTK=function(t){null!=t&&(v._rtk=t)},v.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},v._addThemeChangedCallback=function(t){var e=v._callbacks;e.indexOf(t)<0&&e.push(t)},v.reloadThemeColors=function(){return v._deferred&&v._deferred.isFulfilled()?(v._profileName="",v._themeLoaded=!1,v.themeReady=null,v.getThemeColors()):v.themeReady},v.getThemeColors=function(t){if("function"==typeof t&&v._addThemeChangedCallback(t),v.themeReady)return v.themeReady;var e=v._deferred=new r;v.themeReady=e.promise;var o=v.getMovementColorProfile();if(o)o!==v._profileName?setTimeout(v._profileNameRetrieved,100):v._deferred.resolve(v.themeColors);else{var i={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},n=window?window.JET:null;if(v._themeLoaded=!1,v._rtk&&v._rtk.Settings)v._rtk.Settings.getAsync(i).then(v._loadingProfileSuccess).catch(v._loadingProfileFailure);else if(n&&n.Settings)try{n.Settings.read(v._loadingProfileSuccess,i)}catch(t){v._loadingProfileFailure()}else setTimeout(v._profileNameRetrieved,100)}return e.promise};var y=function(t){if(t!==v._profileName){v._retrieveThemeColors(t),v._pendingResolve&&(v._pendingResolve=!1,v._deferred.resolve(v.themeColors));for(var e=v._callbacks,o=0;o<e.length;o++)e[o]()}};v._loadingProfileSuccess=function(t){t&&document.documentElement.setAttribute("movement-color-profile",t.toLowerCase()),v._observed?v._pendingResolve=!0:v._profileNameRetrieved(t)},v._loadingProfileFailure=function(){v._retrieveThemeColors(),v._observed||(v._observed=!0,_.addAttributeListener(document.documentElement,y,"movement-color-profile")),v._deferred.reject("Failed to get movement color profile from settings.")},v._profileNameRetrieved=function(){var t=v.getMovementColorProfile();v._retrieveThemeColors(t),v._observed||(v._observed=!0,_.addAttributeListener(document.documentElement,y,"movement-color-profile")),v._deferred.resolve(v.themeColors)},v._retrieveThemeColors=function(t){v._themeLoaded=!0,v._profileName=t;var e=v.themeColors=v.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});e.up||(e.up=v._defaultColors.up,e.down=v._defaultColors.down,e.level=v._defaultColors.level,e.tickUp=v._defaultColors.tickUp,e.tickDown=v._defaultColors.tickDown),e.positive=e.up,e.negative=e.down,e.neutral=e.level;var o=document.createElement("table");o.style.visibility="hidden",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.width="0";var i=o.insertRow(-1),n=i.insertCell(-1);document.body.appendChild(o);var r=window.getComputedStyle(i);e.tableBg=r.backgroundColor;var s=window.getComputedStyle(n);e.tableText=s.color,e.tableBorder=s.borderColor,e.tableText===e.tableBorder&&(n.className="tr-lg",s=window.getComputedStyle(n),e.tableBg=s.backgroundColor,e.tableText=s.color,e.tableBorder=s.borderColor,e.tableText===e.tableBorder&&(e.tableBg=v._defaultColors.baseGrid,e.tableText=v._defaultColors.baseText,e.tableBorder="")),e.tableBg=p(e.tableBg),e.tableText=p(e.tableText),e.tableBorder=p(e.tableBorder),document.body.removeChild(o),e.baseGrid=e.tableBg,e.baseText=e.tableText,e.trackColor=e.primary||v._defaultColors.trackColor};var b=function(){};i.inherits(b,n),b.prototype._hosts=null,b.prototype._compositeGrid=null,b.prototype._realTimeGrid=null,b.prototype._rowGetter=null,b.prototype._initializedGrid=!1,b.prototype.listen=b.prototype.addEventListener,b.prototype.unlisten=b.prototype.removeEventListener,b.prototype.afterInit=function(t,e,o){var i=null;o&&o.getCoreGrid&&(i=o.getCoreGrid()),i&&(this.getGridApi()||this.setGridWrapper("compositegrid",o),this._compositeGrid&&i.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?T:R,this._afterInit())},b.prototype._afterInit=function(){},b.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},b.prototype.hasMultiTableSupport=function(){return!1},b.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},b.prototype.getName=function(){return"GridPlugin"},b.prototype.initialize=function(t,e){},b.prototype.unload=function(t){this._dispose()},b.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var o=(e=t.target).api;if(o&&o.getCoreGrid)return o.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var i=this._hosts.length;--i>=0;){var n=this._hosts[i];if(n.getElement().contains(e))return n}return null},b.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},b.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},b.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var o=this.getColumnIndex(t),i=this._realTimeGrid.getColumnDefinition(o);if(i)return i.getName()}return""},b.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){var e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},b.prototype.getColumnIndices=function(t){var e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){for(var o,i=this._compositeGrid.getColumnFields(),n=this._compositeGrid.getColumnCount(),r=[],s=0;s<t.length;s++)if("number"==typeof(o=t[s]))o>=0&&o<n&&r.push(o);else{var l=i.indexOf(o);-1!==l&&r.push(l)}return r}return this._realTimeGrid.getColumnIndices(t)},b.prototype.getColumnId=function(t){if("string"==typeof t)return t;var e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var o=this._realTimeGrid.getColumnDefinition(t);return o?o.getId():""},b.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},b.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},b.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},b.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},b.prototype._moveColumnById=function(t,e){var o=this._hosts,i=o?o.length:0;if(i){for(var n=0,r=0;r<i;++r)n|=o[r].moveColumnById(t,e);return!!n}return!1},b.prototype._reorderColumns=function(t,e){var o=this._hosts,i=o?o.length:0;if(i){for(var n=0,r=0;r<i;++r)n|=o[r].reorderColumns(t,e);return!!n}return!1},b.prototype._loadPlugin=function(t,e,o){return t||(t=e.getPlugin(o))||(t=e.loadPlugin(o))&&this._initializedGrid&&(t._initializedGrid=!0),t},b.prototype._requestPlugin=function(t,e,o){return this._initializedGrid?b.requestPlugin(t,e,o,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},b.requestPlugin=function(t,e,o,i,n){var s=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(s=t),l&&(s=l.getCoreGrid(),i||n||(l.getModel?i=l:n=l))}if(!s)return Promise.reject("Cannot find grid element");var a=s.getPlugin(e);if(a)return Promise.resolve(a);var u=new r;return setTimeout(b._onPluginRequested.bind(null,{grid:s,pluginRef:e,compositeGrid:i,realTimeGrid:n,config:o,deferred:u}),10),u.promise},b._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var o=e.getPlugin(t.pluginRef);if(o)return t.deferred.resolve(o);var i=!1;return t.pluginRef.beforeInit&&(i=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(o=e.loadPlugin(t.pluginRef,t.config))?(!i&&o.beforeInit&&(i=!0,o.beforeInit(e.getElement(),t.config)),o.setGridWrapper&&(t.compositeGrid?o.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&o.setGridWrapper("realtimegrid",t.realTimeGrid)),o.afterInit&&o.afterInit(),t.deferred.resolve(o)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},b.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},b.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},b.prototype._getColumnOption=function(t,e,o){var i=this._getColumnData(t,o);return i?i[e]:null},b.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var o=e.getColumnData(t);return o||(o=e.setColumnData(t,{})),o},b.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},b.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},b.prototype._getRow=function(t,e){return x(t.getRowDataAt(e))},b.prototype._getData=function(t,e,o){var i=this._getRow(t,e);return i?i[o]:void 0},b.prototype._setData=function(t,e,o,i){if(this._realTimeGrid){var n=S(t,e);n&&n.setData(o,i)}else"number"==typeof e?t.setDataAt(e,o,i):t.setData(e,o,i)},b.prototype._setRowData=function(t,e,o){if(this._realTimeGrid){var i=S(t,e);i&&i.setRowData(o)}else"number"==typeof e?t.setRowDataAt(e,o):t.setRowData(e,o)},b.prototype._setStaticData=function(t,e,o,i){if(this._realTimeGrid){var n=S(t,e);n&&n.setStaticData(o,i)}else this._setData(t,e,o,i)},b.prototype._setColumnData=function(t,e,o,i){if(e){var n=Array.isArray(i)?i:t.getAllRowIds(!0),r=n?n.length:0;if(r)if(1!==r){var s=Array.isArray(o)?o:n.map((function(){return o}));if(this._realTimeGrid){for(var l=0;l<r;++l){var a=t.getRowData(n[l]);if(a){var u=a.ROW_DEF;u&&(u.getRowData()[e]=s[l])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,s,n)}else this._setData(t,n[0],e,Array.isArray(o)?o[0]:o)}},b.prototype._activateColumnRenderer=function(t,e,o){if(null!=t){var i=this._realTimeGrid;i?i.activateColumnRenderer(t,e,o):"function"==typeof o?this._hosts[0].setColumnDataBindingHandler(t,o):this._hosts[0].setColumnDataBindingHandler(t,null)}};var C=function(){},w={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};b.prototype._mockMouseEvent=function(t,e,o){null==t&&(t=0),null==e&&(e=0);var i=o||{};if(i.preventDefault=C,i.stopPropagation=C,t>=0&&e>=0){var n=this._activeGrid||this._hosts[0],r=n?n.getCell(i.sectionType||"content",t,e):null;i.target=r?r.getElement():null}return i},b.prototype._mockKeyboardEvent=function(t,e){var o=e||{};if(o.preventDefault=C,o.stopPropagation=C,"string"==typeof t){var i=w[t.toLowerCase()]||0;t=i||t.charCodeAt(0)}return o.keyCode=t,o},b._staticStyles={},b._themeLoaders={},b._themeLoadSuccess=function(t,e){var o=this.getName(),i=b._staticStyles[o]=t(e);this.applyStyles(i,o)},b.prototype.applyStaticStyles=function(t){var e=this.getName(),o=b._staticStyles[e];o?this.applyStyles(o,e):t&&(b._themeLoaders[e]||(b._themeLoaders[e]=v.getThemeColors()),b._themeLoaders[e].then(b._themeLoadSuccess.bind(this,t)))},b.prototype.applyStyles=function(t,e,o){e||(e=this.getName());var i,n,r="_style"+e,s=this._hosts,l=s.length;if(l)if(o)for(i=0;i<l;i++)n=s[i],this.revokeStyles(n,e),n[r]=c(t,n.getElement());else for(i=0;i<l;i++)(n=s[i])[r]||(c(t,n.getElement()),n[r]=!0)},b.prototype.revokeStyles=function(t,e){if(t&&e){var o=t[e="_style"+e];o&&1===o.nodeType&&(o.parentNode.removeChild(o),t[e]=null)}};var S=function(t,e){var o="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return o&&o.ROW_DEF||null},R=function(t){return t},T=function(t){return t?t.ROW_DEF.getRowData():null},x=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},E=function(t,e){this._onTouchStart=this._dispatch.bind(this,"touchStart"),this._onTouchEnd=this._dispatch.bind(this,"touchEnd"),this._onTouchMove=this._dispatch.bind(this,"touchMove"),e&&("boolean"==typeof e?this._touchMove=!0:(e.useTouchMove&&(this._touchMove=!0),e.preventDefault&&(this._defaultPrevented=!0))),this._defaultPrevented||(this._evtOptions=E.passive),this.setElement(t)};i.inherits(E,n),E.prototype._elem,E.prototype._onTouchStart,E.prototype._onTouchEnd,E.prototype._onTouchMove,E.prototype._touchMove=!1,E.prototype._defaultPrevented=!1,E.prototype._evtOptions,E.passive={passive:!0},E.prototype.getElement=function(){return this._elem},E.prototype.setElement=function(t){this.detachTouchEvents(),this._elem=t||null,this.attachTouchEvents(this._touchMove)},E.prototype.applyTrait=E.prototype.setElement,E.prototype.dispose=function(){this.setElement(null)},E.prototype.addTouchListeners=function(t,e,o){t&&this.addEventListener("touchStart",t),e&&this.addEventListener("touchEnd",e),o&&this.addEventListener("touchMove",o)},E.prototype.removeTouchListeners=E.prototype.unlistenAll,E.prototype.attachTouchMoveEvent=function(){var t=this._elem;t&&(this._defaultPrevented&&t.addEventListener("touchmove",n.preventDefault),t.addEventListener("touchmove",this._onTouchMove,this._evtOptions))},E.prototype.detachTouchMoveEvent=function(){var t=this._elem;t&&(this._defaultPrevented&&t.removeEventListener("touchmove",n.preventDefault),t.removeEventListener("touchmove",this._onTouchMove,this._evtOptions))},E.prototype.attachTouchEvents=function(t){var e=this._elem;e&&(e.addEventListener("touchstart",this._onTouchStart,this._evtOptions),e.addEventListener("touchend",this._onTouchEnd,this._evtOptions),e.addEventListener("touchcancel",this._onTouchEnd,this._evtOptions),t&&this.attachTouchMoveEvent())},E.prototype.detachTouchEvents=function(){var t=this._elem;t&&(t.removeEventListener("touchstart",this._onTouchStart,this._evtOptions),t.removeEventListener("touchend",this._onTouchEnd,this._evtOptions),t.removeEventListener("touchcancel",this._onTouchEnd,this._evtOptions),this.detachTouchMoveEvent())},E.getButtonType=function(t){return t.changedTouches?0:t.button||0},E.getPosition=function(t,e){var o=t.changedTouches,i=o?o[o.length-1]:t;return e||(e={}),e.x=e.pageX=i.pageX,e.y=e.pageY=i.pageY,e.clientX=i.clientX,e.clientY=i.clientY,e.timeStamp=t.timeStamp,e};var M=function(t,e){var o;if(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseMove=this._dispatch.bind(this,"mouseMove"),e)if("string"==typeof e){var i=e.charAt(0).toLowerCase();"m"===i?this._whichBtn=1:"r"===i&&(this._whichBtn=2)}else o=e,e.useDragStart&&(this._useDrag=!0);this._tchProxy=new E(null,o),this._tchProxy.addTouchListeners(this._onMouseDown,this._onMouseUp,this._onMouseMove),this.setElement(t)};i.inherits(M,n),M.prototype._tchProxy,M.prototype._down=null,M.prototype._whichBtn=0,M.prototype._useDrag=!1,M.prototype._disabled=!1,M.prototype._onMouseMove,M.prototype.dispose=function(){this.unlistenAll(),this._tchProxy.dispose(),window.removeEventListener("mouseup",this._onMouseUp,!1)},M.prototype.disable=function(t){this._disabled=!1!==t,this._disabled||this.reset()},M.prototype.enable=function(t){this.disable(!1===t)},M.prototype.getElement=function(){return this._tchProxy.getElement()},M.prototype.setElement=function(t){var e=this._tchProxy.getElement();e&&(e.removeEventListener("dragstart",n.preventDefault,!1),this._useDrag?(e.removeEventListener("dragstart",this._onMouseDown,!1),e.removeAttribute("draggable")):e.removeEventListener("mousedown",this._onMouseDown,!1)),this._tchProxy.setElement(t),(e=this._tchProxy.getElement())&&(e.addEventListener("dragstart",n.preventDefault,!1),this._useDrag?(e.addEventListener("dragstart",this._onMouseDown,!1),e.setAttribute("draggable","true")):e.addEventListener("mousedown",this._onMouseDown,!1))},M.prototype.reset=function(){this._down=null},M.prototype.getMouseDown=function(){return this._down},M.prototype.isMouseDown=function(){return!!this._down},M.prototype.isMouseUp=function(){return!this._down},M.prototype.getDuration=function(t){return this._down?(t?t.getTime():Date.now())-this._down.timeStamp:0},M.prototype._onMouseDown=function(t){this._disabled||this._isValidButton(t)&&(window.addEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&(window.addEventListener("mousemove",this._onMouseMove,!1),this._tchProxy.attachTouchMoveEvent()),this._down||(this._down=E.getPosition(t),this._dispatch("change",t)),this._dispatch("mouseDown",t))},M.prototype._onMouseUp=function(t){this._disabled||this._isValidButton(t)&&(window.removeEventListener("mousemove",this._onMouseMove,!1),window.removeEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&this._tchProxy.detachTouchMoveEvent(),this._down&&(t.duration=t.timeStamp-this._down.timeStamp,t.up=!0,this._dispatch("change",t)),this._down=null,this._dispatch("mouseUp",t))},M.prototype._isValidButton=function(t){return E.getButtonType(t)===this._whichBtn};var I=function(t){var e;this._textRange=document.createRange(),this._isIE=(e=window.navigator.userAgent).indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0,this._unselectables={title:!0,header:!0,content:!1},this._hosts=[],this._map=[],this._curRect={},this._curRect.left=0,this._curRect.right=0,this._curRect.top=0,this._curRect.bottom=0,this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onBlur=this._onBlur.bind(this),this._onCopy=this._onCopy.bind(this),this._onTab=this._onTab.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),t&&this.config({cellSelection:t})};i.inherits(I,b),I._styles=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(a).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,u)}return""}([":host .tr-grid .cell.selection",["background-image: none;","background-color: var(--grid-selection-bgcolor);"]]),I._applyStyles=function(t){t&&!t._cellSelectionStyles&&v.isHaloTheme()&&(t._cellSelectionStyles=!0,c(I._styles,t.getElement()))},I.prototype._textRange=null,I.prototype._anchor=null,I.prototype._curMouse=null,I.prototype._curRect,I.prototype._map,I.prototype._hasCellSpan=!1,I.prototype._mode="cell",I.prototype._unselectables,I.prototype._lastSelection=null,I.prototype._lastMouseUpTimeStamp,I.prototype._autoDeselecting=!0,I.prototype._disabled=!1,I.prototype._mouseTrait=null,I.prototype._allowMultipleSelection=!0,I.prototype._dirty=!1,I.prototype._tabToSelect=!1,I.prototype._isIE,I.prototype._unclickableMapping={A:1,INPUT:1,BUTTON:1,SELECT:1,CHECKBOX:1,"EMERALD-DATETIME-PICKER":1,"EMERALD-MULTI-SELECT":1},I.prototype._dirVectors=null,I.prototype._mouseOutOfGrid=!1,I.prototype._timeoutID=null,I.prototype._scrollSpeed=500,I.prototype._prevRect={},I.prototype._draggable=!1,I.prototype.getName=function(){return"CellSelectionPlugin"},I.prototype.hasMultiTableSupport=function(){return!0},I.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._mouseTrait=new M(t.getElement()),this._mouseTrait.addEventListener("mouseDown",this._onMouseDown),this._mouseTrait.addEventListener("mouseUp",this._onMouseUp),this._mouseTrait.addEventListener("mouseMove",this._onMouseMove),t.getParent().addEventListener("blur",this._onBlur,!0),t.listen("focusout",this._onBlur),t.listen("copy",this._onCopy),this._tabToSelect&&t.listen("keydown",this._onTab),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnMoved",this._onColumnMoved),t.enableClass("no-text-select",!0),1===this._hosts.length&&this.config(e),I._applyStyles(t))},I.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._mouseTrait.removeEventListener("mouseDown",this._onMouseDown),this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),this._mouseTrait.removeEventListener("mouseUp",this._onMouseUp),t.unlisten("copy",this._onCopy),t.getParent().removeEventListener("blur",this._onBlur),t.unlisten("keydown",this._onTab),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnMoved",this._onColumnMoved),this.deselectAll(),t.enableClass("no-text-select",!1),this._hosts.splice(e,1),this._hosts.length||(this._compositeGrid=null,this._realTimeGrid=null))},I.prototype.config=function(t){if(t){var e=t.cellSelection;if(e){var o=e.mode;this._mode=o||this._mode,o=e.multipleSelection,this._allowMultipleSelection=null!=o?o:this._allowMultipleSelection,this._allowMultipleSelection||this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),o=e.autoDeselecting,this._autoDeselecting=null!=o?o:this._autoDeselecting,(o=e.selectableSections)&&this.setSelectableSections(o),(o=e.tabToSelect)&&(this._tabToSelect=!0,this._hosts[0]&&this._hosts[0].listen("keydown",this._onTab)),this.addListener(e,"selectionChanged"),this.addListener(e,"copy"),this.addListener(e,"beforeMouseDown")}}},I.prototype.getConfigObject=function(t){var e=t||{},o=e.cellSelection;o||(o=e.cellSelection={}),o.mode=this._mode,this._allowMultipleSelection||(o.multipleSelection=!1),this._autoDeselecting||(o.autoDeselecting=!1),this._tabToSelect&&(o.tabToSelect=!0);var i=this._unselectables,n=[];for(var r in i)i[r]||n.push(r);return n.length>0&&n.length<3&&(o.selectableSections=n),e},I.prototype.mockMouseClick=function(t,e){this._hosts[0].focus();let o=this._mockMouseEvent(t,e);this._onMouseDown(o),this._onMouseUp(o)},I.prototype.mockMouseDown=function(t,e){let o=this._mockMouseEvent(t,e);this._onMouseDown(o)},I.prototype.mockMouseUp=function(t,e){let o=this._mockMouseEvent(t,e);this._onMouseUp(o)},I.prototype.mockMouseMove=function(t,e,o,i,n){let r={clientX:o,clientY:i};r=this._mockMouseEvent(t,e,r),n?(r.target=n,r.path=[n]):r.path=[r.target],this._onMouseMove(r)},I.prototype._onMouseDown=function(t){if(this._draggable=!1,!this._disabled&&this._isClickable(t.target)){var e=this.getRelativeGrid(t).getRelativePosition(t);this._unselectables[e.sectionType]||(this._dispatch("beforeMouseDown",e),e.cancel||(this._dirty=!0,this.selectSingleCell(e),this._draggable=!0))}},I.prototype._onMouseMove=function(t){if(!this._disabled&&this._anchor&&this._draggable){var e=this._getActiveGrid(),o=e.getRelativePosition(t);if(0!==o.sectionIndex){if(!o.hit){var i=e.getHeight(),n=e.getWidth();if(0===e.getScrollWidth()&&0===e.getScrollHeight())return;if(i>=o.y&&!(o.y<0)&&n>=o.x&&!(o.x<0))return;var r=0,s=0;o.x>n?r=o.x-n:o.x<0&&(r=o.x),o.y>i?s=o.y-i:o.y<0&&(s=o.y);var l={x:r,y:s};this._setScrollSpeed(l);var a=this._checkIsSameProps(l);if(this._mouseOutOfGrid&&a)return;return this._dirVectors=l,void this._setScrollInterval(l)}if(this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._isTheSamePosition(this._curMouse,o)){this._curMouse=o,this._dirty=!0;var u=this._newSelectionRect();this._updateSelection(u)}}}},I.prototype._getActiveGrid=function(){var t=this._anchor;return t&&t.grid?t.grid:this._hosts[0]},I.prototype._setScrollSpeed=function(t){var e=Math.floor(300-Math.abs((t.x+t.y)/2));e%10==0&&(this._scrollSpeed=e>0||e<=500?e:50)},I.prototype._detectDir=function(t){var e=null;return t<0?e="minus":0===t?e="zero":t>0&&(e="positive"),e},I.prototype._checkIsSameProps=function(t){if(!this._dirVectors||!t)return!1;var e=this._detectDir(this._dirVectors.x)===this._detectDir(t.x),o=this._detectDir(this._dirVectors.y)===this._detectDir(t.y);return e&&o},I.prototype._setScrollInterval=function(t){this._timeoutID&&clearTimeout(this._timeoutID),this._mouseOutOfGrid||(this._mouseOutOfGrid=!0);var e=this._newSelectionRect(),o=this._scrollSpeed||500;this._timeoutID=setInterval(function(){if(o===this._scrollSpeed){var i=this._hosts[0].getScrollTop(),n=this._hosts[0].getScrollLeft(),r=t.y>0,l=t.x>0,a=this._map[0].section.getCellWidth(),u=this._map[0].section.getCellHeight(),c=r?i+a:i-a,h=l?n+u:n-u;if(0!==t.y){this._hosts[0].setScrollTop(c);var p=this._hosts[0].getVScrollbar(),d=this._hosts[0].getRowVirtualizer(),_=this._isEndOfVerticalScroll(),f=p.getHeight(),m=d.getViewOffset();if(r){var g=d.getContentStart(e.bottom+1)-m;if(g<=f)for(;g<=f;)e.bottom+=1,g=d.getContentStart(e.bottom+1)-m;else _&&(e.bottom=this._hosts[0].getRowCount())}else{var v=d.getContentStart(e.top-1)-m;if(v>=0)for(;v>=0;)e.top-=1,v=d.getContentStart(e.top-1)-m;else _&&(e.top=1)}}if(0!==t.x){this._hosts[0].setScrollLeft(Math.floor(h));var y=this._isEndOfHorizontalScroll(),b=this._hosts[0].getHScrollbar(),C=b.getTrackSize();if(l){var w=0;this._hosts[0].getPinnedLeftColumnCount()&&(w=this._hosts[0].getContentWidth()-b.getContentWidth()),this._hosts[0].getColumnRight(e.right)-w<=C?e.right+=1:y&&(e.right=this._hosts[0].getColumnCount())}else{this._hosts[0].getColumnLeft(e.left-1)>=0?e.left-=1:y&&(e.left=0)}}this._updateSelection(e),this._prevRect=s(e)}else this._setScrollInterval(t)}.bind(this),o)},I.prototype._isEndOfVerticalScroll=function(){var t=this._hosts[0].getScrollTop();return 0===t||t+this._hosts[0].getHeight()>this._hosts[0].getScrollHeight()},I.prototype._isEndOfHorizontalScroll=function(){return this._hosts[0].getHScrollbar().isEndOfHorizontalScroll()||0==this._hosts[0].getScrollLeft()},I.prototype._onMouseUp=function(t){this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._disabled&&this._dirty&&(this._draggable=!1,this._isIE&&(this._lastMouseUpTimeStamp=t.timeStamp),this._updateSelectionText(),this._dispatch("selectionChanged",{}),this._dirty=!1)},I.prototype._updateSelectionText=function(){var t=this._getGridHiddenInput();if(t){var e=window.getSelection();(this._isIE?this._textRange.htmlText:e.toString())||(this._textRange.setStart(t.parentNode,0),this._textRange.setEnd(t,0),e.removeAllRanges(),e.addRange(this._textRange),this._isIE&&this._getActiveGrid().focus())}},I.prototype._onBlur=function(t){this._dirty||this._autoDeselecting&&(this._lastMouseUpTimeStamp&&t.timeStamp-this._lastMouseUpTimeStamp<100||this.deselectAll()&&this._dispatch("selectionChanged",{}))},I.prototype._onColumnMoved=function(t){var e=this._curRect,o=t.fromColIndex,i=t.toColIndex;if(!(o<e.left&&i<e.left||o>=e.right&&i>=e.right)){var n;if(o<e.left)n=e.left-1;else if(o>=e.right)n=e.right;else{if(!(i<e.left||i>=e.right))return;n=i}for(var r=e.top;r<e.bottom;r++){var s=this._map[r];s.section.selectCell(n,s.rowIndex,!1)}this._updateSelectionText()}},I.prototype._isClickable=function(t,e){return!(!this._hosts[0]||!t||"CORAL-ICON"!==t.tagName&&"CORAL-HEADER"!==t.tagName&&0===t.tagName.indexOf("CORAL-"))&&!(this._unclickableMapping[t.tagName]&&!t.classList.contains("valigner"))},I.prototype._onCopy=function(t){var e={grid:this._hosts[0],sender:this,data:"",format:"",clipboards:[]};if(this._dispatch("copy",e),!(this._isIE?this._textRange.htmlText:window.getSelection().toString())){var o,i;if(t.clipboardData?(o=t.clipboardData,i="text/plain"):(o=window.clipboardData,i="Text"),e.data)o.setData(e.format||i,e.data);else{var r=this.getSelectedText();r&&o.setData(i,r)}for(var s=e.clipboards?e.clipboards.length:0,l=0;l<s;++l){var a=e.clipboards[l];a.format&&o.setData(a.format,a.data||"")}n.preventDefault(t)}},I.prototype._onTab=function(t){if(9===t.keyCode){if(t.altKey||t.ctrlKey)return;(t.shiftKey?this.selectPrevCell():this.selectNextCell())&&n.preventDefault(t)}},I.prototype._onPostSectionDataBinding=function(t){var e=this._getActiveGrid();if(this.getSelectionCount()>0&&e===t.sender){var o,i,n=t.section.getRowOffset(),r=this._curRect.top-n,s=this._curRect.bottom-n,l=this._curRect.left,a=this._curRect.right;for(o=t.fromRowIndex;o<t.toRowIndex;o++)if(o>=r&&o<s)for(i=l;i<a;i++)t.section.selectCell(i,o,!0);else for(i=l;i<a;i++)t.section.selectCell(i,o,!1)}},I.prototype._isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},I.prototype._cacheSectionMap=function(){var t=this._hosts[0].getSectionCount(),e=0,o=0;this._hasCellSpan=!1;for(var i=this._getActiveGrid(),n=0;n<t;++n){for(var r=i.getSectionSettings(n),s=r.getSection(),l=s.hasCellSpan(),a=s.getRowCount(),u=0;u<a;++u){var c={};c.section=s,c.hasCellSpan=l,c.sectionIndex=n,c.rowIndex=u,c.rowOffset=o,c.type=r.getType(),this._map[e]=c,e++}o+=a,this._hasCellSpan|=l}this._map.length=e},I.prototype._getCumulativeIndex=function(t){var e=t.section;return e?"string"!=typeof e&&"number"!=typeof e||(e=this._hosts[0].getSection(e)):e=this._hosts[0].getSection("content"),e.getRowOffset()+t.rowIndex},I.prototype._newSelectionRect=function(){if(!this._anchor||!this._curMouse)return this._curRect;var t={};"row"!==this._mode?this._anchor.colIndex<=this._curMouse.colIndex?(t.left=this._anchor.colIndex,t.right=this._curMouse.colIndex+1):(t.left=this._curMouse.colIndex,t.right=this._anchor.colIndex+1):(t.left=0,t.right=this._hosts[0].getColumnCount());var e=this._getCumulativeIndex(this._curMouse),o=this._getCumulativeIndex(this._anchor);return"column"!==this._mode?o<=e?(t.top=o,t.bottom=e+1):(t.top=e,t.bottom=o+1):(t.top=0,t.bottom=this._hosts[0].getRowCount()),this._scanCellSpans(t),t},I.prototype._scanCellSpans=function(t){if(this._hasCellSpan){var e=0,o=0,i=!1;do{for(i=!1,e=t.left;e<t.right;++e)i|=this._expandRect(e,t.top,t);for(e=t.right-1,o=t.top+1;o<t.bottom;++o)i|=this._expandRect(e,o,t);for(o=t.bottom-1,e=t.right-1;--e>=t.left;)i|=this._expandRect(e,o,t);for(o=t.bottom-1;--o>=t.top;)i|=this._expandRect(t.left,o,t)}while(i)}},I.prototype._expandRect=function(t,e,o){var i=this._map[e];if(!i.hasCellSpan)return!1;if(!0===this._unselectables[i.type])return!1;var n=!1,r=0,s=i.section.getCellColSpan(t,i.rowIndex);s>1?(r=t+s)>o.right&&(o.right=r,n=!0):s<0&&((r=t+s)<o.left&&(o.left=r,n=!0),(r+=s=i.section.getCellColSpan(r,i.rowIndex))>o.right&&(o.right=r,n=!0));var l=i.section.getCellRowSpan(t,i.rowIndex);return l>1?(r=i.section.getRowOffset()+i.rowIndex+l)>o.bottom&&(o.bottom=r,n=!0):l<0&&((r=i.section.getRowOffset()+i.rowIndex+l)<o.top&&(o.top=r,n=!0),(r+=l=i.section.getCellRowSpan(t,r))>o.bottom&&(o.bottom=r,n=!0)),n},I.prototype._updateSelection=function(t){this._updateColumnSelection(t.left,this._curRect.left),this._curRect.left=t.left,this._updateColumnSelection(this._curRect.right,t.right),this._curRect.right=t.right,this._updateRowSelection(t.top,this._curRect.top),this._curRect.top=t.top,this._updateRowSelection(this._curRect.bottom,t.bottom),this._curRect.bottom=t.bottom;var e=this._getActiveGrid();if(e){var o=this._curRect.left,i=this._curRect.top,n=this._map[i],r=0,s=0;!!n&&"content"===n.type&&(r=this._curRect.right-o,s=this._curRect.bottom-i,i-=n.rowOffset);var l=e.getSection("content");l&&l.setCellBounds(o,i,r,s)}},I.prototype._updateColumnSelection=function(t,e){var o,i;if(t!==e)if(t<e)for(i=this._curRect.top;i<this._curRect.bottom;++i)for(o=t;o<e;++o)this._selectAsPosition(i,o,!0);else for(i=this._curRect.top;i<this._curRect.bottom;++i)for(o=t;--o>=e;)this._selectAsPosition(i,o,!1)},I.prototype._updateRowSelection=function(t,e){var o,i;if(t!==e)if(t<e)for(i=t;i<e;++i)for(o=this._curRect.left;o<this._curRect.right;++o)this._selectAsPosition(i,o,!0);else for(i=t;--i>=e;)for(o=this._curRect.left;o<this._curRect.right;++o)this._selectAsPosition(i,o,!1)},I.prototype._selectAsPosition=function(t,e,o){var i=this._map[t];i&&!this._unselectables[i.type]&&i.section.selectCell(e,i.rowIndex,o)},I.prototype._isTheSamePosition=function(t,e){return null===t&&null===e||null!==t&&null!==e&&(t.rowIndex===e.rowIndex&&t.colIndex===e.colIndex&&t.sectionIndex===e.sectionIndex)},I.prototype._getGridHiddenInput=function(){return this._hosts[0]?this._hosts[0].getHiddenInput():null},I.prototype.getSelectedText=function(){var t=this._getActiveGrid();if(!t||!this.getGridApi()||this.getSelectionCount()<=0)return"";for(var e="",o=t.getDataSource(),i=this._curRect.top;i<this._curRect.bottom;++i){var n=this._map[i];i!==this._curRect.top&&(e+="\n");var r=null;if(!0!==this._unselectables[n.type]){"content"===n.type&&(r=this._getRow(o,n.rowIndex));for(var s=this._curRect.left;s<this._curRect.right;++s)if(s!==this._curRect.left&&(e+="\t"),"content"===n.type){if(r){var l=this._getField(s);e+=d(r[l])}}else{var a=n.section.getCell(s,n.rowIndex).getTextContent();e+=d(a)}}}return e},I.prototype.selectAll=function(){var t=this._getActiveGrid(),e={left:0,right:t.getColumnCount(),top:0,bottom:t.getRowCount()};this.deselectAll(),this._anchor={grid:t},this._cacheSectionMap(),this._scanCellSpans(e),this._updateSelection(e),this._dispatch("selectionChanged",{})},I.prototype.deselectAll=function(){if(this.getSelectionCount()<=0)return!1;var t=this._getActiveGrid();if(t){for(var e=t.getElement().querySelectorAll("div.cell.selection"),o=e.length,i=0;i<o;i++)e[i].classList.remove("selection");var n=t.getSection("content");n&&n.setCellBounds(0,0,0,0)}return this._lastSelection=this.getSelectionBounds(),this._anchor=null,this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top,!0},I.prototype.getSelectionCount=function(){return(this._curRect.right-this._curRect.left)*(this._curRect.bottom-this._curRect.top)},I.prototype.getSelectionBounds=function(t){if(this.getSelectionCount()<=0)return null;var e=null!=t?t:{};if(e.left=this._curRect.left,e.right=this._curRect.right-1,e.top=this._curRect.top,e.bottom=this._curRect.bottom-1,this._map.length>0&&e.bottom<this._map.length){var o=this._map[e.top];e.startSection=o.sectionIndex,e.startSectionRow=o.rowIndex,o=this._map[e.bottom],e.endSection=o.sectionIndex,e.endSectionRow=o.rowIndex}return e},I.prototype.getLastSelectionBounds=function(t){if(null===this._lastSelection)return null;var e=null!=t?t:{};for(var o in this._lastSelection)e[o]=this._lastSelection[o];return e},I.prototype.setSelectableSections=function(t){if(this._unselectables.content=!0,this._unselectables.header=!0,this._unselectables.title=!0,!t)return this._unselectables.content=!1,this._unselectables.header=!1,void(this._unselectables.title=!1);for(var e="string"==typeof t?[t]:t,o=e.length;--o>=0;)this._unselectables[e[o]]=!1},I.prototype.selectSingleCell=function(t){if(this.deselectAll(),t){this._anchor=t,this._curMouse=t,this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;var e=this._newSelectionRect();this._updateSelection(e)}},I.prototype.selectCells=function(t){if(this.deselectAll(),t){this._anchor=t,this._curMouse={rowIndex:t.rowIndex+(t.height-1),colIndex:t.colIndex+(t.width-1)},this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;var e=this._newSelectionRect();this._updateSelection(e)}},I.prototype.selectNextCell=function(){var t;if(this._anchor){var e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex+1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex+1,rowIndex:0}):(t=e.getNextCell(this._anchor))&&!t.cell&&(t=null),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},I.prototype.selectPrevCell=function(){var t;if(this._anchor){var e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex-1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex-1,rowIndex:0}):(t=e.getPrevCell(this._anchor))&&!t.cell&&(t=null),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},I.prototype.getAnchorInfo=function(){return this._getActiveGrid().getCellInfo(this._anchor)},I.prototype.getSelectedCells=function(){for(var t=[],e=this._curRect.top;e<this._curRect.bottom;++e){for(var o=this._map[e],i=[],n=this._curRect.left;n<this._curRect.right;++n){var r=o.section.getCell(n,o.rowIndex);i.push(r)}t.push(i)}return t},I.prototype.disableSelection=function(t){this._disabled=!1!==t},I.prototype.setAutoDeselectingOnBlur=function(t){this._autoDeselecting=t},I.prototype.getAutoDeselectingOnBlur=function(){return this._autoDeselecting};!function(t,e){if(t&&e&&e.prototype.getName){var o=e.prototype.getName().replace(/Plugin$/,"");if(o){var i=t.tr;i||(i=t.tr={});var n=i.grid;n||(n=i.grid={}),n[o+"Plugin"]=e,i[o+"Extension"]=e}}}(window,I)}]);