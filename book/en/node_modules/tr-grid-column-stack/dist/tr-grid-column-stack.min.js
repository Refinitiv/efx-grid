!function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);let o={inherits:function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n,o){n||(n="constructor");let i=arguments.length,r=new Array(i);for(let t=2;t<i;t++)r[t-2]=arguments[t];return e.prototype[n].apply(t,r)}}};let i=function(){};i.prototype._events=null,i.prototype._listenerCount=0,i.prototype.addEventListener=function(t,e){if(!t||!e)return;this._events||(this._events={});let n=this._events[t];n?n.indexOf(e)<0&&(n.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)},i.prototype.removeEventListener=function(t,e){let n=this._events?this._events[t]:null;if(n){let t=n.indexOf(e);t>=0&&(n.splice(t,1),--this._listenerCount)}},i.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},i.prototype.hasListener=function(t){if(this._listenerCount){if(t){let e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},i.prototype.getListener=function(t,e){if(t){let n=this._events?this._events[t]:null;if(n)return e||(e=0),n[e]||null}return null},i.prototype.addListener=function(t,e){let n=t?t[e]:null;"function"==typeof n&&this.addEventListener(e,n)},i.prototype._prepareEventArguments=function(t,e){return e},i.prototype._dispatch=function(t,e){let n=this._events?this._events[t]:null;if(n){e=this._prepareEventArguments(t,e);let o=n.length;for(let t=0;t<o;++t)n[t](e)}};let r=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};i.preventDefault=r;let l=function(t,e,n){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=n&&(this._ctx=n),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};l.prototype.promise=null,l.prototype._resolve=null,l.prototype._reject=null,l.prototype._resolveHandler=null,l.prototype._rejectHandler=null,l.prototype._ctx=null,l.prototype._fulfilled=!1,l.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){let e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},l.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){let e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},l.prototype.isFulfilled=function(){return this._fulfilled},l.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};let s=function(t,e){return function(t,e,n){if(!t)return null;if(!e||t===e)return t;let o;if(n){let i=n.length;for(let r=0;r<i;++r)o=n[r],o&&u(t,e,o)}else for(o in e)u(t,e,o);return t}({},t,e)},u=function(t,e,n){let o=e[n];if(null!=o){let e=t[n];Array.isArray(e)?t[n]=e.concat(o):Array.isArray(o)&&e?t[n]=o.concat(e):t[n]=o}},a=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},p=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},d=function(t,e){if(!t)return null;let n=document.createElement("style");n.textContent="\n"+t+"\n";let o,i=function(t){if(t){let e;if(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t)return e}return null}(e),r=!0;return i||(r=!1,i=document.head),r&&i.children&&i.children.length&&(o=i.children[0]),o?i.insertBefore(n,o):i.appendChild(n),n},c=function(t,e){e||(e=[]);for(let n in t){let o=t[n];"object"==typeof o?c(o,e):e.push(o)}return e},h=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;let e=t.match(/\d+/g);if(!e||e.length<3)return t;let n="#";for(let t=0;t<3;t++){let o=+e[t];o>=16||(n+="0"),n+=o?o.toString(16).toUpperCase():"0"}return n};let f={},m=function(t,e){"attributes"==e.type&&"lang"==e.attributeName&&(t.lang=e.target.lang||"en")},g=function(t,e,n){"attributes"===n.type&&(null!=e?n.attributeName===e&&t(n.target.getAttribute(e)):t(n.target))};f._getNewId=function(){return"observer_"+ ++f._id},f._addObserver=function(t,e,n){let o=n;o||(o={}),o.attributes=!0,f._observer.observe(t,o),f._addListener(t,e)},f._onMutationCallback=function(t){for(let e=0;e<t.length;e++){let n=t[e],o=f._listeners[n.target._observeId];for(let t=0;t<o.length;t++)o[t](n)}},f._addListener=function(t,e){let n=f._listeners;if(n||(n=f._listeners={}),!t._observeId){let e=f._getNewId();t._observeId=e}n[t._observeId]||(n[t._observeId]=[]);let o=n[t._observeId];o.indexOf(e)<0&&o.push(e)},f.addLanguageListener=function(t){t&&(t.lang=document.documentElement.lang||"en",f._addObserver(document.documentElement,m.bind(null,t)))},f.addAttributeListener=function(t,e,n){t&&e&&f._addObserver(t,g.bind(null,e,n))},f._observer=new MutationObserver(f._onMutationCallback),f._listeners={},f._id=0;let _={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},C={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};C.themeColors=C._defaultColors,C._components={},C._themeName="",C._elfVersion=0,C._dummyIcon=null,C._iconLoaded=!1,C._profileName=null,C._callbacks=[],C._observed=!1,C._pendingResolve=!1,C._themeLoaded=!1,C._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},C._icons["halo-theme"]=C._icons["elf-theme-halo"],C._icons["solar-theme"]=C._icons["elf-theme-solar"],C.getElfVersion=function(){if(!C._elfVersion){let t=0;if(window.EFX_GRID){let e=window.EFX_GRID.version;e=e.split("."),t=+e[0]}else if(window.elf)if(window.elf.version){let e=window.elf.version.match(/\d/);e&&e[0]&&(t=parseInt(e[0],10))}else window.elf.customElements?t=3:window.customElements&&(t=4);else window.Polymer&&(t=1);C._elfVersion=t}return C._elfVersion},C.hasComponent=function(t){let e=C._components[t];if(null==e){e=0;let n=C.getElfVersion();if(t){let o;1===n?(o=document.createElement(t),o.is===t&&(e=n)):n>1&&(window.customElements&&window.customElements.get(t)||document.createElement(t).constructor!==HTMLElement)&&(e=n),C._components[t]=e}}return e},C.toLangString=function(t){if(!t)return"";if("zh-hant"===(t=t.toLowerCase()))return"zh-Hant";let e=t.replace(/-.*/,"");return _[e]?e:""},C.hasTheme=function(t){return t===C.getThemeName()},C.getThemeName=function(t){return C._themeName||(C._themeName=C.getCssVariable("--theme-name",document.documentElement)),C._themeName},C.setThemeName=function(t){C._themeName=t},C.isThemeLoaded=function(){return C._themeLoaded},C.getColors=function(){return C.themeColors},C.isHaloTheme=function(t){return null==t&&(t=C.getThemeName()),!!t&&t.indexOf("halo")>=0},C.injectIcons=function(t,e){if("object"!=typeof t)return;let n=C.getThemeName();t.themeName=n;let o=C.getElfVersion();t.elfVersion=o;let i=C._icons[n];i&&(t.icons=i)},C.getIconList=function(){let t=C._icons[C.getThemeName()];return t?c(t):[]},C._onIconPreloaded=function(){if(C._dummyIcon){let t=C._dummyIcon.parentNode;t&&t.removeChild(C._dummyIcon),C._dummyIcon=null}},C.prepareIconPreloading=function(){if(!C._iconLoaded){C._iconLoaded=!0;let t=C.getIconList();if(t.length){setTimeout(C._onIconPreloaded,10);let e=C._dummyIcon=document.createElement("coral-icon");return e.style.transform="scale(0)",document.body.appendChild(e),t}}return null},C.getCssVariable=function(t,e){let n="",o=e||document.body;return window&&"string"==typeof t&&1===o.nodeType&&t.match(/^--/)&&(n=window.getComputedStyle(o).getPropertyValue(t),n=n.replace(/[\"\']/g,"")),n},C.getCssVariables=function(t,e){let n=e||document.body;if(window&&1===n.nodeType){let e=window.getComputedStyle(n);for(let n in t){let o=t[n];o&&o.match(/^--/)&&(t[n]=e.getPropertyValue(o).replace(/\"/g,""))}}return t||null},C.setRTK=function(t){null!=t&&(C._rtk=t)},C.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},C._addThemeChangedCallback=function(t){let e=C._callbacks;e.indexOf(t)<0&&e.push(t)},C.reloadThemeColors=function(){return C._deferred&&C._deferred.isFulfilled()?(C._profileName="",C._themeLoaded=!1,C.themeReady=null,C.getThemeColors()):C.themeReady},C.getThemeColors=function(t){if("function"==typeof t&&C._addThemeChangedCallback(t),C.themeReady)return C.themeReady;let e=C._deferred=new l;C.themeReady=e.promise;let n=C.getMovementColorProfile();if(n)n!==C._profileName?setTimeout(C._profileNameRetrieved,100):C._deferred.resolve(C.themeColors);else{let t={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},e=window?window.JET:null;if(C._themeLoaded=!1,C._rtk&&C._rtk.Settings)C._rtk.Settings.getAsync(t).then(C._loadingProfileSuccess).catch(C._loadingProfileFailure);else if(e&&e.Settings)try{e.Settings.read(C._loadingProfileSuccess,t)}catch(t){C._loadingProfileFailure()}else setTimeout(C._profileNameRetrieved,100)}return e.promise};let y=function(t){if(t!==C._profileName){C._retrieveThemeColors(t),C._pendingResolve&&(C._pendingResolve=!1,C._deferred.resolve(C.themeColors));let e=C._callbacks;for(let t=0;t<e.length;t++)e[t]()}};C._loadingProfileSuccess=function(t){t&&document.documentElement.setAttribute("movement-color-profile",t.toLowerCase()),C._observed?C._pendingResolve=!0:C._profileNameRetrieved(t)},C._loadingProfileFailure=function(){C._retrieveThemeColors(),C._observed||(C._observed=!0,f.addAttributeListener(document.documentElement,y,"movement-color-profile")),C._deferred.reject("Failed to get movement color profile from settings.")},C._profileNameRetrieved=function(){let t=C.getMovementColorProfile();C._retrieveThemeColors(t),C._observed||(C._observed=!0,f.addAttributeListener(document.documentElement,y,"movement-color-profile")),C._deferred.resolve(C.themeColors)},C._retrieveThemeColors=function(t){C._themeLoaded=!0,C._profileName=t;let e=C.themeColors=C.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});e.up||(e.up=C._defaultColors.up,e.down=C._defaultColors.down,e.level=C._defaultColors.level,e.tickUp=C._defaultColors.tickUp,e.tickDown=C._defaultColors.tickDown),e.positive=e.up,e.negative=e.down,e.neutral=e.level;let n=document.createElement("table");n.style.visibility="hidden",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0";let o=n.insertRow(-1),i=o.insertCell(-1);document.body.appendChild(n);let r=window.getComputedStyle(o);e.tableBg=r.backgroundColor;let l=window.getComputedStyle(i);e.tableText=l.color,e.tableBorder=l.borderColor,e.tableText===e.tableBorder&&(i.className="tr-lg",l=window.getComputedStyle(i),e.tableBg=l.backgroundColor,e.tableText=l.color,e.tableBorder=l.borderColor,e.tableText===e.tableBorder&&(e.tableBg=C._defaultColors.baseGrid,e.tableText=C._defaultColors.baseText,e.tableBorder="")),e.tableBg=h(e.tableBg),e.tableText=h(e.tableText),e.tableBorder=h(e.tableBorder),document.body.removeChild(n),e.baseGrid=e.tableBg,e.baseText=e.tableText,e.trackColor=e.primary||C._defaultColors.trackColor};let v=function(){};o.inherits(v,i),v.prototype._hosts=null,v.prototype._compositeGrid=null,v.prototype._realTimeGrid=null,v.prototype._rowGetter=null,v.prototype._initializedGrid=!1,v.prototype.listen=v.prototype.addEventListener,v.prototype.unlisten=v.prototype.removeEventListener,v.prototype.afterInit=function(t,e,n){let o=null;n&&n.getCoreGrid&&(o=n.getCoreGrid()),o&&(this.getGridApi()||this.setGridWrapper("compositegrid",n),this._compositeGrid&&o.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?G:S,this._afterInit())},v.prototype._afterInit=function(){},v.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},v.prototype.hasMultiTableSupport=function(){return!1},v.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},v.prototype.getName=function(){return"GridPlugin"},v.prototype.initialize=function(t,e){},v.prototype.unload=function(t){this._dispose()},v.prototype.getRelativeGrid=function(t){let e=null;if(t.target){e=t.target;let n=e.api;if(n&&n.getCoreGrid)return n.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(let t=this._hosts.length;--t>=0;){let n=this._hosts[t];if(n.getElement().contains(e))return n}return null},v.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},v.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;{let e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null}},v.prototype.getColumnName=function(t){if(this._compositeGrid){let e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{let e=this.getColumnIndex(t),n=this._realTimeGrid.getColumnDefinition(e);if(n)return n.getName()}return""},v.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){let e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},v.prototype.getColumnIndices=function(t){let e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){let e,n=this._compositeGrid.getColumnFields(),o=this._compositeGrid.getColumnCount(),i=[];for(let r=0;r<t.length;r++)if(e=t[r],"number"==typeof e)e>=0&&e<o&&i.push(e);else{let t=n.indexOf(e);-1!==t&&i.push(t)}return i}return this._realTimeGrid.getColumnIndices(t)},v.prototype.getColumnId=function(t){if("string"==typeof t)return t;let e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);{let e=this._realTimeGrid.getColumnDefinition(t);if(e)return e.getId()}return""},v.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},v.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},v.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},v.prototype.getColumnCount=function(){if(this._hosts){let t=this._hosts[0];return t?t.getColumnCount():0}return 0},v.prototype._moveColumnById=function(t,e){let n=this._hosts,o=n?n.length:0;if(o){let i=0;for(let r=0;r<o;++r)i|=n[r].moveColumnById(t,e);return!!i}return!1},v.prototype._reorderColumns=function(t,e){let n=this._hosts,o=n?n.length:0;if(o){let i=0;for(let r=0;r<o;++r)i|=n[r].reorderColumns(t,e);return!!i}return!1},v.prototype._loadPlugin=function(t,e,n){return t||(t=e.getPlugin(n))||(t=e.loadPlugin(n))&&this._initializedGrid&&(t._initializedGrid=!0),t},v.prototype._requestPlugin=function(t,e,n){return this._initializedGrid?v.requestPlugin(t,e,n,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},v.requestPlugin=function(t,e,n,o,i){let r=null;if(t){let e=null;1===t.nodeType?e=t.api:t.getCoreGrid?e=t:t.getPlugin&&(r=t),e&&(r=e.getCoreGrid(),o||i||(e.getModel?o=e:i=e))}if(!r)return Promise.reject("Cannot find grid element");let s=r.getPlugin(e);if(s)return Promise.resolve(s);{let t=new l;return setTimeout(v._onPluginRequested.bind(null,{grid:r,pluginRef:e,compositeGrid:o,realTimeGrid:i,config:n,deferred:t}),10),t.promise}},v._onPluginRequested=function(t){let e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);let n=e.getPlugin(t.pluginRef);if(n)return t.deferred.resolve(n);let o=!1;return t.pluginRef.beforeInit&&(o=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),n=e.loadPlugin(t.pluginRef,t.config),n?(!o&&n.beforeInit&&n.beforeInit(e.getElement(),t.config),n.setGridWrapper&&(t.compositeGrid?n.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&n.setGridWrapper("realtimegrid",t.realTimeGrid)),n.afterInit&&n.afterInit(),t.deferred.resolve(n)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},v.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},v.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},v.prototype._getColumnOption=function(t,e,n){let o=this._getColumnData(t,n);return o?o[e]:null},v.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};let n=e.getColumnData(t);return n||(n=e.setColumnData(t,{})),n},v.prototype._getField=function(t){let e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},v.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},v.prototype._getRow=function(t,e){return P(t.getRowDataAt(e))},v.prototype._getData=function(t,e,n){let o=this._getRow(t,e);return o?o[n]:void 0},v.prototype._setData=function(t,e,n,o){if(this._realTimeGrid){let i=k(t,e);i&&i.setData(n,o)}else"number"==typeof e?t.setDataAt(e,n,o):t.setData(e,n,o)},v.prototype._setRowData=function(t,e,n){if(this._realTimeGrid){let o=k(t,e);o&&o.setRowData(n)}else"number"==typeof e?t.setRowDataAt(e,n):t.setRowData(e,n)},v.prototype._setStaticData=function(t,e,n,o){if(this._realTimeGrid){let i=k(t,e);i&&i.setStaticData(n,o)}else this._setData(t,e,n,o)},v.prototype._setColumnData=function(t,e,n,o){if(!e)return;let i=Array.isArray(o)?o:t.getAllRowIds(!0),r=i?i.length:0;if(!r)return;if(1===r)return void this._setData(t,i[0],e,Array.isArray(n)?n[0]:n);let l=Array.isArray(n)?n:i.map((function(){return n}));if(this._realTimeGrid){for(let n=0;n<r;++n){let o=t.getRowData(i[n]);if(o){let t=o.ROW_DEF;t&&(t.getRowData()[e]=l[n])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,l,i)},v.prototype._activateColumnRenderer=function(t,e,n){if(null==t)return;let o=this._realTimeGrid;o?o.activateColumnRenderer(t,e,n):"function"==typeof n?this._hosts[0].setColumnDataBindingHandler(t,n):this._hosts[0].setColumnDataBindingHandler(t,null)};let b=function(){},I={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};v.prototype._mockMouseEvent=function(t,e,n){null==t&&(t=0),null==e&&(e=0);let o=n||{};if(o.preventDefault=b,o.stopPropagation=b,t>=0&&e>=0){let n=this._activeGrid||this._hosts[0],i=n?n.getCell(o.sectionType||"content",t,e):null;o.target=i?i.getElement():null}return o},v.prototype._mockKeyboardEvent=function(t,e){let n=e||{};if(n.preventDefault=b,n.stopPropagation=b,"string"==typeof t){let e=I[t.toLowerCase()]||0;t=e||t.charCodeAt(0)}return n.keyCode=t,n},v._staticStyles={},v._themeLoaders={},v._themeLoadSuccess=function(t,e){let n=this.getName(),o=v._staticStyles[n]=t(e);this.applyStyles(o,n)},v.prototype.applyStaticStyles=function(t){let e=this.getName(),n=v._staticStyles[e];n?this.applyStyles(n,e):t&&(v._themeLoaders[e]||(v._themeLoaders[e]=C.getThemeColors()),v._themeLoaders[e].then(v._themeLoadSuccess.bind(this,t)))},v.prototype.applyStyles=function(t,e,n){e||(e=this.getName());let o,i,r="_style"+e,l=this._hosts,s=l.length;if(s)if(n)for(o=0;o<s;o++)i=l[o],this.revokeStyles(i,e),i[r]=d(t,i.getElement());else for(o=0;o<s;o++)i=l[o],i[r]||(d(t,i.getElement()),i[r]=!0)},v.prototype.revokeStyles=function(t,e){if(!t||!e)return;let n=t[e="_style"+e];n&&1===n.nodeType&&(n.parentNode.removeChild(n),t[e]=null)};let k=function(t,e){let n="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return n&&n.ROW_DEF||null},S=function(t){return t},G=function(t){return t?t.ROW_DEF.getRowData():null},P=function(t){if(t){let e=t.ROW_DEF;return e?e.getRowData():t}return null};let A=function(t,e,n){this._onConflated=this._onConflated.bind(this),this._data=[],"function"==typeof t?this.setFunction(t,n):"function"==typeof e&&this.setFunction(e,n),"number"==typeof e?this.setConflatingTime(e):"number"==typeof t&&this.setConflatingTime(t)};A.prototype._data,A.prototype._func=null,A.prototype._delay=0,A.prototype._timerId=0,A.prototype._conflated=!1,A.prototype._disabled=!1,A.prototype.reset=function(){return this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this.popAllData()},A.prototype.popAllData=function(){if(this._data.length){let t=this._data;return this._data=[],t}return null},A.prototype.dispose=function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this._data.length&&(this._data.length=0),this._func=null},A.prototype.conflate=function(t){return!this._disabled&&(null!=t&&this._data.push(t),!this._conflated&&(this._timerId||(this._timerId=setTimeout(this._onConflated,this._delay)),!0))},A.prototype.isConflating=function(){return this._timerId>0&&!this._conflated&&!this._disabled},A.prototype._onConflated=function(){this._conflated=!0;try{this._func()}catch(t){console.error(t.message||t)}this._timerId=0,this._data.length=0,this._conflated=!1},A.prototype.getData=function(){return this._data},A.prototype.setFunction=function(t,e){this._func=t,this._func=t?e?t.bind(e):t:null},A.prototype.setConflatingTime=function(t){this._delay=t||0,this._delay<0&&(this._delay=0)},A.prototype.getConflatingTime=function(){return this._delay},A.prototype.disable=function(t){this._disabled=!1!==t},A.prototype.isEnabled=function(){return!this._disabled},A.prototype.enable=function(t){this._disabled=!1===t};let T={create:function(t,e){let n=document.createElement("coral-icon");return e&&(n.className=e),t&&n.setAttribute("icon",t),n},box:function(t,e,n){let o=null;return n&&("string"==typeof n?o=document.createElement(n):1===n.nodeType&&(o=n)),o||(o=document.createElement("div")),e&&(o.className=e),o.appendChild(T.create(t)),o},change:function(t,e){t.getAttribute("icon")!==e&&t.setAttribute("icon",e)}};let w=function(){this._groupMap={},this._childToParent={}};w.prototype._groupMap,w.prototype._childToParent,w.getGroupId=function(t){return t&&t.id||""},w.calcTreeDepth=function(t,e){let n=-1,o=e;for(;o;){if(++n>15){console.log("WARNING: Infinite loop detected during column group creation");break}o=t[o.parentId]}return n},w.getLeafDescendants=function(t,e){let n=t[e];if(!n)return null;let o=[],i=[n],r=0,l={};for(;r<i.length;){n=i[r++],l[n.id]=!0;let e=n.children,s=e?e.length:0;for(let r=0;r<s;++r){let s=e[r];n=t[s],n?l[n.id]||i.push(n):o.push(s)}}return o},w._cloneObject=function(t){let e=s(t);return Array.isArray(e.children)?e.children=e.children.slice():e.children=[],e},w._toGroupDefinition=function(t,e){let n=null;return t&&(n=Array.isArray(t)?{children:t.slice()}:w._cloneObject(t),e&&(n.id||(n.name=e),n.id=e)),n},w.prototype.toString=function(){let t=this._groupMap,e=[];e.push("=== groupDefs ===");for(let n in t){let o=t[n];e.push(n+": "+JSON.stringify(o,["id","parentId","children"]))}return e.push("=== childToParent ==="),e.push(JSON.stringify(this._childToParent,null,2)),e.push(""),e.join("\n")},w.prototype.getGroup=function(t){return t&&this._groupMap[t]||null},w.prototype.getDefinition=w.prototype.getGroup,w.prototype.getGroups=function(){let t=[],e=this._groupMap;for(let n in e)t.push(e[n]);return t},w.prototype.getGroupIds=function(){return Object.keys(this._groupMap)},w.prototype.getGroupMap=function(){return this._groupMap},w.prototype.cloneGroupMap=function(){let t=this._groupMap,e={};for(let n in t){let o=t[n],i=w._cloneObject(o);e[n]=i}return e},w.prototype.rebuildMap=function(){let t,e,n=this._groupMap,o=this._childToParent={},i=Object.keys(n),r=i.length;for(t=0;t<r;++t){e=i[t];let r=n[e].children,l=r?r.length:0;for(let t=0;t<l;t++)o[r[t]]=e}for(t=0;t<r;++t){e=i[t];let r=o[e];r&&(n[e].parentId=r)}},w.prototype.getGroupChildren=function(t){let e=this._groupMap[t];return e?e.children:null},w.prototype.getLeafDescendants=function(t){return w.getLeafDescendants(this._groupMap,t)},w.prototype.getGroupLevel=function(t){return w.calcTreeDepth(this._groupMap,this._groupMap[t])},w.prototype.getRootGroup=function(t){if(!t)return null;let e=this._groupMap,n=e[t]||null;if(n)for(;n.parentId;){let t=e[n.parentId];if(!t)break;n=t}return n},w.prototype.getParentGroup=function(t){return this.getGroup(this._childToParent[t])},w.prototype.getParentIds=function(t){if(t&&"string"==typeof t){let e=this._childToParent[t];if(e){let t=[e],n=this._groupMap[e];for(;n&&n.parentId;)n=this._groupMap[n.parentId],n&&t.push(n.id);return t}}return null},w.prototype.getParentId=function(t,e){let n=this._childToParent[t];if(null!=e){let t=this.getGroupLevel(n);for(;t>e&&n;)n=this._childToParent[n],t--}return n||""},w.prototype.removeAllGroups=function(){for(let t in this._groupMap)return this._groupMap={},this._childToParent={},!0;return!1},w.prototype.setGroups=function(t){let e=this._groupMap={},n=t?t.length:0;for(let o=0;o<n;o++){let n=t[o],i=n.id;i&&(e[i]=w._cloneObject(n))}this.rebuildMap()},w.prototype.addGroup=function(t){let e=w.getGroupId(t);return e?this.setGroup(e,t):e},w.prototype.removeGroup=function(t){return!!this._groupMap[t]&&(this.removeAllChildren(t),this.unsetParent(t),delete this._groupMap[t],!0)},w.prototype.setGroup=function(t,e){if(!t)return"";if(e){let n=w._toGroupDefinition(e,t);this._ungroupChildren(n.children),this._groupMap[t]&&this.removeAllChildren(t);let o=this._childToParent[t];o&&(n.parentId=o.id),this._groupMap[t]=n;let i=n.children,r=i.length;for(let e=0;e<r;++e){let n=i[e];this._childToParent[n]=t;let o=this._groupMap[n];o&&(o.parentId=t)}}else if(!this.removeGroup(t))return"";return t},w.prototype._ungroupChildren=function(t){if(Array.isArray(t)){let e=t.length;for(let n=0;n<e;++n)this.unsetParent(t[n])}},w.prototype.hasGroupChild=function(t,e){let n=this._groupMap[t];if(e&&n){let t=n.children;if(t)return t.indexOf(e)>=0}return!1},w.prototype.contains=function(t,e){if(t&&e){if(t===e)return!0;let n=20,o=this._childToParent[e];for(;o&&n;){if(t===o)return!0;--n,o=this._childToParent[o]}}return!1},w.prototype.addGroupChild=function(t,e,n){let o=this._groupMap[t];if(e&&o){let i=o.children;if(i&&i.indexOf(e)<0){this.unsetParent(e),this._childToParent[e]=t;let o=this._groupMap[e];return o&&(o.parentId=t),null!=n&&n>=0?i.splice(n,0,e):i.push(e),!0}}return!1},w.prototype.removeGroupChild=function(t,e){return null==e?this.unsetParent(t):!!this.hasGroupChild(t,e)&&this.unsetParent(e)},w.prototype.unsetParent=function(t){let e=this._childToParent[t];if(!e)return!1;this._childToParent[t]="";let n=this._groupMap[t];n&&(n.parentId="");let o=this._groupMap[e];if(o){let e=o.children;if(e&&e.length){let n=e.indexOf(t);n>=0&&e.splice(n,1)}}return!0},w.prototype.removeAllChildren=function(t){let e=this._groupMap[t];if(e){let t=e.children,n=t?t.length:0;if(n){e.children=[];for(let e=0;e<n;++e){let n=t[e];this._childToParent[n]&&(this._childToParent[n]="");let o=this._groupMap[n];o&&(o.parentId="")}return!0}}return!1},w.prototype.setGroupChildren=function(t,e){let n=this._groupMap[t];if(n){if(Array.isArray(e)){let o=e.slice();this._ungroupChildren(o),this.removeAllChildren(t),n.children=o;let i=n.id,r=o.length;for(let t=0;t<r;++t){let e=o[t];this._childToParent[e]=i;let n=this._groupMap[e];n&&(n.parentId=i)}return!0}if(!e&&n.children.length)return this.removeAllChildren(t),!0}return!1},w.prototype.getGroupName=function(t){let e=this._groupMap[t];return e&&e.name||""},w.prototype.setGroupName=function(t,e){let n=this._groupMap[t];return!(!n||n.name===e)&&(n.name=e,!0)};let R={create:function(t,e){let n=document.createElement(t);return e&&(n.className=e),n},div:function(t){return R.create("div",t)},text:function(t,e){let n=R.create("span",e);return(t||0===t)&&(n.textContent=t),n},appendChild:function(t,e){if(!t)return null;let n,o;Array.isArray(arguments[1])?(o=arguments[1],n=0):(o=arguments,n=1);let i=o.length;for(;n<i;)t.appendChild(o[n]),++n;return t},buildTree:function(t,e){if(!t)return null;let n=arguments,o=n.length;for(let e=1;e<o;++e){let o=n[e];if(o){let e;Array.isArray(o)?e=R.buildTree.apply(null,o):1===o.nodeType&&(e=o),e&&t.appendChild(e)}}return t},removeParent:function(t){if(!t)return null;let e=t.parentNode;return e&&e.removeChild(t),e},setParent:function(t,e){return t?e?(e.appendChild(t),e):R.removeParent(t):null},removeChildren:function(t,e){if(t){let n=t.childNodes.length;for((null==e||e>n)&&(e=n);--e>=0;)t.removeChild(t.lastChild)}},setContent:function(t,e){if(t)if(e||0===e){let n=e.nodeType;1===n||3===n?e!==t.lastChild&&(R.removeChildren(t),t.appendChild(e)):Array.isArray(e)?(R.removeChildren(t),R.appendChild(t,e)):t.textContent=e}else R.removeChildren(t)},toggleAttribute:function(t,e,n){n?t.setAttribute(e,"string"==typeof n?n:""):null==n?t.hasAttribute(e)?t.removeAttribute(e):t.setAttribute(e,""):t.removeAttribute(e)},toggleClass:function(t,e,n){n?t.classList.add(e):null==n?t.classList.contains(e)?t.classList.remove(e):t.classList.add(e):t.classList.remove(e)},addClasses:function(t,e){if(t){let n=Array.isArray(e)?e:arguments,o=n.length;for(let e=0;e<o;++e){let o=n[e];o&&"string"==typeof o&&t.classList.add(o)}}},removeClasses:function(t,e){if(t){let n=Array.isArray(e)?e:arguments,o=n.length;for(let e=0;e<o;++e){let o=n[e];o&&"string"==typeof o&&t.classList.remove(o)}}},preventDefault:function(t){t.preventDefault(),t.stopPropagation()},stopPropagation:function(t){t.stopPropagation()},getClientPosition:function(t,e){let n=e||{x:0,y:0};if(t.getBoundingClientRect){let e=t.getBoundingClientRect();n.x=e.left,n.y=e.top}else n.x=t.clientX,n.y=t.clientY;return n},getRelativePosition:function(t,e,n){n=R.getClientPosition(t,n);let o=R.getClientPosition(e);return n.x-=o.x,n.y-=o.y,n},closestElement:function(t,e){let n=t;for(;n;){if(n.classList&&n.classList.contains(e))return n;n=n.parentNode||n.host}return null},closestTagName:function(t,e){let n=t;for(;n;){if(n.tagName&&n.tagName==e)return n;n=n.parentNode||n.host}return null}};let D=function(t,e,n){let o=t[e],i=t[n];return o===i?0:o<0?1:i<0?-1:o-i},x=function(t,e){return t[e]>=0},M=function(t){if(t){let e=t.children;if(e&&e.length){let n=t.activeColumn;if(!n||e.indexOf(n)<0)return t.activeColumn=t.spreading?e[e.length-1]:e[0],!0}}return!1},O=function(){this._onPreSectionRender=this._onPreSectionRender.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onBeforeBatchOperation=this._onBeforeBatchOperation.bind(this),this._onAfterBatchOperation=this._onAfterBatchOperation.bind(this),this._onMenuItemClicked=this._onMenuItemClicked.bind(this),this._onStackButtonClicked=this._onStackButtonClicked.bind(this),this._updateUI=this._updateUI.bind(this),this._toColumnId=this._toColumnId.bind(this),this._requestFilterRefresh=this._requestFilterRefresh.bind(this),this._hosts=[],this._groupDefs=new w,this._filterConflator=new A(50,this._requestFilterRefresh),this._conflator=new A(50,this._updateUI)};o.inherits(O,v),O.prototype._groupDefs,O.prototype._pendingStacks,O.prototype._usingField=!1,O.prototype._updating=!1,O.prototype._inReordering=0,O.prototype._inResetting=!1,O.prototype._menuElement=null,O.prototype._menuItemClicked=null,O._runningId=0,O.prototype._generateStackId=function(){let t="Stack"+O._runningId++;for(;this._groupDefs.getGroup(t);)t="Stack"+O._runningId++;return t},O.prototype.getName=function(){return"ColumnStackPlugin"},O.prototype.hasMultiTableSupport=function(){return!0},O.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){if(this._hosts.push(t),e){if(e.icons){let t=e.icons.columnStack;t&&(this._stackIconName=t.stack,this._expandIconName=t.expand,this._collapseIconName=t.collapse)}let t=e.columnStack;if(t&&1===this._hosts.length){let e=t.menuElement;e&&"object"==typeof e&&1===e.nodeType&&(e.addEventListener("item-trigger",this._onMenuItemClicked),this._menuElement=e);let n=t.menuItemClicked;"function"==typeof n&&(this._menuItemClicked=n)}}O._applyThemeColor(t),1===this._hosts.length&&(this.config(e),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnMoved",this._onColumnMoved),t.listen("columnAdded",this._onColumnAdded),t.listen("beforeBatchOperation",this._onBeforeBatchOperation),t.listen("afterBatchOperation",this._onAfterBatchOperation)),t.listen("preSectionRender",this._onPreSectionRender)}},O.prototype.unload=function(t){let e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("columnMoved",this._onColumnMoved),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("beforeBatchOperation",this._onBeforeBatchOperation),t.unlisten("afterBatchOperation",this._onAfterBatchOperation),t.unlisten("preSectionRender",this._onPreSectionRender),this._menuElement&&this._menuElement.removeEventListener("item-trigger",this._onMenuItemClicked),this._hosts.length<=0&&(this._conflator.reset(),this._filterConflator.reset(),this._groupDefs.removeAllGroups()),this._dispose())},O._styles=function(t){if(t){let e="";if(Array.isArray(t)){e=t.map(a).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {")}else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,p)}return""}([".tr-grid .collapsed .cell.grouping .valigner",["width: 0;"],".tr-grid .collapsed .cell.grouping .floating-panel",["width: 100%;","margin: 0;","justify-content: center;"],".tr-grid .collapsed .cell.grouping .front-panel,.tr-grid .collapsed .cell.grouping .floating-panel *:not(.stack-icon),.tr-grid .collapsed .cell.grouping .sort-symbol",["display: none;"],".floating-panel .stack-icon",["cursor: pointer;"],".tr-grid .collapsed .cell.grouping .floating-panel .stack-icon",["margin-left: 0;"],".stack-icon",["color: var(--grid-title-filter-icon-color);"],".stack-icon:hover",["color: var(--grid-title-filter-icon-hover-color);"]]),O._applyThemeColor=function(t){t._columnStackingStyles||(t._columnStackingStyles=!0,d(O._styles,t.getElement()))},O.prototype.config=function(t){if(!t)return;let e,n=t.columns;n||(n=[]);let o=n.length,i=t.columnStack,r="",l={},s=!1,u=null;if(i)if(this.addListener(i,"clicked"),this._usingField=!1,i.fields&&i.fields.length>1)this._usingField=!0,s=!0,r=this._generateStackId(),l[r]={id:r,spreading:!0===i.spreading,collapsed:!1!==i.collapsed,fields:i.fields};else if(i.stacks&&i.stacks.length){s=!0;let t=i.stacks.length;for(e=0;e<t;e++)u=i.stacks[e],r=u.id||this._generateStackId(),null==u.collapsed&&(u.collapsed=!0),null==u.spreading&&(u.spreading=!1),l[r]=u}if(!s)for(e=0;e<o;++e){let t=n[e],o=t.stackId||t.stack;if(!o)continue;r="";let i=!1,a=!0,p="";"string"==typeof o?r=o:"object"==typeof o&&(u=o,r=u.id||"",i=!0===u.spreading,a=!1!==u.collapsed,p=u.activeColumn||""),r&&(o=l[r],o||(o=l[r]={id:r,spreading:i,collapsed:a},p&&(o.activeColumn=p),s=!0),o.children||(o.children=[]),o.children.push(e))}this._initializedGrid?this._applyUserConfigs(s?l:null):this._pendingStacks=this._pendingStacks||l},O.prototype.getConfigObject=function(t){let e=t||{},n=this.getStacks();return n.length&&(e.columnStack={},e.columnStack.stacks=n),e},O.prototype._afterInit=function(){this._pendingStacks&&(this._applyUserConfigs(this._pendingStacks),this._pendingStacks=null)},O.prototype._toColumnId=function(t){return"string"!=typeof t?"number"==typeof t?this.getColumnId(t):"":t||""},O.prototype._applyUserConfigs=function(t){if(t){this.removeAllStacks(!1);for(let e in t){let n=t[e],o=n.children,i=n.fields;i&&(this._usingField=!0,o=i),this.stackColumns(o,e,n)}}else this.removeAllStacks()},O.prototype._getColumnStackOptions=function(t){if(t>=0&&t<this.getColumnCount()){let e=this.getColumnId(t);return this._groupDefs.getParentGroup(e)||null}return null},O.prototype._getSelectedColumns=function(){let t=this._getPlugin("ColumnSelectionPlugin");return t&&t.isEnabled()?t.getSelectedColumns():[]},O.prototype._hideStackedColumns=function(t,e,n){if(t.spreading&&!t.collapsed)return;let o="number"==typeof n?n:this.getColumnIndex(t.activeColumn),i=null;i="number"==typeof e?[e]:null==i?this.getColumnIndices(t.children):e;let r=i.length;for(let t=0;t<r;++t){let e=i[t];e!==o&&this._setColumnVisibility(e,!1)}},O.prototype._setColumnVisibility=function(t,e){if(t>=0){let n=!1;for(let o=this._hosts.length;--o>=0;)n|=this._hosts[o].setColumnVisibility(t,e,2);n&&this._requestFilterRefresh()}},O.prototype._requestFilterRefresh=function(){if(this._filterConflator.conflate())return;let t=this._getPlugin("RowFilteringPlugin");t&&t.refresh&&t.refresh()},O.prototype._moveStackedColumns=function(t){let e=this.getColumnIndices(t);e.length>1&&this.reorderColumns(e,e[0])},O.prototype._isIconAvailable=function(){return C.hasComponent("coral-icon")&&(C.hasTheme("elf-theme-solar")||C.hasTheme("elf-theme-luna"))},O.prototype._updateIcon=function(t,e){let n=!!e&&e.spreading,o=this._hosts.length;for(let i=0;i<o;++i){let o=this._hosts[i],l=o.getSection("title"),s=l.getRowCount(),u=l.getCell(t,s-1,!0);if(!u)continue;let a=u._stackIcon;if(e){let i=this.isActiveStackedColumn(t);!a&&i?(n?(u.addClass("grouping"),a=this._expandIconName?e.collapsed?T.create(this._expandIconName):T.create(this._collapseIconName):e.collapsed?R.text(">"):R.text("<")):(u.addClass("stacking"),this._stackIconName?a=T.create(this._stackIconName):(a=R.text("≡"),a.style.fontSize="1.3em")),a.className="stack-icon",a.addEventListener("click",this._onStackButtonClicked,!1),a.addEventListener("dblclick",r,!1),a.addEventListener("mousedown",r,!1),a.addEventListener("keydown",r,!1),u.insertFloatingIcon(a,20),u._stackIcon=a,this._dispatch("iconCreated",{icon:a,colIndex:t,grid:o,cell:u})):a&&!i&&(u.removeFloatingIcon(u._stackIcon),u._stackIcon=null)}else a&&(u.removeFloatingIcon(u._stackIcon),u._stackIcon=null,u.removeClass("grouping"),u.removeClass("stacking"))}},O.prototype._updateUI=function(){if(this._updating)return;if(this._conflator.conflate())return;this._updating=!0;let t,e,n=this.getColumnCount(),o=this._hosts.length;for(let i=0;i<n;++i){t=this._getColumnStackOptions(i),e=!!t&&t.spreading,e=!0===e;for(let t=0;t<o;++t){this._hosts[t].enableColumnClass(i,"grouped",e)}this._updateIcon(i,t),t&&(t.spreading?this._collapseMember(i,t.collapsed):this._setColumnVisibility(i,this._isActiveStackedColumn(i,t)))}this._updating=!1},O.prototype._forceUpdateUI=function(){this._conflator.disable(),this._updateUI(),this._conflator.enable()},O.prototype._collapseMember=function(t,e){let n=this._getColumnStackOptions(t);if(n)for(let o=this._hosts.length;--o>=0;){let i=this._hosts[o];if(i.enableColumnClass(t,"collapsed",e),this.isActiveStackedColumn(t)){i.setColumnVisibility(t,!0,2);let o=i.getSection("title"),r=o.getRowCount(),l=o.getCell(t,r-1,!0);e?(n.collapsed===e&&n._origWidth||(n._origWidth=this._getColumnWidth(i,t),n._scalable=i.getColumnScalability(t)),i.setColumnWidth(t,o.getRowHeight(0),!1),l._stackIcon&&(this._expandIconName?l._stackIcon.setAttribute("icon","right"):l._stackIcon.textContent=">")):(null!=n._origWidth&&i.setColumnWidth(t,n._origWidth,n._scalable),l._stackIcon&&(this._collapseIconName?l._stackIcon.setAttribute("icon","left"):l._stackIcon.textContent="<"))}else i.setColumnVisibility(t,!e,2)}},O.prototype._getColumnWidth=function(t,e){if(t){let n=t.getMinimumColumnWidth(e),o=t.getColumnCustomLaneSize(e);return o<n?n:o}return NaN},O.prototype.getMemberIndices=function(t){let e=this._getColumnStackOptions(t);return e?this.getColumnIndices(e.children):null},O.prototype.collapseGroup=function(t,e){let n=this._getColumnStackOptions(t);if(!n)return null;if(!n.spreading)return null;if(e=!1!==e,n.collapsed!==e){let t=this.getColumnIndices(n.children);if(t){for(let n=t.length;--n>=0;)this._collapseMember(t[n],e);return n.collapsed=e,t}}return null},O.prototype.expandGroup=function(t){return this.collapseGroup(t,!1)},O.prototype.isColumnStackable=function(t){if(!t)return!1;let e=t.length;for(let n=0;n<e;++n)if(this._getColumnStackOptions(t[n]))return!1;return!0},O.prototype.isColumnStacked=function(t){t||(t=this._getSelectedColumns());let e=t.length;for(let n=0;n<e;++n)if(this._getColumnStackOptions(t[n]))return!0;return!1},O.prototype.isInactiveStackedColumn=function(t){let e=this._getColumnStackOptions(t);return!!e&&!this._isActiveStackedColumn(t,e)},O.prototype.isActiveStackedColumn=function(t){return this._isActiveStackedColumn(t,this._getColumnStackOptions(t))},O.prototype._isActiveStackedColumn=function(t,e){return!!e&&(M(e),t===this.getColumnIndex(e.activeColumn))},O.prototype.isStackingMode=function(t){let e=this._getColumnStackOptions(t);return!!e&&!0!==e.spreading},O.prototype.isCollapsingMode=function(t){let e=this._getColumnStackOptions(t);return!!e&&!0===e.spreading},O.prototype.isColumnInCollection=function(t){return!!this._getColumnStackOptions(t)},O.prototype.isInCollection=O.prototype.isColumnInCollection,O.prototype.isColumnCollapsed=function(t){let e=this._getColumnStackOptions(t);return!!e&&(!0===e.spreading&&!0===e.collapsed)},O.prototype.isColumnActive=function(t){let e=this._getColumnStackOptions(t);return!!e&&(e.spreading?!e.collapsed:t===this.getColumnIndex(e.activeColumn))},O.prototype.getStackId=function(t){let e="number"==typeof t?t:this.getColumnIndex(t);if(e>=0){let t=this._getColumnStackOptions(e);if(t)return t.id||""}return""},O.prototype.stackColumns=function(t,e,n){let o=!1,i=e;if(i?this._removeStack(i)&&(o=!0):i=this._generateStackId(),t||(t=this._getSelectedColumns()),(t?t.length:0)<2)return o&&this._updateUI(),o;n||(n={});let r=!0===n.spreading,l=!1!==n.collapsed,s=n.activeColumn||"",u={};if(u.id=i,u.name=n.name||"",u.spreading=r,u.collapsed=l,u.activeColumn=s,!this._initializedGrid){let e=this._pendingStacks;return e||(e=this._pendingStacks={}),u.children=t,e[i]=u,!1}let a=this.getColumnIndices(t);if(!this.isColumnStackable(a))return o&&this._updateUI(),o;let p=a.map(this._toColumnId);u.children=p;let d=-1;s&&"string"==typeof s?(d=this.getColumnIndex(s),u.activeColumn=s=this.getColumnId(d)):"number"==typeof s&&(d=s),M(u)&&(s=u.activeColumn,d=this.getColumnIndex(s)),this._hideStackedColumns(u,a,d),this.reorderColumns(a,a[0]);let c=a.length;if(!r){let t=this._getPlugin("ColumnSelectionPlugin");if(t&&t.isEnabled()){let e=!1;for(let n=0;n<c;++n){let o=a[n];if(o!==d&&t.isSelectedColumn(o)){e=!0;break}}e&&(t.selectSingleColumn(d),t.dispatchSelectionChanged&&t.dispatchSelectionChanged())}}return this._verifyColumnPinning(u),this._groupDefs.setGroup(i,u),this._updateUI(),!0},O.prototype._verifyColumnPinning=function(t){t.leftPinned=!1,t.rightPinned=!1;let e=this._hosts[0],n=e.getFrozenColumnCount()-1,o=e.getFirstPinnedRightIndex(),i=this.getColumnCount();if(n<0&&o===i)return;let r=this.getColumnIndices(t.children),l=r[0],s=r[0];for(let t=1;t<r.length;t++){let e=r[t];e>s&&(s=e),e<l&&(l=e)}l<=n?(t.leftPinned=!0,s>n&&this._freezeColumn(s,i-o)):s>=o&&(t.rightPinned=!0,l<o&&this._freezeColumn(n,i-l))},O.prototype._freezeColumn=function(t,e){let n=this._hosts;for(let o=0;o<n.length;o++)n[o].freezeColumn(t,e)},O.prototype.setStack=function(t,e){this.removeAllStacks();let n={};return e&&(n.activeColumn=e),this.stackColumns(t,"_uniqueStack",n),!0},O.prototype.setStacks=function(t){this.removeAllStacks();let e=t?t.length:0;for(let n=0;n<e;++n){let e=t[n];e&&e.children&&this.stackColumns(e.children,e.id,e)}},O.prototype.getStacks=function(){let t=this._groupDefs.getGroupMap(),e=[];for(let n in t){let o=t[n],i=o.id,r={id:i},l=o.name,s=o.collapsed,u=o.spreading;if(l&&(r.name=l),!0!==s&&(r.collapsed=s),!1!==u&&(r.spreading=u),this._usingField){let t=this.getStackMemberIndices(i),e=t.length,n=new Array(e);for(let o=0;o<e;++o)n[o]=this.getColumnField(t[o]);r.fields=n,r.activeColumn=this.getActiveColumnField(i)}else r.children=this.getStackMemberIds(i).slice(),o.activeColumn&&(r.activeColumn=o.activeColumn);e.push(r)}return e},O.prototype.unstackColumns=function(t){t||(t=this._getSelectedColumns());let e=!1,n=t.length;for(let o=0;o<n;++o){let n=t[o],i=this._getColumnStackOptions(n);i&&(e=!0,this._removeStack(i.id))}return e&&this._updateUI(),e},O.prototype._removeStack=function(t){let e=this._groupDefs.getGroup(t);if(!e)return!1;let n=this.getColumnIndices(e.children),o=n.length;for(let t=0;t<o;++t){let o=n[t];e.spreading&&e.collapsed&&this._collapseMember(o,!1),this._setColumnVisibility(o,!0)}return this._groupDefs.removeGroup(t),!0},O.prototype.removeStack=function(t){return!!this._removeStack(t)&&(this._updateUI(),!0)},O.prototype.removeAllStacks=function(t){let e=this._groupDefs.getGroupIds(),n=e.length;if(n){for(let t=0;t<n;++t)this._removeStack(e[t]);this._groupDefs.removeAllGroups(),!1!==t&&this._updateUI()}return!!n},O.prototype.setActiveColumn=function(t){let e=this.getColumnIndex(t);if(e<0)return!1;if(e>=this.getColumnCount())return!1;let n=this.getColumnId(e),o=this._groupDefs.getParentGroup(n);if(!o)return!1;let i=o.children,r=i.indexOf(n);return!(r<0)&&this._setActiveColumn(o,i[r])},O.prototype.swapColumn=function(t,e){let n="number"==typeof t?t:this.getColumnIndex(t),o=this._getColumnStackOptions(n);if(!o)return!1;let i=o.children;return!!i&&this._setActiveColumn(o,i[e])},O.prototype._setActiveColumn=function(t,e){if(!e)return!1;if(e===t.activeColumn)return!1;let n=this.getColumnIndex(t.activeColumn),o=this.getColumnIndex(e);t.activeColumn=e,this._setColumnVisibility(o,!0),this._setColumnVisibility(n,!1),this._updateIcon(n,t),this._updateIcon(o,t);let i=this._getPlugin("ColumnSelectionPlugin");return i&&i.isEnabled()&&(i.selectSingleColumn(o),i.dispatchSelectionChanged&&i.dispatchSelectionChanged()),!0},O.prototype._onPreSectionRender=function(t){"title"===t.sectionType&&this._forceUpdateUI()},O.prototype._onColumnRemoved=function(t){if(this._inResetting)return;let e=t.colId,n=this._groupDefs.getParentGroup(e);n&&(n.children.length<=2?(this._removeStack(n.id),this._updateUI()):(this._groupDefs.removeGroupChild(n.id,e),this._updateActiveColumn(n)))},O.prototype._onColumnMoved=function(t){if(this._inReordering||this._inResetting)return void(this._inReordering&&(this._inReordering=2));let e=t.toColIndex,n=this.getColumnId(e),o=this._groupDefs.getParentGroup(n);if(!o)return;let i=this._getColumnStackOptions(e-1),r=this._getColumnStackOptions(e+1),l=!0,s=!1;o&&(o===i||o===r?(this._repositionMembers(o),l=!1):o.children.length<=2?this._removeStack(o.id):this._removeRefFromStack(o,n,e),s=!0),l&&this._isWithinStack(e)&&this._addRefToStack(i,e)&&(s=!0),s&&this._updateUI()},O.prototype._onColumnAdded=function(t){if(this._inResetting)return;let e=t.colIndex,n=this._isWithinStack(e);n&&this._addRefToStack(n,e)&&this._updateUI()},O.prototype._onBeforeBatchOperation=function(t){"reset"===t.batchType?this._inResetting=!0:"move"===t.batchType&&(this._inReordering=1)},O.prototype._onAfterBatchOperation=function(t){let e,n,o,i;if("reset"===t.batchType){for(this._inResetting=!1,e=this._groupDefs.getGroups(),n=e.length,o=0;o<n;++o)this._repositionMembers(e[o],!0);for(e=this._groupDefs.getGroups(),n=e.length,o=0;o<n;++o)i=e[o],this._updateActiveColumn(i),this._hideStackedColumns(i)}else if("move"===t.batchType){if(2===this._inReordering)for(e=this._groupDefs.getGroups(),n=e.length,o=0;o<n;++o)this._repositionMembers(e[o]);this._inReordering=0}},O.prototype._isWithinStack=function(t){let e=this._getColumnStackOptions(t-1);if(e){if(e===this._getColumnStackOptions(t+1))return e}return null},O.prototype._addRefToStack=function(t,e){let n=this._toColumnId(e);this._hideStackedColumns(t,e);let o=this._toColumnId(e+1),i=t.children.indexOf(o);return this._groupDefs.addGroupChild(t.id,n,i)},O.prototype._removeRefFromStack=function(t,e,n){if(!this._groupDefs.removeGroupChild(t.id,e))return!1;return t.spreading&&t.collapsed?this._collapseMember(n,!1):this._setColumnVisibility(n,!0),this._updateActiveColumn(t),!0},O.prototype._repositionMembers=function(t,e){let n=t.children,o=n?n.length:0,i={},r=-1,l=!1,s=!1;for(let t=0;t<o;t++){let e=n[t],o=this.getColumnIndex(e);i[e]=o,o>=0?o<r&&(l=!0):s=!0,r=o}e&&s&&(n=n.filter(x.bind(null,i)),this._groupDefs.removeAllChildren(t.id),t.children=n,this._groupDefs.setGroup(t.id,t),o=n.length),o<2?e&&(this._removeStack(t.id),this._updateUI()):(l||s)&&n.sort(D.bind(null,i))},O.prototype._onStackButtonClicked=function(t){let e=t.currentTarget;if(t.button)return;let n=this.getRelativeGrid(t).getRelativePosition(t),o=n.colIndex,i=this._getColumnStackOptions(o);if(!i)return;t.stopPropagation();let r=i.children,l=this.getColumnIndices(r);if(i.spreading){let t=!i.collapsed;this.collapseGroup(o,t),n.menuData=null,n.activeIndex=-1,n.collapsed=t}else{let t=r.indexOf(i.activeColumn),e=r.length,o=new Array(e);for(let n=e;--n>=0;)o[n]={value:n,selected:n===t,label:this.getColumnName(l[n]),field:this.getColumnField(l[n]),colId:r[n]};n.menuData=o,n.activeIndex=t,n.collapsed=!1}if(n.spreading=i.spreading,n.columnIndices=l,n.activeColIndex=this.getColumnIndex(i.activeColumn),n.event=t,n.stackId=i.id,e.focus(),this._menuElement&&!i.spreading){let t=n.event.srcElement,e=this._menuElement;e.data=n.menuData,e.positionTarget=t,e.opened=!0}this._dispatch("clicked",n)},O.prototype._onMenuItemClicked=function(t){if(t.detail){let e=parseInt(t.detail.value,0),n=this._menuElement.data[e].colId;this.setActiveColumn(n)}this._menuElement.opened=!1,this._menuItemClicked&&this._menuItemClicked(t)},O.prototype.getStackMemberIndices=function(t){return this.getColumnIndices(this.getStackMemberIds(t))},O.prototype.getStackMemberIds=function(t){if(t){let e=this._groupDefs.getGroup(t);if(e)return e.children}return[]},O.prototype.getColumnIdsByIndex=function(t){Array.isArray(t)||(t=[t]);let e,n=[];for(let o=0;o<t.length;++o)e=this.getColumnId(t[o]),n.push(e);return n},O.prototype.getColumnIndicesByColumnIds=function(t){Array.isArray(t)||(t=[t]);let e,n=[];for(let o=0;o<t.length;++o)e=this.getColumnIndex(t[o]),n.push(e);return n},O.prototype.getColumnIdsByFields=function(t){if(!t)return[];let e=Array.isArray(t)?t:[t],n=t.length,o=new Array(n);for(let t=0;t<n;++t){let n=e[t],i=-1;"number"==typeof n?i=n:n&&"string"==typeof n&&(i=this.getColumnIndex(n)),o[t]=i>=0?this.getColumnId(i):""}return o},O.prototype.addColumnToStack=function(t,e){let n=this._toColumnId(t),o=this._groupDefs.getGroup(e);if(!!this._groupDefs.getParentGroup(n)||!o)return;this._hideStackedColumns(o,this.getColumnIndex(n)),this._groupDefs.addGroupChild(e,n);let i=this._hosts[0],r=i.getFrozenColumnCount()-1,l=i.getPinnedRightColumnCount(),s=this.getColumnIndex(n);if(this._moveStackedColumns(o.children),o.leftPinned||o.rightPinned){let t=this.getColumnCount();o.leftPinned&&s>r?(r++,this._freezeColumn(r,l)):o.rightPinned&&s<t-l&&(l++,this._freezeColumn(r,l))}this._updateUI()},O.prototype.removeColumnFromStack=function(t){let e="string"==typeof t?this.getColumnIndex(t):t;if(e<0)return;let n=this.getColumnId(e),o=this._groupDefs.getParentGroup(n);if(!o)return;let i=o.children,r=i.length;if(r<=2)return 2===r&&n===i[0]&&this.moveColumnById(e,this.getColumnIndex(i[1])+1),void this.removeStack(o.id);let l=this.getColumnIndices(i);this._removeRefFromStack(o,n,e),this.moveColumnById(e,l[r-1]+1),this._updateUI()},O.prototype.reorderStackColumns=function(t,e){if(!this._groupDefs.getGroup(e))return;if(!t||!t.length)return;let n=this.getColumnIndices(t);if(!n.length)return;let o=this.getStackMemberIndices(e),i=o.length,r={};for(let t=0;t<i;++t){let e=o[t];r[e]=n.indexOf(e)}o.sort(D.bind(null,r)),this.reorderColumns(o,o[0])},O.prototype.setStackName=function(t,e){this._groupDefs.setGroupName(t,e)},O.prototype.getStackName=function(t){return this._groupDefs.getGroupName(t)},O.prototype.getActiveColumnId=function(t){let e=this._groupDefs.getGroup(t);return e&&e.activeColumn||""},O.prototype.getActiveColumnField=function(t){return this.getColumnField(this.getActiveColumnIndex(t))},O.prototype.getActiveColumnIndex=function(t){let e=this._groupDefs.getGroup(t);return e?this.getColumnIndex(e.activeColumn):-1},O.prototype.addStackChild=function(t,e){this.addColumnToStack(e,t)},O.prototype.removeStackChild=function(t,e){t===this.getStackId(e)&&this.removeColumnFromStack(e)},O.prototype.unsetParent=O.prototype.removeColumnFromStack,O.prototype.reorderColumns=function(t,e){return this._reorderColumns(t,e)},O.prototype.moveColumnById=function(t,e){return this._moveColumnById(t,e)},O.prototype._updateActiveColumn=function(t){if(M(t)){let e=this.getColumnIndex(t.activeColumn);e>=0&&(this._setColumnVisibility(e,!0),this._updateUI())}},O.prototype.hideStack=function(t,e){if(!t)return;let n=this._groupDefs.getGroup(t);if(!n)return;null==e&&(e=!0);let o=n.children;for(let t=0;t<o.length;t++)for(let n=this._hosts.length;--n>=0;)this._hosts[n].hideColumn(this.getColumnIndex(o[t]),e)},O.prototype.showStack=function(t){t&&this.hideStack(t,!1)},O.prototype.isStackHidden=function(t){let e=this._groupDefs.getGroup(t),n=this._host||this._hosts[0];if(!e||!n)return null;let o=this.getColumnIndex(e.activeColumn);return!n.isColumnVisible(o)},O.prototype.moveStack=function(t,e){if(!t)return!1;let n=this.getStackMemberIds(t);return this.reorderColumns(n,e)},O.prototype.pinStack=function(t,e){if(!t)return;let n=this._groupDefs.getGroup(t);if(!n)return;let o,i=this._hosts[0],r=i.getFrozenColumnCount()-1,l=i.getPinnedRightColumnCount(),s=this.getColumnCount(),u=this.getStackMemberIds(t),a=u.length;if("right"===e){if(n.rightPinned)return;n.leftPinned&&(this.unpinStack(t),r=i.getFrozenColumnCount()-1),n.rightPinned=!0,o=s-l,l+=a}else{if(n.leftPinned)return;n.rightPinned&&(this.unpinStack(t),l=i.getPinnedRightColumnCount()),n.leftPinned=!0,o=-1===r?0:r+1,r+=a}this.reorderColumns(u,o),this._freezeColumn(r,l)},O.prototype.unpinStack=function(t,e){if(!t)return;let n=this._groupDefs.getGroup(t);if(!n)return;if(!n.leftPinned&&!n.rightPinned)return;let o=this._hosts[0],i=o.getFrozenColumnCount(),r=o.getPinnedRightColumnCount(),l=this.getColumnCount()-r,s=this.getStackMemberIds(t),u=s.length,a=null;if(null!=e){let t=this.getColumnIndex(e);a=this.getColumnId(t)}n.leftPinned?(n.leftPinned=!1,this.reorderColumns(s,i),this._freezeColumn(i-(1+u))):n.rightPinned&&(n.rightPinned=!1,this.reorderColumns(s,l),this._freezeColumn(i-1,r-u)),null!=a&&this.reorderColumns(s,a)};!function(t,e){if(!t||!e)return;if(!e.prototype.getName)return;let n=e.prototype.getName().replace(/Plugin$/,"");if(!n)return;let o=t.tr;o||(o=t.tr={});let i=o.grid;i||(i=o.grid={}),i[n+"Plugin"]=e,o[n+"Extension"]=e}(window,O)}]);