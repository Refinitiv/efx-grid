!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);var r={inherits:function(t,e){function n(){}n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.base=function(t,n,r){n||(n="constructor");for(var o=arguments.length,i=new Array(o),s=2;s<o;s++)i[s-2]=arguments[s];return e.prototype[n].apply(t,i)}}},o=function(){};o.prototype._events=null,o.prototype._listenerCount=0,o.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var n=this._events[t];n?n.indexOf(e)<0&&(n.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},o.prototype.removeEventListener=function(t,e){var n=this._events?this._events[t]:null;if(n){var r=n.indexOf(e);r>=0&&(n.splice(r,1),--this._listenerCount)}},o.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},o.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},o.prototype.getListener=function(t,e){if(t){var n=this._events?this._events[t]:null;if(n)return e||(e=0),n[e]||null}return null},o.prototype.addListener=function(t,e){var n=t?t[e]:null;"function"==typeof n&&this.addEventListener(e,n)},o.prototype._prepareEventArguments=function(t,e){return e},o.prototype._dispatch=function(t,e){var n=this._events?this._events[t]:null;if(n){e=this._prepareEventArguments(t,e);for(var r=n.length,o=0;o<r;++o)n[o](e)}};var i=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};o.preventDefault=i;var s=function(t,e,n){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=n&&(this._ctx=n),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};s.prototype.promise=null,s.prototype._resolve=null,s.prototype._reject=null,s.prototype._resolveHandler=null,s.prototype._rejectHandler=null,s.prototype._ctx=null,s.prototype._fulfilled=!1,s.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},s.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},s.prototype.isFulfilled=function(){return this._fulfilled},s.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var l=function(){};r.inherits(l,o),l.prototype._hosts=null,l.prototype._compositeGrid=null,l.prototype._realTimeGrid=null,l.prototype._rowGetter=null,l.prototype._initializedGrid=!1,l.prototype.listen=l.prototype.addEventListener,l.prototype.unlisten=l.prototype.removeEventListener,l.prototype.afterInit=function(t,e,n){var r=null;n&&n.getCoreGrid&&(r=n.getCoreGrid()),r&&(this.getGridApi()||this.setGridWrapper("compositegrid",n),this._compositeGrid&&r.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?d:u,this._afterInit())},l.prototype._afterInit=function(){},l.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},l.prototype.hasMultiTableSupport=function(){return!1},l.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},l.prototype.getName=function(){return"GridPlugin"},l.prototype.initialize=function(t,e){},l.prototype.unload=function(t){this._dispose()},l.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var n=(e=t.target).api;if(n&&n.getCoreGrid)return n.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var r=this._hosts.length;--r>=0;){var o=this._hosts[r];if(o.getElement().contains(e))return o}return null},l.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},l.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},l.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var n=this.getColumnIndex(t),r=this._realTimeGrid.getColumnDefinition(n);if(r)return r.getName()}return""},l.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){var e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},l.prototype.getColumnIndices=function(t){var e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){for(var n,r=this._compositeGrid.getColumnFields(),o=this._compositeGrid.getColumnCount(),i=[],s=0;s<t.length;s++)if("number"==typeof(n=t[s]))n>=0&&n<o&&i.push(n);else{var l=r.indexOf(n);-1!==l&&i.push(l)}return i}return this._realTimeGrid.getColumnIndices(t)},l.prototype.getColumnId=function(t){if("string"==typeof t)return t;var e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var n=this._realTimeGrid.getColumnDefinition(t);return n?n.getId():""},l.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},l.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},l.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},l.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},l.prototype._moveColumnById=function(t,e){var n=this._hosts,r=n?n.length:0;if(r){for(var o=0,i=0;i<r;++i)o|=n[i].moveColumnById(t,e);return!!o}return!1},l.prototype._reorderColumns=function(t,e){var n=this._hosts,r=n?n.length:0;if(r){for(var o=0,i=0;i<r;++i)o|=n[i].reorderColumns(t,e);return!!o}return!1},l.prototype._loadPlugin=function(t,e,n){return t||(t=e.getPlugin(n))||(t=e.loadPlugin(n))&&this._initializedGrid&&(t._initializedGrid=!0),t},l.prototype._requestPlugin=function(t,e,n){return this._initializedGrid?l.requestPlugin(t,e,n,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},l.requestPlugin=function(t,e,n,r,o){var i=null;if(t){var a=null;1===t.nodeType?a=t.api:t.getCoreGrid?a=t:t.getPlugin&&(i=t),a&&(i=a.getCoreGrid(),r||o||(a.getModel?r=a:o=a))}if(!i)return Promise.reject("Cannot find grid element");var u=i.getPlugin(e);if(u)return Promise.resolve(u);var d=new s;return setTimeout(l._onPluginRequested.bind(null,{grid:i,pluginRef:e,compositeGrid:r,realTimeGrid:o,config:n,deferred:d}),10),d.promise},l._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var n=e.getPlugin(t.pluginRef);if(n)return t.deferred.resolve(n);var r=!1;return t.pluginRef.beforeInit&&(r=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(n=e.loadPlugin(t.pluginRef,t.config))?(!r&&n.beforeInit&&(r=!0,n.beforeInit(e.getElement(),t.config)),n.setGridWrapper&&(t.compositeGrid?n.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&n.setGridWrapper("realtimegrid",t.realTimeGrid)),n.afterInit&&n.afterInit(),t.deferred.resolve(n)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},l.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},l.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},l.prototype._getColumnOption=function(t,e,n){var r=this._getColumnData(t,n);return r?r[e]:null},l.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var n=e.getColumnData(t);return n||(n=e.setColumnData(t,{})),n},l.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},l.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},l.prototype._getRow=function(t,e){return p(t.getRowDataAt(e))},l.prototype._getData=function(t,e,n){var r=this._getRow(t,e);return r?r[n]:void 0},l.prototype._setData=function(t,e,n,r){if(this._realTimeGrid){var o=a(t,e);o&&o.setData(n,r)}else"number"==typeof e?t.setDataAt(e,n,r):t.setData(e,n,r)},l.prototype._setRowData=function(t,e,n){if(this._realTimeGrid){var r=a(t,e);r&&r.setRowData(n)}else"number"==typeof e?t.setRowDataAt(e,n):t.setRowData(e,n)},l.prototype._setStaticData=function(t,e,n,r){if(this._realTimeGrid){var o=a(t,e);o&&o.setStaticData(n,r)}else this._setData(t,e,n,r)},l.prototype._setColumnData=function(t,e,n,r){if(e){var o=Array.isArray(r)?r:t.getAllRowIds(!0),i=o?o.length:0;if(i)if(1!==i){var s=Array.isArray(n)?n:o.map((function(){return n}));if(this._realTimeGrid){for(var l=0;l<i;++l){var a=t.getRowData(o[l]);if(a){var u=a.ROW_DEF;u&&(u.getRowData()[e]=s[l])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,s,o)}else this._setData(t,o[0],e,Array.isArray(n)?n[0]:n)}},l.prototype._activateColumnRenderer=function(t,e,n){if(null!=t){var r=this._realTimeGrid;r?r.activateColumnRenderer(t,e,n):"function"==typeof n?this._hosts[0].setColumnDataBindingHandler(t,n):this._hosts[0].setColumnDataBindingHandler(t,null)}};var a=function(t,e){var n="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return n&&n.ROW_DEF||null},u=function(t){return t},d=function(t){return t?t.ROW_DEF.getRowData():null},p=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},c=function(t,e,n){this._onConflated=this._onConflated.bind(this),this._data=[],"function"==typeof t?this.setFunction(t,n):"function"==typeof e&&this.setFunction(e,n),"number"==typeof e?this.setConflatingTime(e):"number"==typeof t&&this.setConflatingTime(t)};c.prototype._data,c.prototype._func=null,c.prototype._delay=0,c.prototype._timerId=0,c.prototype._conflated=!1,c.prototype._disabled=!1,c.prototype.reset=function(){return this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this.popAllData()},c.prototype.popAllData=function(){if(this._data.length){var t=this._data;return this._data=[],t}return null},c.prototype.dispose=function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this._data.length&&(this._data.length=0),this._func=null},c.prototype.conflate=function(t){return!this._disabled&&(null!=t&&this._data.push(t),!this._conflated&&(this._timerId||(this._timerId=setTimeout(this._onConflated,this._delay)),!0))},c.prototype.isConflating=function(){return this._timerId>0&&!this._conflated&&!this._disabled},c.prototype._onConflated=function(){this._conflated=!0;try{this._func()}catch(t){console.error(t.message||t)}this._timerId=0,this._data.length=0,this._conflated=!1},c.prototype.getData=function(){return this._data},c.prototype.setFunction=function(t,e){this._func=t,this._func=t?e?t.bind(e):t:null},c.prototype.setConflatingTime=function(t){this._delay=t||0,this._delay<0&&(this._delay=0)},c.prototype.getConflatingTime=function(){return this._delay},c.prototype.disable=function(t){this._disabled=!1!==t},c.prototype.isEnabled=function(){return!this._disabled},c.prototype.enable=function(t){this._disabled=!1===t};var h={create:function(t,e){var n=document.createElement("coral-icon");return e&&(n.className=e),t&&n.setAttribute("icon",t),n},box:function(t,e,n){var r=null;return n&&("string"==typeof n?r=document.createElement(n):1===n.nodeType&&(r=n)),r||(r=document.createElement("div")),e&&(r.className=e),r.appendChild(h.create(t)),r},change:function(t,e){t.getAttribute("icon")!==e&&t.setAttribute("icon",e)}},f=function(t,e){return function(t,e,n){if(!t)return null;if(!e||t===e)return t;var r;if(n)for(var o=n.length,i=0;i<o;++i)(r=n[i])&&m(t,e,r);else for(r in e)m(t,e,r);return t}({},t,e)},m=function(t,e,n){var r=e[n];if(null!=r){var o=t[n];Array.isArray(o)?t[n]=o.concat(r):Array.isArray(r)&&o?t[n]=r.concat(o):t[n]=r}},g=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},_=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},v=function(t,e){if(!t)return null;var n=document.createElement("style");n.textContent="\n"+t+"\n";var r,o=function(t){var e;if(t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t))return e;return null}(e),i=!0;return o||(i=!1,o=document.head),i&&o.children&&o.children.length&&(r=o.children[0]),r?o.insertBefore(n,r):o.appendChild(n),n},C=function(t,e){for(var n in e||(e=[]),t){var r=t[n];"object"==typeof r?C(r,e):e.push(r)}return e},y=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var n="#",r=0;r<3;r++){var o=+e[r];o>=16||(n+="0"),n+=o?o.toString(16).toUpperCase():"0"}return n},I={},b=function(t,e){"attributes"==e.type&&"lang"==e.attributeName&&(t.lang=e.target.lang||"en")},k=function(t,e,n){"attributes"===n.type&&(null!=e?n.attributeName===e&&t(n.target.getAttribute(e)):t(n.target))};I._getNewId=function(){return"observer_"+ ++I._id},I._addObserver=function(t,e,n){var r=n;r||(r={}),r.attributes=!0,I._observer.observe(t,r),I._addListener(t,e)},I._onMutationCallback=function(t){for(var e=0;e<t.length;e++)for(var n=t[e],r=I._listeners[n.target._observeId],o=0;o<r.length;o++)r[o](n)},I._addListener=function(t,e){var n=I._listeners;if(n||(n=I._listeners={}),!t._observeId){var r=I._getNewId();t._observeId=r}n[t._observeId]||(n[t._observeId]=[]);var o=n[t._observeId];o.indexOf(e)<0&&o.push(e)},I.addLanguageListener=function(t){t&&(t.lang=document.documentElement.lang||"en",I._addObserver(document.documentElement,b.bind(null,t)))},I.addAttributeListener=function(t,e,n){t&&e&&I._addObserver(t,k.bind(null,e,n))},I._observer=new MutationObserver(I._onMutationCallback),I._listeners={},I._id=0;var S={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},G={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};G.themeColors=G._defaultColors,G._components={},G._themeName="",G._elfVersion=0,G._dummyIcon=null,G._iconLoaded=!1,G._profileName=null,G._callbacks=[],G._observed=!1,G._pendingResolve=!1,G._themeLoaded=!1,G._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},G._icons["halo-theme"]=G._icons["elf-theme-halo"],G._icons["solar-theme"]=G._icons["elf-theme-solar"],G.getElfVersion=function(){if(!G._elfVersion){var t=0;if(window.EFX_GRID){var e=window.EFX_GRID.version;t=+(e=e.split("."))[0]}else if(window.elf)if(window.elf.version){var n=window.elf.version.match(/\d/);n&&n[0]&&(t=parseInt(n[0],10))}else window.elf.customElements?t=3:window.customElements&&(t=4);else window.Polymer&&(t=1);G._elfVersion=t}return G._elfVersion},G.hasComponent=function(t){var e=G._components[t];if(null==e){e=0;var n=G.getElfVersion();if(t)1===n?document.createElement(t).is===t&&(e=n):n>1&&(window.customElements&&window.customElements.get(t)||document.createElement(t).constructor!==HTMLElement)&&(e=n),G._components[t]=e}return e},G.toLangString=function(t){if(!t)return"";if("zh-hant"===(t=t.toLowerCase()))return"zh-Hant";var e=t.replace(/-.*/,"");return S[e]?e:""},G.hasTheme=function(t){return t===G.getThemeName()},G.getThemeName=function(t){return G._themeName||(G._themeName=G.getCssVariable("--theme-name",document.documentElement)),G._themeName},G.setThemeName=function(t){G._themeName=t},G.isThemeLoaded=function(){return G._themeLoaded},G.getColors=function(){return G.themeColors},G.isHaloTheme=function(t){return null==t&&(t=G.getThemeName()),!!t&&t.indexOf("halo")>=0},G.injectIcons=function(t,e){if("object"==typeof t){var n=G.getThemeName();t.themeName=n;var r=G.getElfVersion();t.elfVersion=r;var o=G._icons[n];o&&(t.icons=o)}},G.getIconList=function(){var t=G._icons[G.getThemeName()];return t?C(t):[]},G._onIconPreloaded=function(){if(G._dummyIcon){var t=G._dummyIcon.parentNode;t&&t.removeChild(G._dummyIcon),G._dummyIcon=null}},G.prepareIconPreloading=function(){if(!G._iconLoaded){G._iconLoaded=!0;var t=G.getIconList();if(t.length){setTimeout(G._onIconPreloaded,10);var e=G._dummyIcon=document.createElement("coral-icon");return e.style.transform="scale(0)",document.body.appendChild(e),t}}return null},G.getCssVariable=function(t,e){var n="",r=e||document.body;return window&&"string"==typeof t&&1===r.nodeType&&t.match(/^--/)&&(n=(n=window.getComputedStyle(r).getPropertyValue(t)).replace(/[\"\']/g,"")),n},G.getCssVariables=function(t,e){var n=e||document.body;if(window&&1===n.nodeType){var r=window.getComputedStyle(n);for(var o in t){var i=t[o];i&&i.match(/^--/)&&(t[o]=r.getPropertyValue(i).replace(/\"/g,""))}}return t||null},G.setRTK=function(t){null!=t&&(G._rtk=t)},G.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},G._addThemeChangedCallback=function(t){var e=G._callbacks;e.indexOf(t)<0&&e.push(t)},G.reloadThemeColors=function(){return G._deferred&&G._deferred.isFulfilled()?(G._profileName="",G._themeLoaded=!1,G.themeReady=null,G.getThemeColors()):G.themeReady},G.getThemeColors=function(t){if("function"==typeof t&&G._addThemeChangedCallback(t),G.themeReady)return G.themeReady;var e=G._deferred=new s;G.themeReady=e.promise;var n=G.getMovementColorProfile();if(n)n!==G._profileName?setTimeout(G._profileNameRetrieved,100):G._deferred.resolve(G.themeColors);else{var r={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},o=window?window.JET:null;if(G._themeLoaded=!1,G._rtk&&G._rtk.Settings)G._rtk.Settings.getAsync(r).then(G._loadingProfileSuccess).catch(G._loadingProfileFailure);else if(o&&o.Settings)try{o.Settings.read(G._loadingProfileSuccess,r)}catch(t){G._loadingProfileFailure()}else setTimeout(G._profileNameRetrieved,100)}return e.promise};var P=function(t){if(t!==G._profileName){G._retrieveThemeColors(t),G._pendingResolve&&(G._pendingResolve=!1,G._deferred.resolve(G.themeColors));for(var e=G._callbacks,n=0;n<e.length;n++)e[n]()}};G._loadingProfileSuccess=function(t){t&&document.documentElement.setAttribute("movement-color-profile",t.toLowerCase()),G._observed?G._pendingResolve=!0:G._profileNameRetrieved(t)},G._loadingProfileFailure=function(){G._retrieveThemeColors(),G._observed||(G._observed=!0,I.addAttributeListener(document.documentElement,P,"movement-color-profile")),G._deferred.reject("Failed to get movement color profile from settings.")},G._profileNameRetrieved=function(){var t=G.getMovementColorProfile();G._retrieveThemeColors(t),G._observed||(G._observed=!0,I.addAttributeListener(document.documentElement,P,"movement-color-profile")),G._deferred.resolve(G.themeColors)},G._retrieveThemeColors=function(t){G._themeLoaded=!0,G._profileName=t;var e=G.themeColors=G.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});e.up||(e.up=G._defaultColors.up,e.down=G._defaultColors.down,e.level=G._defaultColors.level,e.tickUp=G._defaultColors.tickUp,e.tickDown=G._defaultColors.tickDown),e.positive=e.up,e.negative=e.down,e.neutral=e.level;var n=document.createElement("table");n.style.visibility="hidden",n.style.position="fixed",n.style.left="0",n.style.top="0",n.style.width="0";var r=n.insertRow(-1),o=r.insertCell(-1);document.body.appendChild(n);var i=window.getComputedStyle(r);e.tableBg=i.backgroundColor;var s=window.getComputedStyle(o);e.tableText=s.color,e.tableBorder=s.borderColor,e.tableText===e.tableBorder&&(o.className="tr-lg",s=window.getComputedStyle(o),e.tableBg=s.backgroundColor,e.tableText=s.color,e.tableBorder=s.borderColor,e.tableText===e.tableBorder&&(e.tableBg=G._defaultColors.baseGrid,e.tableText=G._defaultColors.baseText,e.tableBorder="")),e.tableBg=y(e.tableBg),e.tableText=y(e.tableText),e.tableBorder=y(e.tableBorder),document.body.removeChild(n),e.baseGrid=e.tableBg,e.baseText=e.tableText,e.trackColor=e.primary||G._defaultColors.trackColor};var A=function(){this._groupMap={},this._childToParent={}};A.prototype._groupMap,A.prototype._childToParent,A.getGroupId=function(t){return t&&t.id||""},A.calcTreeDepth=function(t,e){for(var n=-1,r=e;r;){if(++n>15){console.log("WARNING: Infinite loop detected during column group creation");break}r=t[r.parentId]}return n},A.getLeafDescendants=function(t,e){var n=t[e];if(!n)return null;for(var r=[],o=[n],i=0,s={};i<o.length;){s[(n=o[i++]).id]=!0;for(var l=n.children,a=l?l.length:0,u=0;u<a;++u){var d=l[u];(n=t[d])?s[n.id]||o.push(n):r.push(d)}}return r},A._cloneObject=function(t){var e=f(t);return Array.isArray(e.children)?e.children=e.children.slice():e.children=[],e},A._toGroupDefinition=function(t,e){var n=null;return t&&(n=Array.isArray(t)?{children:t.slice()}:A._cloneObject(t),e&&(n.id||(n.name=e),n.id=e)),n},A.prototype.toString=function(){var t=this._groupMap,e=[];for(var n in e.push("=== groupDefs ==="),t){var r=t[n];e.push(n+": "+JSON.stringify(r,["id","parentId","children"]))}return e.push("=== childToParent ==="),e.push(JSON.stringify(this._childToParent,null,2)),e.push(""),e.join("\n")},A.prototype.getGroup=function(t){return t&&this._groupMap[t]||null},A.prototype.getDefinition=A.prototype.getGroup,A.prototype.getGroups=function(){var t=[],e=this._groupMap;for(var n in e)t.push(e[n]);return t},A.prototype.getGroupIds=function(){return Object.keys(this._groupMap)},A.prototype.getGroupMap=function(){return this._groupMap},A.prototype.cloneGroupMap=function(){var t=this._groupMap,e={};for(var n in t){var r=t[n],o=A._cloneObject(r);e[n]=o}return e},A.prototype.rebuildMap=function(){var t,e,n=this._groupMap,r=this._childToParent={},o=Object.keys(n),i=o.length;for(t=0;t<i;++t)for(var s=n[e=o[t]].children,l=s?s.length:0,a=0;a<l;a++)r[s[a]]=e;for(t=0;t<i;++t){var u=r[e=o[t]];u&&(n[e].parentId=u)}},A.prototype.getGroupChildren=function(t){var e=this._groupMap[t];return e?e.children:null},A.prototype.getLeafDescendants=function(t){return A.getLeafDescendants(this._groupMap,t)},A.prototype.getGroupLevel=function(t){return A.calcTreeDepth(this._groupMap,this._groupMap[t])},A.prototype.getRootGroup=function(t){if(!t)return null;var e=this._groupMap,n=e[t]||null;if(n)for(;n.parentId;){var r=e[n.parentId];if(!r)break;n=r}return n},A.prototype.getParentGroup=function(t){return this.getGroup(this._childToParent[t])},A.prototype.getParentIds=function(t){if(t&&"string"==typeof t){var e=this._childToParent[t];if(e){for(var n=[e],r=this._groupMap[e];r&&r.parentId;)(r=this._groupMap[r.parentId])&&n.push(r.id);return n}}return null},A.prototype.getParentId=function(t,e){var n=this._childToParent[t];if(null!=e)for(var r=this.getGroupLevel(n);r>e&&n;)n=this._childToParent[n],r--;return n||""},A.prototype.removeAllGroups=function(){for(var t in this._groupMap)return this._groupMap={},this._childToParent={},!0;return!1},A.prototype.setGroups=function(t){for(var e=this._groupMap={},n=t?t.length:0,r=0;r<n;r++){var o=t[r],i=o.id;i&&(e[i]=A._cloneObject(o))}this.rebuildMap()},A.prototype.addGroup=function(t){var e=A.getGroupId(t);return e?this.setGroup(e,t):e},A.prototype.removeGroup=function(t){return!!this._groupMap[t]&&(this.removeAllChildren(t),this.unsetParent(t),delete this._groupMap[t],!0)},A.prototype.setGroup=function(t,e){if(!t)return"";if(e){var n=A._toGroupDefinition(e,t);this._ungroupChildren(n.children),this._groupMap[t]&&this.removeAllChildren(t);var r=this._childToParent[t];r&&(n.parentId=r.id),this._groupMap[t]=n;for(var o=n.children,i=o.length,s=0;s<i;++s){var l=o[s];this._childToParent[l]=t;var a=this._groupMap[l];a&&(a.parentId=t)}}else if(!this.removeGroup(t))return"";return t},A.prototype._ungroupChildren=function(t){if(Array.isArray(t))for(var e=t.length,n=0;n<e;++n)this.unsetParent(t[n])},A.prototype.hasGroupChild=function(t,e){var n=this._groupMap[t];if(e&&n){var r=n.children;if(r)return r.indexOf(e)>=0}return!1},A.prototype.contains=function(t,e){if(t&&e){if(t===e)return!0;for(var n=20,r=this._childToParent[e];r&&n;){if(t===r)return!0;--n,r=this._childToParent[r]}}return!1},A.prototype.addGroupChild=function(t,e,n){var r=this._groupMap[t];if(e&&r){var o=r.children;if(o&&o.indexOf(e)<0){this.unsetParent(e),this._childToParent[e]=t;var i=this._groupMap[e];return i&&(i.parentId=t),null!=n&&n>=0?o.splice(n,0,e):o.push(e),!0}}return!1},A.prototype.removeGroupChild=function(t,e){return null==e?this.unsetParent(t):!!this.hasGroupChild(t,e)&&this.unsetParent(e)},A.prototype.unsetParent=function(t){var e=this._childToParent[t];if(!e)return!1;this._childToParent[t]="";var n=this._groupMap[t];n&&(n.parentId="");var r=this._groupMap[e];if(r){var o=r.children;if(o&&o.length){var i=o.indexOf(t);i>=0&&o.splice(i,1)}}return!0},A.prototype.removeAllChildren=function(t){var e=this._groupMap[t];if(e){var n=e.children,r=n?n.length:0;if(r){e.children=[];for(var o=0;o<r;++o){var i=n[o];this._childToParent[i]&&(this._childToParent[i]="");var s=this._groupMap[i];s&&(s.parentId="")}return!0}}return!1},A.prototype.setGroupChildren=function(t,e){var n=this._groupMap[t];if(n){if(Array.isArray(e)){var r=e.slice();this._ungroupChildren(r),this.removeAllChildren(t),n.children=r;for(var o=n.id,i=r.length,s=0;s<i;++s){var l=r[s];this._childToParent[l]=o;var a=this._groupMap[l];a&&(a.parentId=o)}return!0}if(!e&&n.children.length)return this.removeAllChildren(t),!0}return!1},A.prototype.getGroupName=function(t){var e=this._groupMap[t];return e&&e.name||""},A.prototype.setGroupName=function(t,e){var n=this._groupMap[t];return!(!n||n.name===e)&&(n.name=e,!0)};var T={create:function(t,e){var n=document.createElement(t);return e&&(n.className=e),n},div:function(t){return T.create("div",t)},text:function(t,e){var n=T.create("span",e);return(t||0===t)&&(n.textContent=t),n},appendChild:function(t,e){if(!t)return null;var n,r;Array.isArray(arguments[1])?(r=arguments[1],n=0):(r=arguments,n=1);for(var o=r.length;n<o;)t.appendChild(r[n]),++n;return t},buildTree:function(t,e){if(!t)return null;for(var n=arguments,r=n.length,o=1;o<r;++o){var i,s=n[o];if(s)Array.isArray(s)?i=T.buildTree.apply(null,s):1===s.nodeType&&(i=s),i&&t.appendChild(i)}return t},removeParent:function(t){if(!t)return null;var e=t.parentNode;return e&&e.removeChild(t),e},setParent:function(t,e){return t?e?(e.appendChild(t),e):T.removeParent(t):null},removeChildren:function(t,e){if(t){var n=t.childNodes.length;for((null==e||e>n)&&(e=n);--e>=0;)t.removeChild(t.lastChild)}},setContent:function(t,e){if(t)if(e||0===e){var n=e.nodeType;1===n||3===n?e!==t.lastChild&&(T.removeChildren(t),t.appendChild(e)):Array.isArray(e)?(T.removeChildren(t),T.appendChild(t,e)):t.textContent=e}else T.removeChildren(t)},toggleAttribute:function(t,e,n){n?t.setAttribute(e,"string"==typeof n?n:""):null==n?t.hasAttribute(e)?t.removeAttribute(e):t.setAttribute(e,""):t.removeAttribute(e)},toggleClass:function(t,e,n){n?t.classList.add(e):null==n?t.classList.contains(e)?t.classList.remove(e):t.classList.add(e):t.classList.remove(e)},addClasses:function(t,e){if(t)for(var n=Array.isArray(e)?e:arguments,r=n.length,o=0;o<r;++o){var i=n[o];i&&"string"==typeof i&&t.classList.add(i)}},removeClasses:function(t,e){if(t)for(var n=Array.isArray(e)?e:arguments,r=n.length,o=0;o<r;++o){var i=n[o];i&&"string"==typeof i&&t.classList.remove(i)}},preventDefault:function(t){t.preventDefault(),t.stopPropagation()},stopPropagation:function(t){t.stopPropagation()},getClientPosition:function(t,e){var n=e||{x:0,y:0};if(t.getBoundingClientRect){var r=t.getBoundingClientRect();n.x=r.left,n.y=r.top}else n.x=t.clientX,n.y=t.clientY;return n},getRelativePosition:function(t,e,n){n=T.getClientPosition(t,n);var r=T.getClientPosition(e);return n.x-=r.x,n.y-=r.y,n},closestElement:function(t,e){for(var n=t;n;){if(n.classList&&n.classList.contains(e))return n;n=n.parentNode||n.host}return null},closestTagName:function(t,e){for(var n=t;n;){if(n.tagName&&n.tagName==e)return n;n=n.parentNode||n.host}return null}},R=function(t,e,n){var r=t[e],o=t[n];return r===o?0:r<0?1:o<0?-1:r-o},w=function(t,e){return t[e]>=0},D=function(t){if(t){var e=t.children;if(e&&e.length){var n=t.activeColumn;if(!n||e.indexOf(n)<0)return t.activeColumn=t.spreading?e[e.length-1]:e[0],!0}}return!1},x=function(){this._onPreSectionRender=this._onPreSectionRender.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onBeforeBatchOperation=this._onBeforeBatchOperation.bind(this),this._onAfterBatchOperation=this._onAfterBatchOperation.bind(this),this._onMenuItemClicked=this._onMenuItemClicked.bind(this),this._onStackButtonClicked=this._onStackButtonClicked.bind(this),this._updateUI=this._updateUI.bind(this),this._toColumnId=this._toColumnId.bind(this),this._requestFilterRefresh=this._requestFilterRefresh.bind(this),this._hosts=[],this._groupDefs=new A,this._filterConflator=new c(50,this._requestFilterRefresh),this._conflator=new c(50,this._updateUI)};r.inherits(x,l),x.prototype._groupDefs,x.prototype._pendingStacks,x.prototype._usingField=!1,x.prototype._updating=!1,x.prototype._inReordering=0,x.prototype._inResetting=!1,x.prototype._menuElement=null,x.prototype._menuItemClicked=null,x._runningId=0,x.prototype._generateStackId=function(){for(var t="Stack"+x._runningId++;this._groupDefs.getGroup(t);)t="Stack"+x._runningId++;return t},x.prototype.getName=function(){return"ColumnStackPlugin"},x.prototype.hasMultiTableSupport=function(){return!0},x.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){if(this._hosts.push(t),e){if(e.icons){var n=e.icons.columnStack;n&&(this._stackIconName=n.stack,this._expandIconName=n.expand,this._collapseIconName=n.collapse)}var r=e.columnStack;if(r&&1===this._hosts.length){var o=r.menuElement;o&&"object"==typeof o&&1===o.nodeType&&(o.addEventListener("item-trigger",this._onMenuItemClicked),this._menuElement=o);var i=r.menuItemClicked;"function"==typeof i&&(this._menuItemClicked=i)}}x._applyThemeColor(t),1===this._hosts.length&&(this.config(e),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnMoved",this._onColumnMoved),t.listen("columnAdded",this._onColumnAdded),t.listen("beforeBatchOperation",this._onBeforeBatchOperation),t.listen("afterBatchOperation",this._onAfterBatchOperation)),t.listen("preSectionRender",this._onPreSectionRender)}},x.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("columnMoved",this._onColumnMoved),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("beforeBatchOperation",this._onBeforeBatchOperation),t.unlisten("afterBatchOperation",this._onAfterBatchOperation),t.unlisten("preSectionRender",this._onPreSectionRender),this._menuElement&&this._menuElement.removeEventListener("item-trigger",this._onMenuItemClicked),this._hosts.length<=0&&(this._conflator.reset(),this._filterConflator.reset(),this._groupDefs.removeAllGroups()),this._dispose())},x._styles=function(t){if(t){var e="";if(Array.isArray(t))e=t.map(g).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else e="string"==typeof t?t:t+"";if(e)return e.replace(/{[\w\W]*?}/g,_)}return""}([".tr-grid .collapsed .cell.grouping .valigner",["width: 0;"],".tr-grid .collapsed .cell.grouping .floating-panel",["width: 100%;","margin: 0;","justify-content: center;"],".tr-grid .collapsed .cell.grouping .front-panel,.tr-grid .collapsed .cell.grouping .floating-panel *:not(.stack-icon),.tr-grid .collapsed .cell.grouping .sort-symbol",["display: none;"],".floating-panel .stack-icon",["cursor: pointer;"],".tr-grid .collapsed .cell.grouping .floating-panel .stack-icon",["margin-left: 0;"],".stack-icon",["color: var(--grid-title-filter-icon-color);"],".stack-icon:hover",["color: var(--grid-title-filter-icon-hover-color);"]]),x._applyThemeColor=function(t){t._columnStackingStyles||(t._columnStackingStyles=!0,v(x._styles,t.getElement()))},x.prototype.config=function(t){if(t){var e,n=t.columns;n||(n=[]);var r=n.length,o=t.columnStack,i="",s={},l=!1,a=null;if(o)if(this.addListener(o,"clicked"),this._usingField=!1,o.fields&&o.fields.length>1)this._usingField=!0,l=!0,s[i=this._generateStackId()]={id:i,spreading:!0===o.spreading,collapsed:!1!==o.collapsed,fields:o.fields};else if(o.stacks&&o.stacks.length){l=!0;var u=o.stacks.length;for(e=0;e<u;e++)i=(a=o.stacks[e]).id||this._generateStackId(),null==a.collapsed&&(a.collapsed=!0),null==a.spreading&&(a.spreading=!1),s[i]=a}if(!l)for(e=0;e<r;++e){var d=n[e],p=d.stackId||d.stack;if(p){i="";var c=!1,h=!0,f="";"string"==typeof p?i=p:"object"==typeof p&&(i=(a=p).id||"",c=!0===a.spreading,h=!1!==a.collapsed,f=a.activeColumn||""),i&&((p=s[i])||(p=s[i]={id:i,spreading:c,collapsed:h},f&&(p.activeColumn=f),l=!0),p.children||(p.children=[]),p.children.push(e))}}this._initializedGrid?this._applyUserConfigs(l?s:null):this._pendingStacks=this._pendingStacks||s}},x.prototype.getConfigObject=function(t){var e=t||{},n=this.getStacks();return n.length&&(e.columnStack={},e.columnStack.stacks=n),e},x.prototype._afterInit=function(){this._pendingStacks&&(this._applyUserConfigs(this._pendingStacks),this._pendingStacks=null)},x.prototype._toColumnId=function(t){return"string"!=typeof t?"number"==typeof t?this.getColumnId(t):"":t||""},x.prototype._applyUserConfigs=function(t){if(t)for(var e in this.removeAllStacks(!1),t){var n=t[e],r=n.children,o=n.fields;o&&(this._usingField=!0,r=o),this.stackColumns(r,e,n)}else this.removeAllStacks()},x.prototype._getColumnStackOptions=function(t){if(t>=0&&t<this.getColumnCount()){var e=this.getColumnId(t);return this._groupDefs.getParentGroup(e)||null}return null},x.prototype._getSelectedColumns=function(){var t=this._getPlugin("ColumnSelectionPlugin");return t&&t.isEnabled()?t.getSelectedColumns():[]},x.prototype._hideStackedColumns=function(t,e,n){if(!t.spreading||t.collapsed)for(var r="number"==typeof n?n:this.getColumnIndex(t.activeColumn),o=null,i=(o="number"==typeof e?[e]:null==o?this.getColumnIndices(t.children):e).length,s=0;s<i;++s){var l=o[s];l!==r&&this._setColumnVisibility(l,!1)}},x.prototype._setColumnVisibility=function(t,e){if(t>=0){for(var n=!1,r=this._hosts.length;--r>=0;)n|=this._hosts[r].setColumnVisibility(t,e,2);n&&this._requestFilterRefresh()}},x.prototype._requestFilterRefresh=function(){if(!this._filterConflator.conflate()){var t=this._getPlugin("RowFilteringPlugin");t&&t.refresh&&t.refresh()}},x.prototype._moveStackedColumns=function(t){var e=this.getColumnIndices(t);e.length>1&&this.reorderColumns(e,e[0])},x.prototype._isIconAvailable=function(){return G.hasComponent("coral-icon")&&(G.hasTheme("elf-theme-solar")||G.hasTheme("elf-theme-luna"))},x.prototype._updateIcon=function(t,e){for(var n=!!e&&e.spreading,r=this._hosts.length,o=0;o<r;++o){var s=this._hosts[o],l=s.getSection("title"),a=l.getRowCount(),u=l.getCell(t,a-1,!0);if(u){var d=u._stackIcon;if(e){var p=this.isActiveStackedColumn(t);!d&&p?(n?(u.addClass("grouping"),d=this._expandIconName?e.collapsed?h.create(this._expandIconName):h.create(this._collapseIconName):e.collapsed?T.text(">"):T.text("<")):(u.addClass("stacking"),this._stackIconName?d=h.create(this._stackIconName):(d=T.text("≡")).style.fontSize="1.3em"),d.className="stack-icon",d.addEventListener("click",this._onStackButtonClicked,!1),d.addEventListener("dblclick",i,!1),d.addEventListener("mousedown",i,!1),d.addEventListener("keydown",i,!1),u.insertFloatingIcon(d,20),u._stackIcon=d,this._dispatch("iconCreated",{icon:d,colIndex:t,grid:s,cell:u})):d&&!p&&(u.removeFloatingIcon(u._stackIcon),u._stackIcon=null)}else d&&(u.removeFloatingIcon(u._stackIcon),u._stackIcon=null,u.removeClass("grouping"),u.removeClass("stacking"))}}},x.prototype._updateUI=function(){if(!this._updating&&!this._conflator.conflate()){this._updating=!0;for(var t,e,n=this.getColumnCount(),r=this._hosts.length,o=0;o<n;++o){e=!0===(e=!!(t=this._getColumnStackOptions(o))&&t.spreading);for(var i=0;i<r;++i){this._hosts[i].enableColumnClass(o,"grouped",e)}this._updateIcon(o,t),t&&(t.spreading?this._collapseMember(o,t.collapsed):this._setColumnVisibility(o,this._isActiveStackedColumn(o,t)))}this._updating=!1}},x.prototype._forceUpdateUI=function(){this._conflator.disable(),this._updateUI(),this._conflator.enable()},x.prototype._collapseMember=function(t,e){var n=this._getColumnStackOptions(t);if(n)for(var r=this._hosts.length;--r>=0;){var o=this._hosts[r];if(o.enableColumnClass(t,"collapsed",e),this.isActiveStackedColumn(t)){o.setColumnVisibility(t,!0,2);var i=o.getSection("title"),s=i.getRowCount(),l=i.getCell(t,s-1,!0);e?(n.collapsed===e&&n._origWidth||(n._origWidth=this._getColumnWidth(o,t),n._scalable=o.getColumnScalability(t)),o.setColumnWidth(t,i.getRowHeight(0),!1),l._stackIcon&&(this._expandIconName?l._stackIcon.setAttribute("icon","right"):l._stackIcon.textContent=">")):(null!=n._origWidth&&o.setColumnWidth(t,n._origWidth,n._scalable),l._stackIcon&&(this._collapseIconName?l._stackIcon.setAttribute("icon","left"):l._stackIcon.textContent="<"))}else o.setColumnVisibility(t,!e,2)}},x.prototype._getColumnWidth=function(t,e){if(t){var n=t.getMinimumColumnWidth(e),r=t.getColumnCustomLaneSize(e);return r<n?n:r}return NaN},x.prototype.getMemberIndices=function(t){var e=this._getColumnStackOptions(t);return e?this.getColumnIndices(e.children):null},x.prototype.collapseGroup=function(t,e){var n=this._getColumnStackOptions(t);if(!n)return null;if(!n.spreading)return null;if(e=!1!==e,n.collapsed!==e){var r=this.getColumnIndices(n.children);if(r){for(var o=r.length;--o>=0;)this._collapseMember(r[o],e);return n.collapsed=e,r}}return null},x.prototype.expandGroup=function(t){return this.collapseGroup(t,!1)},x.prototype.isColumnStackable=function(t){if(!t)return!1;for(var e=t.length,n=0;n<e;++n)if(this._getColumnStackOptions(t[n]))return!1;return!0},x.prototype.isColumnStacked=function(t){t||(t=this._getSelectedColumns());for(var e=t.length,n=0;n<e;++n)if(this._getColumnStackOptions(t[n]))return!0;return!1},x.prototype.isInactiveStackedColumn=function(t){var e=this._getColumnStackOptions(t);return!!e&&!this._isActiveStackedColumn(t,e)},x.prototype.isActiveStackedColumn=function(t){return this._isActiveStackedColumn(t,this._getColumnStackOptions(t))},x.prototype._isActiveStackedColumn=function(t,e){return!!e&&(D(e),t===this.getColumnIndex(e.activeColumn))},x.prototype.isStackingMode=function(t){var e=this._getColumnStackOptions(t);return!!e&&!0!==e.spreading},x.prototype.isCollapsingMode=function(t){var e=this._getColumnStackOptions(t);return!!e&&!0===e.spreading},x.prototype.isColumnInCollection=function(t){return!!this._getColumnStackOptions(t)},x.prototype.isInCollection=x.prototype.isColumnInCollection,x.prototype.isColumnCollapsed=function(t){var e=this._getColumnStackOptions(t);return!!e&&(!0===e.spreading&&!0===e.collapsed)},x.prototype.isColumnActive=function(t){var e=this._getColumnStackOptions(t);return!!e&&(e.spreading?!e.collapsed:t===this.getColumnIndex(e.activeColumn))},x.prototype.getStackId=function(t){var e="number"==typeof t?t:this.getColumnIndex(t);if(e>=0){var n=this._getColumnStackOptions(e);if(n)return n.id||""}return""},x.prototype.stackColumns=function(t,e,n){var r=!1,o=e;if(o?this._removeStack(o)&&(r=!0):o=this._generateStackId(),t||(t=this._getSelectedColumns()),(t?t.length:0)<2)return r&&this._updateUI(),r;n||(n={});var i=!0===n.spreading,s=!1!==n.collapsed,l=n.activeColumn||"",a={};if(a.id=o,a.name=n.name||"",a.spreading=i,a.collapsed=s,a.activeColumn=l,!this._initializedGrid){var u=this._pendingStacks;return u||(u=this._pendingStacks={}),a.children=t,u[o]=a,!1}var d=this.getColumnIndices(t);if(!this.isColumnStackable(d))return r&&this._updateUI(),r;var p=d.map(this._toColumnId);a.children=p;var c=-1;l&&"string"==typeof l?(c=this.getColumnIndex(l),a.activeColumn=l=this.getColumnId(c)):"number"==typeof l&&(c=l),D(a)&&(l=a.activeColumn,c=this.getColumnIndex(l)),this._hideStackedColumns(a,d,c),this.reorderColumns(d,d[0]);var h=d.length;if(!i){var f=this._getPlugin("ColumnSelectionPlugin");if(f&&f.isEnabled()){for(var m=!1,g=0;g<h;++g){var _=d[g];if(_!==c&&f.isSelectedColumn(_)){m=!0;break}}m&&(f.selectSingleColumn(c),f.dispatchSelectionChanged&&f.dispatchSelectionChanged())}}return this._verifyColumnPinning(a),this._groupDefs.setGroup(o,a),this._updateUI(),!0},x.prototype._verifyColumnPinning=function(t){t.leftPinned=!1,t.rightPinned=!1;var e=this._hosts[0],n=e.getFrozenColumnCount()-1,r=e.getFirstPinnedRightIndex(),o=this.getColumnCount();if(!(n<0&&r===o)){for(var i=this.getColumnIndices(t.children),s=i[0],l=i[0],a=1;a<i.length;a++){var u=i[a];u>l&&(l=u),u<s&&(s=u)}s<=n?(t.leftPinned=!0,l>n&&this._freezeColumn(l,o-r)):l>=r&&(t.rightPinned=!0,s<r&&this._freezeColumn(n,o-s))}},x.prototype._freezeColumn=function(t,e){for(var n=this._hosts,r=0;r<n.length;r++)n[r].freezeColumn(t,e)},x.prototype.setStack=function(t,e){this.removeAllStacks();var n={};return e&&(n.activeColumn=e),this.stackColumns(t,"_uniqueStack",n),!0},x.prototype.setStacks=function(t){this.removeAllStacks();for(var e=t?t.length:0,n=0;n<e;++n){var r=t[n];r&&r.children&&this.stackColumns(r.children,r.id,r)}},x.prototype.getStacks=function(){var t=this._groupDefs.getGroupMap(),e=[];for(var n in t){var r=t[n],o=r.id,i={id:o},s=r.name,l=r.collapsed,a=r.spreading;if(s&&(i.name=s),!0!==l&&(i.collapsed=l),!1!==a&&(i.spreading=a),this._usingField){for(var u=this.getStackMemberIndices(o),d=u.length,p=new Array(d),c=0;c<d;++c)p[c]=this.getColumnField(u[c]);i.fields=p,i.activeColumn=this.getActiveColumnField(o)}else i.children=this.getStackMemberIds(o).slice(),r.activeColumn&&(i.activeColumn=r.activeColumn);e.push(i)}return e},x.prototype.unstackColumns=function(t){t||(t=this._getSelectedColumns());for(var e=!1,n=t.length,r=0;r<n;++r){var o=t[r],i=this._getColumnStackOptions(o);i&&(e=!0,this._removeStack(i.id))}return e&&this._updateUI(),e},x.prototype._removeStack=function(t){var e=this._groupDefs.getGroup(t);if(!e)return!1;for(var n=this.getColumnIndices(e.children),r=n.length,o=0;o<r;++o){var i=n[o];e.spreading&&e.collapsed&&this._collapseMember(i,!1),this._setColumnVisibility(i,!0)}return this._groupDefs.removeGroup(t),!0},x.prototype.removeStack=function(t){return!!this._removeStack(t)&&(this._updateUI(),!0)},x.prototype.removeAllStacks=function(t){var e=this._groupDefs.getGroupIds(),n=e.length;if(n){for(var r=0;r<n;++r)this._removeStack(e[r]);this._groupDefs.removeAllGroups(),!1!==t&&this._updateUI()}return!!n},x.prototype.setActiveColumn=function(t){var e=this.getColumnIndex(t);if(e<0)return!1;if(e>=this.getColumnCount())return!1;var n=this.getColumnId(e),r=this._groupDefs.getParentGroup(n);if(!r)return!1;var o=r.children,i=o.indexOf(n);return!(i<0)&&this._setActiveColumn(r,o[i])},x.prototype.swapColumn=function(t,e){var n="number"==typeof t?t:this.getColumnIndex(t),r=this._getColumnStackOptions(n);if(!r)return!1;var o=r.children;return!!o&&this._setActiveColumn(r,o[e])},x.prototype._setActiveColumn=function(t,e){if(!e)return!1;if(e===t.activeColumn)return!1;var n=this.getColumnIndex(t.activeColumn),r=this.getColumnIndex(e);t.activeColumn=e,this._setColumnVisibility(r,!0),this._setColumnVisibility(n,!1),this._updateIcon(n,t),this._updateIcon(r,t);var o=this._getPlugin("ColumnSelectionPlugin");return o&&o.isEnabled()&&(o.selectSingleColumn(r),o.dispatchSelectionChanged&&o.dispatchSelectionChanged()),!0},x.prototype._onPreSectionRender=function(t){"title"===t.sectionType&&this._forceUpdateUI()},x.prototype._onColumnRemoved=function(t){if(!this._inResetting){var e=t.colId,n=this._groupDefs.getParentGroup(e);if(n)n.children.length<=2?(this._removeStack(n.id),this._updateUI()):(this._groupDefs.removeGroupChild(n.id,e),this._updateActiveColumn(n))}},x.prototype._onColumnMoved=function(t){if(this._inReordering||this._inResetting)this._inReordering&&(this._inReordering=2);else{var e=t.toColIndex,n=this.getColumnId(e),r=this._groupDefs.getParentGroup(n);if(r){var o=this._getColumnStackOptions(e-1),i=this._getColumnStackOptions(e+1),s=!0,l=!1;r&&(r===o||r===i?(this._repositionMembers(r),s=!1):r.children.length<=2?this._removeStack(r.id):this._removeRefFromStack(r,n,e),l=!0),s&&this._isWithinStack(e)&&this._addRefToStack(o,e)&&(l=!0),l&&this._updateUI()}}},x.prototype._onColumnAdded=function(t){if(!this._inResetting){var e=t.colIndex,n=this._isWithinStack(e);n&&this._addRefToStack(n,e)&&this._updateUI()}},x.prototype._onBeforeBatchOperation=function(t){"reset"===t.batchType?this._inResetting=!0:"move"===t.batchType&&(this._inReordering=1)},x.prototype._onAfterBatchOperation=function(t){var e,n,r,o;if("reset"===t.batchType){for(this._inResetting=!1,n=(e=this._groupDefs.getGroups()).length,r=0;r<n;++r)this._repositionMembers(e[r],!0);for(n=(e=this._groupDefs.getGroups()).length,r=0;r<n;++r)o=e[r],this._updateActiveColumn(o),this._hideStackedColumns(o)}else if("move"===t.batchType){if(2===this._inReordering)for(n=(e=this._groupDefs.getGroups()).length,r=0;r<n;++r)this._repositionMembers(e[r]);this._inReordering=0}},x.prototype._isWithinStack=function(t){var e=this._getColumnStackOptions(t-1);if(e&&e===this._getColumnStackOptions(t+1))return e;return null},x.prototype._addRefToStack=function(t,e){var n=this._toColumnId(e);this._hideStackedColumns(t,e);var r=this._toColumnId(e+1),o=t.children.indexOf(r);return this._groupDefs.addGroupChild(t.id,n,o)},x.prototype._removeRefFromStack=function(t,e,n){return!!this._groupDefs.removeGroupChild(t.id,e)&&(t.spreading&&t.collapsed?this._collapseMember(n,!1):this._setColumnVisibility(n,!0),this._updateActiveColumn(t),!0)},x.prototype._repositionMembers=function(t,e){for(var n=t.children,r=n?n.length:0,o={},i=-1,s=!1,l=!1,a=0;a<r;a++){var u=n[a],d=this.getColumnIndex(u);o[u]=d,d>=0?d<i&&(s=!0):l=!0,i=d}e&&l&&(n=n.filter(w.bind(null,o)),this._groupDefs.removeAllChildren(t.id),t.children=n,this._groupDefs.setGroup(t.id,t),r=n.length),r<2?e&&(this._removeStack(t.id),this._updateUI()):(s||l)&&n.sort(R.bind(null,o))},x.prototype._onStackButtonClicked=function(t){var e=t.currentTarget;if(!t.button){var n=this.getRelativeGrid(t).getRelativePosition(t),r=n.colIndex,o=this._getColumnStackOptions(r);if(o){t.stopPropagation();var i=o.children,s=this.getColumnIndices(i);if(o.spreading){var l=!o.collapsed;this.collapseGroup(r,l),n.menuData=null,n.activeIndex=-1,n.collapsed=l}else{for(var a=i.indexOf(o.activeColumn),u=i.length,d=new Array(u),p=u;--p>=0;)d[p]={value:p,selected:p===a,label:this.getColumnName(s[p]),field:this.getColumnField(s[p]),colId:i[p]};n.menuData=d,n.activeIndex=a,n.collapsed=!1}if(n.spreading=o.spreading,n.columnIndices=s,n.activeColIndex=this.getColumnIndex(o.activeColumn),n.event=t,n.stackId=o.id,e.focus(),this._menuElement&&!o.spreading){var c=n.event.srcElement,h=this._menuElement;h.data=n.menuData,h.positionTarget=c,h.opened=!0}this._dispatch("clicked",n)}}},x.prototype._onMenuItemClicked=function(t){if(t.detail){var e=parseInt(t.detail.value,0),n=this._menuElement.data[e].colId;this.setActiveColumn(n)}this._menuElement.opened=!1,this._menuItemClicked&&this._menuItemClicked(t)},x.prototype.getStackMemberIndices=function(t){return this.getColumnIndices(this.getStackMemberIds(t))},x.prototype.getStackMemberIds=function(t){if(t){var e=this._groupDefs.getGroup(t);if(e)return e.children}return[]},x.prototype.getColumnIdsByIndex=function(t){Array.isArray(t)||(t=[t]);for(var e,n=[],r=0;r<t.length;++r)e=this.getColumnId(t[r]),n.push(e);return n},x.prototype.getColumnIndicesByColumnIds=function(t){Array.isArray(t)||(t=[t]);for(var e,n=[],r=0;r<t.length;++r)e=this.getColumnIndex(t[r]),n.push(e);return n},x.prototype.getColumnIdsByFields=function(t){if(!t)return[];for(var e=Array.isArray(t)?t:[t],n=t.length,r=new Array(n),o=0;o<n;++o){var i=e[o],s=-1;"number"==typeof i?s=i:i&&"string"==typeof i&&(s=this.getColumnIndex(i)),r[o]=s>=0?this.getColumnId(s):""}return r},x.prototype.addColumnToStack=function(t,e){var n=this._toColumnId(t),r=this._groupDefs.getGroup(e);if(!this._groupDefs.getParentGroup(n)&&r){this._hideStackedColumns(r,this.getColumnIndex(n)),this._groupDefs.addGroupChild(e,n);var o=this._hosts[0],i=o.getFrozenColumnCount()-1,s=o.getPinnedRightColumnCount(),l=this.getColumnIndex(n);if(this._moveStackedColumns(r.children),r.leftPinned||r.rightPinned){var a=this.getColumnCount();r.leftPinned&&l>i?(i++,this._freezeColumn(i,s)):r.rightPinned&&l<a-s&&(s++,this._freezeColumn(i,s))}this._updateUI()}},x.prototype.removeColumnFromStack=function(t){var e="string"==typeof t?this.getColumnIndex(t):t;if(!(e<0)){var n=this.getColumnId(e),r=this._groupDefs.getParentGroup(n);if(r){var o=r.children,i=o.length;if(i<=2)return 2===i&&n===o[0]&&this.moveColumnById(e,this.getColumnIndex(o[1])+1),void this.removeStack(r.id);var s=this.getColumnIndices(o);this._removeRefFromStack(r,n,e),this.moveColumnById(e,s[i-1]+1),this._updateUI()}}},x.prototype.reorderStackColumns=function(t,e){if(this._groupDefs.getGroup(e)&&t&&t.length){var n=this.getColumnIndices(t);if(n.length){for(var r=this.getStackMemberIndices(e),o=r.length,i={},s=0;s<o;++s){var l=r[s];i[l]=n.indexOf(l)}r.sort(R.bind(null,i)),this.reorderColumns(r,r[0])}}},x.prototype.setStackName=function(t,e){this._groupDefs.setGroupName(t,e)},x.prototype.getStackName=function(t){return this._groupDefs.getGroupName(t)},x.prototype.getActiveColumnId=function(t){var e=this._groupDefs.getGroup(t);return e&&e.activeColumn||""},x.prototype.getActiveColumnField=function(t){return this.getColumnField(this.getActiveColumnIndex(t))},x.prototype.getActiveColumnIndex=function(t){var e=this._groupDefs.getGroup(t);return e?this.getColumnIndex(e.activeColumn):-1},x.prototype.addStackChild=function(t,e){this.addColumnToStack(e,t)},x.prototype.removeStackChild=function(t,e){t===this.getStackId(e)&&this.removeColumnFromStack(e)},x.prototype.unsetParent=x.prototype.removeColumnFromStack,x.prototype.reorderColumns=function(t,e){return this._reorderColumns(t,e)},x.prototype.moveColumnById=function(t,e){return this._moveColumnById(t,e)},x.prototype._updateActiveColumn=function(t){if(D(t)){var e=this.getColumnIndex(t.activeColumn);e>=0&&(this._setColumnVisibility(e,!0),this._updateUI())}},x.prototype.hideStack=function(t,e){if(t){var n=this._groupDefs.getGroup(t);if(n){null==e&&(e=!0);for(var r=n.children,o=0;o<r.length;o++)for(var i=this._hosts.length;--i>=0;)this._hosts[i].hideColumn(this.getColumnIndex(r[o]),e)}}},x.prototype.showStack=function(t){t&&this.hideStack(t,!1)},x.prototype.isStackHidden=function(t){var e=this._groupDefs.getGroup(t),n=this._host||this._hosts[0];if(!e||!n)return null;var r=this.getColumnIndex(e.activeColumn);return!n.isColumnVisible(r)},x.prototype.moveStack=function(t,e){if(!t)return!1;var n=this.getStackMemberIds(t);return this.reorderColumns(n,e)},x.prototype.pinStack=function(t,e){if(t){var n=this._groupDefs.getGroup(t);if(n){var r,o=this._hosts[0],i=o.getFrozenColumnCount()-1,s=o.getPinnedRightColumnCount(),l=this.getColumnCount(),a=this.getStackMemberIds(t),u=a.length;if("right"===e){if(n.rightPinned)return;n.leftPinned&&(this.unpinStack(t),i=o.getFrozenColumnCount()-1),n.rightPinned=!0,r=l-s,s+=u}else{if(n.leftPinned)return;n.rightPinned&&(this.unpinStack(t),s=o.getPinnedRightColumnCount()),n.leftPinned=!0,r=-1===i?0:i+1,i+=u}this.reorderColumns(a,r),this._freezeColumn(i,s)}}},x.prototype.unpinStack=function(t,e){if(t){var n=this._groupDefs.getGroup(t);if(n&&(n.leftPinned||n.rightPinned)){var r=this._hosts[0],o=r.getFrozenColumnCount(),i=r.getPinnedRightColumnCount(),s=this.getColumnCount()-i,l=this.getStackMemberIds(t),a=l.length,u=null;if(null!=e){var d=this.getColumnIndex(e);u=this.getColumnId(d)}n.leftPinned?(n.leftPinned=!1,this.reorderColumns(l,o),this._freezeColumn(o-(1+a))):n.rightPinned&&(n.rightPinned=!1,this.reorderColumns(l,s),this._freezeColumn(o-1,i-a)),null!=u&&this.reorderColumns(l,u)}}};!function(t,e){if(t&&e&&e.prototype.getName){var n=e.prototype.getName().replace(/Plugin$/,"");if(n){var r=t.tr;r||(r=t.tr={});var o=r.grid;o||(o=r.grid={}),o[n+"Plugin"]=e,r[n+"Extension"]=e}}}(window,x)}]);