!function(e){var t={};function o(r){if(t[r])return t[r].exports;var n=t[r]={i:r,l:!1,exports:{}};return e[r].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=e,o.c=t,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(o.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)o.d(r,n,function(t){return e[t]}.bind(null,n));return r},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=0)}([function(e,t,o){"use strict";o.r(t);var r={inherits:function(e,t){function o(){}o.prototype=t.prototype,e.prototype=new o,e.prototype.constructor=e,e.base=function(e,o,r){o||(o="constructor");for(var n=arguments.length,i=new Array(n),s=2;s<n;s++)i[s-2]=arguments[s];return t.prototype[o].apply(e,i)}}},n=function(){};n.prototype._events=null,n.prototype._listenerCount=0,n.prototype.addEventListener=function(e,t){if(e&&t){this._events||(this._events={});var o=this._events[e];o?o.indexOf(t)<0&&(o.push(t),++this._listenerCount):(this._events[e]=[t],++this._listenerCount)}},n.prototype.removeEventListener=function(e,t){var o=this._events?this._events[e]:null;if(o){var r=o.indexOf(t);r>=0&&(o.splice(r,1),--this._listenerCount)}},n.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},n.prototype.hasListener=function(e){if(this._listenerCount){if(e){var t=this._events?this._events[e]:null;return!!t&&t.length>0}return!0}return!1},n.prototype.getListener=function(e,t){if(e){var o=this._events?this._events[e]:null;if(o)return t||(t=0),o[t]||null}return null},n.prototype.addListener=function(e,t){var o=e?e[t]:null;"function"==typeof o&&this.addEventListener(t,o)},n.prototype._prepareEventArguments=function(e,t){return t},n.prototype._dispatch=function(e,t){var o=this._events?this._events[e]:null;if(o){t=this._prepareEventArguments(e,t);for(var r=o.length,n=0;n<r;++n)o[n](t)}};n.preventDefault=function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation())};var i=function(e,t,o){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof e&&(this._resolveHandler=e),"function"==typeof t&&(this._rejectHandler=t),null!=o&&(this._ctx=o),this.promise=new Promise(function(e,t){this._resolve=e,this._reject=t}.bind(this))};i.prototype.promise=null,i.prototype._resolve=null,i.prototype._reject=null,i.prototype._resolveHandler=null,i.prototype._rejectHandler=null,i.prototype._ctx=null,i.prototype._fulfilled=!1,i.prototype.resolve=function(e){if(this._resolve){if(this._resolveHandler){var t=this._resolveHandler(e,this._ctx||this);null!=t&&(e=t)}this._resolve(e),this._finally()}},i.prototype.reject=function(e){if(this._reject){if(this._rejectHandler){var t=this._rejectHandler(e,this._ctx||this);null!=t&&(e=t)}this._reject(e),this._finally()}},i.prototype.isFulfilled=function(){return this._fulfilled},i.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null};var s=function(e,t){return function(e,t,o){if(!e)return null;if(!t||e===t)return e;var r;if(o)for(var n=o.length,i=0;i<n;++i)(r=o[i])&&a(e,t,r);else for(r in t)a(e,t,r);return e}({},e,t)},a=function(e,t,o){var r=t[o];if(null!=r){var n=e[o];Array.isArray(n)?e[o]=n.concat(r):Array.isArray(r)&&n?e[o]=r.concat(n):e[o]=r}},l=function(e){return Array.isArray(e)?"{\n"+e.join("\n")+"\n}":e},d=function(e){return e.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},u=function(e){if(e){var t="";if(Array.isArray(e))t=e.map(l).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {");else t="string"==typeof e?e:e+"";if(t)return t.replace(/{[\w\W]*?}/g,d)}return""},g=function(e,t){if(!e)return null;var o=document.createElement("style");o.textContent="\n"+e+"\n";var r,n=function(e){var t;if(e&&(e.shadowRoot?t=e.shadowRoot:e.getRootNode&&(t=e.getRootNode()),t&&t!==document&&t!==e))return t;return null}(t),i=!0;return n||(i=!1,n=document.head),i&&n.children&&n.children.length&&(r=n.children[0]),r?n.insertBefore(o,r):n.appendChild(o),o},p=function(e,t){for(var o in t||(t=[]),e){var r=e[o];"object"==typeof r?p(r,t):t.push(r)}return t},c=function(e){if(!e||"string"!=typeof e)return"";if("#"===e.charAt(0))return e;var t=e.match(/\d+/g);if(!t||t.length<3)return e;for(var o="#",r=0;r<3;r++){var n=+t[r];n>=16||(o+="0"),o+=n?n.toString(16).toUpperCase():"0"}return o},h={},_=function(e,t){"attributes"==t.type&&"lang"==t.attributeName&&(e.lang=t.target.lang||"en")},f=function(e,t,o){"attributes"===o.type&&(null!=t?o.attributeName===t&&e(o.target.getAttribute(t)):e(o.target))};h._getNewId=function(){return"observer_"+ ++h._id},h._addObserver=function(e,t,o){var r=o;r||(r={}),r.attributes=!0,h._observer.observe(e,r),h._addListener(e,t)},h._onMutationCallback=function(e){for(var t=0;t<e.length;t++)for(var o=e[t],r=h._listeners[o.target._observeId],n=0;n<r.length;n++)r[n](o)},h._addListener=function(e,t){var o=h._listeners;if(o||(o=h._listeners={}),!e._observeId){var r=h._getNewId();e._observeId=r}o[e._observeId]||(o[e._observeId]=[]);var n=o[e._observeId];n.indexOf(t)<0&&n.push(t)},h.addLanguageListener=function(e){e&&(e.lang=document.documentElement.lang||"en",h._addObserver(document.documentElement,_.bind(null,e)))},h.addAttributeListener=function(e,t,o){e&&t&&h._addObserver(e,f.bind(null,t,o))},h._observer=new MutationObserver(h._onMutationCallback),h._listeners={},h._id=0;var m={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},v={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};v.themeColors=v._defaultColors,v._components={},v._themeName="",v._elfVersion=0,v._dummyIcon=null,v._iconLoaded=!1,v._profileName=null,v._callbacks=[],v._observed=!1,v._pendingResolve=!1,v._themeLoaded=!1,v._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},v._icons["halo-theme"]=v._icons["elf-theme-halo"],v._icons["solar-theme"]=v._icons["elf-theme-solar"],v.getElfVersion=function(){if(!v._elfVersion){var e=0;if(window.EFX_GRID){var t=window.EFX_GRID.version;e=+(t=t.split("."))[0]}else if(window.elf)if(window.elf.version){var o=window.elf.version.match(/\d/);o&&o[0]&&(e=parseInt(o[0],10))}else window.elf.customElements?e=3:window.customElements&&(e=4);else window.Polymer&&(e=1);v._elfVersion=e}return v._elfVersion},v.hasComponent=function(e){var t=v._components[e];if(null==t){t=0;var o=v.getElfVersion();if(e)1===o?document.createElement(e).is===e&&(t=o):o>1&&(window.customElements&&window.customElements.get(e)||document.createElement(e).constructor!==HTMLElement)&&(t=o),v._components[e]=t}return t},v.toLangString=function(e){if(!e)return"";if("zh-hant"===(e=e.toLowerCase()))return"zh-Hant";var t=e.replace(/-.*/,"");return m[t]?t:""},v.hasTheme=function(e){return e===v.getThemeName()},v.getThemeName=function(e){return v._themeName||(v._themeName=v.getCssVariable("--theme-name",document.documentElement)),v._themeName},v.setThemeName=function(e){v._themeName=e},v.isThemeLoaded=function(){return v._themeLoaded},v.getColors=function(){return v.themeColors},v.isHaloTheme=function(e){return null==e&&(e=v.getThemeName()),!!e&&e.indexOf("halo")>=0},v.injectIcons=function(e,t){if("object"==typeof e){var o=v.getThemeName();e.themeName=o;var r=v.getElfVersion();e.elfVersion=r;var n=v._icons[o];n&&(e.icons=n)}},v.getIconList=function(){var e=v._icons[v.getThemeName()];return e?p(e):[]},v._onIconPreloaded=function(){if(v._dummyIcon){var e=v._dummyIcon.parentNode;e&&e.removeChild(v._dummyIcon),v._dummyIcon=null}},v.prepareIconPreloading=function(){if(!v._iconLoaded){v._iconLoaded=!0;var e=v.getIconList();if(e.length){setTimeout(v._onIconPreloaded,10);var t=v._dummyIcon=document.createElement("coral-icon");return t.style.transform="scale(0)",document.body.appendChild(t),e}}return null},v.getCssVariable=function(e,t){var o="",r=t||document.body;return window&&"string"==typeof e&&1===r.nodeType&&e.match(/^--/)&&(o=(o=window.getComputedStyle(r).getPropertyValue(e)).replace(/[\"\']/g,"")),o},v.getCssVariables=function(e,t){var o=t||document.body;if(window&&1===o.nodeType){var r=window.getComputedStyle(o);for(var n in e){var i=e[n];i&&i.match(/^--/)&&(e[n]=r.getPropertyValue(i).replace(/\"/g,""))}}return e||null},v.setRTK=function(e){null!=e&&(v._rtk=e)},v.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},v._addThemeChangedCallback=function(e){var t=v._callbacks;t.indexOf(e)<0&&t.push(e)},v.reloadThemeColors=function(){return v._deferred&&v._deferred.isFulfilled()?(v._profileName="",v._themeLoaded=!1,v.themeReady=null,v.getThemeColors()):v.themeReady},v.getThemeColors=function(e){if("function"==typeof e&&v._addThemeChangedCallback(e),v.themeReady)return v.themeReady;var t=v._deferred=new i;v.themeReady=t.promise;var o=v.getMovementColorProfile();if(o)o!==v._profileName?setTimeout(v._profileNameRetrieved,100):v._deferred.resolve(v.themeColors);else{var r={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},n=window?window.JET:null;if(v._themeLoaded=!1,v._rtk&&v._rtk.Settings)v._rtk.Settings.getAsync(r).then(v._loadingProfileSuccess).catch(v._loadingProfileFailure);else if(n&&n.Settings)try{n.Settings.read(v._loadingProfileSuccess,r)}catch(e){v._loadingProfileFailure()}else setTimeout(v._profileNameRetrieved,100)}return t.promise};var y=function(e){if(e!==v._profileName){v._retrieveThemeColors(e),v._pendingResolve&&(v._pendingResolve=!1,v._deferred.resolve(v.themeColors));for(var t=v._callbacks,o=0;o<t.length;o++)t[o]()}};v._loadingProfileSuccess=function(e){e&&document.documentElement.setAttribute("movement-color-profile",e.toLowerCase()),v._observed?v._pendingResolve=!0:v._profileNameRetrieved(e)},v._loadingProfileFailure=function(){v._retrieveThemeColors(),v._observed||(v._observed=!0,h.addAttributeListener(document.documentElement,y,"movement-color-profile")),v._deferred.reject("Failed to get movement color profile from settings.")},v._profileNameRetrieved=function(){var e=v.getMovementColorProfile();v._retrieveThemeColors(e),v._observed||(v._observed=!0,h.addAttributeListener(document.documentElement,y,"movement-color-profile")),v._deferred.resolve(v.themeColors)},v._retrieveThemeColors=function(e){v._themeLoaded=!0,v._profileName=e;var t=v.themeColors=v.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});t.up||(t.up=v._defaultColors.up,t.down=v._defaultColors.down,t.level=v._defaultColors.level,t.tickUp=v._defaultColors.tickUp,t.tickDown=v._defaultColors.tickDown),t.positive=t.up,t.negative=t.down,t.neutral=t.level;var o=document.createElement("table");o.style.visibility="hidden",o.style.position="fixed",o.style.left="0",o.style.top="0",o.style.width="0";var r=o.insertRow(-1),n=r.insertCell(-1);document.body.appendChild(o);var i=window.getComputedStyle(r);t.tableBg=i.backgroundColor;var s=window.getComputedStyle(n);t.tableText=s.color,t.tableBorder=s.borderColor,t.tableText===t.tableBorder&&(n.className="tr-lg",s=window.getComputedStyle(n),t.tableBg=s.backgroundColor,t.tableText=s.color,t.tableBorder=s.borderColor,t.tableText===t.tableBorder&&(t.tableBg=v._defaultColors.baseGrid,t.tableText=v._defaultColors.baseText,t.tableBorder="")),t.tableBg=c(t.tableBg),t.tableText=c(t.tableText),t.tableBorder=c(t.tableBorder),document.body.removeChild(o),t.baseGrid=t.tableBg,t.baseText=t.tableText,t.trackColor=t.primary||v._defaultColors.trackColor};var w=v,b=function(){};r.inherits(b,n),b.prototype._hosts=null,b.prototype._compositeGrid=null,b.prototype._realTimeGrid=null,b.prototype._rowGetter=null,b.prototype._initializedGrid=!1,b.prototype.listen=b.prototype.addEventListener,b.prototype.unlisten=b.prototype.removeEventListener,b.prototype.afterInit=function(e,t,o){var r=null;o&&o.getCoreGrid&&(r=o.getCoreGrid()),r&&(this.getGridApi()||this.setGridWrapper("compositegrid",o),this._compositeGrid&&r.loadPlugin(this,t)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?x:T,this._afterInit())},b.prototype._afterInit=function(){},b.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},b.prototype.hasMultiTableSupport=function(){return!1},b.prototype._prepareEventArguments=function(e,t){return t||(t={}),t.api=this.getGridApi(),t},b.prototype.getName=function(){return"GridPlugin"},b.prototype.initialize=function(e,t){},b.prototype.unload=function(e){this._dispose()},b.prototype.getRelativeGrid=function(e){var t=null;if(e.target){var o=(t=e.target).api;if(o&&o.getCoreGrid)return o.getCoreGrid()}else e.getElement?t=e.getElement():1===e.nodeType&&(t=e);if(t)for(var r=this._hosts.length;--r>=0;){var n=this._hosts[r];if(n.getElement().contains(t))return n}return null},b.prototype.setGridWrapper=function(e,t){e&&("compositegrid"===(e=e.toLowerCase())?this._compositeGrid=t:"realtimegrid"===e&&(this._realTimeGrid=t))},b.prototype.getGridApi=function(e){if(null==e)return this._compositeGrid||this._realTimeGrid;var t="number"==typeof e?this._hosts[e]:e;return t&&t._wrapper||null},b.prototype.getColumnName=function(e){if(this._compositeGrid){var t=this._compositeGrid.getColumnModel(e);if(t)return t.title?t.title:t.field}else{var o=this.getColumnIndex(e),r=this._realTimeGrid.getColumnDefinition(o);if(r)return r.getName()}return""},b.prototype.getColumnIndex=function(e){if("number"==typeof e)return e;if(this._compositeGrid){var t=this._compositeGrid.getColumnFields().indexOf(e);return t>-1?t:this._compositeGrid.getColumnIndex(e)}return this._realTimeGrid.getColumnIndex(e)},b.prototype.getColumnIndices=function(e){var t=this.getGridApi();if(t.getColumnIndices)return t.getColumnIndices(e);if(this._compositeGrid){for(var o,r=this._compositeGrid.getColumnFields(),n=this._compositeGrid.getColumnCount(),i=[],s=0;s<e.length;s++)if("number"==typeof(o=e[s]))o>=0&&o<n&&i.push(o);else{var a=r.indexOf(o);-1!==a&&i.push(a)}return i}return this._realTimeGrid.getColumnIndices(e)},b.prototype.getColumnId=function(e){if("string"==typeof e)return e;var t=this.getColumnCount();if(e<0||e>=t)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(e);var o=this._realTimeGrid.getColumnDefinition(e);return o?o.getId():""},b.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},b.prototype.getColumnField=function(e){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(e):""},b.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},b.prototype.getColumnCount=function(){if(this._hosts){var e=this._hosts[0];return e?e.getColumnCount():0}return 0},b.prototype._moveColumnById=function(e,t){var o=this._hosts,r=o?o.length:0;if(r){for(var n=0,i=0;i<r;++i)n|=o[i].moveColumnById(e,t);return!!n}return!1},b.prototype._reorderColumns=function(e,t){var o=this._hosts,r=o?o.length:0;if(r){for(var n=0,i=0;i<r;++i)n|=o[i].reorderColumns(e,t);return!!n}return!1},b.prototype._loadPlugin=function(e,t,o){return e||(e=t.getPlugin(o))||(e=t.loadPlugin(o))&&this._initializedGrid&&(e._initializedGrid=!0),e},b.prototype._requestPlugin=function(e,t,o){return this._initializedGrid?b.requestPlugin(e,t,o,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},b.requestPlugin=function(e,t,o,r,n){var s=null;if(e){var a=null;1===e.nodeType?a=e.api:e.getCoreGrid?a=e:e.getPlugin&&(s=e),a&&(s=a.getCoreGrid(),r||n||(a.getModel?r=a:n=a))}if(!s)return Promise.reject("Cannot find grid element");var l=s.getPlugin(t);if(l)return Promise.resolve(l);var d=new i;return setTimeout(b._onPluginRequested.bind(null,{grid:s,pluginRef:t,compositeGrid:r,realTimeGrid:n,config:o,deferred:d}),10),d.promise},b._onPluginRequested=function(e){var t=e.grid;if(!t.getElement())return e.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+e.pluginRef);var o=t.getPlugin(e.pluginRef);if(o)return e.deferred.resolve(o);var r=!1;return e.pluginRef.beforeInit&&(r=!0,e.pluginRef.beforeInit(t.getElement(),e.config,!0)),(o=t.loadPlugin(e.pluginRef,e.config))?(!r&&o.beforeInit&&(r=!0,o.beforeInit(t.getElement(),e.config)),o.setGridWrapper&&(e.compositeGrid?o.setGridWrapper("compositegrid",e.compositeGrid):e.realTimeGrid&&o.setGridWrapper("realtimegrid",e.realTimeGrid)),o.afterInit&&o.afterInit(),e.deferred.resolve(o)):e.deferred.reject("Unable to load required dependency: "+e.pluginRef)},b.prototype._getPlugin=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getPlugin(e):null},b.prototype._getColumnData=function(e,t){return null==t&&(t=this._hosts[0]),t?t.getColumnData(e):null},b.prototype._getColumnOption=function(e,t,o){var r=this._getColumnData(e,o);return r?r[t]:null},b.prototype._newColumnData=function(e,t){if(null==t&&(t=this._hosts[0]),!t)return{};var o=t.getColumnData(e);return o||(o=t.setColumnData(e,{})),o},b.prototype._getField=function(e){var t=this._compositeGrid||this._realTimeGrid;return t?t.getColumnField(e):""},b.prototype._getRowData=function(e){return this._realTimeGrid&&e?e.ROW_DEF.getRowData():e},b.prototype._getRow=function(e,t){return E(e.getRowDataAt(t))},b.prototype._getData=function(e,t,o){var r=this._getRow(e,t);return r?r[o]:void 0},b.prototype._setData=function(e,t,o,r){if(this._realTimeGrid){var n=R(e,t);n&&n.setData(o,r)}else"number"==typeof t?e.setDataAt(t,o,r):e.setData(t,o,r)},b.prototype._setRowData=function(e,t,o){if(this._realTimeGrid){var r=R(e,t);r&&r.setRowData(o)}else"number"==typeof t?e.setRowDataAt(t,o):e.setRowData(t,o)},b.prototype._setStaticData=function(e,t,o,r){if(this._realTimeGrid){var n=R(e,t);n&&n.setStaticData(o,r)}else this._setData(e,t,o,r)},b.prototype._setColumnData=function(e,t,o,r){if(t){var n=Array.isArray(r)?r:e.getAllRowIds(!0),i=n?n.length:0;if(i)if(1!==i){var s=Array.isArray(o)?o:n.map((function(){return o}));if(this._realTimeGrid){for(var a=0;a<i;++a){var l=e.getRowData(n[a]);if(l){var d=l.ROW_DEF;d&&(d.getRowData()[t]=s[a])}}e.dispatchGlobalChange||(e=e.getDataSource()),e&&e.dispatchGlobalChange&&e.dispatchGlobalChange()}else e.setColumnData(t,s,n)}else this._setData(e,n[0],t,Array.isArray(o)?o[0]:o)}},b.prototype._activateColumnRenderer=function(e,t,o){if(null!=e){var r=this._realTimeGrid;r?r.activateColumnRenderer(e,t,o):"function"==typeof o?this._hosts[0].setColumnDataBindingHandler(e,o):this._hosts[0].setColumnDataBindingHandler(e,null)}};var C=function(){},D={left:37,right:39,up:38,down:40,backspace:8,tab:9,enter:13,esc:27,escape:27,space:32,pageup:33,pagedown:34,del:46,delete:46};b.prototype._mockMouseEvent=function(e,t,o){null==e&&(e=0),null==t&&(t=0);var r=o||{};if(r.preventDefault=C,r.stopPropagation=C,e>=0&&t>=0){var n=this._activeGrid||this._hosts[0],i=n?n.getCell(r.sectionType||"content",e,t):null;r.target=i?i.getElement():null}return r},b.prototype._mockKeyboardEvent=function(e,t){var o=t||{};if(o.preventDefault=C,o.stopPropagation=C,"string"==typeof e){var r=D[e.toLowerCase()]||0;e=r||e.charCodeAt(0)}return o.keyCode=e,o},b._staticStyles={},b._themeLoaders={},b._themeLoadSuccess=function(e,t){var o=this.getName(),r=b._staticStyles[o]=e(t);this.applyStyles(r,o)},b.prototype.applyStaticStyles=function(e){var t=this.getName(),o=b._staticStyles[t];o?this.applyStyles(o,t):e&&(b._themeLoaders[t]||(b._themeLoaders[t]=v.getThemeColors()),b._themeLoaders[t].then(b._themeLoadSuccess.bind(this,e)))},b.prototype.applyStyles=function(e,t,o){t||(t=this.getName());var r,n,i="_style"+t,s=this._hosts,a=s.length;if(a)if(o)for(r=0;r<a;r++)n=s[r],this.revokeStyles(n,t),n[i]=g(e,n.getElement());else for(r=0;r<a;r++)(n=s[r])[i]||(g(e,n.getElement()),n[i]=!0)},b.prototype.revokeStyles=function(e,t){if(e&&t){var o=e[t="_style"+t];o&&1===o.nodeType&&(o.parentNode.removeChild(o),e[t]=null)}};var R=function(e,t){var o="number"==typeof t?e.getRowDataAt(t):e.getRowData(t);return o&&o.ROW_DEF||null},T=function(e){return e},x=function(e){return e?e.ROW_DEF.getRowData():null},E=function(e){if(e){var t=e.ROW_DEF;return t?t.getRowData():e}return null},I={create:function(e,t){var o=document.createElement(e);return t&&(o.className=t),o},div:function(e){return I.create("div",e)},text:function(e,t){var o=I.create("span",t);return(e||0===e)&&(o.textContent=e),o},appendChild:function(e,t){if(!e)return null;var o,r;Array.isArray(arguments[1])?(r=arguments[1],o=0):(r=arguments,o=1);for(var n=r.length;o<n;)e.appendChild(r[o]),++o;return e},buildTree:function(e,t){if(!e)return null;for(var o=arguments,r=o.length,n=1;n<r;++n){var i,s=o[n];if(s)Array.isArray(s)?i=I.buildTree.apply(null,s):1===s.nodeType&&(i=s),i&&e.appendChild(i)}return e},removeParent:function(e){if(!e)return null;var t=e.parentNode;return t&&t.removeChild(e),t},setParent:function(e,t){return e?t?(t.appendChild(e),t):I.removeParent(e):null},removeChildren:function(e,t){if(e){var o=e.childNodes.length;for((null==t||t>o)&&(t=o);--t>=0;)e.removeChild(e.lastChild)}},setContent:function(e,t){if(e)if(t||0===t){var o=t.nodeType;1===o||3===o?t!==e.lastChild&&(I.removeChildren(e),e.appendChild(t)):Array.isArray(t)?(I.removeChildren(e),I.appendChild(e,t)):e.textContent=t}else I.removeChildren(e)},toggleAttribute:function(e,t,o){o?e.setAttribute(t,"string"==typeof o?o:""):null==o?e.hasAttribute(t)?e.removeAttribute(t):e.setAttribute(t,""):e.removeAttribute(t)},toggleClass:function(e,t,o){o?e.classList.add(t):null==o?e.classList.contains(t)?e.classList.remove(t):e.classList.add(t):e.classList.remove(t)},addClasses:function(e,t){if(e)for(var o=Array.isArray(t)?t:arguments,r=o.length,n=0;n<r;++n){var i=o[n];i&&"string"==typeof i&&e.classList.add(i)}},removeClasses:function(e,t){if(e)for(var o=Array.isArray(t)?t:arguments,r=o.length,n=0;n<r;++n){var i=o[n];i&&"string"==typeof i&&e.classList.remove(i)}},preventDefault:function(e){e.preventDefault(),e.stopPropagation()},stopPropagation:function(e){e.stopPropagation()},getClientPosition:function(e,t){var o=t||{x:0,y:0};if(e.getBoundingClientRect){var r=e.getBoundingClientRect();o.x=r.left,o.y=r.top}else o.x=e.clientX,o.y=e.clientY;return o},getRelativePosition:function(e,t,o){o=I.getClientPosition(e,o);var r=I.getClientPosition(t);return o.x-=r.x,o.y-=r.y,o},closestElement:function(e,t){for(var o=e;o;){if(o.classList&&o.classList.contains(t))return o;o=o.parentNode||o.host}return null},closestTagName:function(e,t){for(var o=e;o;){if(o.tagName&&o.tagName==t)return o;o=o.parentNode||o.host}return null}},P=I,G=function(e){this._dragBox=e.dragBox,this._dragBoxIcon=e.dragBoxIcon,this._dragBoxContent=document.createElement("div"),this._dragBoxContent.className="drag-box-content",this._dragBox.appendChild(this._dragBoxContent)};G._styles="",G.prototype._guideline=null,G.prototype._dragBox=null,G.prototype._dragBoxIcon=null,G.prototype._grid=null,G.applyThemeColor=function(e){e&&!e._dragUIStyles&&G._styles&&(e._dragUIStyles=!0,g(G._styles,e.getElement()))},G.prototype.onThemeLoaded=function(e){if(!G._styles){var t=w.getElfVersion(),o="grabbing";t<3&&(o="move");var r=[".tr-row-guideline",["position: absolute;","left: 0;","top: 0;","pointer-events: none;","text-align: center;","border-top-width: 3px;","border-top-style: solid;"],".guideline",["position: absolute;","left: 0;","top: 0;","pointer-events: none;","text-align: center;","border-top-style: solid;","width: 3px;","border-top-color: var(--grid-title-icon-color);","color: var(--grid-title-icon-color);","background-color: var(--grid-title-icon-color);"],".drag-box",["position: absolute;","left: 0;","top: 0;","pointer-events: none;","background-color: var(--grid-dragbox-bgcolor);","border: solid 1px var(--grid-title-sort-icon-color);","width: 134px;","height: 29px;","line-height: 29px;","white-space: nowrap;","overflow-x: clip;","text-overflow: ellipsis;","padding: 0 7px 0 7px;","box-shadow: 0 0 8px var(--grid-dragbox-bordercolor);","z-index: 2"],".drag-box-disabled",["width: 100px;","left: 0;","top: 0;","position: absolute;"],".drag-box-content",["overflow-x: clip;","text-overflow: ellipsis;"],".drag-box-icon",["top: -4px;","left: 12px;","padding: 2px;","border-radius: 100%;","font-size: 11px;","position: absolute;"],".drag-box-icon[icon='void']",["background-color:var(--grid-void-icon-bgcolor);","color:var(--grid-void-icon-color);"],".drag-box-icon[icon='add']",["background-color:var(--grid-insertion-icon-bgcolor);","color:var(--grid-insertion-icon-color);"],":host",["--grid-dragbox-bgcolor: #ffffff;","--grid-insertion-icon-bgcolor: #39c46e;","--grid-insertion-icon-color: #1A1A1A;","--grid-void-icon-bgcolor: #F5475B;","--grid-void-icon-color: #FFFFFF;","--grid-title-icon-color: var(--grid-guideline-color);"],".mouse-dragging .cell:hover",["cursor: "+o+" !important;"],".tr-grid .column .cell.drag-indicator",["border-top: var(--grid-drag-indicator) !important;","border-right: var(--grid-drag-indicator);","border-bottom: var(--grid-drag-indicator);","border-left: var(--grid-drag-indicator);"],".tr-dragging, .tr-dragging *",["-webkit-touch-callout: none;",".user-select(none);"],".tr-dragbox",["background-color: unset;"]],n="#ff9933";e.primary&&(n=e.primary),n+=";",r.push(".tr-row-guideline",["border-top-color: "+n,"color: "+n]),t<3&&r.push(".pearl .tr-row-guideline, *[theme=pearl] .tr-row-guideline",["border-top-color: #ee7600;","color: #ee7600;","background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1));"]),G._styles=u(r)}},G.prototype.renderDragBox=function(e,t){if(!t)return!1;var o=t.getElement(),r=o,n=t.getParent().parentNode;11===n.nodeType&&(r=n);var i=this._dragBox.parentNode;i||r.appendChild(this._dragBox);var s=e.dragBoxIcon||this._dragBox.dragBoxIcon;this._dragBoxIcon.style.visibility="visible",i=this._dragBoxIcon.parentNode;var a=!0;"insertion"===s?(a=!1,this._dragBoxIcon.icon="add",i||this._dragBox.appendChild(this._dragBoxIcon)):"not-allowed"===s||"no-drop"===s||"void"===s?(a=!1,this._dragBoxIcon.icon="void",i||this._dragBox.appendChild(this._dragBoxIcon)):P.removeParent(this._dragBoxIcon);var l=o.getBoundingClientRect(),d=e.clientX-l.left,u=e.pageY-l.top;return this._dragBox.style.left=d-5+"px",this._dragBox.style.top=u+8+"px",a},G.prototype.setContent=function(e){e&&e.getElement&&(e=e.getElement());var t=this._dragBoxContent;e!==t._content&&(t._content=e,P.setContent(t,e))};var B=function(e){return!(!e||"content"!==e.sectionType)},S=function(e){return!e||("CONTENT"===e||("CHAIN"===e||"GROUP_HEADER"===e))},A=function(e){var t=this;t.startDrag=t.startDrag.bind(t),t.stopDrag=t.stopDrag.bind(t),t._clearCache=t._clearCache.bind(t),t._onMouseDown=t._onMouseDown.bind(t),t._onDragPulse=t._onDragPulse.bind(t),t._onDragStart=t._onDragStart.bind(t),t._onMouseMove=t._onMouseMove.bind(t),t._onDragEnd=t._onDragEnd.bind(t),t._onThemeLoaded=t._onThemeLoaded.bind(t),t._onJETDrop=t._onJETDrop.bind(t),t._onJETDragOver=t._onJETDragOver.bind(t),t._delayStart=t._delayStart.bind(t),t._hosts=[],t._guideline=document.createElement("div"),t._guideline.className="tr-row-guideline",t._dragBox=document.createElement("div"),t._dragBox.className="drag-box-disabled",t._dragBoxIcon=document.createElement("coral-icon"),t._dragBoxIcon.className="drag-box-icon",e&&t.config({rowDragging:e})};r.inherits(A,b),A._styles="",A._stylePromise=null,A.prototype._guideline=null,A.prototype._dragBox=null,A.prototype._dragBoxIcon=null,A.prototype._uiDisabled=!1,A.prototype._disabled=!1,A.prototype._dragTarget=null,A.prototype._dragBoxRenderer=null,A.prototype._legacyRowReorder=null,A.prototype._pos=null,A.prototype._startingRid="",A.prototype._startingRowType="",A.prototype._startingGrid=null,A.prototype._dragPulseId=0,A.prototype._topBound=0,A.prototype._btmBound=0,A.prototype._scrollStep=40,A.prototype._dragging=!1,A.prototype._scrollingZone=!1,A.prototype._touchMode=!1,A.prototype._mouseInput=!0,A.prototype._dragBoxEnabled=!1,A.prototype._dataTransfer=!0,A.prototype._autoScroll=!0,A.prototype._dragUI=null,A.prototype._timerId=-1,A.prototype._jetDnD=!1,A.prototype._jetDragContent=null,A.prototype._jetContentHasRic=!1,A.prototype._jetContentHasField=!1,A.prototype._entryPoint="";var L=function(e){A._applyThemeColor(e),G.applyThemeColor(e)};A.prototype.beforeProcessOption=function(e,t){if("rowReorder"===e)return this._legacyRowReorder=t,!1},A.prototype.hasMultiTableSupport=function(){return!0},A.prototype.getName=function(){return"RowDraggingPlugin"},A.prototype.initialize=function(e,t){this._hosts.indexOf(e)>=0||(this._hosts.push(e),this.config(t),this._mouseInput&&(e.setAttribute("draggable","true"),e.listen("dragstart",this.startDrag)),e.listen("mousedown",this._onMouseDown),e.listen("touchstart",this._onMouseDown),this._dragUI=new G({dragBox:this._dragBox,dragBoxIcon:this._dragBoxIcon}),G.stylePromise||(G.stylePromise=v.getThemeColors()).then(this._onThemeLoaded).catch(this._onThemeLoaded),setTimeout(L.bind(this,e),0))},A.prototype.unload=function(e){var t=this._hosts.indexOf(e);t<0||(e.unlisten("dragstart",this.startDrag),e.unlisten("mousedown",this._onMouseDown),e.unlisten("touchstart",this._onMouseDown),this._hosts.splice(t,1),this._hosts.length||this._clearCache(),this._dispose())},A.prototype._onThemeLoaded=function(){if(!A._styles){A._styles=u([":host .row-dragging .cover-layer .selection-bound",["border: var(--grid-drag-indicator)"],":host .row-dragging .tr-lg .cell.selected-row",["background-color: unset;"]])}var e=v.getColors();this._dragUI.onThemeLoaded(e);for(var t=this._hosts.length;--t>=0;)L(this._hosts[t])},A._applyThemeColor=function(e){e&&!e._rowDraggingStyles&&A._styles&&(e._rowDraggingStyles=!0,g(A._styles,e.getParent()))},A.prototype.config=function(e){if(e){var t=e.rowDragging||this._legacyRowReorder;if(t){if("function"==typeof t.dragBoxRenderer){this._dragBoxRenderer=t.dragBoxRenderer;var o="drag-box";v.getElfVersion()<3&&(o="tr-dragbox content-dragging"),this._dragBox.className=o}else this._dragBox.className="drag-box-disabled";this._dragBoxEnabled=!!t.dragBox;var r=t.mouseInput;null!=r&&(this._mouseInput=!!r),null!=(r=t.dataTransfer)&&(this._dataTransfer=!!r),null!=(r=t.autoScroll)&&(this._autoScroll=!!r),t.disabled&&(this._uiDisabled=!0),this.addListener(t,"dragStart"),this.addListener(t,"drag"),this.addListener(t,"dragEnd"),this.addListener(t,"dataMoved"),this.addListener(t,"beforeDataMoved")}}},A.prototype.getConfigObject=function(e){var t=e||{},o=t.rowDragging;return o||(o=t.rowDragging={}),o.dragBox=this._dragBoxEnabled,o.mouseInput=this._mouseInput,o.autoScroll=this._autoScroll,o.dataTransfer=this._dataTransfer,o.disabled=this._uiDisabled,t},A.prototype.dragStart=function(e,t){t||(t={}),t.type="dragstart";var o=this._hosts[0],r=o?o.getCell("content",0,e):null;t.target=r?r.getElement():null,this._onMouseDown(t),this.startDrag(t)},A.prototype.dragMove=function(e,t){t||(t={}),t.type="mousemove",t.which=1;var o=this._hosts[0],r=o?o.getCell("content",0,e):null,n=o.getRelativePosition(r);t.clientX=n.x,t.pageY=n.y,t.target=r?r.getElement():null,t.stopPropagation=function(){},t.preventDefault=function(){},this._onMouseMove(t)},A.prototype.dragEnd=function(e,t){t||(t={}),t.type="mouseup";var o=this._hosts[0],r=o?o.getCell("content",0,e):null;t.target=r?r.getElement():null,t.stopPropagation=function(){},t.preventDefault=function(){},this._onDragEnd(t)},A.prototype.startDrag=function(e){this._startDrag(!1,e)},A.prototype.stopDrag=function(){this._dragging?(this.cancelDrag(),this._onDragEnd()):this.cancelDrag()},A.prototype.cancelDrag=function(){this._pos&&(this._pos.cancel=!0)},A.prototype.getGuideline=function(){return this._guideline},A.prototype.disable=function(e){this._disabled=!1!==e},A.prototype.isDisabled=function(){return this._disabled},A.prototype.disableUIs=function(e){this._uiDisabled=!1!==e},A.prototype.allowDrag=function(e){this._pos&&(this._pos.invalidTarget=!1===e)},A.prototype.allowDrop=A.prototype.allowDrag,A.prototype.setDragContent=function(e){this._dragUI.setContent(e)},A.prototype.getDragBox=function(){return this._dragBox},A.prototype.getDragSource=function(){return this._entryPoint},A.prototype.isDragging=function(){return this._dragging},A.prototype.disableDragging=function(e){this._disabled=!1!==e},A.prototype.enableJETDragAndDrop=function(e){var t=!1!==e;if(this._jetDnD!==t){this._jetDnD=t;var o=window.JET;o&&(o.ContainerDescription&&"EikonNowContainer"!==o.ContainerDescription.name?this._jetDnD?(o.onDrop(this._onJETDrop),o.onDragOver(this._onJETDragOver),o.onDragLeave(this.stopDrag)):(o.onDrop(null),o.onDragOver(null),o.onDragLeave(null)):this._jetDnD=!1)}},A.prototype.getJETDragContent=function(){return this._jetDragContent},A.prototype.setJETDragContent=function(e){this._jetDragContent=e;var t=window.tr,o=t?t.grid:null,r=o?o.JetDragContent:null;if(e&&r){var n=new r(e),i=n.getRicsToDrop(),s=n.getFieldsToDrop();this._jetContentHasRic=!!(i&&i.length>0),this._jetContentHasField=!!(s&&s.length>0)}else this._jetContentHasRic=!1,this._jetContentHasField=!1},A.prototype._hitTest=function(e){var t=this.getRelativeGrid(e);if(t){var o;if(e.changedTouches){var r=e.changedTouches[0];o=t.getRelativePosition(document.elementFromPoint(r.clientX,r.clientY)),P.getRelativePosition(r,t.getElement(),o)}else o=t.getRelativePosition(e);return o}return e||{}},A.prototype._onMouseDown=function(e){e.changedTouches&&(this._touchMode=!0),this._dragTarget=e.target,this._setEntryPoint("grid")},A.prototype._onDragStart=function(e,t){if(!this._dragging&&this._pos){this._listenAbortActions(!1);var o=!1,r=window.JET;if(t)o=!0;else{if(this._dispatch("dragStart",this._pos),this._isDragCancelled())return;r&&this._jetDnD&&this._jetDragContent&&(o=!0,r.dragStart(this._jetDragContent))}if(this._dragging=!0,document.body.classList.add("tr-dragging"),o||(window.addEventListener("mousemove",this._onMouseMove,!1),window.addEventListener("touchmove",this._onMouseMove,!1)),window.addEventListener("mouseup",this._onDragEnd,!1),window.addEventListener("touchend",this._onDragEnd,!1),window.addEventListener("touchcancel",this._onDragEnd,!1),this._touchMode)for(var n=this._hosts.length;--n>=0;){var i=this._hosts[n];i.getVScrollbar().disableTouchInput(),i.getHScrollbar().disableTouchInput()}if(!this._uiDisabled){var a=this._pos.grid||null;if(!a)return;if(this._dataTransfer){var l=this._pos.rowIndex,d=a.getDataSource();this._startingRid=d.getRowId(l),this._startingGrid=a;var u=this.getGridApi().getRowType(l);if(this._startingRowType=u,this._dragBoxRenderer){var g=s(e);g.dragBox=this._dragBox,g.dataRow=this._getRowData(d.getRowDataAt(l)),this._legacyRowReorder?this._dragBoxRenderer(e,g.dragBox,[g.dataRow]):this._dragBoxRenderer(g)}}var p=a.getElement();if(p.classList.add("mouse-dragging"),p.classList.add("row-dragging"),this._updateGuidePosition(),this._autoScroll){var c=a.getVScrollbar();this._topBound=c.getTop()+50,this._btmBound=c.getTop()+c.getHeight()-50,this._topBound<this._btmBound&&(this._scrollStep=Math.floor(a.getScrollHeight()/25),this._scrollStep<40?this._scrollStep=40:this._scrollStep>400&&(this._scrollStep=400),this._dragPulseId=setInterval(this._onDragPulse,130))}}}},A.prototype._onMouseMove=function(e){if(this._dragging){if("touchmove"!=e.type){if(!e||1!==e.which)return void this.stopDrag();P.preventDefault(e)}this._pos=this._hitTest(e),this._pos.dragBox=this._dragBox,this._pos.grid&&this._shouldPreventDrop(this._pos.rowIndex)&&(this._pos.dragBoxIcon="void");var t=!0;if("JET"!==this._entryPoint||this._jetContentHasRic||(t=!1),t&&this._updateGuidePosition(e),this._dispatch("drag",this._pos),!this._uiDisabled&&t)e.dragBoxIcon=this._pos.dragBoxIcon,this._dragUI.renderDragBox(e,this._startingGrid)||this.cancelDrag()}},A.prototype._onDragEnd=function(e){if(this._dragging){if(this._dragging=!1,e&&P.preventDefault(e),P.removeParent(this._guideline),P.removeParent(this._dragBox),document.body.classList.remove("tr-dragging"),window.removeEventListener("mousemove",this._onMouseMove,!1),window.removeEventListener("touchmove",this._onMouseMove,!1),window.removeEventListener("mouseup",this._onDragEnd,!1),window.removeEventListener("touchend",this._onDragEnd,!1),window.removeEventListener("touchcancel",this._onDragEnd,!1),this._touchMode)for(var t=this._hosts.length;--t>=0;){var o=this._hosts[t];o.getVScrollbar().disableTouchInput(!1),o.getHScrollbar().disableTouchInput(!1)}var r=this._startingGrid||this._hosts[0],n=r.getElement();n.classList.remove("mouse-dragging"),n.classList.remove("row-dragging");var i=this._pos;if(!this._isDragCancelled()){if(i.srcGrid=r,i.dropTarget=e?e.target:null,!this._jetDnD&&this._dataTransfer&&B(this._pos)){var s=i.grid||r,a=i.rowIndex,l=r.getPlugin("RowSelectionPlugin"),d=l&&l.getSelectedRows();d&&d.length||(d=this._startingRid),this._moveRows(d,a,r,s,i)}var u=i.cellElement,g=0;if(e&&u){var p=u.getBoundingClientRect(),c=(e.clientX-p.left)/i.zoomFactor;g=Math.round(c/u.offsetWidth)}i.colIndex+=g,i.currentPosition=i,i.data=this._jetDragContent,i.dropTarget=e.target}this._dispatch("dragEnd",i||{}),this._clearCache(),this._jetDragContent=null}},A.prototype._moveRows=function(e,t,o,r,n){var i,s,a=null,l=o.getDataSource(),d=r.getDataSource();if("string"==typeof e){var u=l.getRowIndex(this._startingRid);u>=0&&(a=[u])}else Array.isArray(e)&&(a=e);if(!a)return 0;var g=a.length,p=new Array(g),c=[],h="",_=this.getGridApi();for(_&&!_.getRowType&&(_=null),i=0;i<g;++i){var f=a[i],m=_?_.getRowType(f):"CONTENT";p[i]=l.getRowId(f),c[i]=m,h?h!==m&&(h="MIXED"):h=m}h||(h="CONTENT");var v,y,w=_?_.getRowType(t):"",b=d.getRowId(t);if(this.hasListener("beforeDataMoved")&&(n.srcRowIndices=a,n.srcRowIds=p,n.srcRowTypes=c,n.consolidatedSrcRowType=h,n.destRowIndex=t,n.destRowId=b,n.destRowType=w,this._dispatch("beforeDataMoved",n),n.cancel))return 0;var C=o.getPlugin("RowSegmentingPlugin"),D=null;if(o===r){if("MIXED"===h)D=l.moveRow(p,b);else if("CONTENT"===h)"GROUP_HEADER"===w?(y=C.getSegmentChildIds(b))?D=l.moveRow(p,b):(C.addSegmentChildren(b,p),D=p):S(w)?D=l.moveRow(p,b):"GROUP_MEMBER"===w&&(v=C.getSegmentParentRowId(b),C.addSegmentChildren(v,p),l.moveRow(p,b),D=p);else if("CHAIN"===h||"GROUP_HEADER"===h)S(w)&&(D=l.moveRow(p,b));else if("GROUP_MEMBER"===h)if(1===g){var R=p[0];v=C.getSegmentParentRowId(R);var T=(y=C.getSegmentChildIds(v))?y.length:0;if(t===l.getRowIndex(v)+T+1)D=l.moveRow(p,b);else if("GROUP_MEMBER"===w){var x=C.getSegmentParentRowId(b);v===x||(C.removeSegmentChild(v,R),C.addSegmentChild(x,R)),D=l.moveRow(p,b)}else S(w)&&(C.removeSegmentChild(v,p[0]),D=l.moveRow(p[0],b))}else D=l.moveRow(p,b)}else{D=p,n.destGrid=r;var E=[];for(i=0;i<g;++i){var I=l.getRowData(rowId);I&&E.push(I)}if(s=E.length)if(l.removeRows(a),this._realTimeGrid)for(i=0;i<s;++i){E[i].ROW_DEF.registerToView(d,b)}else for(i=0;i<s;++i)d.insertRow(b,E[i])}var P=D?D.length:0;return P&&(n.originRowId=D[0],n.originRowIds=D,n.destinationRowId=b,this._dispatch("dataMoved",n)),P},A.prototype._isDragCancelled=function(){return!(!this._pos||!this._pos.cancel)},A.prototype._updateGuidePosition=function(e){var t=this._pos;if(!this._uiDisabled&&t&&!t.invalidTarget)if("not-allowed"!==t.dragBoxIcon&&"void"!==t.dragBoxIcon){if(B(t)){var o=this._guideline,r=t.section,n=r.getColumnHost();n!==o.parentNode&&(o.style.width=r.getWidth()+"px",n.appendChild(o));var i=t.cellElement,s=P.getRelativePosition(i,n),a=s.y,l=t.rowIndex,d=0;if(l&&(d=-1,e)){var u=r.getRowCount()-1;if(l>=u){var g=r.getRowHeight(u);(s=P.getRelativePosition(e,i)).y>=g/2|0&&(d=g-3,++t.rowIndex)}}o.style.top=a+d+"px"}}else P.removeParent(this._guideline)},A.prototype._shouldPreventDrop=function(e){var t=this.getGridApi();if(!t)return!1;if("CONSTITUENT"===this._startingRowType||"SUBGROUP_HEADER"===this._startingRowType)return!0;var o=this._pos.grid.getPlugin("RowSegmentingPlugin");if(!o)return!1;var r=o.getSegmentParentRowId(e),n=o.getSegmentParentRowId(this._startingRid);if("GROUP_MEMBER"===this._startingRowType){if("SUBGROUP_HEADER"===t.getRowType(n))return t.getRowType(r),!n||!r||r!==n}else if("CHAIN"===this._startingRowType){if(r)return!0}else if("GROUP_HEADER"===this._startingRowType&&r!==n)return!0;var i=t.getRowType(e);return"CONSTITUENT"===i||"SUBGROUP_HEADER"===i||"GROUP_MEMBER"===i&&"SUBGROUP_HEADER"===t.getRowType(r)},A.prototype._clearCache=function(){this._dragPulseId&&(clearInterval(this._dragPulseId),this._dragPulseId=0),this._pos=this._dragTarget=this._startingGrid=null,this._scrollingZone=!1},A.prototype._onDragPulse=function(){if(this._dragging){this._dispatch("dragInterval",this._pos);var e=this._pos.grid||this._startingGrid;if(e&&e.getVScrollbar().isActive()){var t=this._pos.y;if(null!=t)if(t>=this._topBound&&t<=this._btmBound)this._scrollingZone=!1;else{this._scrollingZone=!0;var o=this._scrollStep*(.8+Math.random())|0;t<this._topBound&&(o=-o),e.scrollDown(o)}}}},A.prototype.setJETDragContent=function(e){this._jetDragContent=e;var t=window.tr,o=t?t.grid:null,r=o?o.JetDragContent:null;if(e&&r){var n=new r(e),i=n.getRicsToDrop(),s=n.getFieldsToDrop();this._jetContentHasRic=!!(i&&i.length>0),this._jetContentHasField=!!(s&&s.length>0)}else this._jetContentHasRic=!1,this._jetContentHasField=!1},A.prototype._setEntryPoint=function(e){this._entryPoint=e,this.setDragContent(null)},A.prototype._onMouseOut=function(e){var t=(e=e||window.event).relatedTarget||e.toElement;t&&"HTML"!=t.nodeName||(this._timerId>=0&&(clearTimeout(this._timerId),this._timerId=-1),this._onDragStart(),this.stopDrag())},A.prototype._delayStart=function(e){this._startingGrid.unlisten("mousemove",this._delayStart),this._timerId<0&&(this._timerId=window.setTimeout(this._onDragStart,200)),this._jetDnD&&document.addEventListener("mouseout",this._onMouseOut,!1)},A.prototype._listenAbortActions=function(e){!1!==e?window.addEventListener("mouseup",this._clearCache,!1):window.removeEventListener("mouseup",this._clearCache,!1)},A.prototype._startDrag=function(e,t,o){if(!(this._dragging||this._hosts.length<=0||this._disabled)){var r;if(t)if("dragstart"===t.type){t.preventDefault&&P.preventDefault(t);var n=this.getRelativeGrid(t);n&&(r=n.getRelativePosition(this._dragTarget))}else r=this._hitTest(t);else{var i=this._dragTarget||this._hosts[0].getSection("content").getCell(0,0);r=this._hitTest(i)}B(r)&&(this._clearCache(),this._pos=r,this._startingGrid=r.grid,e?(this._startingGrid.listen("mousemove",this._delayStart),this._listenAbortActions()):this._onDragStart(t,o))}},A.prototype._onJETDragOver=function(e){if(e)if(this._dragging)this._onDrag(e.e);else{if(!e.dropData)return;this._setEntryPoint("JET"),this.setJETDragContent(e.dropData),this._startDrag(!1,e.e,!0)}},A.prototype._onJETDrop=function(e){this._dragging&&(this._jetDragContent||(this._jetDragContent=e),this._onDragEnd(e.mouse.srcEvent))};!function(e,t){if(e&&t&&t.prototype.getName){var o=t.prototype.getName().replace(/Plugin$/,"");if(o){var r=e.tr;r||(r=e.tr={});var n=r.grid;n||(n=r.grid={}),n[o+"Plugin"]=t,r[o+"Extension"]=t}}}(window,A)}]);