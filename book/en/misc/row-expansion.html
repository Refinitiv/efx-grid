<!doctype html>
<html pandora>

<head>
  <title>Row Expansion</title>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="x-pandora-base" content="../">
  <meta name="x-pandora-location" content="misc/row-expansion.html">
  <link rel="stylesheet" href="../../../resources/styles/book.css">
  <script defer src="../../../resources/scripts/book.js"></script>
  <script defer src="../search.index.js"></script>
  <link rel="icon" href="../resources/images/icon.png">
</head>

<body>
  <pandora-book>
    <div class="header" no-print>
      <div class="book-icon" style="background-image:url(&quot;../resources/images/icon.png&quot;)"></div>
      <h1><a href="../index.html">Grid Usage Guide</a></h1>
      <div class="search">
        <input type="search" placeholder="Type to search...">
      </div>
    </div>
    <div class="content">
      <div class="sidebar" no-print>
        <pandora-nav id="838a1dd9-210e-436b-911d-8ec365968e93">
          <ul>
            <li parent id="cid-0" collapsible collapsed>
              <div collapser>Getting Started</div>
              <ul>
                <li><a href="../index.html">Installation</a></li>
                <li><a href="../overview.html">Overview</a></li>
              </ul>
            </li>
            <li parent id="cid-1" collapsible collapsed>
              <div collapser>General Concept</div>
              <ul>
                <li><a href="../general_concept/basic.html">Basic Grid Creation</a></li>
                <li><a href="../general_concept/initializing-data.html">Initializing Data</a></li>
                <li><a href="../general_concept/accessing-data.html">Accessing Data</a></li>
                <li><a href="../general_concept/event-listeners.html">Event Listeners</a></li>
                <li><a href="../general_concept/typescript.html">Adding TypeScript</a></li>
                <li><a href="../general_concept/disposing-grid.html">Disposing Grid</a></li>
              </ul>
            </li>
            <li parent id="cid-2" collapsible collapsed>
              <div collapser>Showcases</div>
              <ul>
                <li><a href="../showcases/comprehensive.html">Comprehensive</a></li>
              </ul>
            </li>
            <li parent id="cid-5" collapsible collapsed>
              <div collapser>APIs</div>
              <ul>
                <li><a href="../apis/README.html">Overview</a></li>
                <li parent id="cid-3" collapsible collapsed>
                  <div collapser>Core</div>
                  <ul>
                    <li><a href="../apis/core/Cell.html">Cell</a></li>
                    <li><a href="../apis/core/CellSpans.html">CellSpans</a></li>
                    <li><a href="../apis/core/ColumnStats.html">ColumnStats</a></li>
                    <li><a href="../apis/core/DataCache.html">DataCache</a></li>
                    <li><a href="../apis/core/DataTable.html">DataTable</a></li>
                    <li><a href="../apis/core/DataView.html">DataView</a></li>
                    <li><a href="../apis/core/DragAndDropTitlePlugin.html">DragAndDropTitlePlugin</a></li>
                    <li><a href="../apis/core/ElementWrapper.html">ElementWrapper</a></li>
                    <li><a href="../apis/core/EventDispatcher.html">EventDispatcher</a></li>
                    <li><a href="../apis/core/Grid.html">Grid</a></li>
                    <li><a href="../apis/core/HScrollbar.html">HScrollbar</a></li>
                    <li><a href="../apis/core/ILayoutGrid.html">ILayoutGrid</a></li>
                    <li><a href="../apis/core/LayoutGrid.html">LayoutGrid</a></li>
                    <li><a href="../apis/core/Scrollbar.html">Scrollbar</a></li>
                    <li><a href="../apis/core/SectionSettings.html">SectionSettings</a></li>
                    <li><a href="../apis/core/Segment.html">Segment</a></li>
                    <li><a href="../apis/core/SegmentCollection.html">SegmentCollection</a></li>
                    <li><a href="../apis/core/SortableTitlePlugin.html">SortableTitlePlugin</a></li>
                    <li><a href="../apis/core/VScrollbar.html">VScrollbar</a></li>
                  </ul>
                </li>
                <li parent id="cid-4" collapsible collapsed>
                  <div collapser>Real-time Grid (EFX Grid)</div>
                  <ul>
                    <li><a href="../apis/rt_grid/ColumnDefinition.html">ColumnDefinition</a></li>
                    <li><a href="../apis/rt_grid/Grid.html">Grid</a></li>
                    <li><a href="../apis/rt_grid/RowDefinition.html">RowDefinition</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li parent id="cid-6" collapsible collapsed>
              <div collapser>Extensions</div>
              <ul>
                <li><a href="../extensions/README.html">Overview</a></li>
                <li><a href="../extensions/tr-grid-auto-tooltip.html">Auto Tooltip</a></li>
                <li><a href="../extensions/tr-grid-cell-selection.html">Cell Selection</a></li>
                <li><a href="../extensions/tr-grid-checkbox.html">Checkbox Column</a></li>
                <li><a href="../extensions/tr-grid-column-fitter.html">Column Fitter</a></li>
                <li><a href="../extensions/tr-grid-column-formatting.html">Column Formatting</a></li>
                <li><a href="../extensions/tr-grid-column-grouping.html">Column Grouping</a></li>
                <li><a href="../extensions/tr-grid-column-resizing.html">Column Resizing</a></li>
                <li><a href="../extensions/tr-grid-column-selection.html">Column Selection</a></li>
                <li><a href="../extensions/tr-grid-column-stack.html">Column Stack</a></li>
                <li><a href="../extensions/tr-grid-conditional-coloring.html">Conditional Coloring</a></li>
                <li><a href="../extensions/tr-grid-content-wrap.html">Content Wrap</a></li>
                <li><a href="../extensions/tr-grid-contextmenu.html">Context Menu</a></li>
                <li><a href="../extensions/tr-grid-filter-input.html">Filter Input</a></li>
                <li><a href="../extensions/tr-grid-heat-map.html">Heat Map</a></li>
                <li><a href="../extensions/tr-grid-in-cell-editing.html">In-Cell Editing</a></li>
                <li><a href="../extensions/tr-grid-pagination.html">Pagination</a></li>
                <li><a href="../extensions/tr-grid-percent-bar.html">Percent Bar</a></li>
                <li><a href="../extensions/tr-grid-range-bar.html">Range Bar</a></li>
                <li><a href="../extensions/tr-grid-row-dragging.html">Row Dragging</a></li>
                <li><a href="../extensions/tr-grid-row-filtering.html">Row Filtering</a></li>
                <li><a href="../extensions/tr-grid-row-grouping.html">Row Grouping</a></li>
                <li><a href="../extensions/row-segmenting.html">Row Segmenting</a></li>
                <li><a href="../extensions/tr-grid-row-selection.html">Row Selection</a></li>
                <li><a href="../extensions/tr-grid-rowcoloring.html">Row Coloring</a></li>
                <li><a href="../extensions/statistics-row.html">Statistics Row</a></li>
                <li><a href="../extensions/tr-grid-textformatting.html">Text Formatting</a></li>
                <li><a href="../extensions/tr-grid-titlewrap.html">Title Wrap</a></li>
                <li><a href="../extensions/zoom.html">Zoom</a></li>
              </ul>
            </li>
            <li parent id="cid-8" collapsible collapsed>
              <div collapser>Content Rendering</div>
              <ul>
                <li><a href="../rendering/column-formatter.html">Default Rendering</a></li>
                <li><a href="../rendering/custom-formatter.html">Custom Rendering</a></li>
                <li><a href="../rendering/change-formatter.html">Changing Formatter at Runtime</a></li>
                <li><a href="../rendering/formatter-event-handling.html">Event Handling in Formatter</a></li>
                <li parent id="cid-7" collapsible collapsed><a href="../rendering/predefined-formatter.html">Predefined Formatter</a>
                  <ul>
                    <li><a href="../rendering/predefined_formatters/simple-image-formatter.html">SimpleImageFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-input-formatter.html">SimpleInputFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-link-formatter.html">SimpleLinkFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-ticker-formatter.html">SimpleTickerFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-toggle-formatter.html">SimpleToggleFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/percent-bar-formatter.html">PercentBarFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/text-formatter.html">TextFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-button-formatter.html">EFButtonFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-checkbox-formatter.html">EFCheckboxFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-combo-box-formatter.html">EFComboBoxFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-datetime-picker-formatter.html">EFDateTimePickerFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-icon-formatter.html">EFIconFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-number-field-formatter.html">EFNumberFieldFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-radio-button-formatter.html">EFRadioButtonFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-select-formatter.html">EFSelectFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-text-field-formatter.html">EFTextFieldFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-toggle-formatter.html">EFToggleFormatter</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li parent id="cid-9" collapsible collapsed>
              <div collapser>Data</div>
              <ul>
                <li><a href="../data/columns-and-data.html">Resetting/Clearing Data</a></li>
                <li><a href="../data/create.html">Creating Data</a></li>
                <li><a href="../data/read.html">Reading Data</a></li>
                <li><a href="../data/update.html">Updating Data</a></li>
                <li><a href="../data/delete.html">Deleting Data</a></li>
                <li><a href="../data/data-conversion.html">Data Conversion</a></li>
              </ul>
            </li>
            <li parent id="cid-10" collapsible collapsed>
              <div collapser>Columns</div>
              <ul>
                <li><a href="../columns/column-resetting.html">Column Resetting</a></li>
                <li><a href="../columns/column-formatter.html">Column Formatter</a></li>
                <li><a href="../columns/column-alignment.html">Column Alignment</a></li>
                <li><a href="../columns/dynamic-add-insert-column.html">Column Add/insert</a></li>
                <li><a href="../columns/dynamic-remove-column.html">Column Hide/remove</a></li>
                <li><a href="../columns/column-width.html">Column Width</a></li>
                <li><a href="../columns/column-reordering.html">Column Reordering</a></li>
                <li><a href="../columns/column-moving.html">Column Moving</a></li>
                <li><a href="../columns/column-freezing.html">Column Freezing</a></li>
                <li><a href="../columns/column-pinning.html">Column Pinning</a></li>
                <li><a href="../columns/column-styling.html">Column Styling</a></li>
                <li><a href="../columns/custom-title-formatter.html">Column Custom Title</a></li>
                <li><a href="../columns/column-grouping.html">Column Grouping</a></li>
              </ul>
            </li>
            <li parent id="cid-11" collapsible collapsed>
              <div collapser>Rows</div>
              <ul>
                <li><a href="../rows/row-highlight-selection.html">Row Highlighting / Selection</a></li>
                <li><a href="../rows/row-height.html">Row Height</a></li>
                <li><a href="../rows/row-show-hide.html">Row Showing / Hiding</a></li>
                <li><a href="../rows/row-reordering.html">Row Reordering</a></li>
                <li><a href="../rows/add-header-footer.html">Adding Header &amp; Footer Sections</a></li>
                <li><a href="../rows/row-grouping.html">Row Grouping</a></li>
              </ul>
            </li>
            <li parent id="cid-12" collapsible collapsed>
              <div collapser>Scrollbars</div>
              <ul>
                <li><a href="../scrollbars/vertical-scrollbar.html">Vertical Scrollbar</a></li>
                <li><a href="../scrollbars/horizontal-scrollbar.html">Horizontal Scrollbar</a></li>
                <li><a href="../scrollbars/scroll-speed.html">Scroll Speed</a></li>
                <li><a href="../scrollbars/non-overlap-scrollbars.html">Non-Overlap Scrollbars</a></li>
                <li><a href="../scrollbars/scrollbar-visibility.html">Scrollbar Visibility</a></li>
                <li><a href="../scrollbars/left-side-column-pinning.html">Left Side Column Pinning/Freezing</a></li>
                <li><a href="../scrollbars/right-side-column-pinning.html">Right Side Column Pinning/Freezing</a></li>
              </ul>
            </li>
            <li parent id="cid-13" collapsible collapsed>
              <div collapser>Sorting</div>
              <ul>
                <li><a href="../sorting/sorting.html">Basic Sorting</a></li>
                <li><a href="../sorting/default-sorting.html">Default Sort</a></li>
                <li><a href="../sorting/server-side-sorting.html">Server Side Sorting</a></li>
                <li><a href="../sorting/custom-sort-logic.html">Custom Sort Logic</a></li>
                <li><a href="../sorting/multi-column-sorting.html">Multi-Column/3-States Sorting</a></li>
                <li><a href="../sorting/sorting-get-reset.html">Get Sort States / Reset All Sorting</a></li>
              </ul>
            </li>
            <li parent id="cid-14" collapsible collapsed>
              <div collapser>Filtering</div>
              <ul>
                <li><a href="../filtering/filtering-programmatically.html">Filtering Programmatically</a></li>
                <li><a href="../filtering/filtering-auto-filter-row.html">Filter UI</a></li>
                <li><a href="../filtering/custom-filter.html">Custom Filter UI</a></li>
                <li><a href="../filtering/filtering-get-reset.html">Get Filter States / Reset All</a></li>
              </ul>
            </li>
            <li parent id="cid-15" collapsible collapsed>
              <div collapser>Editing</div>
              <ul>
                <li><a href="../editing/in-cell-editor.html">In-Cell Editing</a></li>
                <li><a href="../editing/custom-editor.html">Custom Editor</a></li>
              </ul>
            </li>
            <li parent id="cid-16" collapsible collapsed>
              <div collapser>Widgets</div>
              <ul>
                <li><a href="../widgets/column-format-dialog.html">Column Format Dialog</a></li>
                <li><a href="../widgets/column-selection-dialog.html">Column Selection Dialog</a></li>
                <li><a href="../widgets/filter-dialog.html">Filter Dialog</a></li>
              </ul>
            </li>
            <li parent id="cid-17" collapsible collapsed>
              <div collapser>Miscellaneous</div>
              <ul>
                <li><a href="../misc/core-apis.html">Using Core APIs</a></li>
                <li><a href="../misc/pagination.html">Pagination</a></li>
                <li><a href="../misc/loading-mask.html">Loading Mask</a></li>
                <li><a href="../misc/fifty-thosand-rows.html">50,000 Rows Handling</a></li>
                <li><a href="../misc/row-span.html">Row Span</a></li>
                <li selected><a href="../misc/row-expansion.html">Row Expansion</a></li>
                <li><a href="../misc/text-selection.html">Text Selection</a></li>
              </ul>
            </li>
            <li parent id="cid-18" collapsible collapsed>
              <div collapser>Migrating to EFX Grid</div>
              <ul>
                <li><a href="../migrating/from-emerald-grid.html">Emerald Grid</a></li>
              </ul>
            </li>
            <li><a href="../license.html">License</a></li>
          </ul>
        </pandora-nav>
      </div>
      <div class="main">
        <div class="reader">
          <pandora-page>
            <h1 id="general-concepts-and-row-expansion-apis">General Concepts and Row Expansion APIs</h1>
            <p>Row expansion is an extra row that is extended directly from a normal row. It&apos;s a great place to show extra information which cannot normally be shown on a single row. </p>
            <p>It looks just like a normal row but, unlike a normal row, it has no data from the main data table associated with it. This means that the states or data of the row expansion have to come from the expanded row. Grid will not perform sorting or filtering on the row expansion, as it has no data. </p>
            <p>In effect, row expansion is completely different from row grouping, where rows are grouped based on their data. Row expansion is tightly connected to the expanded row and cannot be separated. When the expanded row is moved, the row expansion is also moved. So, be aware that operations like sorting, filtering, or pagination can still have an impact on how row expansion is displayed.</p>
            <p>To add a row expansion, call <code>addRowExpansion(rowId)</code> or <code>toggleRowExpansion(rowId)</code> from Grid&apos;s data view. <code>rowId</code> is the row ID of the row to be expanded. </p>
            <p>To remove all row expansions at once, use <code>removeAllRowExpansions()</code>. </p>
            <p>To get existing rows with an expansion, use <code>getRowsWithExpansion()</code>.</p>
            <p>To render content on the row expansion, define <code>renderer</code> property of <code>rowExpansion</code> on the grid configuration object, like so:</p>
            <pre><code><span class="hljs-keyword">var</span> configObj = {
    <span class="hljs-comment">//...</span>
    <span class="hljs-attr">rowExpansionBinding</span>: <span class="hljs-function"><span class="hljs-keyword">function</span> (<span class="hljs-params">e</span>) </span>{
        <span class="hljs-keyword">var</span> rowIndex = e[<span class="hljs-string">&quot;rowIndex&quot;</span>];
        <span class="hljs-keyword">var</span> section = e[<span class="hljs-string">&quot;section&quot;</span>];

        <span class="hljs-keyword">if</span>(e.rowExpansion) {
            <span class="hljs-comment">// render</span>
            <span class="hljs-keyword">var</span> rowData = e.originalRowData;
            <span class="hljs-keyword">var</span> cell = section.stretchCell(<span class="hljs-number">0</span>, rowIndex);
            <span class="hljs-keyword">var</span> str = <span class="hljs-string">&quot;expanded from row \&quot;&quot;</span> + rowData[<span class="hljs-string">&quot;col1&quot;</span>] + <span class="hljs-string">&quot;, &quot;</span> + rowData[<span class="hljs-string">&quot;col2&quot;</span>] + <span class="hljs-string">&quot;, &quot;</span> + rowData[<span class="hljs-string">&quot;col3&quot;</span>] + <span class="hljs-string">&quot;\&quot;&quot;</span>;
            cell.setContent(str);
            cell.setStyle(<span class="hljs-string">&quot;background-color&quot;</span>, <span class="hljs-string">&quot;lightblue&quot;</span>);
        } <span class="hljs-keyword">else</span> {
            <span class="hljs-comment">//dispose</span>
            <span class="hljs-keyword">var</span> cell = section.stretchCell(<span class="hljs-number">0</span>, rowIndex, <span class="hljs-literal">false</span>);
            cell.setStyle(<span class="hljs-string">&quot;background-color&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
        }
    },
    <span class="hljs-comment">//...</span>
};</code></pre>
            <blockquote>
              <p>Note: the same cell element is used for both normal row and row expansion due to the virtualization technique. Any custom style has to be removed using the <code>dispose</code> part.</p>
            </blockquote>
            <p>The example below shows how to create row expansion when clicking on a normal row. It also shows how to save and load row expansion states.</p>

            <div class="pandora-code-viewer" id="pid-155">
              <div class="pandora-viewer">
                <button>&lt;/&gt;</button>
              </div>
              <div class="pandora-code-view">
                <div class="pandora-toolbar">
                  <ul>
                    <li class="pandora-tab-selected" data-toggle="tab-html">HTML</li>
                    <li data-toggle="tab-js">JS</li>
                    <li data-toggle="tab-css">CSS</li>
                  </ul>
                </div>
                <div class="pandora-tab-container">
                  <pre class="pandora-tab-view tab-html">&lt;button id=&quot;save_states&quot;&gt;Save&lt;/button&gt;

&lt;button id=&quot;load_states&quot;&gt;Load&lt;/button&gt;
&lt;button id=&quot;clear_row_expan&quot;&gt;Clear all row expansions&lt;/button&gt;
&lt;hr&gt;
&lt;efx-grid id=&quot;grid&quot;&gt;&lt;/efx-grid&gt;
&lt;hr&gt;
&lt;pre id=&quot;msg&quot;&gt;&lt;/pre&gt;</pre>
                  <pre class="pandora-tab-view tab-js">var fields = [&quot;companyName&quot;, &quot;market&quot;, &quot;CF_LAST&quot;, &quot;CF_NETCHNG&quot;, &quot;industry&quot;];
var records = DataGenerator.generateRecords(fields, { seed: 1, numRows: 10 });

function onCellCliked(e) {
  var pos = grid.api.getRelativePosition(e);
  if (pos.sectionType === &quot;content&quot;) { // Prevent clicking on header section
    var dv = grid.api.getDataView();
    dv.toggleRowExpansion(pos.rowIndex);
  }
}

document.getElementById(&quot;save_states&quot;).addEventListener(&quot;click&quot;, function() {
  var dv = grid.api.getDataView();
  var rowWithExpansions = dv.getRowsWithExpansion();
  var rowIds = rowWithExpansions.filter(function(id) {
    return id;
  });

  msg.textContent = &quot;Row Ids saved:\n&quot; + JSON.stringify(rowIds, null, 4);
  sessionStorage.setItem(&quot;row_expansion_data&quot;, JSON.stringify(rowIds));
});

document.getElementById(&quot;load_states&quot;).addEventListener(&quot;click&quot;, function() {
  // Initial row expansion from rowId
  var dv = grid.api.getDataView();
  var data = sessionStorage.getItem(&quot;row_expansion_data&quot;);
  msg.textContent = &quot;Data loaded: &quot; + data;
  const rowIds = JSON.parse(data);
  dv.removeAllRowExpansions();
  for (var rowId of rowIds) {
    dv.addRowExpansion(rowId);
  }
});

document.getElementById(&quot;clear_row_expan&quot;).addEventListener(&quot;click&quot;, function() {
  var dv = grid.api.getDataView();
  dv.removeAllRowExpansions();
  msg.textContent = &quot;Row expansions are cleared&quot;;
});

var configObj = {
  rowHighlight: false,
  sorting: {
    sortableColumns: true
  },
  columns: [
    { name: &quot;Company&quot;, field: fields[0] },
    { name: &quot;Market&quot;, field: fields[1], width: 120 },
    { name: &quot;Last&quot;, field: fields[2], width: 100 },
    { name: &quot;Net. Chng&quot;, field: fields[3], width: 100 },
    { name: &quot;Industry&quot;, field: fields[4] }
  ],
  rowExpansionBinding: function(e) {
    var rowIndex = e[&quot;rowIndex&quot;];
    var section = e[&quot;section&quot;];
    var colCount = section.getColumnCount();
    if (e.rowExpansion) {
      for (var c = 0; c &lt; colCount; ++c) {
        var cell = section.getCell(c, rowIndex);
        cell.setContent(&quot;Row Expansion_&quot; + c);
        cell.setStyle(&quot;backgroundColor&quot;, &quot;mistyrose&quot;);
      }
    } else {
      for (var c = 0; c &lt; colCount; ++c) {
        var cell = section.getCell(c, rowIndex);
        cell.setStyle(&quot;backgroundColor&quot;, &quot;&quot;);
      }
    }
  },
  staticDataRows: records
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;

grid.addEventListener(&quot;click&quot;, onCellCliked);</pre>
                  <pre class="pandora-tab-view tab-css">efx-grid {
  height: 200px;
}

html hr {
  margin: 5px;
}</pre>
                  <div class="pandora-console"></div>
                </div>
              </div>
              <link rel="prefetch" href="../node_modules/tr-grid-test-resource-v6/dist/elf-halo-light.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-auto-tooltip/dist/tr-grid-auto-tooltip.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-cell-selection/dist/tr-grid-cell-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-checkbox/dist/tr-grid-checkbox.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-fitter/dist/tr-grid-column-fitter.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-formatting/dist/tr-grid-column-formatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-grouping/dist/tr-grid-column-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-resizing/dist/tr-grid-column-resizing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-selection/dist/tr-grid-column-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-stack/dist/tr-grid-column-stack.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-conditional-coloring/dist/tr-grid-conditional-coloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-content-wrap/dist/tr-grid-content-wrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-contextmenu/dist/tr-grid-contextmenu.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-filter-input/dist/tr-grid-filter-input.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-heat-map/dist/tr-grid-heat-map.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-in-cell-editing/dist/tr-grid-in-cell-editing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-pagination/dist/tr-grid-pagination.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-percent-bar/dist/tr-grid-percent-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-range-bar/dist/tr-grid-range-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-dragging/dist/tr-grid-row-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-filtering/dist/tr-grid-row-filtering.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-grouping/dist/tr-grid-row-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/row-segmenting/dist/row-segmenting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-selection/dist/tr-grid-row-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-rowcoloring/dist/tr-grid-rowcoloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/statistics-row/dist/statistics-row.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-textformatting/dist/tr-grid-textformatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-titlewrap/dist/tr-grid-titlewrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/zoom/dist/zoom.min.js" type="script">
            </div>
            <h2 id="managing-states-for-row-expansion">Managing states for row expansion</h2>
            <p>Since row expansion has no row data to hold its state, the data has to be stored on the expanded row. The example below shows how you can have two different types of content based on the button being clicked.</p>

            <div class="pandora-code-viewer" id="pid-156">
              <div class="pandora-viewer">
                <button>&lt;/&gt;</button>
              </div>
              <div class="pandora-code-view">
                <div class="pandora-toolbar">
                  <ul>
                    <li class="pandora-tab-selected" data-toggle="tab-html">HTML</li>
                    <li data-toggle="tab-js">JS</li>
                    <li data-toggle="tab-css">CSS</li>
                  </ul>
                </div>
                <div class="pandora-tab-container">
                  <pre class="pandora-tab-view tab-html">&lt;efx-grid id=&quot;grid&quot;&gt;

&lt;/efx-grid&gt;</pre>
                  <pre class="pandora-tab-view tab-js">var fields = [&quot;companyName&quot;, &quot;market&quot;, &quot;CF_LAST&quot;, &quot;CF_NETCHNG&quot;, &quot;industry&quot;];
var records = DataGenerator.generateRecords(fields, { numRows: 10 });

var buttonFormatter = function(e) {
  var cell = e[&quot;cell&quot;];
  var content = cell.getContent();
  if (!content || !cell._buttons) {
    var buttonsContainer = (cell._buttons = document.createElement(&quot;div&quot;));
    var firstButton = document.createElement(&quot;ef-button&quot;);
    firstButton.icon = &quot;edit&quot;;
    firstButton.addEventListener(&quot;click&quot;, onFirstClickButton);

    var secondButton = document.createElement(&quot;ef-button&quot;);
    secondButton.icon = &quot;filter&quot;;
    secondButton.addEventListener(&quot;click&quot;, onSecondClickButton);
    buttonsContainer.appendChild(firstButton);
    buttonsContainer.appendChild(secondButton);
  }
  cell.setContent(cell._buttons);
};

var onFirstClickButton = function(e) {
  var pos = grid.api.getRelativePosition(e);
  var dv = grid.api.getDataView();

  // Save the state to the expanded row
  dv.setDataAt(pos.rowIndex, &quot;My_Clicked_Button&quot;, 1);

  dv.toggleRowExpansion(pos.rowIndex);
};

var onSecondClickButton = function(e) {
  var pos = grid.api.getRelativePosition(e);
  var dv = grid.api.getDataView();

  // Save the state to the expanded row
  dv.setDataAt(pos.rowIndex, &quot;My_Clicked_Button&quot;, 2);

  dv.toggleRowExpansion(pos.rowIndex);
};

var configObj = {
  rowHighlight: false,
  columns: [{
      name: &quot;Buttons&quot;,
      field: &quot;btnClicked&quot;,
      binding: buttonFormatter,
      width: 80,
      alignment: &quot;center&quot;
    },
    { name: &quot;Company&quot;, field: fields[0] },
    { name: &quot;Market&quot;, field: fields[1], width: 120 },
    { name: &quot;Last&quot;, field: fields[2], width: 100 },
    { name: &quot;Net. Chng&quot;, field: fields[3], width: 100 },
    { name: &quot;Industry&quot;, field: fields[4] }
  ],
  rowExpansionBinding: function(e) {
    var rowIndex = e[&quot;rowIndex&quot;];
    var section = e[&quot;section&quot;];
    if (e.rowExpansion) {
      // render
      var cell = section.stretchCell(0, rowIndex, true);
      var rowData = e.originalRowData;
      if (rowData[&quot;My_Clicked_Button&quot;] === 1) {
        cell.setContent(&quot;First button was clicked&quot;);
      } else {
        cell.setContent(&quot;Second button was clicked&quot;);
      }
      cell.setStyle(&quot;backgroundColor&quot;, &quot;mistyrose&quot;);
      cell.setStyle(&quot;textAlign&quot;, &quot;left&quot;);
    } else {
      // dispose
      var cell = section.stretchCell(0, rowIndex, false);
      cell.setStyle(&quot;backgroundColor&quot;, &quot;&quot;);
      cell.setStyle(&quot;textAlign&quot;, &quot;&quot;);
    }
  },
  staticDataRows: records
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;</pre>
                  <pre class="pandora-tab-view tab-css">efx-grid {
  height: 200px;
}

html hr {
  margin: 5px;
}</pre>
                  <div class="pandora-console"></div>
                </div>
              </div>
              <link rel="prefetch" href="../node_modules/tr-grid-test-resource-v6/dist/elf-halo-light.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-auto-tooltip/dist/tr-grid-auto-tooltip.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-cell-selection/dist/tr-grid-cell-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-checkbox/dist/tr-grid-checkbox.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-fitter/dist/tr-grid-column-fitter.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-formatting/dist/tr-grid-column-formatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-grouping/dist/tr-grid-column-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-resizing/dist/tr-grid-column-resizing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-selection/dist/tr-grid-column-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-stack/dist/tr-grid-column-stack.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-conditional-coloring/dist/tr-grid-conditional-coloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-content-wrap/dist/tr-grid-content-wrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-contextmenu/dist/tr-grid-contextmenu.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-filter-input/dist/tr-grid-filter-input.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-heat-map/dist/tr-grid-heat-map.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-in-cell-editing/dist/tr-grid-in-cell-editing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-pagination/dist/tr-grid-pagination.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-percent-bar/dist/tr-grid-percent-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-range-bar/dist/tr-grid-range-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-dragging/dist/tr-grid-row-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-filtering/dist/tr-grid-row-filtering.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-grouping/dist/tr-grid-row-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/row-segmenting/dist/row-segmenting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-selection/dist/tr-grid-row-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-rowcoloring/dist/tr-grid-rowcoloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/statistics-row/dist/statistics-row.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-textformatting/dist/tr-grid-textformatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-titlewrap/dist/tr-grid-titlewrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/zoom/dist/zoom.min.js" type="script">
            </div>
            <h2 id="multiple-row-expansions-from-a-single-row">Multiple row expansions from a single row</h2>
            <p>You can specify the number of row expansions to be added on a single row by passing the number as the third parameter for <code>toggleRowExpansion(rowId, null, numRows)</code>. </p>
            <blockquote>
              <p>Note that row expansion has no row data. So the entire data set for multiple row expansions have to be stored on the expanded row. Luckily, any data structure can be stored on the row data. For instance, you can have an array of objects representing states of row expansions, like so:</p>
            </blockquote>
            <pre><code>dv.setData(rowId, <span class="hljs-string">&quot;My_Row_Expansion_States&quot;</span>, [ 
    {<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Row 1&quot;</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">1</span>},
    {<span class="hljs-attr">name</span>: <span class="hljs-string">&quot;Row 2&quot;</span>, <span class="hljs-attr">value</span>: <span class="hljs-number">2</span>},
    <span class="hljs-comment">// ...</span>
]);</code></pre>
            <h2 id="handling-asynchronous-content">Handling asynchronous content</h2>
            <p>Rows can be shifted and data can be updated during the asynchronous process, such as waiting for a response from a server. It is a good idea to always use the row ID for referencing a row and <strong>not</strong> assume that rows or elements stay in the same place. </p>
            <p>The example below shows how to render custom content with asynchronous data. The row ID is retrieved and used for referencing after the server response.</p>

            <div class="pandora-code-viewer" id="pid-157">
              <div class="pandora-viewer">
                <button>&lt;/&gt;</button>
              </div>
              <div class="pandora-code-view">
                <div class="pandora-toolbar">
                  <ul>
                    <li class="pandora-tab-selected" data-toggle="tab-html">HTML</li>
                    <li data-toggle="tab-js">JS</li>
                    <li data-toggle="tab-css">CSS</li>
                  </ul>
                </div>
                <div class="pandora-tab-container">
                  <pre class="pandora-tab-view tab-html">&lt;efx-grid id=&quot;grid&quot;&gt;

&lt;/efx-grid&gt;
&lt;hr&gt;</pre>
                  <pre class="pandora-tab-view tab-js">var fields = [&quot;companyName&quot;, &quot;market&quot;, &quot;CF_LAST&quot;, &quot;CF_NETCHNG&quot;, &quot;industry&quot;];
var records = DataGenerator.generateRecords(fields, { numRows: 10 });

var onRowExpansionBinding = function(e) {
  var rowData = e.originalRowData;
  var rowIndex = e[&quot;rowIndex&quot;];
  var section = e[&quot;section&quot;];
  if (e.rowExpansion &amp;&amp; rowData) {
    // render
    var cell = section.stretchCell(0, rowIndex, true);
    cell.setStyle(&quot;backgroundColor&quot;, &quot;mistyrose&quot;);
    section.setRowHeight(rowIndex, 72); // Customized height

    var expContent = cell.getContent();
    if (!expContent || !expContent._myExpansion) {
      expContent = document.createElement(&quot;div&quot;);
      expContent._myExpansion = true;

      var firstLine = expContent._firstLine = document.createElement(&quot;div&quot;);
      var secondLine = expContent._secondLine = document.createElement(&quot;div&quot;);
      var loader = expContent._loader = document.createElement(&quot;ef-loader&quot;);
      var button = document.createElement(&quot;button&quot;);
      button.textContent = &quot;Column &amp; Row Index&quot;;
      button.addEventListener(&quot;click&quot;, function(e) {
        var pos = grid.api.getRelativePosition(e);
        alert(pos.colIndex + &quot;, &quot; + pos.rowIndex);
      });

      secondLine.appendChild(button);

      expContent.appendChild(firstLine);
      expContent.appendChild(secondLine);
      expContent.appendChild(loader);
    }

    var rowData = e.originalRowData;
    if (rowData[&quot;My_Expansion_Status&quot;] === &quot;loading&quot;) {
      expContent._firstLine.style.display = &quot;none&quot;;
      expContent._secondLine.style.display = &quot;none&quot;;
      expContent._loader.style.display = &quot;&quot;;
    } else {
      expContent._firstLine.style.display = &quot;&quot;;
      expContent._secondLine.style.display = &quot;&quot;;
      expContent._loader.style.display = &quot;none&quot;;
    }
    cell.setContent(expContent);
  } else {
    // dispose
    var cell = section.stretchCell(0, rowIndex, false);
    cell.setStyle(&quot;backgroundColor&quot;, &quot;&quot;);
    section.setRowHeight(rowIndex, section.getDefaultRowHeight()); // Default height
  }
}

var onCellCliked = function(e) {
  var pos = grid.api.getRelativePosition(e);
  if (pos.sectionType === &quot;content&quot;) { // Prevent clicking on header section
    var rowIndex = pos.rowIndex;
    var rowDef = grid.api.getRowDefinition(rowIndex);
    if (rowDef) { // Prevent clicking on expanded row
      var rowId = rowDef.getRowId();
      var dv = grid.api.getDataView();
      if (!dv.isRowExpansion(rowId)) {
        if (rowDef.getData(&quot;My_Expansion_Status&quot;) == null) {
          rowDef.setData(&quot;My_Expansion_Status&quot;, &quot;loading&quot;);
          // Simulate delay from data request
          setTimeout(onServerResponse.bind(null, dv, rowDef), 3000); // Asynchronous
        }
        dv.toggleRowExpansion(pos.rowIndex);
      }
    }
  }
};
var onServerResponse = function(dv, rowDef) {
  if (!dv.isRowExpansion(rowDef.getRowId())) {
    rowDef.setData(&quot;My_Expansion_Status&quot;, &quot;data received&quot;);
  }
  grid.api.getCoreGrid().requestRowRefresh(); // WORKAROUND: Force re-rendering
};

var configObj = {
  columnReorder: true,
  rowHighlight: false,
  sorting: {
    sortableColumns: true
  },
  columns: [
    { name: &quot;Company&quot;, field: fields[0] },
    { name: &quot;Market&quot;, field: fields[1], width: 120 },
    { name: &quot;Last&quot;, field: fields[2], width: 100 },
    { name: &quot;Net. Chng&quot;, field: fields[3], width: 100 },
    { name: &quot;Industry&quot;, field: fields[4] }
  ],
  rowExpansionBinding: onRowExpansionBinding,
  staticDataRows: records
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;

grid.addEventListener(&quot;click&quot;, onCellCliked);</pre>
                  <pre class="pandora-tab-view tab-css">efx-grid {
  height: 200px;
}

html hr {
  margin: 5px;
}</pre>
                  <div class="pandora-console"></div>
                </div>
              </div>
              <link rel="prefetch" href="../node_modules/tr-grid-test-resource-v6/dist/elf-halo-light.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-auto-tooltip/dist/tr-grid-auto-tooltip.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-cell-selection/dist/tr-grid-cell-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-checkbox/dist/tr-grid-checkbox.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-fitter/dist/tr-grid-column-fitter.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-formatting/dist/tr-grid-column-formatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-grouping/dist/tr-grid-column-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-resizing/dist/tr-grid-column-resizing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-selection/dist/tr-grid-column-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-stack/dist/tr-grid-column-stack.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-conditional-coloring/dist/tr-grid-conditional-coloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-content-wrap/dist/tr-grid-content-wrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-contextmenu/dist/tr-grid-contextmenu.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-filter-input/dist/tr-grid-filter-input.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-heat-map/dist/tr-grid-heat-map.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-in-cell-editing/dist/tr-grid-in-cell-editing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-pagination/dist/tr-grid-pagination.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-percent-bar/dist/tr-grid-percent-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-range-bar/dist/tr-grid-range-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-dragging/dist/tr-grid-row-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-filtering/dist/tr-grid-row-filtering.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-grouping/dist/tr-grid-row-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/row-segmenting/dist/row-segmenting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-selection/dist/tr-grid-row-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-rowcoloring/dist/tr-grid-rowcoloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/statistics-row/dist/statistics-row.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-textformatting/dist/tr-grid-textformatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-titlewrap/dist/tr-grid-titlewrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/zoom/dist/zoom.min.js" type="script">
            </div>
          </pandora-page>
          <div class="results"></div>
        </div>
      </div>
    </div>
  </pandora-book>
</body>

</html>