(()=>{"use strict";var __webpack_modules__={800:(t,e,i)=>{var o=i(221),n=i(243),r=i(515),s=i(895),l=i(984),a=function(){};o.p.inherits(a,n.pB),a.prototype._hosts=null,a.prototype._compositeGrid=null,a.prototype._realTimeGrid=null,a.prototype._rowGetter=null,a.prototype._initializedGrid=!1,a.prototype.listen=a.prototype.addEventListener,a.prototype.unlisten=a.prototype.removeEventListener,a.prototype.afterInit=function(t,e,i){var o=null;i&&i.getCoreGrid&&(o=i.getCoreGrid()),o&&(this.getGridApi()||this.setGridWrapper("compositegrid",i),this._compositeGrid&&o.loadPlugin(this,e)),this._initializedGrid||(this._initializedGrid=!0,this._rowGetter=this._realTimeGrid?p:c,this._afterInit())},a.prototype._afterInit=function(){},a.prototype._dispose=function(){this._hosts&&(this._hosts.length||(this._compositeGrid=this._realTimeGrid=null,this._initializedGrid=!1))},a.prototype.hasMultiTableSupport=function(){return!1},a.prototype._prepareEventArguments=function(t,e){return e||(e={}),e.api=this.getGridApi(),e},a.prototype.getName=function(){return"GridPlugin"},a.prototype.initialize=function(t,e){},a.prototype.unload=function(t){this._dispose()},a.prototype.getRelativeGrid=function(t){var e=null;if(t.target){var i=(e=t.target).api;if(i&&i.getCoreGrid)return i.getCoreGrid()}else t.getElement?e=t.getElement():1===t.nodeType&&(e=t);if(e)for(var o=this._hosts.length;--o>=0;){var n=this._hosts[o];if(n.getElement().contains(e))return n}return null},a.prototype.setGridWrapper=function(t,e){t&&("compositegrid"===(t=t.toLowerCase())?this._compositeGrid=e:"realtimegrid"===t&&(this._realTimeGrid=e))},a.prototype.getGridApi=function(t){if(null==t)return this._compositeGrid||this._realTimeGrid;var e="number"==typeof t?this._hosts[t]:t;return e&&e._wrapper||null},a.prototype.getColumnName=function(t){if(this._compositeGrid){var e=this._compositeGrid.getColumnModel(t);if(e)return e.title?e.title:e.field}else{var i=this.getColumnIndex(t),o=this._realTimeGrid.getColumnDefinition(i);if(o)return o.getName()}return""},a.prototype.getColumnIndex=function(t){if("number"==typeof t)return t;if(this._compositeGrid){var e=this._compositeGrid.getColumnFields().indexOf(t);return e>-1?e:this._compositeGrid.getColumnIndex(t)}return this._realTimeGrid.getColumnIndex(t)},a.prototype.getColumnIndices=function(t){var e=this.getGridApi();if(e.getColumnIndices)return e.getColumnIndices(t);if(this._compositeGrid){for(var i,o=this._compositeGrid.getColumnFields(),n=this._compositeGrid.getColumnCount(),r=[],s=0;s<t.length;s++)if("number"==typeof(i=t[s]))i>=0&&i<n&&r.push(i);else{var l=o.indexOf(i);-1!==l&&r.push(l)}return r}return this._realTimeGrid.getColumnIndices(t)},a.prototype.getColumnId=function(t){if("string"==typeof t)return t;var e=this.getColumnCount();if(t<0||t>=e)return"";if(this._compositeGrid)return this._compositeGrid.getColumnId(t);var i=this._realTimeGrid.getColumnDefinition(t);return i?i.getId():""},a.prototype.getColumnIds=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnIds():[]},a.prototype.getColumnField=function(t){return this._hosts&&this._hosts.length?this._hosts[0].getColumnField(t):""},a.prototype.getColumnFields=function(){return this._hosts&&this._hosts.length?this._hosts[0].getColumnFields():[]},a.prototype.getColumnCount=function(){if(this._hosts){var t=this._hosts[0];return t?t.getColumnCount():0}return 0},a.prototype._moveColumnById=function(t,e){var i=this._hosts,o=i?i.length:0;if(o){for(var n=0,r=0;r<o;++r)n|=i[r].moveColumnById(t,e);return!!n}return!1},a.prototype._reorderColumns=function(t,e){var i=this._hosts,o=i?i.length:0;if(o){for(var n=0,r=0;r<o;++r)n|=i[r].reorderColumns(t,e);return!!n}return!1},a.prototype._loadPlugin=function(t,e,i){return t||(t=e.getPlugin(i))||(t=e.loadPlugin(i))&&this._initializedGrid&&(t._initializedGrid=!0),t},a.prototype._requestPlugin=function(t,e,i){return this._initializedGrid?a.requestPlugin(t,e,i,this._compositeGrid,this._realTimeGrid):Promise.reject("Plugin should be requested after the initialization")},a.requestPlugin=function(t,e,i,o,n){var s=null;if(t){var l=null;1===t.nodeType?l=t.api:t.getCoreGrid?l=t:t.getPlugin&&(s=t),l&&(s=l.getCoreGrid(),o||n||(l.getModel?o=l:n=l))}if(!s)return Promise.reject("Cannot find grid element");var u=s.getPlugin(e);if(u)return Promise.resolve(u);var d=new r.B;return setTimeout(a._onPluginRequested.bind(null,{grid:s,pluginRef:e,compositeGrid:o,realTimeGrid:n,config:i,deferred:d}),10),d.promise},a._onPluginRequested=function(t){var e=t.grid;if(!e.getElement())return t.deferred.reject("Grid has been disposed before the plugin is fully loaded: "+t.pluginRef);var i=e.getPlugin(t.pluginRef);if(i)return t.deferred.resolve(i);var o=!1;return t.pluginRef.beforeInit&&(o=!0,t.pluginRef.beforeInit(e.getElement(),t.config,!0)),(i=e.loadPlugin(t.pluginRef,t.config))?(!o&&i.beforeInit&&(o=!0,i.beforeInit(e.getElement(),t.config)),i.setGridWrapper&&(t.compositeGrid?i.setGridWrapper("compositegrid",t.compositeGrid):t.realTimeGrid&&i.setGridWrapper("realtimegrid",t.realTimeGrid)),i.afterInit&&i.afterInit(),t.deferred.resolve(i)):t.deferred.reject("Unable to load required dependency: "+t.pluginRef)},a.prototype._getPlugin=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getPlugin(t):null},a.prototype._getColumnData=function(t,e){return null==e&&(e=this._hosts[0]),e?e.getColumnData(t):null},a.prototype._getColumnOption=function(t,e,i){var o=this._getColumnData(t,i);return o?o[e]:null},a.prototype._newColumnData=function(t,e){if(null==e&&(e=this._hosts[0]),!e)return{};var i=e.getColumnData(t);return i||(i=e.setColumnData(t,{})),i},a.prototype._getField=function(t){var e=this._compositeGrid||this._realTimeGrid;return e?e.getColumnField(t):""},a.prototype._getRowData=function(t){return this._realTimeGrid&&t?t.ROW_DEF.getRowData():t},a.prototype._getRow=function(t,e){return _(t.getRowDataAt(e))},a.prototype._getData=function(t,e,i){var o=this._getRow(t,e);return o?o[i]:void 0},a.prototype._setData=function(t,e,i,o){if(this._realTimeGrid){var n=d(t,e);n&&n.setData(i,o)}else"number"==typeof e?t.setDataAt(e,i,o):t.setData(e,i,o)},a.prototype._setRowData=function(t,e,i){if(this._realTimeGrid){var o=d(t,e);o&&o.setRowData(i)}else"number"==typeof e?t.setRowDataAt(e,i):t.setRowData(e,i)},a.prototype._setStaticData=function(t,e,i,o){if(this._realTimeGrid){var n=d(t,e);n&&n.setStaticData(i,o)}else this._setData(t,e,i,o)},a.prototype._setColumnData=function(t,e,i,o){if(e){var n=Array.isArray(o)?o:t.getAllRowIds(!0),r=n?n.length:0;if(r)if(1!==r){var s=Array.isArray(i)?i:n.map((function(){return i}));if(this._realTimeGrid){for(var l=0;l<r;++l){var a=t.getRowData(n[l]);if(a){var u=a.ROW_DEF;u&&(u.getRowData()[e]=s[l])}}t.dispatchGlobalChange||(t=t.getDataSource()),t&&t.dispatchGlobalChange&&t.dispatchGlobalChange()}else t.setColumnData(e,s,n)}else this._setData(t,n[0],e,Array.isArray(i)?i[0]:i)}},a.prototype._activateColumnRenderer=function(t,e,i){if(null!=t){var o=this._realTimeGrid;o?o.activateColumnRenderer(t,e,i):"function"==typeof i?this._hosts[0].setColumnDataBindingHandler(t,i):this._hosts[0].setColumnDataBindingHandler(t,null)}},a.prototype._mockMouseEvent=function(t,e,i){null==t&&(t=0),null==e&&(e=0);var o=i||{};if(t>=0&&e>=0){var n=this._activeGrid||this._hosts[0],r=n?n.getCell(o.sectionType||"content",t,e):null;o.target=r?r.getElement():null}return o};var u={left:37,right:39,up:38,down:40,tab:9};a.prototype._mockKeyboardEvent=function(t,e){var i=e||{};return i.preventDefault=function(){},i.stopPropagation=function(){},"string"==typeof t&&(t=t.toLowerCase(),t=u[t]),i.keyCode=t,i},a._staticStyles={},a._themeLoaders={},a._themeLoadSuccess=function(t,e){var i=this.getName(),o=a._staticStyles[i]=t(e);this.applyStyles(o,i)},a.prototype.applyStaticStyles=function(t){var e=this.getName(),i=a._staticStyles[e];i?this.applyStyles(i,e):t&&(a._themeLoaders[e]||(a._themeLoaders[e]=l.u.getThemeColors()),a._themeLoaders[e].then(a._themeLoadSuccess.bind(this,t)))},a.prototype.applyStyles=function(t,e,i){e||(e=this.getName());var o,n,r="_style"+e,l=this._hosts,a=l.length;if(a)if(i)for(o=0;o<a;o++)n=l[o],this.revokeStyles(n,e),n[r]=(0,s.kM)(t,n.getElement());else for(o=0;o<a;o++)(n=l[o])[r]||((0,s.kM)(t,n.getElement()),n[r]=!0)},a.prototype.revokeStyles=function(t,e){if(t&&e){var i=t[e="_style"+e];i&&1===i.nodeType&&(i.parentNode.removeChild(i),t[e]=null)}};var d=function(t,e){var i="number"==typeof e?t.getRowDataAt(e):t.getRowData(e);return i&&i.ROW_DEF||null},h=function(t,e){var i=e.ROW_DEF.getRowData();return i?i[t]:null},c=function(t){return t},p=function(t){return t?t.ROW_DEF.getRowData():null},_=function(t){if(t){var e=t.ROW_DEF;return e?e.getRowData():t}return null},g=function(t,e){for(var i=e.getAllRowData(),o=i.length,n=new Array(o),r=0;r<o;++r)n[r]=h(t,i[r]);return n},f=i(940),m=function(t){this._dragBox=t.dragBox,this._dragBoxIcon=t.dragBoxIcon,this._dragBoxContent=document.createElement("div"),this._dragBoxContent.className="drag-box-content",this._dragBox.appendChild(this._dragBoxContent)};m._styles="",m.prototype._guideline=null,m.prototype._dragBox=null,m.prototype._dragBoxIcon=null,m.prototype._grid=null,m.applyThemeColor=function(t){t&&!t._dragUIStyles&&m._styles&&(t._dragUIStyles=!0,(0,s.kM)(m._styles,t.getElement()))},m.prototype.onThemeLoaded=function(t){if(!m._styles){var e=l.Z.getElfVersion(),i="grabbing";e<3&&(i="move");var o=[".tr-row-guideline",["position: absolute;","left: 0;","top: 0;","pointer-events: none;","text-align: center;","border-top-width: 3px;","border-top-style: solid;"],".guideline",["position: absolute;","left: 0;","top: 0;","pointer-events: none;","text-align: center;","border-top-style: solid;","width: 3px;","border-top-color: var(--grid-title-icon-color);","color: var(--grid-title-icon-color);","background-color: var(--grid-title-icon-color);"],".drag-box",["position: absolute;","left: 0;","top: 0;","pointer-events: none;","background-color: var(--grid-dragbox-bgcolor);","border: solid 1px var(--grid-title-sort-icon-color);","width: 134px;","height: 29px;","line-height: 29px;","white-space: nowrap;","overflow-x: clip;","text-overflow: ellipsis;","padding: 0 7px 0 7px;","box-shadow: 0 0 8px var(--grid-dragbox-bordercolor);"],".drag-box-disabled",["width: 100px;","left: 0;","top: 0;","position: absolute;"],".drag-box-content",["overflow-x: clip;","text-overflow: ellipsis;"],".drag-box-icon",["top: -4px;","left: 12px;","padding: 2px;","border-radius: 100%;","font-size: 11px;","position: absolute;"],".drag-box-icon[icon='void']",["background-color:var(--grid-void-icon-bgcolor);","color:var(--grid-void-icon-color);"],".drag-box-icon[icon='add']",["background-color:var(--grid-insertion-icon-bgcolor);","color:var(--grid-insertion-icon-color);"],":host",["--grid-dragbox-bgcolor: #ffffff;","--grid-insertion-icon-bgcolor: #39c46e;","--grid-insertion-icon-color: #1A1A1A;","--grid-void-icon-bgcolor: #F5475B;","--grid-void-icon-color: #FFFFFF;","--grid-title-icon-color: var(--grid-guideline-color);"],".mouse-dragging .cell:hover",["cursor: "+i+" !important;"],".tr-grid .column .cell.drag-indicator",["border-top: var(--grid-drag-indicator) !important;","border-right: var(--grid-drag-indicator);","border-bottom: var(--grid-drag-indicator);","border-left: var(--grid-drag-indicator);"],".tr-dragging, .tr-dragging *",["-webkit-touch-callout: none;",".user-select(none);"],".tr-dragbox",["background-color: unset;"]],n="#ff9933";t.primary&&(n=t.primary),n+=";",o.push(".tr-row-guideline",["border-top-color: "+n,"color: "+n]),e<3&&o.push(".pearl .tr-row-guideline, *[theme=pearl] .tr-row-guideline",["border-top-color: #ee7600;","color: #ee7600;","background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.1));"]),m._styles=(0,s.CA)(o)}},m.prototype.renderDragBox=function(t,e){if(!e)return!1;var i=e.getElement(),o=i,n=e.getParent().parentNode;11===n.nodeType&&(o=n);var r=this._dragBox.parentNode;r||o.appendChild(this._dragBox);var s=t.dragBoxIcon||this._dragBox.dragBoxIcon;this._dragBoxIcon.style.visibility="visible",r=this._dragBoxIcon.parentNode;var l=!0;"insertion"===s?(l=!1,this._dragBoxIcon.icon="add",r||this._dragBox.appendChild(this._dragBoxIcon)):"not-allowed"===s||"no-drop"===s||"void"===s?(l=!1,this._dragBoxIcon.icon="void",r||this._dragBox.appendChild(this._dragBoxIcon)):f.Z.removeParent(this._dragBoxIcon);var a=i.getBoundingClientRect(),u=t.clientX-a.left,d=t.pageY-a.top;return this._dragBox.style.left=u-5+"px",this._dragBox.style.top=d+8+"px",l},m.prototype.setContent=function(t){t&&t.getElement&&(t=t.getElement());var e=this._dragBoxContent;t!==e._content&&(e._content=t,f.Z.setContent(e,t))};var v=function(t){var e=this;e._onMouseUp=e._onMouseUp.bind(e),e._onMouseDown=e._onMouseDown.bind(e),e._onDrag=e._onDrag.bind(e),e._onDragStart=e._onDragStart.bind(e),e._onDragEnd=e._onDragEnd.bind(e),e._onDragPulse=e._onDragPulse.bind(e),e._onThemeLoaded=e._onThemeLoaded.bind(e),e._hosts=[],e._guideline=document.createElement("div"),e._dragBox=document.createElement("div"),e._dragBox.classList.add("drag-box-disabled"),e._dragBoxIcon=document.createElement("ef-icon"),e._dragBoxIcon.classList.add("drag-box-icon"),l.u.getElfVersion()<4?(e._dragBox.classList.add("tr-dragbox"),e._guideline.classList.add("tr-guideline")):e._guideline.classList.add("guideline"),t&&this.config({columnDragging:t})};o.p.inherits(v,a),v.prototype._clickedGrid=null,v.prototype._clickedSection=null,v.prototype._clickedRow=-1,v.prototype._guideline=null,v.prototype._dragBox=null,v.prototype._dragBoxIcon=null,v.prototype._dragBoxRenderer=null,v.prototype._timerId=0,v.prototype._dragPulseId=0,v.prototype._pos=null,v.prototype._startPos=null,v.prototype._cacheLeft=0,v.prototype._cacheWidth=0,v.prototype._startColumn=-1,v.prototype._endColumn=-1,v.prototype._destColumn=-1,v.prototype._leftMovableBorder=-1,v.prototype._rightMovableBorder=-1,v.prototype._isDragging=!1,v.prototype._lockFrozen=!1,v.prototype._disabled=!1,v.prototype._noColumnMoving=!1,v.prototype._noDragBox=!1,v._styles="",v.prototype._dragUI=null,v.prototype.getName=function(){return"ColumnDraggingPlugin"},v.prototype.hasMultiTableSupport=function(){return!0},v.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.unloadPlugin("DragAndDropTitlePlugin"),t.listen("mousedown",this._onMouseDown),t.listen("dragstart",n.PF),this.config(e),this._dragUI=new m({dragBox:this._dragBox,dragBoxIcon:this._dragBoxIcon}),m.stylePromise?m.applyThemeColor(t):(m.stylePromise=l.u.getThemeColors()).then(this._onThemeLoaded).catch(this._onThemeLoaded))},v.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("mousedown",this._onMouseDown),this._hosts.length||this._dragPulseId&&(window.clearInterval(this._dragPulseId),this._dragPulseId=0),this._dispose())},v.prototype._onThemeLoaded=function(){var t=l.u.getColors();this._dragUI.onThemeLoaded(t);for(var e=this._hosts.length;--e>=0;)m.applyThemeColor(this._hosts[e])},v.prototype.config=function(t){if(t){var e=t.noColumnDragging;null==e&&null!=t.columnReorder&&(e=!t.columnReorder),null!=e&&(this._disabled=!!e);var i=t.columnDragging;i&&("function"==typeof i.dragBoxRenderer&&(this._dragBoxRenderer=i.dragBoxRenderer,this._dragBox.classList.add("drag-box"),this._dragBox.classList.remove("drag-box-disabled")),this.addListener(i,"dragStart"),this.addListener(i,"drag"),this.addListener(i,"dragEnd"),this.addListener(i,"preColumnMoved"),this.addListener(i,"columnMoved"),this.addListener(i,"dragInterval"))}},v.prototype.getConfigObject=function(t){var e=t||{};this._disabled&&(e.noColumnDragging=!0);var i=e.columnDragging;return i||(i=e.columnDragging={}),e},v.prototype.lockFrozenColumn=function(t){this._lockFrozen=t},v.prototype.disable=function(t){this._disabled=!1!==t},v.prototype.isDisabled=function(){return this._disabled},v.prototype.disableMoving=function(t){this._noColumnMoving=!1!==t},v.prototype.disableDragBox=function(t){this._noDragBox=!1!==t},v.prototype._isAllowed=function(t){var e=this._clickedGrid||this._hosts[0];if(e){var i=e.getStationaryColumnIndex();if(i<0)return!0;if(t<=i)return!1}return!0},v.prototype._onMouseDown=function(t){if(!this._disabled&&!(t.shiftKey||t.ctrlKey||t.altKey||t.button||this._timerId)){var e=this.getRelativeGrid(t);if(e&&(this._pos=e.getRelativePosition(t),!1!==this._pos.hit)){var i=this._pos.section;if(i&&"title"===this._pos.sectionType){var o=this._pos.colIndex;if(this._isAllowed(o)&&(!this._lockFrozen||!e.isPinnedColumn(o))){var n=this._pos.rowIndex,r=this._findMoveableBorder(o,n-1,i),s=this._getSpan(o,n,i);this._clickedGrid=e,this._clickedSection=i,this._clickedRow=n,this._startPos=this._pos,this._startColumn=s.left,this._endColumn=s.right,this._leftMovableBorder=r.left,this._rightMovableBorder=r.right,this._destColumn=this._startColumn,this._timerId=setTimeout(this._onDragStart,300),window.addEventListener("mouseup",this._onMouseUp,!1)}}}}},v.prototype._onMouseUp=function(t){this._timerId&&(window.clearTimeout(this._timerId),window.removeEventListener("mouseup",this._onMouseUp,!1),this._timerId=0,this._clearCache())},v.prototype._onDragStart=function(t){if(!this._disabled&&!this._isDragging&&(this.hasListener("dragStart")&&this._dispatch("dragStart",this._pos),!this._pos.cancel&&(this._timerId=0,window.removeEventListener("mouseup",this._onMouseUp,!1),this._clickedGrid))){this._isDragging=!0,document.body.classList.add("tr-dragging"),window.addEventListener("mousemove",this._onDrag,!1),window.addEventListener("mouseup",this._onDragEnd,!0);var e=this._clickedGrid,i=e.getHeight(),o=this._clickedSection.getBoundingClientRect(),n=this._clickedSection.getCell(this._startColumn,this._clickedRow).getBoundingClientRect(),r=e.getElement();if(this._guideline.style.top=n.top-o.top+"px",this._guideline.style.height=i-1+"px",r.parentNode.classList.add("mouse-dragging"),r.appendChild(this._guideline),this._dragBoxRenderer){var l=(0,s.kI)(t),a=this.getColumnId(this._startColumn),u=this.getColumnIndex(a),d=this._getField(this._startColumn);l.dragBox=this._dragBox,l.columnData={index:u,field:d,id:a},this._dragBoxRenderer(l)}this._dimCol(!0),this._renderGuideline(),this._scrollStep=Math.floor(e.getScrollWidth()/25),this._scrollStep<40?this._scrollStep=40:this._scrollStep>400&&(this._scrollStep=400);var h=e.getHScrollbar();this._cacheLeft=h.getLeft()+20,this._cacheWidth=h.getLeft()+h.getWidth()-20,this._dragPulseId=window.setInterval(this._onDragPulse,150)}},v.prototype._onDrag=function(t){if(this._isDragging){(0,n.PF)(t),this._pos=this._clickedGrid.getRelativePosition(t);var e=this.getRelativeGrid(t);if(e&&e===this._clickedGrid){var i=this._pos.colIndex;!(i>=this._leftMovableBorder&&i<=this._rightMovableBorder&&this._isAllowed(i))||this._lockFrozen&&e.isPinnedColumn(i)||(t.dragBox=this._dragBox,this._renderGuideline(),this._dispatch("drag",t),this._noDragBox||this._dragUI.renderDragBox(t,this._clickedGrid))}}},v.prototype._onDragEnd=function(t){if(this._isDragging){this._isDragging=!1,document.body.classList.remove("tr-dragging"),this._dimCol(!1);var e=this._guideline.parentNode;e&&e.removeChild(this._guideline),(e=this._dragBox.parentNode)&&e.removeChild(this._dragBox),this._clickedGrid.getElement().parentNode.classList.remove("mouse-dragging"),window.removeEventListener("mousemove",this._onDrag,!1),window.removeEventListener("mouseup",this._onDragEnd,!0),this._dragPulseId&&(window.clearInterval(this._dragPulseId),this._dragPulseId=0);var i=this._pos;this._pos=null,(0,n.PF)(t);var o=!1;i.cancel&&(o=!0),this._noDragBox||"void"!==this._dragBoxIcon.icon||(o=!0),this._destColumn>this._startColumn&&--this._destColumn,(!this._destColumn&&0!==this._destColumn||this._destColumn<0||!this._isAllowed(this._destColumn)||this._destColumn>=this._startColumn&&this._destColumn<=this._endColumn)&&(o=!0);var r=null;if(o||(r={startColumnIndex:this._startColumn,destColumnIndex:this._destColumn},this._dispatch("preColumnMoved",r),r.cancel&&(o=!0)),!o){if(!this._noColumnMoving){var s,l,a=this._getPlugin("ColumnGroupingPlugin"),u=this._getPlugin("ColumnStackPlugin"),d=this._destColumn;if(this._startColumn<this._destColumn&&(d=this._destColumn+1),u&&(l=u.getStackId(this._startColumn)),a){var h=a.getCellInfo(this._startPos);s=h.groupId||h.columnId}if(l&&this._startColumn===this._endColumn)u.moveStack(l,d);else if(s)a.moveGroup(s,d);else{var c,p=[];for(c=this._startColumn;c<=this._endColumn;c++)p.push(c);for(c=this._hosts.length;--c>=0;)this._hosts[c].reorderColumns(p,d)}}this.hasListener("columnMoved")&&this._dispatch("columnMoved",{startColumnIndex:this._startColumn,endColumnIndex:this._endColumn,destColumnIndex:this._destColumn,clickedRow:this._clickedRow})}this._dispatch("dragEnd",i||{}),this._clearCache()}},v.prototype._onDragPulse=function(){if(this._isDragging&&this._pos){this._dispatch("dragInterval",this._pos);var t=this._clickedGrid;if(t&&t.getHScrollbar().isActive()){var e=this._pos.x,i=0;e<this._cacheLeft?i=-Math.floor(this._scrollStep*(.8+Math.random())):e>this._cacheWidth&&(i=Math.floor(this._scrollStep*(.8+Math.random())));for(var o=this._hosts?this._hosts.length:0,n=0;n<o;++n)this._hosts[n].scrollRight(i)}}},v.prototype._clearCache=function(){this._startColumn=this._endColumn=this._destColumn=-1,this._startPos=null,this._leftMovableBorder=this._rightMovableBorder=-1,this._clickedRow=-1,this._clickedSection=this._clickedGrid=null,this._dragBoxIcon.icon=null},v.prototype._getSpan=function(t,e,i){var o=i.getCellColSpan(t,e);return o<=0&&(t+=o,o=i.getCellColSpan(t,e)),{left:t,right:t+o-1}},v.prototype._findMoveableBorder=function(t,e,i){if(e<0||!e&&0!==e)return{left:0,right:i.getColumnCount()-1};var o=this._getSpan(t,e,i);return o.right>=o.left?o:this._findMoveableBorder(t,e-1,i)},v.prototype._renderGuideline=function(){var t=this._pos.colIndex;if(!(null==t||t<0)){for(var e=this._getSpan(t,this._clickedRow,this._clickedSection),i=e.left,o=e.right,n=this._clickedGrid.getColumnLeft(i),r=0,s=i;s<=o;++s)r+=this._clickedGrid.getColumnWidth(s);var l=this._pos.x>n+r/2,a=l?o+1:i,u=this._getPlugin("ColumnStackPlugin");if(u){var d=u.getStackId(a);if(d){var h=u.getStackMemberIndices(d),c=h.length;h&&c&&(a=l?h[c-1]+1:h[0])}}n=this._clickedGrid.getColumnLeft(this._destColumn),a<this._leftMovableBorder?a=this._leftMovableBorder:a>this._rightMovableBorder&&(a=this._rightMovableBorder+1,l&&(n-=4)),this._destColumn=a,this._guideline.style.left=n+"px"}},v.prototype._dimCol=function(t){var e=this._clickedGrid.getSection("title").getColumn(this._startColumn).getCell(0).getElement();t?e.classList.add("drag-indicator"):e.classList.remove("drag-indicator")};var C=i(464),y=function(){var t;if(y._iconName)(t=document.createElement("ef-icon")).setAttribute("icon",y._iconName);else{t=document.createElement("span");var e=document.createElement("span");e.className="fallback-arrow",e.textContent="▼",t.appendChild(e)}this._elem=t,t.classList.add("expander"),t.addEventListener("mousedown",y._stopPropagation,!1),t.addEventListener("click",y._stopPropagation,!1)};o.p.inherits(y,C.N),y._iconName="",y._stopPropagation=function(t){t.stopPropagation()},y._onThemeLoaded=function(){l.u.isHaloTheme()&&(y._iconName="down")},y.loadExpanderStyles=function(){y._iconName||(l.u.getThemeName()?y._onThemeLoaded():l.u.getThemeColors().then(y._onThemeLoaded).catch(y._onThemeLoaded))},y.renderOn=function(t,e){var i=null;if(e)t.removeIcon();else{var o=t._expanderIcon;o||(o=t._expanderIcon=i=new y),t.updateIcon(o.getElement())}return i},y.prototype.expand=function(){this._elem.classList.remove("closed")},y.prototype.collapse=function(){this._elem.classList.add("closed")},y.prototype.isExpanded=function(){return!this._elem.classList.contains("closed")},y.prototype.isCollapsed=function(){return this._elem.classList.contains("closed")},y.prototype.toggle=function(t){null==t&&(t=!this.isCollapsed()),t?this.collapse():this.expand()};var b={create:function(t,e){var i=document.createElement("ef-icon");return e&&(i.className=e),t&&i.setAttribute("icon",t),i},box:function(t,e,i){var o=null;return i&&("string"==typeof i?o=document.createElement(i):1===i.nodeType&&(o=i)),o||(o=document.createElement("div")),e&&(o.className=e),o.appendChild(b.create(t)),o},change:function(t,e){t.getAttribute("icon")!==e&&t.setAttribute("icon",e)}},S=function(t){this._menuIconClicked=this._menuIconClicked.bind(this),this.config(t)};S.prototype._clickableCell=!1,S.prototype._headerSpanning=!1,S.prototype._footerSpanning=!1,S.prototype._segmentMode=!1,S.prototype._onCellClicked=null,S.prototype._headerMenuClicked=null,S._styles=(0,s.CA)([".cell.folder.tr-stretched.main-group, .cell.folder.tr-stretched:not(.closed)",["font-weight: 600;"],".color-tag::before",["content: '';","display: block;","position: absolute;","left: -1px;","top: -1px;","width: 2px;","height: calc(100% + 2px);","background-color: var(--grid-expanded-tag-bg-color);"],".color-tag.main-group::before",["top: 2px;","width: 4px;","height: calc(100% - 1px);"],".color-tag.main-group.closed::before",["top: 2px;","width: 4px;","height: calc(100% - 3px);","background-color: var(--grid-tag-bg-color);"],".color-tag.main-group.closed:hover::before",["background-color: var(--grid-expanded-tag-bg-color);"],".color-tag-disabled .color-tag::before",["content: unset;"],".tr-grid .cell .floating-panel .menu-icon",["display: none;"],".tr-grid.row-menu-enabled .cell:hover .menu-icon",["display: inline-block;"],".folder .menu-icon",["color: var(--grid-row-menu-icon-color);"],".folder .menu-icon:hover",["color: var(--grid-row-menu-icon-hover-color);"],".tr-lg .cell.group-member",["border-top-style: dashed;"],":host",["--grid-tag-bg-color: #333333;","--grid-expanded-tag-bg-color: #4D4D4D;","--grid-row-menu-icon-color: #CCCCCC;","--grid-row-menu-icon-hover-color: #FFFFFF;"],".tr-grid.expander-disabled .expander",["cursor: default;"],".tr-grid.folder-disabled .cell.folder",["cursor: default;"],".tr-grid .expander",["cursor: pointer;","display: inline-block;"],".tr-grid .folder .expander:before",["content: none !important;"],".tr-grid .fallback-arrow",["vertical-align: middle;","font-size: 7px;","line-height: 1;","display: inline-block;","transform: scaleX(1.5);","font-family: Arial;"],".tr-grid .expander.closed",["transform: translate(0px, -1px) rotate(-90deg);"],".tr-grid .cell.closed .expander",["transform: translate(0px, -1px) rotate(-90deg);"],".tr-grid .tr-lg .cell.folder.content-header",["background-color: inherit;"]]),S._applyColorTagClass=function(t,e){if(t){var i=t.getElement();i&&i._tagColoringClass!==e&&(i._tagColoringClass&&(i.classList.remove(i._tagColoringClass),i._tagColoringClass=null),e&&(i.classList.add(e),i._tagColoringClass=e))}},S.applyGroupingStyles=function(t){t&&!t._groupingStyles&&(t._groupingStyles=!0,(0,s.kM)(S._styles,t.getElement()))},S.disableColorTag=function(t,e){t&&t.enableClass("color-tag-disabled",!1!==e)},S.enableHeaderMenu=function(t,e){t&&t.enableClass("row-menu-enabled",!!e)},S.prototype.config=function(t){t&&(null!=t.clickableCell&&(this._clickableCell=!!t.clickableCell),null!=t.headerSpanning&&(this._headerSpanning=!!t.headerSpanning),null!=t.footerSpanning&&(this._footerSpanning=!!t.footerSpanning),null!=t.segmentMode&&(this._segmentMode=!!t.segmentMode),null!=t.onCellClicked&&(this._onCellClicked=t.onCellClicked),null!=t.headerMenuClicked&&(this._headerMenuClicked=t.headerMenuClicked))},S.prototype.removeHeaderStyle=function(t,e,i){t.enableRowClass(i,"group-member",!1),t.enableRowClass(i,"header",!1);var o=t.unstretchCell(e,i);S._removeHeaderStyle(o),o=t.getCell(e,i,!1),S._removeHeaderStyle(o)},S.prototype.removeAllStyles=function(t,e,i){t.enableRowClass(i,"group-member",!1),t.enableRowClass(i,"header",!1);var o=t.unstretchCell(e,i);S._removeHeaderStyle(o)||S._removeContentStyle(o),o=t.getCell(e,i,!1),S._removeHeaderStyle(o)||S._removeContentStyle(o)},S._removeHeaderStyle=function(t){return!(!t||(S._applyColorTagClass(t,""),!t._groupHeaderStyle)||(t._groupHeaderStyle=!1,t.removeClass("header"),t.removeClass("folder"),t.removeClass("closed"),t.removeClass("content-header"),t.removeClass("main-group"),S._removeContentStyle(t),t.removeIcon(),t.unlisten("click",this._onCellClicked),0))},S._removeContentStyle=function(t){t&&(t.removeClass("color-tag"),t.setStyle("paddingLeft",""))},S.prototype.applyHeaderStyle=function(t){var e,i=t.colIndex,o=t.rowIndex,n=t.section,r=n.getColumnCount(),s=t.footerRow,l=t.checkboxColumnIndex,a=t.cell;if(e=null!=t.spanning?t.spanning:s?this._footerSpanning:this._headerSpanning,n.enableRowClass(t.rowIndex,"group-member",!1),e){var u=n.getStretchedCell(i,o);a=t.cell=u||n.stretchCell(i,o,e,!0),this._clearCellContent(n,0,i,o,l)}else n.unstretchCell(i,o),n.enableRowClass(o,"header",!0),this._clearCellContent(n,0,r,o,l);a._groupHeaderStyle=!0;var d=y.renderOn(a,t.hiddenArrow);if(d&&d.getElement().addEventListener("click",this._onCellClicked),s)a.removeClass("main-group"),a.removeClass("closed"),a.removeClass("folder"),a.unlisten("click",this._onCellClicked),e&&a.setContent("");else if(a.enableClass("main-group",1===t.groupLevel),a.enableClass("closed",!!t.collapsed),a.enableClass("folder"),e&&this._headerMenuClicked&&(a._menuIcon||(a._menuIcon=b.create("more","menu-icon")).addEventListener("click",this._menuIconClicked),a.insertFloatingIcon(a._menuIcon)),this._clickableCell&&a.listen("click",this._onCellClicked),this._segmentMode){var h=t.content;null!=h&&a.setContent(h)}else a.setContent(t.groupId||"");a.enableClass("header"),a.enableClass("color-tag",!0),S._applyColorTagClass(a,t.colorTagClass),a.setStyle("paddingLeft",t.indentSize>0?t.indentSize+"px":"")},S.prototype._clearCellContent=function(t,e,i,o,n){if(!this._segmentMode)for(var r=e;r<i;++r)if(r!==n){var s=t.getCell(r,o,!1);s&&s.setContent("")}},S.prototype.applyContentAsHeaderStyle=function(t){var e=t.cell;e._groupHeaderStyle=!0,e.addClass("folder"),e.enableClass("content-header",!0),e.enableClass("closed",t.collapsed);var i=y.renderOn(e,!!t.footerRow);i&&i.getElement().addEventListener("click",this._onCellClicked)},S.prototype.applyRowStyle=function(t){var e=t.cell,i=t.indentSize;e.setStyle("paddingLeft",i>0?i+"px":""),e.enableClass("color-tag",!t.nonGroupRow),S._applyColorTagClass(e,t.colorTagClass);var o=t.section;o&&o.enableRowClass(t.rowIndex,"group-member",!t.nonGroupRow)},S.prototype._menuIconClicked=function(t){t.stopPropagation(),this._headerMenuClicked(t)};var w=function(t,e,i){this._onConflated=this._onConflated.bind(this),this._data=[],"function"==typeof t?this.setFunction(t,i):"function"==typeof e&&this.setFunction(e,i),"number"==typeof e?this.setConflatingTime(e):"number"==typeof t&&this.setConflatingTime(t)};w.prototype._data,w.prototype._func=null,w.prototype._delay=0,w.prototype._timerId=0,w.prototype._conflated=!1,w.prototype._disabled=!1,w.prototype.reset=function(){return this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this.popAllData()},w.prototype.popAllData=function(){if(this._data.length){var t=this._data;return this._data=[],t}return null},w.prototype.dispose=function(){this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this._data.length&&(this._data.length=0),this._func=null},w.prototype.conflate=function(t){return!this._disabled&&(null!=t&&this._data.push(t),!this._conflated&&(this._timerId||(this._timerId=setTimeout(this._onConflated,this._delay)),!0))},w.prototype.isConflating=function(){return this._timerId>0&&!this._conflated&&!this._disabled},w.prototype._onConflated=function(){this._conflated=!0;try{this._func()}catch(t){console.error(t.message||t)}this._timerId=0,this._data.length=0,this._conflated=!1},w.prototype.getData=function(){return this._data},w.prototype.setFunction=function(t,e){this._func=t,this._func=t?e?t.bind(e):t:null},w.prototype.setConflatingTime=function(t){this._delay=t||0,this._delay<0&&(this._delay=0)},w.prototype.getConflatingTime=function(){return this._delay},w.prototype.disable=function(t){this._disabled=!1!==t},w.prototype.isEnabled=function(){return!this._disabled},w.prototype.enable=function(t){this._disabled=!1===t};var x=function(t){var e=this;e._onPreSectionDataBinding=e._onPreSectionDataBinding.bind(e),e._updateHeader=e._updateHeader.bind(e),e._onArrowClick=e._onArrowClick.bind(e),e._rtSortingLogic=e._rtSortingLogic.bind(e),e._refreshSegmentSeparator=e._refreshSegmentSeparator.bind(e),e._separatorRefreshConflator=new w(10,e._refreshSegmentSeparator),e._hosts=[],this.config({rowSegmenting:t})};o.p.inherits(x,a),x.prototype._userSortingLogic=null,x.prototype._spanning=!0,x.prototype._prevSegmentBySegmentId=!1,x.prototype._indentSizes=null,x.prototype._arrowSize=9,x.prototype._rowPainter=null,x.prototype._colorTag=null,x.prototype._cssField="TAG_CSS_CLASS",x.prototype._rowSpanningField="ROW_SPANNING",x.prototype._segmentIdField="SEGMENT_ID",x.prototype._runningId=0,x.prototype._separatorRefreshConflator=null,x.prototype._styleTag=null,x.prototype._predefinedColors=null,x._controlClass="predefined-color-tag",x.prototype.getName=function(){return"RowSegmentingPlugin"},x.prototype.beforeInit=function(t,e){l.u.isHaloTheme()&&(this._arrowSize=18)},x.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){y.loadExpanderStyles(),this._hosts.push(t),t.listen("preSectionDataBinding",this._onPreSectionDataBinding),this.config(e);var i=null!=this._colorTag?this._colorTag:l.u.isHaloTheme();S.disableColorTag(t,!1===i),null!=this._predefinedColors&&(this._injectStyles(this._predefinedColors),t.enableClass(x._controlClass)),S.applyGroupingStyles(t),t.addClass("folder-disabled"),i=this._headerMenuClicked,S.enableHeaderMenu(t,!!i)}},x.prototype.requestSeparatorRefresh=function(){this._separatorRefreshConflator.conflate()||this._refreshSegmentSeparator()},x.prototype._refreshSegmentSeparator=function(){var t={},e=this.getSegmentIds()||[],i=e.length;if(i)for(var o=0;o<i;o++){var n=e[o];t[n]=this.isSegmentCollapsed(n)}this._prevSegmentBySegmentId&&(this._prevSegmentBySegmentId=!1,this.unsetAllSegmentSeparators());var r=this._getDataView();if(r)for(var s=r.getDataSource(),l=s.getAllRowIds(),a=l.length,u={},d=0;d<a;d++){var h=l[d],c=this._rowGetter(s.getRowData(h))[this._segmentIdField];null!=c&&(null!=u[c]?this.addSegmentChild(u[c],h):(u[c]=h,this.setSegmentSeparator(h)),this._prevSegmentBySegmentId=!0,t[h]&&this.collapseSegment(h,t[h]))}},x.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("preSectionDataBinding",this._onPreSectionDataBinding),this._hosts.splice(e,1),this._hosts.length<=0&&this._separatorRefreshConflator.reset(),this._dispose())},x.prototype.config=function(t){if(t){var e=t.rowSegmenting;e&&("function"==typeof e.sortingLogic&&(this._userSortingLogic=e.sortingLogic),"function"==typeof e.headerMenuClicked&&(this._headerMenuClicked=e.headerMenuClicked),null!=e.spanning&&(this._spanning=!!e.spanning),null!=e.colorTag&&(this._colorTag=e.colorTag),null!=e.cssField&&(this._cssField=e.cssField),null!=e.rowSpanningField&&(this._rowSpanningField=e.rowSpanningField),null!=e.segmentIdField&&(this._segmentIdField=e.segmentIdField),null!=e.predefinedColors&&"object"==typeof e.predefinedColors&&(this._predefinedColors=e.predefinedColors),this._rowPainter=new S({clickableCell:!1,headerSpanning:this._spanning,footerSpanning:!1,onCellClicked:this._onArrowClick,headerMenuClicked:this._headerMenuClicked,segmentMode:!0}),this.addListener(e,"clicked"),this.addListener(e,"segmentSeparatorBinding"),this.addListener(e,"nonSegmentSeparatorBinding"),this.requestSeparatorRefresh())}},x.prototype.getConfigObject=function(t){var e=t||{},i=e.rowSegmenting;return i||(i=e.rowSegmenting={}),this._spanning||(i.spanning=!1),null!=this._colorTag&&(i.colorTag=this._colorTag),"TAG_CSS_CLASS"!==this._cssField&&(i.cssField=this._cssField),null!=this._predefinedColors&&(i.predefinedColors=this._predefinedColors),"ROW_SPANNING"!=this._rowSpanningField&&(i.rowSpanningField=this._rowSpanningField),"SEGMENT_ID"!=this._segmentIdField&&(i.segmentIdField=this._segmentIdField),this._runningId=0,e},x.prototype.getRowConfigObject=function(t,e){var i=t||{};return this._segmentIdField?(i.values&&i.values[this._segmentIdField]&&delete i.values[this._segmentIdField],this.isSegmentSeparator(e)?(i.values||(i.values={}),i.values[this._segmentIdField]=++this._runningId):this.getSegmentParentRowId(e)&&(i.values||(i.values={}),i.values[this._segmentIdField]=this._runningId),i):i},x.prototype._injectStyles=function(t){var e,i=".tr-grid."+x._controlClass+" .tr-lg .cell",o=[];for(var n in t)o.push(i+"."+n+"::before"),(e=t[n].backgroundColor)&&o.push(["background-color: "+e+";"]);var r=this._hosts[0];this._styleTag&&(this._styleTag.parentNode&&this._styleTag.parentNode.removeChild(this._styleTag),this._styleTag=null),this._styleTag=(0,s.kM)((0,s.CA)(o),r.getElement())},x.prototype._onPreSectionDataBinding=function(t){this._updateHeader(t.sectionSettings,t.fromRowIndex,t.toRowIndex-1)},x.prototype._addSegments=function(t){},x.prototype.updateHeaders=function(){this._timerId=0;var t=this._hosts[0];if(t)for(var e=t.getAllSectionSettings("content"),i=e.length;--i>=0;)this._updateHeader(e[i])},x.prototype._hasSegmentation=function(t){if(t&&"content"===t.getType()){var e=t.getDataSource();if(e){if(e.hasSegmentation())return e._previouslyHasSegmentation=!0,!0;if(e._previouslyHasSegmentation)return e._previouslyHasSegmentation=!1,!0}}return!1},x.prototype.getSegmentParentRowId=function(t){var e=this._getDataView();if(e){var i;return i="number"==typeof t?e.getRowId(t):t,e.getSegmentParentRowId(i)}return""},x.prototype._updateHeader=function(t,e,i){if(this._hasSegmentation(t)){var o=t.getDataSource(),n=o.getDataSource(),r=t.getSection(),s=null!=e?e:r.getFirstIndexInView(),l=null!=i?i:r.getLastIndexInView(),a={};a.section=r,a.colIndex=0;for(var u=r.getColumnCount(),d=0;d<u;d++)if(this._getColumnOption(d,"isCheckboxColumn")){a.checkboxColumnIndex=d;break}for(var h=this._cssField,c=this._rowPainter,p={},_=s;_<=l;_++){var g=r.getCell(0,_,!1);if(g){a.cell=g,a.rowIndex=_,a.rowData=this._getRow(o,_),a.spanning=null,a.content=null;var f=a.rowId=o.getRowId(_),m=a.segmentSeparator=o.isSegmentSeparator(f);if(a.collapsedSegment=a.collapsed=!!m&&o.isSegmentCollapsed(f),m){if(a.groupLevel=o.getSegmentLevel?o.getSegmentLevel(f):1,a.indentSize=this._getIndentSize(a.groupLevel-1,!0),o.getSegment){var v=o.getSegment(f);v&&a.groupLevel>1&&(a.content=v.getSubSegmentName())}var C=a.rowData[this._rowSpanningField];null!=C&&(a.spanning=!!C),this._predefinedColors&&(a.colorTagClass=a.rowData[h]),c.applyHeaderStyle(a),this._dispatch("segmentSeparatorBinding",a)}else{a.groupLevel=0;var y=0,b=this.getSegmentParentRowId(f);if(b){y=1,a.nonGroupRow=!1;var S=p[b];S||(S=p[b]=this._rowGetter(n.getRowData(b))),a.colorTagClass=S[h]}else a.colorTagClass=null,a.nonGroupRow=!0;a.indentSize=this._getIndentSize(y,!1),c.removeHeaderStyle(a.section,a.colIndex,_),c.applyRowStyle(a),this._dispatch("nonSegmentSeparatorBinding",a)}}}}},x.prototype._getIndentSize=function(t,e){var i=0;if(this._indentSizes){if(i=this._indentSizes[0],t>0){var o=this._indentSizes.length;i=t<o?this._indentSizes[t]:this._indentSizes[o-1]}}else t>0&&(i=8+4*t,e||(i+=this._arrowSize));return i},x.prototype._onArrowClick=function(t){var e=this._hosts[0].getRelativePosition(t),i=e.cell?e.cell.getElement():null;if(i){var o=e.rowIndex,n=this.isSegmentCollapsed(o);(n=!n)?(i.classList.add("closed"),this.collapseSegment(o)):(i.classList.remove("closed"),this.expandSegment(o)),e.collapsedSegment=n,this._dispatch("clicked",e)}},x.prototype._getDataView=function(){var t=this._hosts[0];return t?t.getDataSource():null},x.prototype.setSegmentSeparator=function(t,e){var i=this._getDataView();return!!i&&i.setSegmentSeparator(t,e)},x.prototype.setSegmentClassification=function(t,e){var i=this._getDataView();return!!i&&i.setSegmentClassification(t,e)},x.prototype.unsetAllSegmentSeparators=function(){var t=this._getDataView();return!!t&&t.unsetAllSegmentSeparators()},x.prototype.hasSegmentation=function(){var t=this._getDataView();return!!t&&t.hasSegmentation()},x.prototype.isSegmentSeparator=function(t){var e=this._getDataView();if(e){var i;return i="number"==typeof t?e.getRowId(t):t,e.isSegmentSeparator(i)}return!1},x.prototype.collapseSegment=function(t,e){var i=this._getDataView();return!!i&&i.collapseSegment(t,e)},x.prototype.expandSegment=function(t,e){var i=this._getDataView();return!!i&&i.expandSegment(t,e)},x.prototype.expandAllSegments=function(){var t=this._getDataView();return!!t&&t.expandAllSegments()},x.prototype.isSegmentCollapsed=function(t){var e=this._getDataView();return!!e&&e.isSegmentCollapsed(t)},x.prototype.setSegmentCollapsingLogic=function(t){var e=this._getDataView();e&&e.setSegmentCollapsingLogic(t)},x.prototype.fillSegment=function(t){var e=this._getDataView();e&&e.fillSegment(t)},x.prototype.fillSegments=function(){var t=this._getDataView();t&&t.fillSegments()},x.prototype.addSegmentChild=function(t,e){var i=this._getDataView();if(i){var o;if(this._realTimeGrid){var n=this._realTimeGrid.getRowDefinition(e);n&&(o=n.getDataId())}i.addSegmentChild(t,e,o)}},x.prototype.addSegmentChildren=function(t,e){var i=this._getDataView();if(i){var o;if(this._realTimeGrid){var n=(e=Array.isArray(e)?e:[e]).length;o=new Array(n);for(var r=0;r<n;r++){var s=this._realTimeGrid.getRowDefinition(e[r]);s&&(o[r]=s.getDataId())}}i.addSegmentChildren(t,e,o)}},x.prototype.removeSegmentChild=function(t,e){var i=this._getDataView();i&&i.removeSegmentChild(t,e)},x.prototype.removeSegmentChildren=function(t,e){var i=this._getDataView();i&&i.removeSegmentChildren(t,e)},x.prototype.removeAllSegmentChildren=function(){var t=this._getDataView();t&&t.removeAllSegmentChildren()},x.prototype.getSegmentIds=function(){var t=this._getDataView();return t?t.getSegmentIds():null},x.prototype.getSegmentChildIds=function(t){var e=this._getDataView();return e?e.getSegmentChildIds(t):null},x.prototype.setSortingLogic=function(t){this._userSortingLogic="function"==typeof t?t:null},x.prototype.sortSegments=function(t){if(null!=t&&this.setSortingLogic(t),this._userSortingLogic){var e=this._getDataView();if(e){var i=this._realTimeGrid?this._rtSortingLogic:this._userSortingLogic;e.sortSegments(i)}}},x.prototype._rtSortingLogic=function(t,e){return this._userSortingLogic(p(t),p(e))},x.prototype.setPredefinedColors=function(t){null!=t&&"object"==typeof t&&(this._predefinedColors=t,this._injectStyles(t))},x.prototype.spanSegmentSeparator=function(t,e){var i=this._getDataView();i&&("string"==typeof t&&(t=i.getRowIndex(t)),null==t||t<0||this._setStaticData(i,t,this._rowSpanningField,e))};var T=function(t){this._onPostDataSourceChanged=this._onPostDataSourceChanged.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onExtensionLoaded=this._onExtensionLoaded.bind(this),this._onDataChanged=this._onDataChanged.bind(this),this._onRowRemoved=this._onRowRemoved.bind(this),this._hosts=[],this._headerRows=[],this._footerRows=[],this._rows=[],t&&this.config({statisticsRow:t})};o.p.inherits(T,a),T._aliases={average:"average",avg:"average",mean:"average",count:"count",max:"max",maximum:"max",min:"min",minimum:"min",sum:"sum",summation:"sum"},T._defaultLabels={average:"Average",count:"Count",max:"Maximum",min:"Minimum",sum:"Summation"},T.prototype._invalidText="",T.prototype._noColoring=!1,T.prototype._noFormatting=!1,T.prototype._headerRows=null,T.prototype._footerRows=null,T.prototype._rows=null,T.prototype._headerSect=null,T.prototype._footerSect=null,T.prototype._tfExt=null,T.prototype._ccExt=null,T.prototype._disabledUIs=!1,T.prototype.getName=function(){return"StatisticsRowPlugin"},T.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),setTimeout(this._onExtensionLoaded,0),this._disabledUIs=!0,this.config(e),this._disabledUIs=!1,t.getDataSource().listen("dataChanged",this._onDataChanged),t.listen("rowRemoved",this._onRowRemoved),t.listen("postDataSourceChanged",this._onPostDataSourceChanged),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnAdded",this._onColumnAdded),t.getSection("title")&&this._onPostDataSourceChanged())},T.prototype._onExtensionLoaded=function(){if(!this._tfExt||!this._ccExt){var t=this._hosts[0];t&&(this._tfExt=t.getPlugin("TextFormattingPlugin"),this._ccExt=t.getPlugin("ConditionalColoringPlugin"))}},T.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.getDataSource().unlisten("dataChanged",this._onDataChanged),t.unlisten("rowRemoved",this._onRowRemoved),t.unlisten("postDataSourceChanged",this._onPostDataSourceChanged),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnAdded",this._onColumnAdded),this._hosts.length||(this._headerSect=this._footerSect=null,this._tfExt=this._ccExt=null),this._dispose())},T.prototype.config=function(t){if(t){var e=t.statisticsRow;e&&(null!=e.invalidText&&(this._invalidText=e.invalidText),null!=e.noColoring&&(this._noColoring=!!e.noColoring),null!=e.noFormatting&&(this._noFormatting=!!e.noFormatting),this.addListener(e,"postCalculation"),this.addListener(e,"postRendering"),null!=e.rows&&this.setStatisticsRows(e.rows));for(var i=t.columns,o=i?i.length:0,n=0;n<o;++n){var r=i[n];this._configColumn(n,r)}}},T.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this._getExtColumnConfig(n);s&&(s.label?r.statistics="label":s.statistics&&(r.statistics=!0))}var l=e.statisticsRow;return l||(l=e.statisticsRow={}),this._rows.length>0&&(l.rows=this._rows),this._invalidText&&(l.invalidText=this._invalidText),this._noColoring&&(l.noColoring=this._noColoring),this._noFormatting&&(l.noFormatting=this._noFormatting),e},T.prototype.setStatisticsRows=function(t){var e=t?t.length:0;this._headerRows.length=0,this._footerRows.length=0;for(var i=0;i<e;++i){var o=this._prepareStatRow(t[i]);"header"===o.placement?this._headerRows.push(o):this._footerRows.push(o)}this._rows=this._headerRows.concat(this._footerRows),this._prepareSections(),this._updateUIs()},T.prototype.getStatisticsRows=function(){return this._rows.slice()},T.prototype._prepareStatRow=function(t){if(!t)return null;var e=t.placement;t.placement="header"===e||"title"===e?"header":"footer";var i=t.statistic||t.statistics;if(t.statistics&&(t.statistics=null),i){var o=T._aliases[i.toLowerCase()];o&&(i=o)}return t.statistic=i||"custom",t.cachedData={},t},T.prototype._getStatRowIndex=function(t){var e=-1;if("string"==typeof t&&t)for(var i=this._rows.length,o=0;o<i;++o){var n=this._rows[o];if(n.statistic===t){e=o;break}if(n.id===t){e=o;break}}else"number"==typeof t?e=t:t&&(e=+t)!=e&&(e=-1),(e<0||e>=this._rows.length)&&(e=-1);return e},T.prototype.setStatisticsRow=function(t,e){var i=this._getStatRowIndex(t),o=this._rows[i];if(!o||o===e)return!1;var n=this._prepareStatRow(e);if(!n)return!1;n.placement=o.placement;var r="header"===n.placement?this._headerRows:this._footerRows,s=r.indexOf(o);return this._rows[i]=n,r[s]=n,this._updateUIs(),!0},T.prototype.addStatisticsRow=function(t){var e=this._prepareStatRow(t),i=this._rows.indexOf(e);!e||i>=0||("header"===e.placement?this._headerRows.push(e):this._footerRows.push(e),this._rows=this._headerRows.concat(this._footerRows),this._prepareSections(),this._updateUIs())},T.prototype.removeStatisticsRow=function(t){var e=this._getStatRowIndex(t);if(!(e<0)){var i=this._rows[e],o="header"===i.placement?this._headerRows:this._footerRows,n=o.indexOf(i);this._rows.splice(e,1),o.splice(n,1),this._prepareSections(),this._updateUIs()}},T.prototype._configColumn=function(t,e){if(e){var i=e.statistics||e.statistic;if(!i)return;var o=this._newColumnData(t),n=o.statisticsRow;n||(n=o.statisticsRow={}),"label"===i?n.label=!0:n.statistics=!0}},T.prototype._getExtColumnConfig=function(t){return this._getColumnOption(t,"statisticsRow")||null},T.prototype._onColumnAdded=function(t){t.context&&null!=t.colIndex&&this._configColumn(t.colIndex,t.context)},T.prototype._prepareSections=function(){var t=this._hosts[0];if(t&&!this._disabledUIs){var e,i,o=t.getSection("content"),n=t.getDefaultRowHeight();this._headerRows.length?((i=this._headerSect)||(e=o?o.getIndex():1,(i=this._headerSect=t.addSectionAt(e,"title","statisticsHeaderRows")).setDefaultRowHeight(n),i.enableClass("statistics-rows")),i.setRowCount(this._headerRows.length)):this._headerSect&&(t.removeSectionAt(this._headerSect.getIndex()),this._headerSect=null),this._footerRows.length?((i=this._footerSect)||(e=o?o.getIndex()+1:t.getSectionCount(),(i=this._footerSect=t.addSectionAt(e,"footer","statisticsFooterRows")).setDefaultRowHeight(n),i.enableClass("statistics-rows")),i.setRowCount(this._footerRows.length)):this._footerSect&&(t.removeSectionAt(this._footerSect.getIndex()),this._footerSect=null)}},T.prototype._updateUIs=function(){var t=this._hosts[0];t&&!this._disabledUIs&&(t.getRowCount()>0?t.requestRowRefresh():this._onPostSectionDataBinding())},T.prototype._onPostDataSourceChanged=function(t){this._prepareSections()},T.prototype._onDataChanged=function(t){this._updateUIs()},T.prototype._onRowRemoved=function(t){t.rowCount||"content"===t.sectionType&&this._onPostSectionDataBinding()},T.prototype._onPostSectionDataBinding=function(t){if((this._headerSect||this._footerSect)&&(!t||!t.positionChangeOnly)){var e=this._hosts[0],i=e.getColumnCount(),o=e.getDataSource(),n=o.getDataSource(),r=n.getAllRowData(),s=r.length,l=null;if(this._compositeGrid?l=this._compositeGrid.getColumnFields():this._realTimeGrid&&(l=this._realTimeGrid.getColumnFields(),r=r.map(this._rowGetter)),l){var a,u=new Array(i);for(a=0;a<i;++a){u[a]=null;var d=this._getExtColumnConfig(a);if(d){var h,c,p=l[a],_=0,g=null;if(d.statistics){g=u[a]={};var f=0,m=NaN,v=NaN;for(h=0;h<s;++h)null!=(c=r[h][p])&&("number"!=typeof c&&(c=+c),c==c&&(++_,c>=m||(m=c),c<=v||(v=c),f+=c));g.field=p,g.count=_,g.sum=_>0?f:NaN,g.average=f/_,g.min=m,g.max=v}else if(d.label){for(g=u[a]={label:!0},h=0;h<s;++h)((c=r[h][p])||0===c)&&++_;g.field=p,g.count=_}}}for(this.hasListener("postCalculation")&&this._dispatch("postCalculation",{colCount:i,fields:l,statistics:u,dataRows:r,dataView:o,dataTable:n,core:e,extension:this}),a=0;a<i;++a)this._renderStatistics(a,u[a],!!t&&t.actualUpdate);this.hasListener("postRendering")&&this._dispatch("postRendering",{colCount:i,fields:l,statistics:u,headerSection:this._headerSect,footerSection:this._footerSect,headerRows:this._headerRows,footerRows:this._footerRows,core:e,extension:this})}}},T.prototype._renderStatistics=function(t,e,i){if((this._headerSect||this._footerSect)&&e){var o,n;if(this._headerSect)for(n=this._headerRows.length,o=0;o<n;++o)this._headerRows[o].cell=this._headerSect.getCell(t,o);if(this._footerSect)for(n=this._footerRows.length,o=0;o<n;++o)this._footerRows[o].cell=this._footerSect.getCell(t,o);var r=this._rows;for(n=r.length,o=0;o<n;++o){var s=r[o],l=null,a=s.cell;if(null!=a){var u=s.statistic;if(e.label)null==(l=s.label)&&(l=T._defaultLabels[u]||u);else if((l=e[u])||0===l){var d=l;if(this._tfExt&&!this._noFormatting&&(l=this._tfExt.formatText(t,d)),this._ccExt&&!this._noColoring){var h=s.cachedData;h[e.field]=d,this._ccExt.applyColor(t,a,h,i)}}else l=this._invalidText;a.setContent(l),s.cell=null}}}};var I=function(t){var e=this;e._updateZoomedLayout=e._updateZoomedLayout.bind(e),e._updateElementLayout=e._updateElementLayout.bind(e),e._onWheel=e._onWheel.bind(e),e._hosts=[],e._elems=[],t&&e.config({zoom:t})};o.Z.inherits(I,a),I.prototype._zoomFactor=1,I.prototype._maxFactor=2,I.prototype._minFactor=.5,I.prototype._step=.25,I.prototype._wheel=!0,I.prototype._elems,I.prototype.hasMultiTableSupport=function(){return!0},I.prototype.getName=function(){return"ZoomPlugin"},I.prototype.initialize=function(t,e){var i=this;i._hosts.indexOf(t)>=0||(i.config(e),i._applyZoom(t),i._hosts.push(t),1===i._hosts.length&&t.listen("widthChanged",i._updateZoomedLayout),i._wheel&&t.listen("wheel",i._onWheel))},I.prototype.unload=function(t){var e=this,i=e._hosts.indexOf(t);i<0||(1===e._hosts.length&&t.unlisten("widthChanged",e._updateZoomedLayout),e._wheel&&t.unlisten("wheel",e._onWheel),e._hosts.splice(i,1))},I.prototype.config=function(t){if(t){var e=t.zoom;if(e){var i=this,o=e.wheel;null!=o&&(i._wheel=!!o),null!=(o=e.step)&&(i._step=o),null!=(o=e.zoomFactor)&&(i._zoomFactor=o),null!=(o=e.maxFactor)&&(i._maxFactor=o),null!=(o=e.minFactor)&&(i._minFactor=o),this.addListener(e,"zoomChanged")}}},I.prototype.getConfigObject=function(t){var e=t||{},i=e.zoom;return i||(i=e.zoom={}),i.wheel=this._wheel,.25!==this._step&&(i.step=this._step),1!==this._zoomFactor&&(i.zoomFactor=this._zoomFactor),2!==this._maxFactor&&(i.maxFactor=this._maxFactor),.5!==this._minFactor&&(i.minFactor=this._minFactor),e},I.prototype.getZoomFactor=function(){return this._zoomFactor},I.prototype.zoomIn=function(){var t=this;return t.zoomTo(t._zoomFactor+t._step),t._zoomFactor},I.prototype.zoomOut=function(){var t=this;return t.zoomTo(t._zoomFactor-t._step),t._zoomFactor},I.prototype.zoomTo=function(t){var e=this;if(t?("number"!=typeof t&&(t=parseFloat(t)),t<e._minFactor?t=e._minFactor:t>e._maxFactor&&(t=e._maxFactor)):t=1,e._zoomFactor===t)return t;var i,o=e._zoomFactor;for(e._zoomFactor=t,i=e._elems.length;--i>=0;)e._applyZoom(e._elems[i]);for(i=e._hosts.length;--i>=0;)e._applyZoom(e._hosts[i]);return e._dispatch("zoomChanged",{zoomFactor:e._zoomFactor,prevZoomFactor:o}),e._zoomFactor},I.prototype.setStep=function(t){var e=t;null!=e&&("number"!=typeof e&&(e=parseFloat(e)),this._step=e)},I.prototype.zoomDefault=I.prototype.zoomTo,I.prototype.addElement=function(t){var e=this;t&&e._elems.indexOf(t)<0&&(e._applyZoom(t),e._elems.push(t))},I.prototype.removeElement=function(t){var e=this,i=e._elems.indexOf(t);return i>=0&&(e._elems.splice(i,1),e._clearZoomStyles(t)),t},I.prototype.updateZoomedLayout=function(){this._updateZoomedLayout()},I.prototype._applyZoom=function(t){if(t){var e=this,i=t instanceof Object?t.getElement():t;1!==e._zoomFactor?(i.style.transform="scale("+e._zoomFactor+")",i.style.transformOrigin="0 0 0",i.style.overflow="initial"):e._clearZoomStyles(i),e._updateElementLayout(i),t instanceof Object&&(t.zoomFactor=e._zoomFactor)}},I.prototype._updateElementLayout=function(t){var e=t.style;1!==this._zoomFactor?e.marginRight=t.offsetWidth*(this._zoomFactor-1)+"px":e.marginRight=""},I.prototype._updateZoomedLayout=function(){var t,e;for(t=this._elems.length;--t>=0;)e=this._elems[t],this._updateElementLayout(e);for(t=this._hosts.length;--t>=0;)e=this._hosts[t].getElement(),this._updateElementLayout(e)},I.prototype._clearZoomStyles=function(t){var e=t.style;e.transform="",e.transformOrigin="",e.marginRight="",e.overflow=""},I.prototype.enableWheelToZoom=function(t){var e=this;if(t=!!t,e._wheel!==t){e._wheel=t;for(var i=e._hosts.length;--i>=0;)t?e._hosts[i].listen("wheel",e._onWheel):e._hosts[i].unlisten("wheel",e._onWheel)}},I.prototype._onWheel=function(t){if(t.ctrlKey&&!t.shiftKey&&!t.altKey){var e=t.deltaY;e&&(t.preventDefault(),e>0?this.zoomOut():this.zoomIn())}},I.prototype.getDefaultMouseWheelLogic=function(){return this._onWheel};var R=navigator.vendor&&navigator.vendor.indexOf("Apple")>-1&&navigator.userAgent&&-1==navigator.userAgent.indexOf("CriOS")&&-1==navigator.userAgent.indexOf("FxiOS"),D=function(t){this.requestTooltipUpdate=this.requestTooltipUpdate.bind(this),this.applyTooltipToAllColumns=this.applyTooltipToAllColumns.bind(this),this._onPreSectionDataBinding=this._onPreSectionDataBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._hosts=[],t&&this.config({autoTooltip:t})};o.p.inherits(D,a),D.prototype._title=!1,D.prototype._footer=!1,D.prototype._contentTooltip=!0,D.prototype._applyTimer=0,D.prototype._calcDelay=300,D.prototype.getName=function(){return"AutoTooltipPlugin"},D.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this.config(e),R||(t.listen("preSectionDataBinding",this._onPreSectionDataBinding),t.listen("postSectionDataBinding",this.requestTooltipUpdate),t.listen("widthChanged",this.requestTooltipUpdate),t.listen("columnAdded",this._onColumnAdded),this.requestTooltipUpdate()))},D.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("preSectionDataBinding",this._onPreSectionDataBinding),t.unlisten("postSectionDataBinding",this.requestTooltipUpdate),t.unlisten("widthChanged",this.requestTooltipUpdate),t.unlisten("columnAdded",this._onColumnAdded),this._hosts.length||this._applyTimer&&(clearTimeout(this._applyTimer),this._applyTimer=0),this._dispose())},D.prototype.config=function(t){if(t){var e=t.autoTooltip;if(e){var i=e.title||e.header;null!=i&&(this._title=!!i);var o=e.footer;null!=o&&(this._footer=!!o),null!=(i=e.content)&&(this._contentTooltip=!!i)}var n=t.columns;if(n)for(var r=n.length,s=0;s<r;++s)this._configColumn(s,n[s])}},D.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={}),!0===this._getColumnOption(n,"autoTooltip")&&(r.autoTooltip=!0)}var s=e.autoTooltip;return s||(s=e.autoTooltip={}),!0===this._title&&(s.title=!0),!0===this._contentTooltip&&(s.content=!0),!0===this._footer&&(s.footer=!0),e},D.prototype._configColumn=function(t,e){if(e){var i=e.autoTooltip;null!=i&&(this._newColumnData(t).autoTooltip=!!i)}},D.prototype.applyTooltip=function(t,e,i){var o=this._hosts.length;if(!(o<=0||R))for(var n=0;n<o;++n){var r=this._hosts[n];if(this._title)for(var s=r.getAllSections("title"),l=s.length;--l>=0;)this._applyTooltipToSection(s[l],t);if(this._footer)for(var a=r.getAllSections("footer"),u=a.length;--u>=0;)this._applyTooltipToSection(a[u],t);this._isTooltipCandidate(t)&&this._applyTooltipToSection(r.getSection("content"),t,e,i)}},D.prototype.applyTooltipToColumns=function(t){var e=this._hosts?this._hosts[0]:null;if(e&&e.getElement())for(var i=t?t.length:0,o=0;o<i;++o)this.applyTooltip(t[o])},D.prototype.applyTooltipToAllColumns=function(){this._applyTimer=0;for(var t=this.getColumnCount(),e=0;e<t;++e)this.applyTooltip(e)},D.prototype._applyTooltipToSection=function(t,e,i,o){if(!t)return!1;if(null==i?i=t.getFirstIndexInView():i||(i=0),null==o&&(o=t.getLastIndexInView()+1),i>=o)return!1;var n=t.getColumn(e);if(!n)return!1;if(n.getVisibility&&!n.getVisibility())return!1;if(!n.getElement())return!1;for(var r=i;r<o;++r){var s=t.getCell(e,r,!1);if(s&&s.isVisible()){if(null==s._userDefinedTooltip){var l=s.getTooltip()||s.getAttribute("ef-title");s._userDefinedTooltip=l||""}var a=s.getContent(),u="";if(a){var d=a.scrollWidth;d&&d>a.offsetWidth?u=s.getTextContent():s._userDefinedTooltip&&(u=s._userDefinedTooltip)}s._previousPos=r+"-"+e,s.setTooltip(u),s.setAttribute("ef-title",u)}}return!0},D.prototype._clearTooltipCache=function(t,e,i,o,n){if(this._isTooltipCandidate(e))for(var r=i;r<o;r++){var s=t.getCell(e,r);if(n||s&&null!=s._userDefinedTooltip)if(s._userDefinedTooltip=null,s._previousPos!==r+"-"+e||n)s.removeAttribute("ef-title"),s.setTooltip("");else{var l=s.getTooltip()||s.getAttribute("ef-title");l&&(s.removeAttribute("ef-title"),s.setTooltip(l))}}},D.prototype._onPreSectionDataBinding=function(t){if(t&&"content"===t.sectionType)for(var e=this.getColumnCount(),i=!0===t.actualUpdate,o=0;o<e;++o)this._clearTooltipCache(t.section,o,t.fromRowIndex,t.toRowIndex,i)},D.prototype.requestTooltipUpdate=function(){this._applyTimer||(this._applyTimer=setTimeout(this.applyTooltipToAllColumns,this._calcDelay))},D.prototype._onColumnAdded=function(t){t.context&&null!=t.colIndex&&this._configColumn(t.colIndex,t.context)},D.prototype._isTooltipCandidate=function(t){var e=this._getColumnOption(t,"autoTooltip");return null!=e?!!e:this._contentTooltip};var E=function(t,e){this._onTouchStart=this._dispatch.bind(this,"touchStart"),this._onTouchEnd=this._dispatch.bind(this,"touchEnd"),this._onTouchMove=this._dispatch.bind(this,"touchMove"),e&&("boolean"==typeof e?this._touchMove=!0:(e.useTouchMove&&(this._touchMove=!0),e.preventDefault&&(this._defaultPrevented=!0))),this._defaultPrevented||(this._evtOptions=E.passive),this.setElement(t)};o.p.inherits(E,n.pB),E.prototype._elem,E.prototype._onTouchStart,E.prototype._onTouchEnd,E.prototype._onTouchMove,E.prototype._touchMove=!1,E.prototype._defaultPrevented=!1,E.prototype._evtOptions,E.passive={passive:!0},E.prototype.getElement=function(){return this._elem},E.prototype.setElement=function(t){this.detachTouchEvents(),this._elem=t||null,this.attachTouchEvents(this._touchMove)},E.prototype.applyTrait=E.prototype.setElement,E.prototype.dispose=function(){this.setElement(null)},E.prototype.addTouchListeners=function(t,e,i){t&&this.addEventListener("touchStart",t),e&&this.addEventListener("touchEnd",e),i&&this.addEventListener("touchMove",i)},E.prototype.removeTouchListeners=E.prototype.unlistenAll,E.prototype.attachTouchMoveEvent=function(){var t=this._elem;t&&(this._defaultPrevented&&t.addEventListener("touchmove",n.pB.preventDefault),t.addEventListener("touchmove",this._onTouchMove,this._evtOptions))},E.prototype.detachTouchMoveEvent=function(){var t=this._elem;t&&(this._defaultPrevented&&t.removeEventListener("touchmove",n.pB.preventDefault),t.removeEventListener("touchmove",this._onTouchMove,this._evtOptions))},E.prototype.attachTouchEvents=function(t){var e=this._elem;e&&(e.addEventListener("touchstart",this._onTouchStart,this._evtOptions),e.addEventListener("touchend",this._onTouchEnd,this._evtOptions),e.addEventListener("touchcancel",this._onTouchEnd,this._evtOptions),t&&this.attachTouchMoveEvent())},E.prototype.detachTouchEvents=function(){var t=this._elem;t&&(t.removeEventListener("touchstart",this._onTouchStart,this._evtOptions),t.removeEventListener("touchend",this._onTouchEnd,this._evtOptions),t.removeEventListener("touchcancel",this._onTouchEnd,this._evtOptions),this.detachTouchMoveEvent())},E.getButtonType=function(t){return t.changedTouches?0:t.button||0},E.getPosition=function(t,e){var i=t.changedTouches,o=i?i[i.length-1]:t;return e||(e={}),e.x=e.pageX=o.pageX,e.y=e.pageY=o.pageY,e.clientX=o.clientX,e.clientY=o.clientY,e.timeStamp=t.timeStamp,e};var A=function(t,e){var i;if(this._onMouseDown=this._onMouseDown.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseMove=this._dispatch.bind(this,"mouseMove"),e)if("string"==typeof e){var o=e.charAt(0).toLowerCase();"m"===o?this._whichBtn=1:"r"===o&&(this._whichBtn=2)}else i=e,e.useDragStart&&(this._useDrag=!0);this._tchProxy=new E(null,i),this._tchProxy.addTouchListeners(this._onMouseDown,this._onMouseUp,this._onMouseMove),this.setElement(t)};o.p.inherits(A,n.pB),A.prototype._tchProxy,A.prototype._down=null,A.prototype._whichBtn=0,A.prototype._useDrag=!1,A.prototype._disabled=!1,A.prototype._onMouseMove,A.prototype.dispose=function(){this.unlistenAll(),this._tchProxy.dispose(),window.removeEventListener("mouseup",this._onMouseUp,!1)},A.prototype.disable=function(t){this._disabled=!1!==t,this._disabled||this.reset()},A.prototype.enable=function(t){this.disable(!1===t)},A.prototype.getElement=function(){return this._tchProxy.getElement()},A.prototype.setElement=function(t){var e=this._tchProxy.getElement();e&&(e.removeEventListener("dragstart",n.pB.preventDefault,!1),this._useDrag?(e.removeEventListener("dragstart",this._onMouseDown,!1),e.removeAttribute("draggable")):e.removeEventListener("mousedown",this._onMouseDown,!1)),this._tchProxy.setElement(t),(e=this._tchProxy.getElement())&&(e.addEventListener("dragstart",n.pB.preventDefault,!1),this._useDrag?(e.addEventListener("dragstart",this._onMouseDown,!1),e.setAttribute("draggable","true")):e.addEventListener("mousedown",this._onMouseDown,!1))},A.prototype.reset=function(){this._down=null},A.prototype.getMouseDown=function(){return this._down},A.prototype.isMouseDown=function(){return!!this._down},A.prototype.isMouseUp=function(){return!this._down},A.prototype.getDuration=function(t){return this._down?(t?t.getTime():Date.now())-this._down.timeStamp:0},A.prototype._onMouseDown=function(t){this._disabled||this._isValidButton(t)&&(window.addEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&(window.addEventListener("mousemove",this._onMouseMove,!1),this._tchProxy.attachTouchMoveEvent()),this._down||(this._down=E.getPosition(t),this._dispatch("change",t)),this._dispatch("mouseDown",t))},A.prototype._onMouseUp=function(t){this._disabled||this._isValidButton(t)&&(window.removeEventListener("mousemove",this._onMouseMove,!1),window.removeEventListener("mouseup",this._onMouseUp,!1),this.hasListener("mouseMove")&&this._tchProxy.detachTouchMoveEvent(),this._down&&(t.duration=t.timeStamp-this._down.timeStamp,t.up=!0,this._dispatch("change",t)),this._down=null,this._dispatch("mouseUp",t))},A.prototype._isValidButton=function(t){return E.getButtonType(t)===this._whichBtn};var k=function(t){this._textRange=document.createRange(),this._isIE=(0,s.w1)(),this._unselectables={title:!0,header:!0,content:!1},this._hosts=[],this._map=[],this._curRect={},this._curRect.left=0,this._curRect.right=0,this._curRect.top=0,this._curRect.bottom=0,this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onMouseDown=this._onMouseDown.bind(this),this._onBlur=this._onBlur.bind(this),this._onCopy=this._onCopy.bind(this),this._onTab=this._onTab.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),t&&this.config({cellSelection:t})};o.p.inherits(k,a),k._styles=(0,s.CA)([":host .tr-grid .cell.selection",["background-image: none;","background-color: var(--grid-selection-bgcolor);"]]),k._applyStyles=function(t){t&&!t._cellSelectionStyles&&l.u.isHaloTheme()&&(t._cellSelectionStyles=!0,(0,s.kM)(k._styles,t.getElement()))},k.prototype._textRange=null,k.prototype._anchor=null,k.prototype._curMouse=null,k.prototype._curRect,k.prototype._map,k.prototype._hasCellSpan=!1,k.prototype._mode="cell",k.prototype._unselectables,k.prototype._lastSelection=null,k.prototype._lastMouseUpTimeStamp,k.prototype._autoDeselecting=!0,k.prototype._disabled=!1,k.prototype._mouseTrait=null,k.prototype._allowMultipleSelection=!0,k.prototype._dirty=!1,k.prototype._tabToSelect=!1,k.prototype._isIE,k.prototype._unclickableMapping={A:1,INPUT:1,BUTTON:1,SELECT:1,CHECKBOX:1,"EF-DATETIME-PICKER":1,"EF-MULTI-SELECT":1},k.prototype._dirVectors=null,k.prototype._mouseOutOfGrid=!1,k.prototype._timeoutID=null,k.prototype._scrollSpeed=500,k.prototype._prevRect={},k.prototype._draggable=!1,k.prototype.getName=function(){return"CellSelectionPlugin"},k.prototype.hasMultiTableSupport=function(){return!0},k.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._mouseTrait=new A(t.getElement()),this._mouseTrait.addEventListener("mouseDown",this._onMouseDown),this._mouseTrait.addEventListener("mouseUp",this._onMouseUp),this._mouseTrait.addEventListener("mouseMove",this._onMouseMove),t.getParent().addEventListener("blur",this._onBlur,!0),t.listen("focusout",this._onBlur),t.listen("copy",this._onCopy),this._tabToSelect&&t.listen("keydown",this._onTab),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnMoved",this._onColumnMoved),t.enableClass("no-text-select",!0),1===this._hosts.length&&this.config(e),k._applyStyles(t))},k.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._mouseTrait.removeEventListener("mouseDown",this._onMouseDown),this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),this._mouseTrait.removeEventListener("mouseUp",this._onMouseUp),t.unlisten("copy",this._onCopy),t.getParent().removeEventListener("blur",this._onBlur),t.unlisten("keydown",this._onTab),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnMoved",this._onColumnMoved),this.deselectAll(),t.enableClass("no-text-select",!1),this._hosts.splice(e,1),this._hosts.length||(this._compositeGrid=null,this._realTimeGrid=null))},k.prototype.config=function(t){if(t){var e=t.cellSelection;if(e){var i=e.mode;this._mode=i||this._mode,i=e.multipleSelection,this._allowMultipleSelection=null!=i?i:this._allowMultipleSelection,this._allowMultipleSelection||this._mouseTrait.removeEventListener("mouseMove",this._onMouseMove),i=e.autoDeselecting,this._autoDeselecting=null!=i?i:this._autoDeselecting,(i=e.selectableSections)&&this.setSelectableSections(i),(i=e.tabToSelect)&&(this._tabToSelect=!0,this._hosts[0]&&this._hosts[0].listen("keydown",this._onTab)),this.addListener(e,"selectionChanged"),this.addListener(e,"copy"),this.addListener(e,"beforeMouseDown")}}},k.prototype.getConfigObject=function(t){var e=t||{},i=e.cellSelection;i||(i=e.cellSelection={}),i.mode=this._mode,this._allowMultipleSelection||(i.multipleSelection=!1),this._autoDeselecting||(i.autoDeselecting=!1),this._tabToSelect&&(i.tabToSelect=!0);var o=this._unselectables,n=[];for(var r in o)o[r]||n.push(r);return n.length>0&&n.length<3&&(i.selectableSections=n),e},k.prototype._onMouseDown=function(t){if(this._draggable=!1,!this._disabled&&this._isClickable(t.target)){var e=this.getRelativeGrid(t),i=e.getRelativePosition(t);this._unselectables[i.sectionType]||(this._dispatch("beforeMouseDown",i),i.cancel||(this._dirty=!0,this.selectSingleCell(i),e.setAttribute("draggable","true"),this._draggable=!0))}},k.prototype._onMouseMove=function(t){if(!this._disabled&&this._anchor&&this._draggable){var e=this._getActiveGrid(),i=e.getRelativePosition(t);if(0!==i.sectionIndex){if(!i.hit){var o=e.getHeight(),n=e.getWidth();if(0===e.getScrollWidth()&&0===e.getScrollHeight())return;if(o>=i.y&&!(i.y<0)&&n>=i.x&&!(i.x<0))return;var r=0,s=0;i.x>n?r=i.x-n:i.x<0&&(r=i.x),i.y>o?s=i.y-o:i.y<0&&(s=i.y);var l={x:r,y:s};this._setScrollSpeed(l);var a=this._checkIsSameProps(l);if(this._mouseOutOfGrid&&a)return;return this._dirVectors=l,void this._setScrollInterval(l)}if(this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._isTheSamePosition(this._curMouse,i)){this._curMouse=i,this._dirty=!0;var u=this._newSelectionRect();this._updateSelection(u)}}}},k.prototype._getActiveGrid=function(){var t=this._anchor;return t&&t.grid?t.grid:this._hosts[0]},k.prototype._setScrollSpeed=function(t){var e=Math.floor(300-Math.abs((t.x+t.y)/2));e%10==0&&(this._scrollSpeed=e>0||e<=500?e:50)},k.prototype._detectDir=function(t){var e=null;return t<0?e="minus":0===t?e="zero":t>0&&(e="positive"),e},k.prototype._checkIsSameProps=function(t){if(!this._dirVectors||!t)return!1;var e=this._detectDir(this._dirVectors.x)===this._detectDir(t.x),i=this._detectDir(this._dirVectors.y)===this._detectDir(t.y);return e&&i},k.prototype._setScrollInterval=function(t){this._timeoutID&&clearTimeout(this._timeoutID),this._mouseOutOfGrid||(this._mouseOutOfGrid=!0);var e=this._newSelectionRect(),i=this._scrollSpeed||500;this._timeoutID=setInterval(function(){if(i===this._scrollSpeed){var o=this._hosts[0].getScrollTop(),n=this._hosts[0].getScrollLeft(),r=t.y>0,l=t.x>0,a=this._map[0].section.getCellWidth(),u=this._map[0].section.getCellHeight(),d=r?o+a:o-a,h=l?n+u:n-u;if(0!==t.y){this._hosts[0].setScrollTop(d);var c=this._hosts[0].getVScrollbar(),p=this._hosts[0].getRowVirtualizer(),_=this._isEndOfVerticalScroll(),g=c.getHeight(),f=p.getViewOffset();if(r){var m=p.getContentStart(e.bottom+1)-f;if(m<=g)for(;m<=g;)e.bottom+=1,m=p.getContentStart(e.bottom+1)-f;else _&&(e.bottom=this._hosts[0].getRowCount())}else{var v=p.getContentStart(e.top-1)-f;if(v>=0)for(;v>=0;)e.top-=1,v=p.getContentStart(e.top-1)-f;else _&&(e.top=1)}}if(0!==t.x){this._hosts[0].setScrollLeft(Math.floor(h));var C=this._isEndOfHorizontalScroll(),y=this._hosts[0].getHScrollbar(),b=y.getTrackSize();if(l){var S=0;this._hosts[0].getPinnedLeftColumnCount()&&(S=this._hosts[0].getContentWidth()-y.getContentWidth()),this._hosts[0].getColumnRight(e.right)-S<=b?e.right+=1:C&&(e.right=this._hosts[0].getColumnCount())}else this._hosts[0].getColumnLeft(e.left-1)>=0?e.left-=1:C&&(e.left=0)}this._updateSelection(e),this._prevRect=(0,s.kI)(e)}else this._setScrollInterval(t)}.bind(this),i)},k.prototype._isEndOfVerticalScroll=function(){var t=this._hosts[0].getScrollTop();return 0===t||t+this._hosts[0].getHeight()>this._hosts[0].getScrollHeight()},k.prototype._isEndOfHorizontalScroll=function(){return this._hosts[0].getHScrollbar().isEndOfHorizontalScroll()||0==this._hosts[0].getScrollLeft()},k.prototype._onMouseUp=function(t){this._timeoutID&&(clearTimeout(this._timeoutID),this._mouseOutOfGrid=!1),!this._disabled&&this._dirty&&(this._hosts[0].removeAttribute("draggable"),this._draggable=!1,this._isIE&&(this._lastMouseUpTimeStamp=t.timeStamp),this._updateSelectionText(),this._dispatch("selectionChanged",{}),this._dirty=!1)},k.prototype._updateSelectionText=function(){var t=this._getGridHiddenInput();if(t){var e=window.getSelection();(this._isIE?this._textRange.htmlText:e.toString())||(this._textRange.setStart(t.parentNode,0),this._textRange.setEnd(t,0),e.removeAllRanges(),e.addRange(this._textRange),this._isIE&&this._getActiveGrid().focus())}},k.prototype._onBlur=function(t){this._dirty||this._autoDeselecting&&(this._lastMouseUpTimeStamp&&t.timeStamp-this._lastMouseUpTimeStamp<100||this.deselectAll()&&this._dispatch("selectionChanged",{}))},k.prototype._onColumnMoved=function(t){var e=this._curRect,i=t.fromColIndex,o=t.toColIndex;if(!(i<e.left&&o<e.left||i>=e.right&&o>=e.right)){var n;if(i<e.left)n=e.left-1;else if(i>=e.right)n=e.right;else{if(!(o<e.left||o>=e.right))return;n=o}for(var r=e.top;r<e.bottom;r++){var s=this._map[r];s.section.selectCell(n,s.rowIndex,!1)}this._updateSelectionText()}},k.prototype._isClickable=function(t,e){return!(!this._hosts[0]||!t||"EF-ICON"!==t.tagName&&"EF-HEADER"!==t.tagName&&0===t.tagName.indexOf("EF-")||this._unclickableMapping[t.tagName]&&!t.classList.contains("valigner"))},k.prototype._onCopy=function(t){var e={grid:this._hosts[0],sender:this,data:"",format:"",clipboards:[]};if(this._dispatch("copy",e),!(this._isIE?this._textRange.htmlText:window.getSelection().toString())){var i,o;if(t.clipboardData?(i=t.clipboardData,o="text/plain"):(i=window.clipboardData,o="Text"),e.data)i.setData(e.format||o,e.data);else{var r=this.getSelectedText();r&&i.setData(o,r)}for(var s=e.clipboards?e.clipboards.length:0,l=0;l<s;++l){var a=e.clipboards[l];a.format&&i.setData(a.format,a.data||"")}n.pB.preventDefault(t)}},k.prototype._onTab=function(t){if(9===t.keyCode){if(t.altKey||t.ctrlKey)return;(t.shiftKey?this.selectPrevCell():this.selectNextCell())&&n.pB.preventDefault(t)}},k.prototype._onPostSectionDataBinding=function(t){var e=this._getActiveGrid();if(this.getSelectionCount()>0&&e===t.sender){var i,o,n=t.section.getRowOffset(),r=this._curRect.top-n,s=this._curRect.bottom-n,l=this._curRect.left,a=this._curRect.right;for(i=t.fromRowIndex;i<t.toRowIndex;i++)if(i>=r&&i<s)for(o=l;o<a;o++)t.section.selectCell(o,i,!0);else for(o=l;o<a;o++)t.section.selectCell(o,i,!1)}},k.prototype._isString=function(t){return"[object String]"===Object.prototype.toString.call(t)},k.prototype._cacheSectionMap=function(){var t=this._hosts[0].getSectionCount(),e=0,i=0;this._hasCellSpan=!1;for(var o=this._getActiveGrid(),n=0;n<t;++n){for(var r=o.getSectionSettings(n),s=r.getSection(),l=s.hasCellSpan(),a=s.getRowCount(),u=0;u<a;++u){var d={};d.section=s,d.hasCellSpan=l,d.sectionIndex=n,d.rowIndex=u,d.rowOffset=i,d.type=r.getType(),this._map[e]=d,e++}i+=a,this._hasCellSpan|=l}this._map.length=e},k.prototype._getCumulativeIndex=function(t){var e=t.section;return e?"string"!=typeof e&&"number"!=typeof e||(e=this._hosts[0].getSection(e)):e=this._hosts[0].getSection("content"),e.getRowOffset()+t.rowIndex},k.prototype._newSelectionRect=function(){if(!this._anchor||!this._curMouse)return this._curRect;var t={};"row"!==this._mode?this._anchor.colIndex<=this._curMouse.colIndex?(t.left=this._anchor.colIndex,t.right=this._curMouse.colIndex+1):(t.left=this._curMouse.colIndex,t.right=this._anchor.colIndex+1):(t.left=0,t.right=this._hosts[0].getColumnCount());var e=this._getCumulativeIndex(this._curMouse),i=this._getCumulativeIndex(this._anchor);return"column"!==this._mode?i<=e?(t.top=i,t.bottom=e+1):(t.top=e,t.bottom=i+1):(t.top=0,t.bottom=this._hosts[0].getRowCount()),this._scanCellSpans(t),t},k.prototype._scanCellSpans=function(t){if(this._hasCellSpan){var e=0,i=0,o=!1;do{for(o=!1,e=t.left;e<t.right;++e)o|=this._expandRect(e,t.top,t);for(e=t.right-1,i=t.top+1;i<t.bottom;++i)o|=this._expandRect(e,i,t);for(i=t.bottom-1,e=t.right-1;--e>=t.left;)o|=this._expandRect(e,i,t);for(i=t.bottom-1;--i>=t.top;)o|=this._expandRect(t.left,i,t)}while(o)}},k.prototype._expandRect=function(t,e,i){var o=this._map[e];if(!o.hasCellSpan)return!1;if(!0===this._unselectables[o.type])return!1;var n=!1,r=0,s=o.section.getCellColSpan(t,o.rowIndex);s>1?(r=t+s)>i.right&&(i.right=r,n=!0):s<0&&((r=t+s)<i.left&&(i.left=r,n=!0),(r+=s=o.section.getCellColSpan(r,o.rowIndex))>i.right&&(i.right=r,n=!0));var l=o.section.getCellRowSpan(t,o.rowIndex);return l>1?(r=o.section.getRowOffset()+o.rowIndex+l)>i.bottom&&(i.bottom=r,n=!0):l<0&&((r=o.section.getRowOffset()+o.rowIndex+l)<i.top&&(i.top=r,n=!0),(r+=l=o.section.getCellRowSpan(t,r))>i.bottom&&(i.bottom=r,n=!0)),n},k.prototype._updateSelection=function(t){this._updateColumnSelection(t.left,this._curRect.left),this._curRect.left=t.left,this._updateColumnSelection(this._curRect.right,t.right),this._curRect.right=t.right,this._updateRowSelection(t.top,this._curRect.top),this._curRect.top=t.top,this._updateRowSelection(this._curRect.bottom,t.bottom),this._curRect.bottom=t.bottom;var e=this._getActiveGrid();if(e){var i=this._curRect.left,o=this._curRect.top,n=this._map[o],r=0,s=0;n&&"content"===n.type&&(r=this._curRect.right-i,s=this._curRect.bottom-o,o-=n.rowOffset);var l=e.getSection("content");l&&l.setCellBounds(i,o,r,s)}},k.prototype._updateColumnSelection=function(t,e){var i,o;if(t!==e)if(t<e)for(o=this._curRect.top;o<this._curRect.bottom;++o)for(i=t;i<e;++i)this._selectAsPosition(o,i,!0);else for(o=this._curRect.top;o<this._curRect.bottom;++o)for(i=t;--i>=e;)this._selectAsPosition(o,i,!1)},k.prototype._updateRowSelection=function(t,e){var i,o;if(t!==e)if(t<e)for(o=t;o<e;++o)for(i=this._curRect.left;i<this._curRect.right;++i)this._selectAsPosition(o,i,!0);else for(o=t;--o>=e;)for(i=this._curRect.left;i<this._curRect.right;++i)this._selectAsPosition(o,i,!1)},k.prototype._selectAsPosition=function(t,e,i){var o=this._map[t];o&&!this._unselectables[o.type]&&o.section.selectCell(e,o.rowIndex,i)},k.prototype._isTheSamePosition=function(t,e){return null===t&&null===e||null!==t&&null!==e&&t.rowIndex===e.rowIndex&&t.colIndex===e.colIndex&&t.sectionIndex===e.sectionIndex},k.prototype._getGridHiddenInput=function(){return this._hosts[0]?this._hosts[0].getHiddenInput():null},k.prototype.getSelectedText=function(){var t=this._getActiveGrid();if(!t||!this.getGridApi()||this.getSelectionCount()<=0)return"";for(var e="",i=t.getDataSource(),o=this._curRect.top;o<this._curRect.bottom;++o){var n=this._map[o];o!==this._curRect.top&&(e+="\n");var r=null;if(!0!==this._unselectables[n.type]){"content"===n.type&&(r=this._getRow(i,n.rowIndex));for(var l=this._curRect.left;l<this._curRect.right;++l)if(l!==this._curRect.left&&(e+="\t"),"content"===n.type){if(r){var a=this._getField(l);e+=(0,s.sQ)(r[a])}}else{var u=n.section.getCell(l,n.rowIndex).getTextContent();e+=(0,s.sQ)(u)}}}return e},k.prototype.selectAll=function(){var t=this._getActiveGrid(),e={left:0,right:t.getColumnCount(),top:0,bottom:t.getRowCount()};this.deselectAll(),this._anchor={grid:t},this._cacheSectionMap(),this._scanCellSpans(e),this._updateSelection(e),this._dispatch("selectionChanged",{})},k.prototype.deselectAll=function(){if(this.getSelectionCount()<=0)return!1;var t=this._getActiveGrid();if(t){for(var e=t.getElement().querySelectorAll("div.cell.selection"),i=e.length,o=0;o<i;o++)e[o].classList.remove("selection");var n=t.getSection("content");n&&n.setCellBounds(0,0,0,0)}return this._lastSelection=this.getSelectionBounds(),this._anchor=null,this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top,!0},k.prototype.getSelectionCount=function(){return(this._curRect.right-this._curRect.left)*(this._curRect.bottom-this._curRect.top)},k.prototype.getSelectionBounds=function(t){if(this.getSelectionCount()<=0)return null;var e=null!=t?t:{};if(e.left=this._curRect.left,e.right=this._curRect.right-1,e.top=this._curRect.top,e.bottom=this._curRect.bottom-1,this._map.length>0&&e.bottom<this._map.length){var i=this._map[e.top];e.startSection=i.sectionIndex,e.startSectionRow=i.rowIndex,i=this._map[e.bottom],e.endSection=i.sectionIndex,e.endSectionRow=i.rowIndex}return e},k.prototype.getLastSelectionBounds=function(t){if(null===this._lastSelection)return null;var e=null!=t?t:{};for(var i in this._lastSelection)e[i]=this._lastSelection[i];return e},k.prototype.setSelectableSections=function(t){if(this._unselectables.content=!0,this._unselectables.header=!0,this._unselectables.title=!0,!t)return this._unselectables.content=!1,this._unselectables.header=!1,void(this._unselectables.title=!1);for(var e="string"==typeof t?[t]:t,i=e.length;--i>=0;)this._unselectables[e[i]]=!1},k.prototype.selectSingleCell=function(t){if(this.deselectAll(),t){this._anchor=t,this._curMouse=t,this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;var e=this._newSelectionRect();this._updateSelection(e)}},k.prototype.selectCells=function(t){if(this.deselectAll(),t){this._anchor=t,this._curMouse={rowIndex:t.rowIndex+(t.height-1),colIndex:t.colIndex+(t.width-1)},this._cacheSectionMap(),this._curRect.left=this._anchor.colIndex,this._curRect.top=this._getCumulativeIndex(this._anchor),this._curRect.right=this._curRect.left,this._curRect.bottom=this._curRect.top;var e=this._newSelectionRect();this._updateSelection(e)}},k.prototype.selectNextCell=function(){var t;if(this._anchor){var e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex+1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex+1,rowIndex:0}):(t=e.getNextCell(this._anchor))&&!t.cell&&(t=null),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},k.prototype.selectPrevCell=function(){var t;if(this._anchor){var e=this._getActiveGrid();"row"==this._mode?t=e.getCellInfo({colIndex:0,rowIndex:this._anchor.rowIndex-1}):"column"==this._mode?t=e.getCellInfo({colIndex:this._anchor.colIndex-1,rowIndex:0}):(t=e.getPrevCell(this._anchor))&&!t.cell&&(t=null),t&&(t.grid=e),this.selectSingleCell(t)}return!!t},k.prototype.getAnchorInfo=function(){return this._getActiveGrid().getCellInfo(this._anchor)},k.prototype.getSelectedCells=function(){for(var t=[],e=this._curRect.top;e<this._curRect.bottom;++e){for(var i=this._map[e],o=[],n=this._curRect.left;n<this._curRect.right;++n){var r=i.section.getCell(n,i.rowIndex);o.push(r)}t.push(o)}return t},k.prototype.disableSelection=function(t){this._disabled=!1!==t},k.prototype.setAutoDeselectingOnBlur=function(t){this._autoDeselecting=t},k.prototype.getAutoDeselectingOnBlur=function(){return this._autoDeselecting};var P=function(t){var e=this;e._onPreSectionRender=e._onPreSectionRender.bind(e),e._onPostSectionDataBinding=e._onPostSectionDataBinding.bind(e),e._onCheckboxClicked=e._onCheckboxClicked.bind(e),e._onCheckboxKeydown=e._onCheckboxKeydown.bind(e),e._onCheckboxMousedown=e._onCheckboxMousedown.bind(e),e._onColumnIndexChanged=e._onColumnIndexChanged.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._requestUIPopulation=e._requestUIPopulation.bind(e),e._populateUIs=e._populateUIs.bind(e),e._isCheckboxDisabled=e._isCheckboxDisabled.bind(e),e.selectAll=e.selectAll.bind(e),e.deselectAll=e.deselectAll.bind(e),e._hosts=[],t&&e.config({checkbox:t})};o.p.inherits(P,a),P._emptyFunc=function(){},P._isRowExpansion=function(t,e){return t.isRowExpansion(e)},P._checkableRow=function(t,e,i){return!e(t,i)&&!P._isRowExpansion(t,i)},P._addDisabledProp=function(t){t.setAttribute("disabled","")},P._removeDisabledProp=function(t){t.removeAttribute("disabled")},P._setBooleanProp=function(t,e,i){i?t.setAttribute(e,""):t.removeAttribute(e)},P._collectRowMemberId=function(t,e,i){if(i){var o=t.getGroupByRowId(i);if(o){if(o.isCollapsed())return e.concat(o.getAllRowIds(!0))}else e.push(i)}return e},P.prototype._width=34,P.prototype._displayColumn=-1,P.prototype._userCheckboxIdx=-1,P.prototype._updateTimer=0,P.prototype._initializing=!1,P.prototype._coralCheckboxVer=-1,P.prototype._checkboxField="CHECK_BOX",P.prototype._disablingField="CHECK_BOX_DISABLED",P.prototype._autoRowSelection=!1,P.prototype._topCheckboxHandler=!0,P.prototype._anchorRowId="",P._exceptions={filterInputs:1,bottomPadding:1},P._styles=(0,s.CA)([".tr-checkbox-column input[type='checkbox'], .tr-checkbox-column input+label",["cursor: pointer;"],".column.tr-checkbox-column.tr-align-left .cell",["text-align: left;"],".column.tr-checkbox-column.tr-align-right .cell",["text-align: right;"]]),P._applyStyles=function(t){t&&!t._checkboxStyles&&(t._checkboxStyles=!0,(0,s.kM)(P._styles,t.getElement()))},P._runningId=0,P._toCheckState=function(t){return"partial"===t?"partial":t?"checked":"unchecked"},P._getCheckState=function(t){return"none"==t.style.display||t.hasAttribute("disabled")?"":t.classList.contains("square-shape")?"partial":t.checked?"checked":"unchecked"},P._setCheckState=function(t,e){if(t._forceNewState)e=t._forceNewState,t._forceNewState=null;else if(P._getCheckState(t)===e)return 0;return"partial"===e?(t.classList.add("square-shape"),t.checked=this._coralCheckboxVer<3,t.setAttribute("indeterminate","")):(t.classList.remove("square-shape"),t.checked="checked"===e,t.removeAttribute("indeterminate")),t._prevState=e,1},P._toggleState=function(t){return"checked"==t||"partial"==t?"unchecked":"checked"},P._mergeState=function(t,e){if(t){if(!e)return t;if(t!==e)return"partial"}return e},P._mergeStates=function(t){for(var e="",i=t.length;--i>=0;)if("partial"===(e=P._mergeState(e,t[i])))return e;return e},P.prototype.getName=function(){return"CheckboxPlugin"},P.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.listen("preSectionRender",this._onPreSectionRender),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnAdded",this._onColumnIndexChanged),t.listen("columnAdded",this._onColumnAdded),t.listen("columnMoved",this._onColumnIndexChanged),t.listen("columnRemoved",this._onColumnIndexChanged),this.config(e),P._applyStyles(t),this._requestUIPopulation())},P.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("preSectionRender",this._onPreSectionRender),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnAdded",this._onColumnIndexChanged),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnMoved",this._onColumnIndexChanged),t.unlisten("columnRemoved",this._onColumnIndexChanged),this._hosts.splice(e,1),this._hosts.length||(this._compositeGrid=null,this._updateTimer&&(clearTimeout(this._updateTimer),this._updateTimer=0)))},P.prototype.beforeProcessOption=function(t,e){if("checkboxSelector"==t)return null},P.prototype.config=function(t){if(t){var e,i=t.checkbox;i&&(null!=(e=i.rowSelection)&&(this._autoRowSelection=!!e),(e=i.field)&&(this._checkboxField=e),(e=i.disablingField)&&(this._disablingField=e),(e=i.width)&&(this._width=e),null!=(e=i.topCheckboxHandler)&&(this._topCheckboxHandler=!!e),this.addListener(i,"checkboxCreated"),this.addListener(i,"clicked"),this.addListener(i,"checkboxBinding"))}},P.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={}),(this._getColumnData(n).isCheckboxColumn||n===this._userCheckboxIdx)&&(r.checkboxColumn=!0)}var s=e.checkbox;return s||(s=e.checkbox={}),this._autoRowSelection&&(s.rowSelection=!0),"CHECK_BOX"!==this._checkboxField&&(s.field=this._checkboxField),"CHECK_BOX_DISABLED"!==this._disablingField&&(s.disablingField=this._disablingField),34!==this._width&&(s.width=this._width),e},P.prototype.beforeInit=function(t,e,i){if(!i){var o=this;o._displayColumn=-1;var n=e.columns;e.dataModel&&(e.dataModel=o._prepareData(n,e.dataModel)),e.staticDataRows&&(e.staticDataRows=o._prepareData(n,e.staticDataRows));var r=e.checkbox;r&&(null!=r.width&&(o._width=r.width),null!=r.field&&(o._checkboxField=r.field)),o._userCheckboxIdx=o._findCheckboxColumnIndexFromConfig(n),o._userCheckboxIdx>=0?o._genCheckboxColumn(n[o._userCheckboxIdx]):(n.unshift(o._genCheckboxColumn()),o._userCheckboxIdx=0)}},P.prototype._genCheckboxColumn=function(t){var e={width:this._width,sortable:!1,className:"tr-checkbox-column",classes:{"tr-checkbox-column":1},noResizing:!0,resizable:!1,title:"",tooltip:"",filterInput:{disabled:!0},field:this._checkboxField,notRealTimeField:!0,checkboxColumn:!0,binding:P._emptyFunc,formatter:{renderTitle:P._emptyFunc,render:P._emptyFunc,bind:P._emptyFunc}};if(t&&!t.autoGenerated){for(var i in t.field&&"CHECK_BOX"===this._checkboxField&&(this._checkboxField=t.field),t.width&&34===this._width&&(this._width=+t.width),e)null==t[i]&&(t[i]=e[i]);return t}return e.autoGenerated=!0,e},P.prototype._prepareData=function(t,e){var i=e;return Array.isArray(e)&&(i={data:e}),i.data&&!i.fields&&Array.isArray(i.data[0])&&(i.fields=this._getFieldsFromColumns(t)),i},P.prototype._getFieldsFromColumns=function(t){for(var e=t.length,i=new Array(e),o=0;o<e;o++){var n=t[o];i[o]=n?"string"==typeof n?n:n.field||"":""}return i},P.prototype._findCheckboxColumnIndexFromConfig=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;i++)if(t[i].checkboxColumn)return i;return-1},P.prototype.getCheckboxColumnIndex=function(){if(this._displayColumn<0)for(var t=this._hosts[0],e=t?t.getColumnCount():0,i=0;i<e;++i){var o=this._getColumnData(i,t);if(o&&o.isCheckboxColumn){this._displayColumn=i;break}}return this._displayColumn},P.prototype.getDisplayColumn=P.prototype.getCheckboxColumnIndex,P.prototype.getCheckbox=function(t,e){var i=this._hosts[0].getSectionSettings(t);return i?this._getCheckbox(i,e):null},P.prototype._createCheckbox=function(t,e,i){var o=t.getSection(),n=o.getCell(e,i);if(!n)return null;var r,s=n.getContent();if(s&&s._chkbox)return s;-1===this._coralCheckboxVer&&(this._coralCheckboxVer=l.u.hasComponent("ef-checkbox")),this._coralCheckboxVer?r=document.createElement("ef-checkbox"):(r=document.createElement("input")).setAttribute("type","checkbox"),r._chkbox=!0,r.addEventListener("click",this._onCheckboxClicked,!1),r.addEventListener("keydown",this._onCheckboxKeydown,!1),r.addEventListener("mousedown",this._onCheckboxMousedown,!1),n.setContent(r);var a=t.getType();if(!this._coralCheckboxVer){var u=document.createElement("label"),d="tr_grid_checkbox_"+P._runningId++;r.setAttribute("id",d),u.setAttribute("for",d),r.parentElement.appendChild(u)}return this._dispatch("checkboxCreated",{input:r,checkbox:r,cell:n,colIndex:e,rowIndex:i,grid:this._hosts[0],section:o,sectionType:a}),r},P.prototype.selectAll=function(){this.checkAll(!0)},P.prototype.deselectAll=function(){this.checkAll(!1)},P.prototype.selectCheckboxes=function(t){this.setCheckStates(t,!0)},P.prototype.deselectCheckboxes=function(t){this.setCheckStates(t,!1)},P.prototype.setCheckStates=function(t,e){if(t){var i=Array.isArray(t)?t:[t],o=i.length;if(o){var n=this._hosts[0].getSectionSettings("content").getDataSource();if(n){var r,s=[];for(r=0;r<o;++r){var l=i[r],a="string"==typeof l?l:n.getRowId(l);s=P._collectRowMemberId(n,s,a)}s.length&&(s=s.filter(P._checkableRow.bind(null,n,this._isCheckboxDisabled)),this._setColumnData(n,this._checkboxField,e,s))}}}},P.prototype.checkAll=function(t){var e=P._toCheckState(null==t||t),i=this._hosts[0],o=i?i.getAllSectionSettings("title"):null;if(o){for(var n,r=0;r<o.length;++r)if(o[r].getChildren()){n=o[r];break}n&&(this._setSectionState(n,e),this._setDescendantCheckState(n,e))}},P.prototype.setAllCheckStates=function(t){t=!!t;var e=this._hosts[0],i=e?e.getDataSource():null,o=i?i.getDataSource():null;if(o){var n=o.getAllRowIds(!0);this._setColumnData(i,this._checkboxField,t,n)}},P.prototype.selectAllPages=function(t){var e=this._hosts[0],i=e?e.getDataSource():null;if(i){var o=i.getSortedRowIds(!0);o=o.filter(P._checkableRow.bind(null,i,this._isCheckboxDisabled));var n=null==t||t;this._setColumnData(i,this._checkboxField,n,o)}},P.prototype.disableCheckbox=function(t,e){var i=this._hosts[0],o=i?i.getDataSource():null;o&&("string"==typeof t&&(t=o.getRowIndex(t)),null==t||t<0||this._setData(o,t,this._disablingField,!1!==e))},P.prototype._isCheckboxDisabled=function(t,e){var i=this._getRowFromId(t,e);return!!i&&!!i[this._disablingField]},P.prototype.enableCheckbox=function(t){this.disableCheckbox(t,!1)},P.prototype.getAllCheckedIndices=function(t,e){var i,o,n=[],r=this.getCheckboxColumnIndex()>=0?this._hosts[0]:null,s=r?r.getSectionSettings(t):null;if(s)if(null==e&&(e="checked"),this._isDataBound(s)){var l=s.getDataSource(),a=l.getVisibleRowIds(!0);for(o=a.length,i=0;i<o;++i){var u=this._getRowFromId(l,a[i]);u&&P._toCheckState(u[this._checkboxField])===e&&n.push(i)}}else{var d=s.getSection();for(o=d.getRowCount(),i=0;i<o;++i){var h=this._getCheckbox(d,i);P._getCheckState(h)===e&&n.push(i)}}return n},P.prototype.getFilteredSelectedData=function(t){var e=this._hosts[0];return this._getSelectedRowData(e?e.getDataSource():null,t)},P.prototype.getAllSelectedData=function(t){var e=this._hosts[0],i=e?e.getDataSource():null,o=i?i.getDataSource():null;return this._getSelectedRowData(o,t)},P.prototype.getSelectedRowData=P.prototype.getAllSelectedData,P.prototype._getSelectedRowIds=function(t){if(!t||this.getCheckboxColumnIndex()<0)return[];var e,i,o=this._getRowMemberIdsInView(t),n=o.length,r=[];for(e=0;e<n;++e)i=o[e],this._getCheckboxValue(t,i)&&r.push(i);return r},P.prototype._getSelectedRowData=function(t,e){var i,o=this._getSelectedRowIds(t),n=o.length;if("ROW_ID"===e||0===n)return o;var r=new Array(n);for(i=0;i<n;++i)r[i]=this._getRowFromId(t,o[i]);if(e){var s=new Array(n);for(i=0;i<n;++i)s[i]=r[i][e];return s}return r},P.prototype._getRowFromId=function(t,e){return this._rowGetter(t.getRowData(e))},P.prototype._getCheckboxValue=function(t,e){var i=this._getRowFromId(t,e);return!!i&&!!i[this._checkboxField]},P.prototype._getGroupState=function(t){if(!t)return"unchecked";var e=null,i=(e=t.getGroupLevel&&0===t.getGroupLevel()?this._getRowMemberIdsInView(t):(e=t.getAllRowIds(!0)).filter(P._checkableRow.bind(null,t,this._isCheckboxDisabled))).length;if(!i)return"unchecked";for(var o="",n=0;n<i;++n)o=P._mergeState(o,P._toCheckState(this._getCheckboxValue(t,e[n])));return o},P.prototype._getGroupDisabledState=function(t){if(!t)return!1;for(var e=this._getRowMemberIdsInView(t),i=e.length,o=0;o<i;++o)if(!this._isCheckboxDisabled(t,e[o]))return!1;return!0},P.prototype._getSectionState=function(t){if(this._isDataBound(t))return this._getGroupState(t.getDataSource());var e=this._getAllCheckboxes(t).map(P._getCheckState);return P._mergeStates(e)},P.prototype._getCheckbox=function(t,e){var i=(t.getSection?t.getSection():t).getCellContent(this._displayColumn,e);return!i||"EF-CHECKBOX"!==i.tagName&&"checkbox"!==i.type?null:i},P.prototype._getAllCheckboxes=function(t,e){e=e||[];for(var i=t.getSection(),o=i.getFirstIndexInView(),n=i.getLastIndexInView(),r=o;r<=n;++r){var s=this._getCheckbox(t,r);s&&e.push(s)}return e},P.prototype._setDescendantCheckState=function(t,e){if(this._topCheckboxHandler){var i=t.getChildren();if(i)for(var o=0;o<i.length;++o){var n=i[o];this._setSectionState(n,e),this._setDescendantCheckState(n,e)}}},P.prototype._syncAscendantState=function(t,e,i){var o=t.getParent(),n=this._hosts[0];if(n&&o&&o.getSection().isVisible()){var r,s=e||"";if("partial"!==s){e||(t=null);var l=o.getChildren();if(l)for(r=l.length;--r>=0;){var a=l[r];if(a!==t){var u=this._getSectionState(a);if("partial"===(s=P._mergeState(u,s)))break}}}if(i){var d=n.getSectionSettings("title"),h=this._getGroupDisabledState(i);this._getAllCheckboxes(d).forEach(h?P._addDisabledProp:P._removeDisabledProp)}this._setSectionState(o,s),this._syncAscendantState(o,s)}},P.prototype._setSectionState=function(t,e){if(e)if(this._isDataBound(t)){var i="unchecked"!==e,o=t.getDataSource(),n=this._getRowMemberIdsInView(o);this._setColumnData(o,this._checkboxField,i,n)}else for(var r=this._getAllCheckboxes(t),s=r.length;--s>=0;)P._setCheckState(r[s],e)},P.prototype._isDataBound=function(t){return!(!this._checkboxField||!t.getDataSource()||"content"!==t.getType())},P.prototype._onColumnIndexChanged=function(t){this._displayColumn=-1},P.prototype._onColumnAdded=function(t){if(!this._initializing){var e=this._hosts[0];if(e){var i=t.context;i&&(i.checkboxColumn&&this.getCheckboxColumnIndex()<0&&(this._displayColumn=t.colIndex,this._newColumnData(t.colIndex,e).isCheckboxColumn=!0),this._requestUIPopulation())}}},P.prototype._requestUIPopulation=function(t){this._updateTimer||(this._updateTimer=setTimeout(this._populateUIs,50))},P.prototype._populateUIs=function(){if(this._updateTimer=0,!this._initializing){var t=this._hosts[0];if(t){if(this._initializing=!0,this._userCheckboxIdx>=0)this._displayColumn=this._userCheckboxIdx,this._userCheckboxIdx=-1;else if(this._displayColumn=-1,this.getCheckboxColumnIndex(),this._displayColumn<0){var e=this._genCheckboxColumn();if(this._compositeGrid){var i=this._compositeGrid.getModel(),o=i?i.columns:null;o&&o.unshift(e),t.insertColumn(0,e)}else this._realTimeGrid&&this._realTimeGrid.insertColumn(e,0);this._displayColumn=0}var n=this._newColumnData(this._displayColumn,t);n.isCheckboxColumn=!0;var r=n.filterInputOption;r||(r=n.filterInputOption={}),r.disabled=!0,this._createCheckboxes(t.getSectionSettings("title")),t.requestRowRefresh(),this._initializing=!1}}},P.prototype._onCheckboxChanged=function(t,e){var i=t?t.currentTarget:null;if(i){i.classList.remove("square-shape");var o=P._getCheckState(i);e&&(o=P._toggleState(o));var n=this._hosts[0].getRelativePosition(t),r=n.sectionSettings;if(r){if(this._isDataBound(r)){var s=r.getDataSource(),l=n.rowIndex,a=s.getRowId(l);if(this._isCheckboxDisabled(s,a))return;var u=null;if(t.shiftKey&&this._anchorRowId){var d,h=s.getRowIndex(this._anchorRowId);if(h>=0)if(h<l)for(u=[],d=h;d<=l;++d)u.push(d);else if(l<h)for(u=[],d=l;d<=h;++d)u.push(d)}if(u)this.setCheckStates(u,!t.altKey);else{var c="unchecked"!==o,p=s.getGroupByRowId(a);if(p){var _=this._getRowMemberIdsOfSubgroup(s,p);this._setColumnData(s,this._checkboxField,c,_),"checked"===o&&"partial"===i._prevState&&(i._forceNewState=o)}else this._setData(s,l,this._checkboxField,c)}}this._setDescendantCheckState(r,o),this._syncAscendantState(r),this.hasListener("clicked")&&(n.checkbox=i,n.checkState=o,n.checked=i.checked,this._dispatch("clicked",n)),t.stopPropagation()}}},P.prototype._onCheckboxClicked=function(t){var e=1===this._coralCheckboxVer;e&&"LABEL"===t.target.tagName||this._onCheckboxChanged(t,e)},P.prototype._onCheckboxKeydown=function(t){var e=t.keyCode;if(32===e&&(this._onCheckboxMousedown(t),this._onCheckboxChanged(t,!0),t.preventDefault()),38===e||40===e){var i=this._hosts[0],o=i.getRelativePosition(t.currentTarget);if("content"===o.sectionType){var n=i.getDataSource(),r=38===e?-1:1,s=o.rowIndex+r;if(n.getRowId(s)){i.scrollToRow(null,s);var l=this._getCheckbox(o.section,s);l&&l.focus(),t.preventDefault()}}}},P.prototype._onCheckboxMousedown=function(t){if(!t.shiftKey){this._anchorRowId="";var e=this._hosts[0],i=e.getRelativePosition(t.currentTarget);if("content"===i.sectionType){var o=e.getDataSource();this._anchorRowId=o.getRowId(i.rowIndex)}}},P.prototype._getRowMemberIdsOfSubgroup=function(t,e){for(var i=this._getRowMemberIdsInView(t),o=e.isCollapsed()?e.getAllRowIds(!0):e.getVisibleRowIds(!0),n=0,r=[],s=o.length,l=0;l<s;l++){var a=o[l],u=i.indexOf(a,n);u>=0&&(n=u+1,r.push(a))}return r},P.prototype._getRowMemberIdsInView=function(t){if(t.getDataSource()){for(var e=t.isCollapsed()?t.getAllRowIds(!0):t.getVisibleRowIds(!0),i=e.length,o=[],n=0;n<i;n++)o=P._collectRowMemberId(t,o,e[n]);return o.filter(P._checkableRow.bind(null,t,this._isCheckboxDisabled))}return t.getAllRowIds(!0)},P.prototype._onPreSectionRender=function(t){var e=this.getCheckboxColumnIndex();if(!(e<t.fromColIndex||e>=t.toColIndex)){var i=t.sectionSettings;"title"===i.getType()&&this._createCheckboxes(i,t.fromRowIndex,t.toRowIndex)}},P.prototype._createCheckboxes=function(t,e,i){var o=this.getCheckboxColumnIndex();if(!(o<0)&&t&&!P._exceptions[t.getSectionName()])for(var n=t.getSection(),r=null!=e?e:n.getFirstIndexInView(),s=null!=i?i:n.getLastIndexInView()+1,l=r;l<s;++l)this._createCheckbox(t,o,l)},P.prototype._onPostSectionDataBinding=function(t){if(this._checkboxField){var e=this.getCheckboxColumnIndex();if(!(e<0)){var i=t.section,o=t.dataSource,n=t.fromRowIndex;o.hasGroup()&&(n=i.getFirstIndexInView());var r=t.toRowIndex-n;if(!(r<=0)){var s,l,a,u,d=new Array(r),h=null,c=this.hasListener("checkboxBinding");c&&(h={colIndex:e});var p=t.sectionSettings;for(s=0;s<r;++s){l=n+s,(a=d[s]=this._getCheckbox(p,l))||(a=d[s]=this._createCheckbox(p,this._displayColumn,l));var _=o.getRowId(l);u=this._getRowFromId(o,_),c&&a&&(h.checkbox=a,h.rowIndex=l,h.rowData=u,this._dispatch("checkboxBinding",h));var g=!1,f="";if(u)f=P._toCheckState(u[this._checkboxField]),g=!0===u[this._disablingField];else{var m=o.getGroupByRowId(_);f=(g=this._getGroupDisabledState(m))?"unchecked":this._getGroupState(m)}this._autoRowSelection&&i.setSelectedRow(l,!!u&&"checked"===f),a&&(P._setBooleanProp(a,"disabled",g),P._setCheckState(a,f))}this._syncAscendantState(t.sectionSettings,null,o)}}}};var M=function(t){this._onItemResizeThisColumnClicked=this._onItemResizeThisColumnClicked.bind(this),this._onItemResizeAllColumnClicked=this._onItemResizeAllColumnClicked.bind(this),this._onPostSectionDataBinding=this._onPostSectionDataBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onTimeout=this._onTimeout.bind(this),this._hosts=[],this._dummyCells=[],this._cellPaddings=[],this.config(t)};o.p.inherits(M,a),M.prototype._paddingSize=2,M.prototype._defaultPadding=!0,M.prototype._autoAdjust=!1,M.prototype._constraint=!1,M.prototype._proportion=!1,M.prototype._title=!1,M.prototype._shrinkable=!1,M.prototype._interval=300,M.prototype._timerId=0,M.prototype._dummyCells=null,M.prototype._cellPaddings=null,M.prototype._synchronousRendering=!0,M.prototype.getName=function(){return"ColumnFitterPlugin"},M.prototype.hasMultiTableSupport=function(){return!0},M.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){if(this._synchronousRendering=!0,this._hosts.push(t),e){var i=e.columnFitting||{};i.columns=e.columns,this.config(i)}this._autoAdjust&&t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("columnAdded",this._onColumnAdded),this._onPostSectionDataBinding()}},M.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("columnAdded",this._onColumnAdded),this._hosts.length||this._timerId&&(clearTimeout(this._timerId),this._timerId=0))},M.prototype.config=function(t){if(t){var e=t.columns;if(e)for(var i,o=e.length,n=0;n<o;++n)i=e[n],this._retrieveBooleanColumnOption(i,"noFitting",n),this._retrieveBooleanColumnOption(i,"contentFitting",n),this._retrieveColumnOption(i,"width",n),this._retrieveColumnOption(i,"scalable",n),this._retrieveColumnOption(i,"minWidth",n),this._retrieveColumnOption(i,"maxWidth",n);if(this._proportion=M._readBoolean(t,"proportion",this._proportion),this._constraint=M._readBoolean(t,"constraint",this._constraint),this._title=M._readBoolean(t,"title",this._title),this._shrinkable=M._readBoolean(t,"shrinkable",this._shrinkable),this._proportion){var r=this._hosts[this._hosts.length-1];r&&r.preserveProportion(!0)}var s=t.autoAdjust||t.autoAdjusting;null!=s&&(this._autoAdjust=!!s,"number"==typeof s&&(this._interval=s));var l=t.paddingSize;null!=l&&(this._defaultPadding=!1,this._paddingSize=l),this._defaultPadding&&(this._paddingSize=this._title?4:2)}},M.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={}),this._getColumnOption(n,"noFitting")&&(r.noFitting=!0)}var s=e.columnFitting;return s||(s=e.columnFitting={}),this._proportion&&(s.proportion=!0),this._constraint&&(s.constraint=!0),this._title&&(s.title=!0),this._shrinkable&&(s.shrinkable=!0),this._autoAdjust&&(s.autoAdjust=!0),this._defaultPadding||(s.paddingSize=this._paddingSize),e},M.prototype.getColumnMenu=function(t,e){e||(e={});var i=e.menus;i||(i=e.menus=[]);var o=i[0];o||(o=i[0]={menuItems:[]});var n="USED_ONCE",r=[{indexScore:2,label:"Autosize This Column",group:n,value:{colIndex:t},click:this._onItemResizeThisColumnClicked},{indexScore:1,label:"Autosize All Columns",group:n,click:this._onItemResizeAllColumnClicked}];return Array.prototype.push.apply(o.menuItems,r),e},M.prototype._onItemResizeThisColumnClicked=function(t){this.adjustColumnWidth(t.currentTarget.value.colIndex),this._hideColumnMenu()},M.prototype._onItemResizeAllColumnClicked=function(t){this.adjustAllColumns(),this._hideColumnMenu()},M.prototype._hideColumnMenu=function(){this._hosts[0].getPlugin("ColumnMenuPlugin").hide()},M.prototype._retrieveBooleanColumnOption=function(t,e,i){if(t){var o=M._readBoolean(t,e,!1);this._newColumnData(i)[e]=o}},M.prototype._retrieveColumnOption=function(t,e,i){if(t){var o=t[e];null!=o&&(this._newColumnData(i)[e]=o)}},M._readBoolean=function(t,e,i){var o=t[e];return null!=o?!!o:i},M.prototype.adjustColumnWidth=function(t){return this.adjustColumns([t])},M.prototype.adjustColumns=function(t,e){null==e&&(e=!0);var i,o,n=this._collectCandidates(t,e),r=n.length;if(!r)return!1;for(i=0;i<r;++i)(o=n[i]).text&&o.elem.appendChild(this._getDummyCell(o.index,o.text));var s=this._hosts[0],l=new Array(s.getColumnCount());for(i=0;i<r;++i){o=n[i];var a=this._calculateCellWidth(o.index,s,o.width);a>(o.elem._caclWidth||0)&&(l[o.index]=a,this._autoAdjust&&!this._shrinkable&&(o.elem._caclWidth=a))}for(i=0;i<r;++i){var u=this._dummyCells[n[i].index];u&&u.parentNode&&(u.parentNode.removeChild(u),u.textContent="")}var d=0,h=this._hosts.length;if(this._constraint)for(i=0;i<h;++i)d|=(s=this._hosts[i]).setMinimumColumnWidths(l);else for(i=0;i<h;++i)if((s=this._hosts[i]).isProportionPreserved()){for(var c=[],p=0;p<r;p++)c.push(s.getColumnScalability(p));d|=s.setColumnWidths(l,c)}else d|=s.setColumnWidths(l);return this._synchronousRendering=!1,!!d},M.prototype.adjustAllColumns=function(){return this.adjustColumns()},M.prototype.calculateColumnWidth=function(t){var e=this._hosts[0],i=e?e.getSection("content"):null;if(!i)return NaN;var o,n,r=i.getColumn(t);if(!r)return NaN;if(this._getColumnOption(t,"noFitting"))return NaN;if(this._getColumnOption(t,"contentFitting"))o=this._getColumnFitContentWidth(t),o=this._calculateCellWidth(t,e,o);else{var s=this._getColumnFitContentText(t);n=this._getDummyCell(t,s);var l=r.getElement();l.appendChild(n),o=this._calculateCellWidth(t,e),l.removeChild(n)}return o},M.prototype.getAdjustedColumnWidth=M.prototype.calculateColumnWidth,M.prototype.resetAllColumns=function(){for(var t,e,i,o=this._hosts,n=this.getColumnCount(),r=0;r<o.length;r++){t=o[r];for(var s=0;s<n;s++)e=this._getColumnOption(s,"width"),i=this._getColumnOption(s,"scalable"),null!=e?t.setColumnWidth(s,e,!1):t.setColumnWidth(s,100,!1!==i)}},M.prototype._onPostSectionDataBinding=function(){this._autoAdjust&&(this._synchronousRendering?this.adjustColumns(null,!1):this._timerId||(this._timerId=setTimeout(this._onTimeout,this._interval)))},M.prototype._onColumnAdded=function(t){var e=t.context,i=t.colIndex;this._retrieveBooleanColumnOption(e,"noFitting",i),this._retrieveBooleanColumnOption(e,"contentFitting",i),this._retrieveColumnOption(e,"width",i),this._retrieveColumnOption(e,"scalable",i),this._retrieveColumnOption(e,"minWidth",i),this._retrieveColumnOption(e,"maxWidth",i),this._synchronousRendering=!0},M.prototype._onTimeout=function(){this._timerId=0,this.adjustColumns(null,!1)},M.prototype._collectCandidates=function(t,e){var i,o=this._hosts[0],n=o?o.getSection("content"):null;if(!n)return[];for(var r=[],s=t?t.length:o.getColumnCount(),l=0;l<s;++l)(i=this._collectCandidate(n,t?t[l]:l,e))&&r.push(i);return r},M.prototype._collectCandidate=function(t,e,i){var o=t.getColumn(e);if(o){var n={index:e,elem:o.getElement()},r=!i&&this._getColumnOption(e,"noFitting"),s=this._getColumnOption(e,"contentFitting");if(!r)if(s){var l=this._getColumnFitContentWidth(e);l>0&&(n.width=l)}else{var a=this._getColumnFitContentText(e);a&&(n.text=a)}return n}return null},M.prototype._getColumnFitContentWidth=function(t){for(var e,i,o=0,n=this._getCellPadding(t),r=this._hosts.length;--r>=0;)for(var s=this._hosts[r].getAllSections("content"),l=s.length,a=0;a<l;a++)for(var u=s[a],d=u.getRowCount(),h=0;h<d;h++){var c=u.getCell(t,h,!1);if(c){var p=c.getElement();if(!p.classList.contains("tr-stretched")){var _=c.getContent();if(_&&p&&c.isVisible()){e=i=_.offsetWidth;var g=_.children,f=M._almost100Pct(i+n,p.offsetWidth),m=g.length>0;f&&m&&(e=M._sumChildrenWidth(g)),e>o&&(o=e)}}}}return o?o+n:(this._cellPaddings[t]=0,0)},M.prototype._getColumnFitContentText=function(t){for(var e=NaN,i=[],o=this._hosts.length;--o>=0;){var n=this._hosts[o],r=n.getAllSections("content");this._title&&(r=n.getAllSections("title").concat(r));for(var s=r.length,l=0;l<s;l++)for(var a=r[l],u=a.getRowCount(),d=0;d<u;d++){var h=a.getCell(t,d,!1);if(h){var c=h.getTextContent();if(c&&h.getElement()&&h.isVisible()){var p=c.length;p<=e?p>=e-3&&i.push(c):(e=p,i.push(c))}}}}return i.length?i.join("\n"):""},M.prototype._getDummyCell=function(t,e){var i=this._dummyCells[t];return i||(i=this._dummyCells[t]=M._createDummyCell()),e&&(i.innerText=e),i},M.prototype._getCellPadding=function(t){var e=this._cellPaddings[t];if(e>0)return e;var i=this._hosts[0],o=(i?i.getSection("content"):null).getColumn(t);if(!o)return this._cellPaddings[t]=NaN;var n=o.getElement(),r=M._createDummyCell();n.appendChild(r);var s=this._cellPaddings[t]=r.offsetWidth;return n.removeChild(r),s},M.prototype._calculateCellWidth=function(t,e,i){var o,n=NaN,r=NaN,s=e.getColumnData(t);if(s&&(n=s.minWidth||NaN,r=s.maxWidth||NaN),i)o=i;else{var l=this._dummyCells[t];l&&(o=l.offsetWidth)}return o&&((o+=this._paddingSize)>r&&(o=r),o<n&&(o=n)),o},M._sumChildrenWidth=function(t){var e=t.length;if(e>0){var i=t[e-1],o=t[0];return i.offsetWidth+i.offsetLeft-o.offsetLeft}return 0},M._createDummyCell=function(){var t=document.createElement("div");return t.className="cell",t.style.whiteSpace="nowrap",t.style.width="auto",t.style.display="table",t},M._almost100Pct=function(t,e){return(t>e?e/t:t/e)>=.97};var F=function(){this._onFormatDialogDataChange=this._onFormatDialogDataChange.bind(this),this._hosts=[]};o.p.inherits(F,a),F.prototype._formatDialog=null,F.prototype._tfp=null,F.prototype._ccp=null,F.prototype._hmp=null,F.prototype._pcbp=null,F.prototype._fromApi=!0,F.prototype._constSelfColumn="THIS_COLUMN",F.prototype.getName=function(){return"ColumnFormattingPlugin"},a.prototype.hasMultiTableSupport=function(){return!0},F.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._gridConfig=e)},F.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),this._hosts.length||(this._formatDialog=this._compositeGrid=null,this._tfp=this._ccp=this._hmp=null))},F._empty=function(t){return null},F.prototype._afterInit=function(){Promise.all([this._requestPlugin(this._hosts[0],"TextFormatting",this._gridConfig).catch(F._empty),this._requestPlugin(this._hosts[0],"ConditionalColoring",this._gridConfig).catch(F._empty),this._requestPlugin(this._hosts[0],"HeatMap",this._gridConfig).catch(F._empty),this._requestPlugin(this._hosts[0],"PercentBar",this._gridConfig).catch(F._empty)]).then(function(t){this._tfp=t[0],this._ccp=t[1],this._hmp=t[2],this._pcbp=t[3],this.config(this._gridConfig)}.bind(this)).catch(F._empty)},F.prototype.config=function(t){if(t){var e=t.columns;if(e)for(var i=e.length,o=0;o<i;++o){var n=e[o],r=this._newColumnData(o);!r.field&&n.field&&(r.field=n.field),!r.fieldDataType&&n.fieldDataType&&(r.fieldDataType=n.fieldDataType)}}},F.prototype.getConfigObject=function(t){var e=t||{};return this._tfp&&this._tfp.getConfigObject&&this._tfp.getConfigObject(e),this._ccp&&this._ccp.getConfigObject&&this._ccp.getConfigObject(e),this._hmp&&this._hmp.getConfigObject&&this._hmp.getConfigObject(e),this._pcbp&&this._pcbp.getConfigObject&&this._pcbp.getConfigObject(e),e},F.prototype.getField=F.prototype._getField,F.prototype.getFieldList=function(){for(var t=this.getColumnCount(),e=new Array(t),i=0;i<t;++i)e[i]=this._getField(i);return e},F.prototype.getColumnCount=function(){var t=this._hosts[0];return t?t.getColumnCount():0},F.prototype.openDialog=function(t,e){e=e||{};var i=l.u.hasComponent("column-format-dialog");this._formatDialog||(i>=3?(this._formatDialog=document.createElement("column-format-dialog"),document.body.appendChild(this._formatDialog),this._formatDialog.addEventListener("confirm",this._onFormatDialogDataChange)):i<2&&(this._formatDialog=document.createElement("tr-grid-format-dialog"),this._formatDialog.addEventListener("data-change",this._onFormatDialogDataChange))),e.supportDisplayStyleOptions||(e.supportDisplayStyleOptions={}),this._pcbp&&null==e.supportDisplayStyleOptions.bar&&(e.supportDisplayStyleOptions.bar=!0),this._hmp&&null==e.supportDisplayStyleOptions.heatmap&&(e.supportDisplayStyleOptions.heatmap=!0),this._ccp&&null==e.supportDisplayStyleOptions.conditionalColor&&(e.supportDisplayStyleOptions.conditionalColor=!0);var o=e.data||this.getColumnFormatOptions(t);this._formatDialog.init?(e.data=o,e.fields=e.fields||this.getFieldList(),this._formatDialog.init(e)):this._formatDialog.data=o,this._formatDialog.colIndex=t,this._formatDialog.show()},F.prototype.getColumnFormatOptions=function(t){var e={};this._tfp&&(e.valueFormatTab=this._tfp.getColumnFormatOptions(t),e.valueFormatTab.formatType||(e.valueFormatTab.formatType=this._getColumnData(t).fieldDataType));var i="general",o={};if(this._hmp&&(this._hmp.getColumnHeatMapOptions(t,o),null!=o.midPoint&&(i="heatmap")),this._ccp&&"heatmap"!=i){var n=this._ccp.getColumnPainter(t);if(n){var r=n.getConditions();if(r){var s,l=n.getColoringType(),a=n.inputField||this._constSelfColumn;if(e.colorTextTab={},n._blinkCondition&&(e.colorTextTab.highlight={field:n._blinkCondition.field,mode:n._blinkCondition.border?"border":"cell"}),1===l)(s=r[0])&&(e.colorTextTab.colorText={field:a});else if(3===l){i="conditionalColor",o.conditions=[],o.field=a;for(var u=r.length,d=0;d<u;++d){s=r[d];var h={};h.condition=s.condition||"",h.expression=s.expression;var c=s.value1;null==c&&(c=""),h.value1=c,null==(c=s.value2)&&(c=""),h.value2=c,h.color=s.color,h.backgroundColor=s.backgroundColor,o.conditions.push(h)}}}}}if(this._pcbp){var p=this._pcbp.getColumnConfigObject(t,o);p.percentBar&&(i="bar",(o=p.percentBar).showValues=!o.textHidden,null!=o.textHidden&&delete o.textHidden)}var _=e.displayStyleTab={};return _[i]=o,_.alignment=this.getColumnAlignment(t),_.mode=i,e.fieldDataType=this._getColumnData(t).fieldDataType,e},F.prototype.setColumnFormatOptions=function(t,e){if(e){var i=this._getField(t);if(this._tfp){var o=e.valueFormatTab;o&&("percent"===o.formatType&&(o.percentSign=!0),this._tfp.setColumnFormat(t,o))}if(this._ccp){var n=e.colorTextTab;n&&(n.field=i,this._ccp.setColumnColoring(t,n))}var r=e.displayStyleTab;if(r){var s=r.general,l=r.conditionalColor,a=r.heatmap,u=r.bar||r.percentBar,d=null;if(s?d=s.alignment:a?d=a.alignment:l?d=l.alignment:u&&(d=u.alignment),this._ccp&&l){if(this._pcbp&&this._pcbp.setColumnPercentBar(t,null),this._tfp){var h=this._tfp.getFormatter(t);h&&(l.textFormatter=h.format)}a?this._ccp.setColumnColoring(t,{}):(l.conditions.forEach(function(t){"string"==typeof t.expression&&(t.expression=t.expression.replace(this._constSelfColumn,i))}.bind(this)),this._ccp.setColumnColoring(t,l))}this._hmp&&a&&(this._pcbp&&this._pcbp.setColumnPercentBar(t,null),l?this._hmp.setColumnHeatMap(t,null):this._hmp.setColumnHeatMap(t,{field:i,heatmap:a})),this._pcbp&&u&&(null!=u.showValues&&(u.textHidden=!u.showValues),this._hmp&&this._hmp.setColumnHeatMap(t,null),this._ccp&&this._ccp.setColumnColoring(t,{}),this._pcbp.setColumnPercentBar(t,{field:i,percentBar:u})),this.setColumnAlignment(t,d),this._fromApi&&e&&e.fieldDataType&&this.setFieldDataType(t,e.fieldDataType)}}},F.prototype._onFormatDialogDataChange=function(t){var e=t.detail.data,i=this._formatDialog.colIndex;this._fromApi=!1,this.setColumnFormatOptions(i,e),this._fromApi=!0,this.hasListener("formatChanged")&&(e.colIndex=i,e.field=this._getField(i),this._compositeGrid&&this._compositeGrid.getColumnId&&(e.colId=e.columnId=this._compositeGrid.getColumnId(i)),this._dispatch("formatChanged",e))},F.prototype.setColumnAlignment=function(t,e){for(var i=this._hosts.length;--i>=0;)this._hosts[i].setColumnAlignment(t,e)},F.prototype.getColumnAlignment=function(t){var e=this._hosts[0];return e?e.getColumnAlignment(t):"default"},F.prototype.hasHiddenColumn=function(){for(var t=this.getColumnCount(),e=0;e<t;++e)if(this.isColumnHidden(e))return!0;return!1},F.prototype.isColumnHidden=function(t){var e=this._hosts[0];return!!e&&!e.getColumnVisibility(t,0)},F.prototype.hideColumn=function(t,e){for(var i=this._hosts.length,o=0;o<i;++o)this._hosts[o].hideColumn(t,e)},F.prototype.showAllColumns=function(){for(var t=this.getColumnCount(),e=0;e<t;++e)this.hideColumn(e,!1)},F.prototype.setFieldDataType=function(t,e){this._newColumnData(t).fieldDataType=e};var G=function(){this._groupMap={},this._childToParent={}};G.prototype._groupMap,G.prototype._childToParent,G.getGroupId=function(t){return t&&t.id||""},G.calcTreeDepth=function(t,e){for(var i=-1,o=e;o;){if(++i>15){console.log("WARNING: Infinite loop detected during column group creation");break}o=t[o.parentId]}return i},G.getLeafDescendants=function(t,e){var i=t[e];if(!i)return null;for(var o=[],n=[i],r=0,s={};r<n.length;){s[(i=n[r++]).id]=!0;for(var l=i.children,a=l?l.length:0,u=0;u<a;++u){var d=l[u];(i=t[d])?s[i.id]||n.push(i):o.push(d)}}return o},G._cloneObject=function(t){var e=(0,s.kI)(t);return Array.isArray(e.children)?e.children=e.children.slice():e.children=[],e},G._toGroupDefinition=function(t,e){var i=null;return t&&(i=Array.isArray(t)?{children:t.slice()}:G._cloneObject(t),e&&(i.id||(i.name=e),i.id=e)),i},G.prototype.toString=function(){var t=this._groupMap,e=[];for(var i in e.push("=== groupDefs ==="),t){var o=t[i];e.push(i+": "+JSON.stringify(o,["id","parentId","children"]))}return e.push("=== childToParent ==="),e.push(JSON.stringify(this._childToParent,null,2)),e.push(""),e.join("\n")},G.prototype.getGroup=function(t){return t&&this._groupMap[t]||null},G.prototype.getDefinition=G.prototype.getGroup,G.prototype.getGroups=function(){var t=[],e=this._groupMap;for(var i in e)t.push(e[i]);return t},G.prototype.getGroupIds=function(){return Object.keys(this._groupMap)},G.prototype.getGroupMap=function(){return this._groupMap},G.prototype.cloneGroupMap=function(){var t=this._groupMap,e={};for(var i in t){var o=t[i],n=G._cloneObject(o);e[i]=n}return e},G.prototype.rebuildMap=function(){var t,e,i=this._groupMap,o=this._childToParent={},n=Object.keys(i),r=n.length;for(t=0;t<r;++t)for(var s=i[e=n[t]].children,l=s?s.length:0,a=0;a<l;a++)o[s[a]]=e;for(t=0;t<r;++t){var u=o[e=n[t]];u&&(i[e].parentId=u)}},G.prototype.getGroupChildren=function(t){var e=this._groupMap[t];return e?e.children:null},G.prototype.getLeafDescendants=function(t){return G.getLeafDescendants(this._groupMap,t)},G.prototype.getGroupLevel=function(t){return G.calcTreeDepth(this._groupMap,this._groupMap[t])},G.prototype.getRootGroup=function(t){if(!t)return null;var e=this._groupMap,i=e[t]||null;if(i)for(;i.parentId;){var o=e[i.parentId];if(!o)break;i=o}return i},G.prototype.getParentGroup=function(t){return this.getGroup(this._childToParent[t])},G.prototype.getParentIds=function(t){if(t&&"string"==typeof t){var e=this._childToParent[t];if(e){for(var i=[e],o=this._groupMap[e];o&&o.parentId;)(o=this._groupMap[o.parentId])&&i.push(o.id);return i}}return null},G.prototype.getParentId=function(t,e){var i=this._childToParent[t];if(null!=e)for(var o=this.getGroupLevel(i);o>e&&i;)i=this._childToParent[i],o--;return i||""},G.prototype.removeAllGroups=function(){for(var t in this._groupMap)return this._groupMap={},this._childToParent={},!0;return!1},G.prototype.setGroups=function(t){for(var e=this._groupMap={},i=t?t.length:0,o=0;o<i;o++){var n=t[o],r=n.id;r&&(e[r]=G._cloneObject(n))}this.rebuildMap()},G.prototype.addGroup=function(t){var e=G.getGroupId(t);return e?this.setGroup(e,t):e},G.prototype.removeGroup=function(t){return!!this._groupMap[t]&&(this.removeAllChildren(t),this.unsetParent(t),delete this._groupMap[t],!0)},G.prototype.setGroup=function(t,e){if(!t)return"";if(e){var i=G._toGroupDefinition(e,t);this._ungroupChildren(i.children),this._groupMap[t]&&this.removeAllChildren(t);var o=this._childToParent[t];o&&(i.parentId=o.id),this._groupMap[t]=i;for(var n=i.children,r=n.length,s=0;s<r;++s){var l=n[s];this._childToParent[l]=t;var a=this._groupMap[l];a&&(a.parentId=t)}}else if(!this.removeGroup(t))return"";return t},G.prototype._ungroupChildren=function(t){if(Array.isArray(t))for(var e=t.length,i=0;i<e;++i)this.unsetParent(t[i])},G.prototype.hasGroupChild=function(t,e){var i=this._groupMap[t];if(e&&i){var o=i.children;if(o)return o.indexOf(e)>=0}return!1},G.prototype.contains=function(t,e){if(t&&e){if(t===e)return!0;for(var i=20,o=this._childToParent[e];o&&i;){if(t===o)return!0;--i,o=this._childToParent[o]}}return!1},G.prototype.addGroupChild=function(t,e,i){var o=this._groupMap[t];if(e&&o){var n=o.children;if(n&&n.indexOf(e)<0){this.unsetParent(e),this._childToParent[e]=t;var r=this._groupMap[e];return r&&(r.parentId=t),null!=i&&i>=0?n.splice(i,0,e):n.push(e),!0}}return!1},G.prototype.removeGroupChild=function(t,e){return null==e?this.unsetParent(t):!!this.hasGroupChild(t,e)&&this.unsetParent(e)},G.prototype.unsetParent=function(t){var e=this._childToParent[t];if(!e)return!1;this._childToParent[t]="";var i=this._groupMap[t];i&&(i.parentId="");var o=this._groupMap[e];if(o){var n=o.children;if(n&&n.length){var r=n.indexOf(t);r>=0&&n.splice(r,1)}}return!0},G.prototype.removeAllChildren=function(t){var e=this._groupMap[t];if(e){var i=e.children,o=i?i.length:0;if(o){e.children=[];for(var n=0;n<o;++n){var r=i[n];this._childToParent[r]&&(this._childToParent[r]="");var s=this._groupMap[r];s&&(s.parentId="")}return!0}}return!1},G.prototype.setGroupChildren=function(t,e){var i=this._groupMap[t];if(i){if(Array.isArray(e)){var o=e.slice();this._ungroupChildren(o),this.removeAllChildren(t),i.children=o;for(var n=i.id,r=o.length,s=0;s<r;++s){var l=o[s];this._childToParent[l]=n;var a=this._groupMap[l];a&&(a.parentId=n)}return!0}if(!e&&i.children.length)return this.removeAllChildren(t),!0}return!1},G.prototype.getGroupName=function(t){var e=this._groupMap[t];return e&&e.name||""},G.prototype.setGroupName=function(t,e){var i=this._groupMap[t];return!(!i||i.name===e||(i.name=e,0))};var B=function(t){var e=this;e._hosts=[],e._onColumnChanged=e._onColumnChanged.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._onColumnMoved=e._onColumnMoved.bind(e),e._onColumnRemoved=e._onColumnRemoved.bind(e),e._requestApplyAddChildGroup=e._requestApplyAddChildGroup.bind(this),e._onPostSectionRender=e._onPostSectionRender.bind(e),e._onBeforeColumnBoundUpdate=e._onBeforeColumnBoundUpdate.bind(e),e._groupDefs=new G,t&&e.config({columnGrouping:t})};o.p.inherits(B,a),B.prototype._groupDefs,B.prototype._visibleGroupMap,B.prototype._maxDepth=0,B.prototype._restructuring=!1,B.prototype._rerenderTimerId=0,B.prototype._groupHeaderTimerId=0,B.prototype._addingTimerId=0,B.prototype._addingEvents=null,B.prototype._legacyColumnGroups=null,B.prototype._selectedColMap,B._ascSortLogic=function(t,e){return t-e},B._getTooltip=function(t){var e=t.tooltip,i=t.title||t.name;if(null!=e){if("string"==typeof e)return e;if(!0===e)return i;if(!1===e)return""}return i},B._hasGroupId=function(t){return!(!t||!t.id)},B._toGroupDefinition=function(t,e){var i=null;return t&&(i=Array.isArray(t)?{children:t}:B._cloneObject(t),e&&(i.id||(i.name=e),i.id=e)),i},B._cloneObject=function(t){var e=(0,s.kI)(t);return Array.isArray(e.children)?e.children=e.children:e.children=[],e},B._flattenGroupDefs=function(t){for(var e=t?t.length:0,i=0;i<e;i++)B._recursivelyFlatten(t[i],t)},B._recursivelyFlatten=function(t,e){if(t&&t.children)for(var i,o,n=t.children,r=0;r<n.length;r++)"string"!=typeof(i=n[r])&&(o=i.id)&&(n[r]=o,e.indexOf(i)<0&&e.push(i),B._recursivelyFlatten(i,e))},B._isNotTimeSeriesGroup=function(t){return!t.timeSeriesGroup},B.prototype.getName=function(){return"ColumnGroupingPlugin"},B.prototype.hasMultiTableSupport=function(){return!0},B.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),"function"==typeof t.setColumnGrouping&&t.setColumnGrouping(this._groupDefs),this._addingEvents||(this._addingEvents=[]),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnAdded),t.listen("columnMoved",this._onColumnMoved),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnVisibilityChanged",this._onColumnChanged),t.listen("postSectionRender",this._onPostSectionRender),t.listen("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate)),this.config(e),this._legacyColumnGroups=null,this._initializedGrid&&t.getSection("title")&&this._applyGrouping(),B._styles||(B._styles=(0,s.CA)([".tr-grid .title .column .cell:not(:last-child)",["box-shadow: none;"]])),t._columnGroupingStyles||(t._columnGroupingStyles=!0,(0,s.kM)(B._styles,t.getElement())))},B.prototype.beforeProcessOption=function(t,e){if("columnGroups"===t)return this._legacyColumnGroups=e,!1},B.prototype._afterInit=function(){this._applyGrouping()},B.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),"function"==typeof t.setColumnGrouping&&t.setColumnGrouping(null),t.unlisten("columnAdded",this._onColumnChanged),t.unlisten("columnMoved",this._onColumnMoved),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("postSectionRender",this._onPostSectionRender),t.unlisten("beforeColumnBoundUpdate",this._onBeforeColumnBoundUpdate),this._hosts.length||(this._rerenderTimerId&&(clearTimeout(this._rerenderTimerId),this._rerenderTimerId=0),this._groupHeaderTimerId&&(clearTimeout(this._groupHeaderTimerId),this._groupHeaderTimerId=0),this._addingTimerId&&(clearTimeout(this._addingTimerId),this._addingTimerId=0,this._addingEvents.length=0)),this._dispose())},B.prototype.config=function(t){if(t){var e=t.columnGrouping,i=null;Array.isArray(e)&&(i=(i=e.filter(B._hasGroupId)).map(B._cloneObject));var o=t.columns;o&&(i=this._migrateLegacyStructure(i,o)),i&&(B._flattenGroupDefs(i),this._groupDefs.setGroups(i))}},B.prototype.getConfigObject=function(t){var e=t||{},i=this.getGroupDefinitions();return(i=i.filter(B._isNotTimeSeriesGroup)).length&&(e.columnGrouping=i),e},B._mapParentToChildren=function(t,e,i){if(e&&i){var o=t[e];return o||(o=t[e]=[]),o.push(i),!0}return!1},B.prototype._migrateLegacyStructure=function(t,e){var i=this._legacyColumnGroups;if(!i||!this._compositeGrid)return t;t||(t=[]);for(var o=e.length,n={},r=0;r<o;++r){var s=e[r];s&&B._mapParentToChildren(n,s.columnGroup,s.id)}var l,a,u=i.length;for(l=0;l<u;++l)(a=i[l])&&B._mapParentToChildren(n,a.parent,a.id);for(l=0;l<u;++l)if((a=B._cloneObject(i[l]))&&a.id){var d=n[a.id];a.children=d||[],a.formatter&&a.formatter.render&&(a.legacyRender=a.formatter.render,delete a.formatter),t.push(a)}return t.filter(B._hasGroupId)},B.prototype._freezeColumn=function(t,e){for(var i=this._hosts,o=0;o<i.length;o++)i[o].freezeColumn(t,e)},B.prototype._applyPinning=function(){var t,e,i,o=this.getColumnCount(),n=this.getColumnIds(),r=this._hosts[0].getFrozenColumnCount()-1,s=this._hosts[0].getFirstPinnedRightIndex(),l=!1;for(t=o;t>r;t--)if(e=this._groupDefs.getParentId(n[t]),(i=this._visibleGroupMap[e])&&i.leftPinned){r=t,l=!0;break}for(t=r;t<s;t++)if(e=this._groupDefs.getParentId(n[t]),(i=this._visibleGroupMap[e])&&i.rightPinned){s=t,l=!0;break}if(l){var a=o-s;this._freezeColumn(r,a)}},B.prototype._applyGrouping=function(){if(this._rerenderTimerId=0,!this._restructuring){var t,e,i,o,n,r;this._restructuring=!0,this._evaluateGroupStructure(),this._applyPinning();var s=this._maxDepth+1,l=this._hosts.length;for(t=l;--t>=0;)if(n=this._hosts[t].getSection("title")){for(n.setRowCount(s),n.clearCellSpans(),r=n.getColumnCount(),e=0;e<r;e++)for(i=0;i<s;i++)(o=n.getCell(e,i,!1))&&(o.removeClass("no-sort"),o.removeClass("selected-group"),o.removeAttribute("group-id"));this._spanGroupVertically(n),this._spanGroupHorizontally(n)}for(this._restructuring=!1,t=l;--t>=0;){var a=this._hosts[t].getSectionSettings("title");a&&a.rerender()}}},B.prototype._evaluateGroupStructure=function(){var t=this._visibleGroupMap=this._groupDefs.cloneGroupMap();this._verifySingleChild(t),this._verifyColumnPinning(t);var e=this._maxDepth=-1;for(var i in t){var o=t[i],n=o.parentId;n&&(t[n]||(o.parentId=""));var r=G.calcTreeDepth(t,o);o.onRow=r,r>e&&(e=r)}this._maxDepth=e+1},B.prototype._setGroupPinning=function(t,e){if(t&&!t.leftPinned&&!t.rightPinned){"left"===e?t.leftPinned=!0:t.rightPinned=!0;for(var i=t.children,o=0;o<i.length;o++){var n=i[o],r=this._visibleGroupMap[n];r&&this._setGroupPinning(r,e)}}},B.prototype._verifyColumnPinning=function(t){var e,i,o,n,r=this._hosts[0],s=r.getFrozenColumnCount()-1,l=r.getFirstPinnedRightIndex(),a=this.getColumnCount(),u=this._groupDefs,d=this._visibleGroupMap;if(s>=0)for(e=s;e>=0;e--)n=this.getColumnId(e),(i=u.getParentId(n))&&d[i]&&(o=u.getRootGroup(i))&&this._setGroupPinning(d[o.id],"left");if(l<a)for(e=l;e<a;e++)n=this.getColumnId(e),(i=u.getParentId(n))&&d[i]&&(o=u.getRootGroup(i))&&this._setGroupPinning(d[o.id],"right")},B.prototype._verifySingleChild=function(t){if(this.getGridApi()){var e,i,o=this._hosts[0],n=this.getColumnCount(),r={};for(e=0;e<n;e++){var s=this.getColumnId(e);s&&o.isColumnVisible(e)&&(r[s]=1)}var l=Object.keys(t),a=l.length;for(e=0;e<a;e++)r[l[e]]=1;for(var u=!0;u;)for(u=!1,e=0;e<a;e++){var d=l[e],h=t[d];if(h){var c=h.children,p=c.length,_=[];for(i=0;i<p;i++){var g=c[i];r[g]&&_.push(g)}_.length<2?(delete t[d],r[d]=0,u=!0):h.children=_}}}},B.prototype._requestApplyGrouping=function(){this._rerenderTimerId||(this._rerenderTimerId=setTimeout(this._applyGrouping.bind(this),10))},B.prototype._requestGroupRendering=function(){this._groupHeaderTimerId||(this._groupHeaderTimerId=setTimeout(this.renderGroups.bind(this),10))},B.prototype._applyNearestGrouping=function(t){if(!(null==t||t<0)){var e=this.getColumnId(t),i=t-1,o=t+1,n=this.getGroupIds(i),r=this.getGroupIds(o),s=n?n.length:0,l=r?r.length:0,a=this._groupDefs.getParentId(e);if(a){var u=this._groupDefs.getGroupChildren(a),d=u?u.length:0;if(d<=1)return;if(s&&n[0]===a)return;if(l&&r[0]===a)return;if(this._groupDefs.unsetParent(e)&&1===(d=(u=this._groupDefs.getGroupChildren(a))?u.length:0)){var h=this._groupDefs.getParentId(a);h&&this._groupDefs.addGroupChild(h,u[0])}}if(s&&l)for(var c=0;c<s;c++){var p=n[c],_=r.indexOf(p);if(_>=0){this._groupDefs.addGroupChild(r[_],e);break}}}},B.prototype._spanGroupVertically=function(t){var e=this.getGridApi();if(e)for(var i=this._hosts[0],o=this._maxDepth+1,n=e.getColumnCount(),r=0;r<n;r++){var s=o,l=this._getVisibleParentGroup(this.getColumnId(r));l&&(s=o-(l.onRow+1)),i.isColumnVisible(r)&&s>1&&t.setCellRowSpan(r,o-s,s)}},B.prototype._spanGroupHorizontally=function(t){var e,i,o,n,r,s,l=t,a=this._visibleGroupMap;for(var u in a){i=[],e=a[u],n=G.getLeafDescendants(a,u);var d=!!this._selectedColMap;for(s=0;s<n.length;s++){var h=n[s];(r=this._getColumnIndexById(h))>-1&&i.push(r),d&&this._selectedColMap&&(d&=this._selectedColMap[h])}if(i.sort(B._ascSortLogic),(o=i.length)>0){var c=i[0],p=i[o-1];l.setCellColSpan(c,e.onRow,p-c+1),e.colIndex=c,d&&l.getCell(c,e.onRow).addClass("selected-group")}}},B.prototype.renderGroups=function(){this._groupHeaderTimerId=0;for(var t=this._hosts.length,e=this._visibleGroupMap,i=0;i<t;++i){var o=this._hosts[i].getSection("title");if(o)for(var n in e)this._renderGroup(e[n],o)}},B.prototype._renderGroup=function(t,e){var i=t.colIndex;if(null!=i){var o=t.onRow,n=e.getCell(i,o),r=G.getLeafDescendants(this._visibleGroupMap,t.id),s=!1;if(this._selectedColMap){s=!0;for(var l=0;l<r.length;l++)if(!this._selectedColMap[r[l]]){s=!1;break}}if(n&&(n.setStyle("text-align",t.alignment||""),n.setTooltip(B._getTooltip(t)),n.setContent(t.name||t.title),n.addClass("no-sort"),n.setAttribute("group-id",t.id),s?n.addClass("selected-group"):n.removeClass("selected-group"),t.legacyRender&&t.legacyRender(i,n,t),t.render)){var a={};a.cell=n,a.colIndex=i,a.groupNode=t,t.render(a)}}},B.prototype._onPostSectionRender=function(t){"title"!==t.sectionType||this._restructuring||this.renderGroups()},B.prototype._requestApplyAddChildGroup=function(t){var e=t.context;e&&e.parent&&(this._addingEvents.push(t),this._addingTimerId||(this._addingTimerId=setTimeout(this._applyTimeSeries.bind(this,t),10)))},B.prototype._applyTimeSeries=function(t){this._addingTimerId=0;var e=this._addingEvents;if(this._addingEvents=[],e.length>0){for(var i,o,n=[],r={},s=0;s<e.length;s++){var l,a,u=e[s];o=u.context.timeSeriesName,r[i=u.context.timeSeriesId]?(l=u.colIndex,a=this.getColumnId(l),r[i].children.push(a)):(r[i]={name:o,children:[]},l=u.colIndex,a=this.getColumnId(l),r[i].children.push(a))}for(i in r){var d="timeSerieGroup_"+i;if(this._groupDefs.getGroup(d))for(s=0;s<n.length;s++)this._groupDefs.addGroupChild(d,n[s]);else this.addGroup({id:d,title:r[i].name,children:r[i].children,timeSeriesGroup:!0})}}this._requestApplyGrouping()},B.prototype._onColumnAdded=function(t){var e=t.batches;e&&e.reset||(this._requestApplyAddChildGroup(t),this._applyNearestGrouping(t.colIndex)),this._requestApplyGrouping()},B.prototype._onColumnChanged=function(){this._requestApplyGrouping()},B.prototype._onColumnMoved=function(t){var e=t.batches;e&&e.move||this._applyNearestGrouping(t.toColIndex),this._requestApplyGrouping()},B.prototype._onColumnRemoved=function(t){var e=t.batches;if(e&&e.reset)this._requestApplyGrouping();else{var i=t.colId;i&&this._groupDefs.unsetParent(i)&&this._requestApplyGrouping()}},B.prototype._onBeforeColumnBoundUpdate=function(t){var e,i,o,n,r=t.selectedColumns,s=[],l={};for(e=0;e<r.length;e++)if(i=this.getColumnId(r[e])){if(!(n=this._groupDefs.getParentId(i))){o=i;break}l[n]=this._groupDefs.getGroup(n),s.push(i)}if(o)t.topBoundRowIndex=0;else{var a,u,d,h,c,p,_,g=this._maxDepth,f={};for(n in l)f[(u=this._groupDefs.getRootGroup(n)).id]=u,(a=l[n].onRow+1)<g&&(g=a);var m=f;for(e=0;e<g;e++)for(n in p=m,m={},p){if(u=p[n],c=!0,(h=this._groupDefs.getLeafDescendants(n)).length<=s.length){for(d=0;d<h.length;d++)if(s.indexOf(h[d])<0){c=!1;break}if(c)return void(t.topBoundRowIndex=e)}for(_=u.children,d=0;d<_.length;d++){var v=_[d];(u=this._groupDefs.getGroup(v))&&(m[v]=u)}}t.topBoundRowIndex=g}},B.prototype.addColumnToGroup=function(t,e,i){if(t){var o=this.getColumnCount();null!=i&&(this._groupDefs.getGroup(e)&&this._groupDefs.addGroupChild(e,t.id),o=i),this._realTimeGrid?this._realTimeGrid.insertColumn(t,o):this._compositeGrid&&this._compositeGrid.insertColumn(o,t),null==i&&this.setColumnParent(t.id||destColIndex,e)}},B.prototype.addGroup=function(t){return B._hasGroupId(t)?this.setGroupDefinition(t.id,t):""},B.prototype.addColumnGrouping=B.prototype.addGroup,B.prototype.removeGroup=function(t){return!!this._groupDefs.removeGroup(t)&&(this._applyGrouping(),!0)},B.prototype.getGroupDefinition=function(t){var e=this._getAvaliableChildren(t);if(e.length>1){var i=this._groupDefs.getGroup(t);return(i=B._cloneObject(i)).children=e,i}return null},B.prototype.getGroupDefinitions=function(){var t=[],e=this._groupDefs.getGroupMap();for(var i in e){var o=this.getGroupDefinition(i);o&&(delete o.parentId,t.push(o))}return t},B.prototype.setGroupDefinition=function(t,e){if(this._groupDefs.setGroup(t,e)){var i=this._groupDefs.getGroup(t);if(i){var o=this._hosts[0].getValidColumnList(i.children).map(B.getObjectId);o.length>1&&this.reorderColumns(o,o[0])}return this._applyGrouping(),t}return""},B.prototype.setGroupDefinitions=function(t){t=Array.isArray(t)?(t=t.filter(B._hasGroupId)).map(B._cloneObject):null,B._flattenGroupDefs(t),this._groupDefs.setGroups(t),this._applyGrouping()},B.prototype.setGroupChildren=function(t,e){return!!this._groupDefs.setGroupChildren(t,e)&&(this._applyGrouping(),!0)},B.prototype.setGroupName=function(t,e){if(this._groupDefs.setGroupName(t,e)){var i=this._visibleGroupMap[t];if(i){i.name=e;for(var o=this._hosts.length,n=0;n<o;++n){var r=this._hosts[n].getSection("title");r&&this._renderGroup(i,r)}}}},B.prototype._getAvaliableChildren=function(t){var e=this._groupDefs.getGroupChildren(t),i=e?e.length:0,o=[];if(i){o=this._hosts[0].getValidColumnList(e).map(B.getObjectId);for(var n=this._groupDefs.getGroupMap(),r=0;r<i;r++){var s=e[r];n[s]&&o.push(s)}}return o},B.prototype.getGroupChildren=function(t){var e=this._getAvaliableChildren(t);return e.length>1?e:null},B.prototype.getChildColumnIndices=function(t){var e=this._hosts[0],i=this._groupDefs.getLeafDescendants(t);return i?e.getValidColumnList(i).map(B.getObjectIndex):null},B.prototype.getGroupIds=function(t){if(null==t)return null;var e="number"==typeof t?this.getColumnId(t):t;return this._groupDefs.getParentIds(e)},B.prototype.getMaxGroupLevel=function(){return this._maxDepth},B.prototype.getGroupLevel=function(t){var e=this._visibleGroupMap[t];return e?e.onRow:-1},B.prototype._getColumnIndexById=function(t){if(this.getGridApi()&&t)for(var e=this._hosts[0],i=e.getColumnCount(),o=0;o<i;o++)if(this.getColumnId(o)===t&&e.isColumnVisible(o))return o;return-1},B.prototype._getVisibleParentGroup=function(t){return this._visibleGroupMap[this._groupDefs.getParentId(t)]||null},B.prototype.getCellInfo=function(t){var e=this.getGridApi(),i=t.grid||this.getRelativeGrid(t);if(!e||!i)return null;var o=i.getCellInfo(t);if(!o)return t;if(!o.cell){var n=o.section.getCell(o.colIndex,o.rowIndex);o.cell=n}var r=this.getColumnId(o.colIndex),s=this._groupDefs.getParentId(r,"title"==o.sectionType?o.rowIndex:null);if(!s)return o.columnId=r,o;var l=this._groupDefs.getGroup(s);if(l){var a="title"==o.sectionType&&o.rowIndex==this.getGroupLevel(s);a?(o.groupId=l.id,o.groupName=l.name||"",o.children=l.children):o.columnId=r,o.parent=a?l.parentId||null:l.id}return o},B.prototype.moveColumnIntoGroup=function(t,e,i){var o=this.getColumnIndex(t);if(-1!=o){var n=this._groupDefs.getGroup(i);if(n){var r=this.getChildColumnIndices(i),s=-1,l=-1;r&&r.length?(s=r[0],l=r[r.length-1]):(s=0,l=this.getColumnCount()),e<s?(e=s)>o&&(e-=1):e>l&&(e=l)<o&&(e+=1);for(var a=0;a<n.children.length;a++){var u=this.getChildColumnIndices(n.children[a]);if(u&&u.length){var d=u[0],h=u[u.length-1];e>o&&(d-=1),e<o&&(h+=1),e>d&&e<h&&(e=h)}}for(var c=this.getColumnId(o),p=this._hosts.length;--p>=0;)this._hosts[p].moveColumn(o,e);c&&this._groupDefs.addGroupChild(i,c)&&this._applyGrouping()}else for(var _=this._hosts.length;--_>=0;)this._hosts[_].moveColumn(o,e)}},B.prototype.setColumnParent=function(t,e){return e?this.addGroupChild(e,t):this.unsetParent(t)},B.prototype.addGroupChild=function(t,e){if(!this._groupDefs.getGroup(t))return!1;var i="";if("string"==typeof e)if(this._groupDefs.getGroup(e)){if(this._groupDefs.addGroupChild(t,e))return this._applyGrouping(),!0}else i=e;else i=this.getColumnId(e);if(!i)return!1;var o=this.getChildColumnIndices(t);return!!this._groupDefs.addGroupChild(t,i)&&(o&&o.length&&this.moveColumnById(i,o[o.length-1]+1)||this._applyGrouping(),!0)},B.prototype.removeGroupChild=function(t,e){if(!this._groupDefs.getGroup(t))return!1;var i="";if("string"==typeof e)if(this._groupDefs.getGroup(e)){if(this._groupDefs.unsetParent(e))return this._applyGrouping(),!0}else i=e;else i=this.getColumnId(e);if(!i)return!1;var o=t;0!==this._visibleGroupMap[t].onRow&&(o=this._groupDefs.getParentId(t,0));var n=this.getChildColumnIndices(o);return!!this._groupDefs.removeGroupChild(t,i)&&(n&&n.length>1&&this.moveColumnById(i,n[n.length-1]+1)||this._applyGrouping(),!0)},B.prototype.unsetParent=function(t){var e="string"==typeof t?t:this.getColumnId(t),i=this._groupDefs.getParentId(e);return!!i&&this.removeGroupChild(i,e)},B.prototype.getValidDestinationIndex=function(t,e){var i=null;(this._groupDefs.getGroup(t)||this.getColumnIndex(t)>-1)&&(i=this._getVisibleParentGroup(t));var o=-1,n=-1,r="string"==typeof e?this.getColumnIndex(e):e;if(i){var s=this.getChildColumnIndices(i.id);s&&s.length&&(o=s[0],n=s[s.length-1]),r<o&&-1!=r?r=this.getColumnId(o):(r>n||-1==r)&&(r=this.getColumnId(n+1));for(var l=this.getGroupChildren(i.id),a=0;a<l.length;a++){var u=l[a],d=this.getChildColumnIndices(u);if(d&&d.length&&(o=d[0],n=d[d.length-1],r>o&&r<=n)){r=n+1;break}}}else{var h=[],c=this.getColumnId(r),p=this._getVisibleParentGroup(c);p&&(p.parentId&&(p=this._groupDefs.getRootGroup(p.id)),h=this.getChildColumnIndices(p.id)),h&&h.length&&(o=h[0],n=h[h.length-1],r>o&&r<=n&&(r=n+1))}return r},B.prototype.moveGroup=function(t,e){var i,o=[];if(i=this._groupDefs.getGroup(t))for(var n=this.getChildColumnIndices(i.id),r=0;r<n.length;r++){var s=n[r],l=this.getColumnId(s);o.push(l)}else{if(!(this.getColumnIndex(t)>-1))return;o.push(t)}var a=this.getValidDestinationIndex(t,e),u=this.getColumnId(a);this.reorderColumns(o,u)},B.prototype.reorderColumns=function(t,e){return this._reorderColumns(t,e)},B.prototype.moveColumnById=function(t,e){return this._moveColumnById(t,e)},B.prototype.pinGroup=function(t,e){if(t){var i=this._visibleGroupMap[t];if(i){var o,n=this._hosts[0],r=n.getFrozenColumnCount()-1,s=n.getPinnedRightColumnCount(),l=this.getColumnCount(),a=this.getChildColumnIndices(t).length;if("right"===e){if(i.rightPinned)return;i.leftPinned&&(this.unpinGroup(t),r=n.getFrozenColumnCount()-1),i.rightPinned=!0,o=l-s,s+=a}else{if(i.leftPinned)return;i.rightPinned&&(this.unpinGroup(t),s=n.getPinnedRightColumnCount()),i.leftPinned=!0,o=-1===r?0:r+1,r+=a}this.moveGroup(t,o),this._freezeColumn(r,s)}}},B.prototype.unpinGroup=function(t,e){if(t){var i=this._visibleGroupMap[t];if(i&&(i.leftPinned||i.rightPinned)){var o=this._hosts[0],n=o.getFrozenColumnCount(),r=o.getPinnedRightColumnCount(),s=this.getColumnCount()-r,l=this.getChildColumnIndices(t).length,a=null;if(null!=e){var u=this.getColumnIndex(e);a=this.getColumnId(u)}i.leftPinned?(i.leftPinned=!1,this.moveGroup(t,n),this._freezeColumn(n-(1+l))):i.rightPinned&&(i.rightPinned=!1,this.moveGroup(t,s),this._freezeColumn(n-1,r-l)),null!=a&&this.moveGroup(t,a)}}},B.prototype.selectGroupHeaders=function(t){var e=this._hosts[0],i=t.length;if(e&&i){for(var o=[],n=0;n<i;n++)o.push(e.getColumnId(t[n]));var r=e.createColumnMap(o);r&&(this._selectedColMap=r)}else this._selectedColMap=null;this._requestGroupRendering()},B.getObjectIndex=function(t){return t.index},B.getObjectId=function(t){return t.id};var L=function(t){var e=this;e._onPreSectionRender=e._onPreSectionRender.bind(e),e._requestResizerUpdate=e._requestResizerUpdate.bind(e),e._updateResizers=e._updateResizers.bind(e),e._onTimer=e._onTimer.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._onDrag=e._onDrag.bind(e),e._onDragEnd=e._onDragEnd.bind(e),e._onDragStart=e._onDragStart.bind(e),e._onDblClick=e._onDblClick.bind(e),e._updateHandlebar=e._updateHandlebar.bind(e),e._hosts=[],e._guideline=f.i.create("svg","tr-guideline"),t&&e.config({columnResizing:t})};function O(t){return O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},O(t)}o.p.inherits(L,a),L._styles=(0,s.CA)([".tr-pipe-resizer .resizer",["display: none;"],".tr-pipe-resizer .selected-column .resizer",["display: block;","width: 16px;","right: 0;","box-sizing: border-box;","padding-left: 4px;","text-align: center;"],".tr-pipe-resizer .selected-column.last .resizer",["right: 0;"],".tr-pipe-resizer .selected-column .floating-panel",["display: none;"],".tr-pipe-resizer .selected-column .resizer:before, .tr-pipe-resizer .selected-column .resizer:after",['content: "";',"display: inline-block;","vertical-align: middle;"],".tr-pipe-resizer .selected-column .resizer:before",["border-left: 1px solid #ff9933;","border-right: 1px solid #ff9933;","width: 2px;","height: 45%;"],".tr-pipe-resizer .selected-column .resizer:after",["width: 0;","height: 100%;"],"body:not(.tr-dragging) .tr-pipe-resizer .selected-column>.cell",["border-right-width: 2px;","border-right-style: solid;"],".tr-pipe-resizer .selected-column>.cell",["border-right-color: #ff9933;"],'.pearl .tr-pipe-resizer .selected-column .resizer:before, [theme="pearl"] .tr-pipe-resizer .selected-column .resizer:before',["border-left-color: #ee7600;","border-right-color: #ee7600;"],'.pearl .tr-pipe-resizer .selected-column>.cell [theme="pearl"] .tr-pipe-resizer .selected-column>.cell',["border-right-color: #ee7600;"],".tr-handlebar",["position: absolute;","box-sizing: border-box;","cursor: e-resize;","width: 10px;","margin-left: -4px;","border-radius: 5px;","height: 32px;","top: calc(50% - 16px);","box-sizing: border-box;","text-align: center;","background-color: #ff9933;","pointer-events: all;"],".tr-dragging .tr-handlebar",["pointer-events: none;"],".tr-hb-guideline.tr-guideline",["width: 2px;","height: 100%;"],".tr-handlebar:before, .tr-handlebar:after",['content: "";',"display: inline-block;","vertical-align: middle;"],".tr-handlebar:before",["border-left: 1px solid #000;","border-right: 1px solid #000;","width: 2px;","height: 55%;"],".tr-handlebar:after",["width: 0;","height: 100%;"]]),L._applyStyles=function(t){t&&!t._columnResizingStyles&&(t._columnResizingStyles=!0,(0,s.kM)(L._styles,t.getElement()))},L.prototype._anchorX=0,L.prototype._guideX=0,L.prototype._diffX=0,L.prototype._dragIndex=-1,L.prototype._draggedGrid=null,L.prototype._keepProportion=!1,L.prototype._keepGridSize=!1,L.prototype._pipe=!1,L.prototype._hbMode=!1,L.prototype._handlebar=null,L.prototype._guideline,L.prototype._updateTimer=0,L.prototype._activeResizer=null,L.prototype._disabled=!1,L.prototype.getName=function(){return"ColumnResizingPlugin"},L.prototype.beforeProcessOption=function(t,e){if("columnResizability"==t)return!1},L.prototype.hasMultiTableSupport=function(){return!0},L.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),1===this._hosts.length&&(t.listen("columnMoved",this._requestResizerUpdate),t.listen("columnRemoved",this._requestResizerUpdate),t.listen("columnAdded",this._requestResizerUpdate),t.listen("columnAdded",this._onColumnAdded)),t.listen("preSectionRender",this._onPreSectionRender),this.config(e),L._applyStyles(t),this._updateResizerCount(t))},L.prototype.unload=function(t){var e=this._hosts.indexOf(t);if(!(e<0)){this._hosts.splice(e,1),t.unlisten("columnMoved",this._requestResizerUpdate),t.unlisten("columnRemoved",this._requestResizerUpdate),t.unlisten("columnAdded",this._requestResizerUpdate),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("preSectionRender",this._onPreSectionRender),this._updateTimer&&(clearTimeout(this._updateTimer),this._updateTimer=0);var i=t.getSection("title");if(i)for(var o=t.getColumnCount();--o>=0;){var n=i.getColumn(o);if(n._resizers){for(var r=n._resizers.length,s=0;s<r;++s){var l=n._resizers[s];l.dispose?l.dispose():f.i.removeParent(l)}n._resizers=null}}this._hosts.length||(this._compositeGrid=null)}},L.prototype.config=function(t){if(t){var e=this._hosts[this._hosts.length-1],i=t.columnResizing;i&&(i.preserveProportion&&(this._keepProportion=!0,e&&e.preserveProportion(!0)),i.preserveGridSize&&(this._keepGridSize=!0,e&&e.preserveGridSize(!0)),i.noResizing&&(this._disabled=!0),i.pipeHandle?this.enablePipeHandleMode():i.handlebar&&this.enableHandlebarMode(),this.addListener(i,"columnResized"),this.addListener(i,"dblClicked"),this.addListener(i,"dragStart"),this.addListener(i,"dragEnd"));var o=t.columns;if(o)for(var n=o.length,r=0;r<n;++r)this._configColumn(e,r,o[r])}},L.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this._getColumnOption(n,"noResizing",this._hosts[0]);s&&(r.noResizing=s);var l=this._getColumnOption(n,"defaultWidth",this._hosts[0]);"number"==typeof l&&(r.defaultWidth=l)}var a=e.columnResizing;return a||(a=e.columnResizing={}),a.preserveProportion=this._keepProportion,a.preserveGridSize=this._keepGridSize,a.noResizing=this._disabled,a.pipeHandle=this._pipe,a.handlebar=this._hbMode,e},L.prototype._configColumn=function(t,e,i){if(i){i.noResizing&&(this._newColumnData(e).noResizing=!0);var o=i.defaultWidth;"number"==typeof o&&(this._newColumnData(e).defaultWidth=o,t&&t.setColumnDefaultWidth(e,o))}},L.prototype._afterInit=function(){this._compositeGrid&&this._compositeGrid.getCoreGrid().unloadPlugin("ResizableTitlePlugin")},L.prototype.disableResizing=function(t,e){this._newColumnData(t).noResizing=!1!==e;for(var i=this._hosts.length;--i>=0;)this._updateResizerCount(this._hosts[i])},L.prototype.getDraggedColumnIndex=function(){return this._dragIndex},L.prototype.getDraggedAnchorX=function(){return this._anchorX},L.prototype.setColumnWidths=function(t,e,i){for(var o=this.getColumnCount(),n=new Array(o),r="number"==typeof e,s=0;s<t.length;s++)n[t[s]]=r?e:e[s];for(var l=this._hosts.length;--l>=0;)this._hosts[l].setColumnWidths(n,i)},L.prototype.setAllColumnWidths=function(t,e){var i,o=this.getColumnCount(),n=new Array(o);for(i=0;i<o;i++)n[i]=t;var r=!1;for(i=this._hosts.length;--i>=0;)r|=this._hosts[i].setColumnWidths(n,e);return!!r},L.prototype.getColumnWidths=function(){for(var t=this.getColumnCount(),e=this._hosts[0],i=new Array(t),o=0;o<t;o++)i[o]=e.getColumnWidth(o);return i},L.prototype.resetAllColumnsToDefaultWidth=function(){for(var t=!1,e=this._hosts,i=0;i<e.length;i++)t|=e[i].resetColumnWidths();return!!t},L.prototype.getColumnSizeStates=function(){for(var t=this.getColumnCount(),e=this._hosts[0],i=new Array(t),o=0;o<t;o++)i[o]={width:e.getColumnWidth(o),scalability:e.getColumnScalability(o)};return i},L.prototype.setColumnSizeStates=function(t){var e=this._hosts[0];"string"==typeof t&&(t=JSON.parse(t)),e.freezeLayout(),t.forEach((function(t,i){return e.setColumnWidth(i,t.width,t.scalability)})),e.unfreezeLayout()},L.prototype.enablePipeHandleMode=function(t){for(var e=this._pipe=!1!==t,i=this._hosts.length,o=0;o<i;++o)this._hosts[o].enableClass("tr-pipe-resizer",e)},L.prototype.enableHandlebarMode=function(t){if(this._hbMode=!1!==t){var e=this._getCSP();e?e.listen("selectionChanged",this._updateHandlebar):setTimeout(this._onTimer,100)}else this._handlebar&&(f.i.removeParent(this._handlebar),this._guideline.classList.remove("tr-hb-guideline"),this._handlebar=null)},L.prototype._requestResizerUpdate=function(t){this._updateTimer||(this._updateTimer=setTimeout(this._updateResizers,10))},L.prototype._updateResizers=function(){if(this._updateTimer=0,this._hbMode)this._updateHandlebar();else for(var t=this._hosts.length;--t>=0;){var e=this._hosts[t];this._updateResizerCount(e)}},L.prototype._onPreSectionRender=function(t){"title"===t.sectionType&&this._updateResizerCount(t.sender)},L.prototype._onTimer=function(){if(this._hbMode){var t=this._getCSP();t&&t.listen("selectionChanged",this._updateHandlebar)}},L.prototype._onColumnAdded=function(t){if(t.context&&null!=t.colIndex)for(var e=this._hosts.length;--e>=0;){var i=this._hosts[e];this._configColumn(i,t.colIndex,t.context)}},L.prototype._onDragStart=function(t){if(!(this._dragIndex>=0)){var e=this._getDraggedGrid(t);if(this._dragIndex=this._getResizerIndex(e,t),!(this._dragIndex<0)){this._activeResizer=t.currentTarget,this._activeResizer.parentElement.style.pointerEvents="none","dragstart"===t.type&&(window.addEventListener("mousemove",this._onDrag),window.addEventListener("mouseup",this._onDragEnd));var i=e.getElement().parentElement;i.classList.add("tr-dragging"),i.classList.add("tr-resize-cursor"),this._draggedGrid=e,this._anchorX=this._getAnchorX(t),this._guideline.style.height=i.clientHeight+"px",this._guideX=1+this._getColumnRight(e,this._dragIndex),this._guideline.style.top="1px",this._guideline.style.left=this._guideX+"px",f.i.appendChild(i,this._guideline),this._dispatch("dragStart",t),f.i.preventDefault(t)}}},L.prototype._getAnchorX=function(t){return"number"==typeof t.clientX?t.clientX:null!=t.touches&&t.touches[0]?t.touches[0].clientX:0},L.prototype._onDrag=function(t){if(this._draggedGrid){var e=this._diffX=this._getAnchorX(t)-this._anchorX,i=this._draggedGrid.getColumnWidth(this._dragIndex),o=this._draggedGrid.getMinimumColumnWidth(this._dragIndex);i+e<o&&(e=o-i),this._guideline.style.left=this._guideX+e+"px",f.i.preventDefault(t)}},L.prototype._onDragEnd=function(t){window.removeEventListener("mousemove",this._onDrag),window.removeEventListener("mouseup",this._onDragEnd);var e=this._guideline.parentElement;if(e&&(e.classList.remove("tr-dragging"),e.classList.remove("tr-resize-cursor")),f.i.removeParent(this._guideline),this._activeResizer.parentElement.style.pointerEvents="",this._activeResizer=null,this._diffX){var i=this._diffX,o=this._draggedGrid.getMinimumColumnWidth(this._dragIndex),n=this._draggedGrid.getColumnWidth(this._dragIndex)+i/this._draggedGrid.zoomFactor;if(n<o&&(n=o),this._keepProportion)this.setColumnWidths([this._dragIndex],[n]),this._dispatch("columnResized",{colIndex:this._dragIndex,width:this._hosts[0].getColumnCustomLaneSize(this._dragIndex),scalability:!0});else{var r=this._getResizingCols(this._dragIndex);this.setColumnWidths(r,n),this._dispatch("columnResized",{colIndex:this._dragIndex,colIndices:r,width:n})}}this._updateHandlebar(),this._dispatch("dragEnd",t),this._anchorX=this._guideX=this._diffX=0,this._dragIndex=-1,this._draggedGrid=null,f.i.preventDefault(t)},L.prototype._onDblClick=function(t){var e=this.getRelativeGrid(t),i=this._getResizerIndex(e,t),o=this._getPlugin("ColumnFitterPlugin");if(o||(o=this._getPlugin("ColumnWidthAdjustingPlugin")),o){for(var n,r=this._getResizingCols(i),s=[],l=r.length;--l>=0;){n=r[l];var a=this._getColumnOption(n,"defaultWidth");s[l]=null!=a?a:o.getAdjustedColumnWidth(n)}this.setColumnWidths(r,s),f.i.preventDefault(t)}this._dispatch("dblClicked",{colIndex:i}),this._updateHandlebar()},L.prototype._updateHandlebar=function(t){if(this._hbMode){var e=this._getCSP();if(e){var i=e.getSelectedColumns();if(1===i.length){this._handlebar||(this._handlebar=this._newResizer("tr-handlebar"),this._guideline.classList.add("tr-hb-guideline"),this._guideline.appendChild(this._handlebar));var o=this._handlebar._colIndex=i[0],n=null;(n=t?this._handlebar._grid=t.grid:this._handlebar._grid)&&(this._guideline.style.left=this._getColumnRight(n,o)+"px",this._guideline.style.top="",this._guideline.style.height="",n.getElement().appendChild(this._guideline))}else this._handlebar&&(this._handlebar._colIndex=-1,this._handlebar._grid=null,f.i.removeParent(this._guideline))}}},L._stopPropagation=function(t){t.stopPropagation()},L.prototype._getCSP=function(){var t=this._getPlugin("ColumnSelectionPlugin");return t&&t.isEnabled()?t:null},L.prototype._updateResizerCount=function(t){if(!this._hbMode&&!this._disabled){var e=t.getSection("title");if(e)for(var i,o,n,r,s=t.getColumnCount(),l=t.getAllSections("title"),a=0;a<l.length;a++)for(e=l[a],i=0;i<s;++i){o=e.getRowCount(),(r=(n=e.getColumn(i))._resizers)||(r=n._resizers=[]);for(var u=0;u<o;u++){var d=!1,h=e.getCell(i,u),c=e.getCellColSpan(i,u);if(c){var p=i+c-1;d=this._getColumnOption(p,"noResizing")}else d=this._getColumnOption(i,"noResizing");var _=h._resizer;if(!_){_=this._newResizer(),h._resizer=_;var g=h.getElement();g.insertBefore(_,g.firstChild),r.push(_)}_._disabled=d,_.style.display=d?"none":""}}}},L.prototype._newResizer=function(t){var e=f.i.div(t||"resizer");return e.setAttribute("draggable","true"),e.addEventListener("mousedown",L._stopPropagation),e.addEventListener("click",L._stopPropagation),e.addEventListener("dragstart",this._onDragStart),e.addEventListener("dblclick",this._onDblClick),e.addEventListener("touchstart",this._onDragStart),e.addEventListener("touchend",this._onDragEnd),e.addEventListener("touchcancel",this._onDragEnd),e.addEventListener("touchmove",this._onDrag),e},L.prototype._getDraggedGrid=function(t){return this._hbMode?this._handlebar._grid:this.getRelativeGrid(t)},L.prototype._getResizerIndex=function(t,e){if(this._hbMode)return this._handlebar?this._handlebar._colIndex:-1;if(e.currentTarget._disabled)return-1;var i=t.getRelativePosition(e),o=i.colIndex,n=i.rowIndex,r=i.section.getCellColSpan(o,n);return null!=o?o+r-1:-1},L.prototype._getColumnRight=function(t,e){return(t.getColumnRight(e)-1)*t.zoomFactor},L.prototype._getResizingCols=function(t){var e=this._getCSP();if(e){var i=e.getSelectedColumns();if(i.indexOf(t)>=0)return i}return[t]};var N=function(t){var e=this;e._onClick=e._onClick.bind(e),e._onMouseDown=e._onMouseDown.bind(e),e._onKeyDown=e._onKeyDown.bind(e),e._onColumnRemoved=e._onColumnRemoved.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._onReselection=e._onReselection.bind(e),e._onThemeLoaded=e._onThemeLoaded.bind(e),e._onColumnPositionChanged=e._onColumnPositionChanged.bind(e),e._onBeforeBatchOperation=e._onBeforeBatchOperation.bind(e),e._onAfterBatchOperation=e._onAfterBatchOperation.bind(e),e._updateMenuIcon=e._updateMenuIcon.bind(e),e._hosts=[],t&&e.config({columnSelection:t})};o.p.inherits(N,a),N.prototype._activeGrid=null,N.prototype._anchorCol=-1,N.prototype._disabled=!1,N.prototype._singleSelMode=!1,N.prototype._clickToggleMode=!1,N.prototype._hasSelection=!1,N.prototype._timerId=0,N.prototype._timerMenuId=0,N.prototype._pendingSelectionOnAdded=-1,N.prototype._pendingSelectionOnRemoved=-1,N.prototype._onMenuClicked=null,N.prototype._menuButton=null,N.prototype._menuPosition="outside",N.prototype._cgp=null,N.prototype._prevSelectedCols={},N.prototype.getName=function(){return"ColumnSelectionPlugin"},N.prototype.hasMultiTableSupport=function(){return!0},N.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.listen("click",this._onClick),t.listen("mousedown",this._onMouseDown),t.listen("keydown",this._onKeyDown),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnAdded",this._onColumnAdded),t.listen("columnPositionChanged",this._onColumnPositionChanged),t.listen("beforeBatchOperation",this._onBeforeBatchOperation),t.listen("afterBatchOperation",this._onAfterBatchOperation),this.config(e),N._stylePromise?N._applyThemeColor(t):(N._stylePromise=l.u.getThemeColors()).then(this._onThemeLoaded).catch(this._onThemeLoaded))},N.prototype._onThemeLoaded=function(){N._styles||(N._styles=(0,s.CA)([".column-selection-menu",["position: absolute;","background-color: var(--grid-column-menu-icon-bgcolor);","color: var(--grid-column-menu-icon-color);","z-index: 1;","cursor: pointer;","text-align: center;","width: 16px;","height: 16px;","padding: 6px;"],".column-selection-menu:hover",["background-color: var(--grid-column-menu-icon-hover-bgcolor);"],".column-selection-menu-inside",["padding: 4px;"],".selected-column .cell.selected-group",["background-color: var(--grid-selection-bgcolor);"]]));for(var t=this._hosts.length;--t>=0;)N._applyThemeColor(this._hosts[t])},N._applyThemeColor=function(t){t&&!t._columnSelectionStyles&&N._styles&&(t._columnSelectionStyles=!0,(0,s.kM)(N._styles,t.getParent()))},N.prototype._afterInit=function(){this._cgp=this._getPlugin("ColumnGroupingPlugin")},N.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("click",this._onClick),t.unlisten("mousedown",this._onMouseDown),t.unlisten("keydown",this._onKeyDown),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnPositionChanged",this._onColumnPositionChanged),this._hosts.splice(e,1),this._hosts.length||this._timerId&&(clearTimeout(this._timerId),this._timerId=0,this._timerMenuId=0),this._dispose())},N.prototype.config=function(t){if(t){var e=t.columnSelection;if(e){if("object"===O(e)){var i=e.singleSelection;i&&(this._singleSelMode=!0),(i=e.clickToggle)&&(this._clickToggleMode=!0),(i=e.menuClicked)&&(this._onMenuClicked=i),(i=e.menuPosition)&&(this._menuPosition=i),this.addListener(e,"selectionChanged")}}else null!=e&&this.disable();var o=t.columns;if(Array.isArray(o))for(var n=o.length,r=0;r<n;++r){var s=o[r],l=this._newColumnData(r);s.unselectable&&(l.unselectable=!0)}}},N.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this._getColumnOption(n,"unselectable",this._hosts[0]);s&&(r.unselectable=s)}var l=e.columnSelection;return l||(l=e.columnSelection={}),l.singleSelection=this._singleSelMode,l.clickToggle=this._clickToggleMode,e},N.prototype.disable=function(t){this._disabled=!1!==t},N.prototype.isEnabled=function(){return!this._disabled},N.prototype.hasSelectedColumn=function(){return null!=this._hasSelection?this._hasSelection:this.getFirstSelectedColumn()>=0},N.prototype.getSelectedColumns=function(){var t=[];if(!1!==this._hasSelection)for(var e=this.getColumnCount(),i=0;i<e;++i)this.isSelectedColumn(i)&&(this._hasSelection=!0,t.push(i));return t},N.prototype.getFirstSelectedColumn=function(){if(!1!==this._hasSelection)for(var t=this.getColumnCount(),e=0;e<t;++e)if(this.isSelectedColumn(e))return this._hasSelection=!0,e;return-1},N.prototype.getLastSelectedColumn=function(){if(!1!==this._hasSelection)for(var t=this.getColumnCount();--t>=0;)if(this.isSelectedColumn(t))return this._hasSelection=!0,t;return-1},N.prototype.setSelectedColumn=function(t,e,i){var o=this._setSelectedColumn(t,e,i);return o&&this._updateGroupSelection(),o},N.prototype.selectSingleColumn=function(t,e){null==t&&(t=this._anchorCol),t>=0||(t=0);var i=e||this._activeGrid;this.clearAllSelections(),this._setSelectedColumn(t,!0,i)&&(this._anchorCol=t),this._updateGroupSelection()},N.prototype.selectSingleGroup=function(t,e){var i=e||this._activeGrid,o=this._cgp;if(o&&t){var n=o.getChildColumnIndices(t),r=!1;this.clearAllSelections();for(var s=0;s<=n.length;s++)r|=this._setSelectedColumn(n[s],!0,i);r&&(this._anchorCol=n[0]),this._updateGroupSelection()}},N.prototype.selectRange=function(t,e,i){this._anchorCol=t>=0?t:0,this._selectFromAnchorToTarget(this._anchorCol+e)},N.prototype.selectAllColumns=function(){this.selectRange(0,this.getColumnCount())},N.prototype._onColumnPositionChanged=function(t){this._timerMenuId||t.sender&&t.sender===this._activeGrid&&(this._clearMenuIcon(),this._timerMenuId=setTimeout(this._updateMenuIcon,800))},N.prototype._updateMenuIcon=function(){if(this._timerMenuId=0,!this._onMenuClicked)return!1;var t=this.getFirstSelectedColumn(),e=this._activeGrid;if(t<0||!e)return this._clearMenuIcon(),!1;var i,o=e.getParent().parentNode,n=this.getLastSelectedColumn(),r=e.getColumnRect(t,n);if(r.width<=0||r.left>r.gridWidth)return this._clearMenuIcon(),!1;if(!this._menuButton){this._menuButton=document.createElement("div"),this._menuButton.classList.add("column-selection-menu"),"outside"!==this._menuPosition&&this._menuButton.classList.add("column-selection-menu-inside");var s=document.createElement("ef-icon");s.icon="most-detail",this._menuButton.appendChild(s),this._menuButton.addEventListener("click",this._onMenuClicked)}o.appendChild(this._menuButton);var l=28,a=r.leftPinnedIndex,u=0;for(i=0;i<=a;i++)u+=e.getColumnWidth(i);var d=r.left+r.width,h=d,c=r.top;return"outside"!==this._menuPosition?(l=24,this._menuButton.classList.add("column-selection-menu-inside"),d+l>=r.scrollViewSize+u&&(h=r.left-l)<0&&(h=r.gridWidth-l)):d>=r.gridWidth&&(h=r.gridWidth),this._menuButton.style.left=h+"px",this._menuButton.style.top=c+"px",!0},N.prototype._clearMenuIcon=function(){this._menuButton&&this._menuButton.parentNode&&this._menuButton.parentNode.removeChild(this._menuButton)},N.prototype.clearAllSelections=function(){var t=this._hosts.length;if(this.hasSelectedColumn()){for(var e=this.getColumnCount();--e>=0;)if(this.isSelectedColumn(e))for(var i=0;i<t;++i)this._hosts[i].selectColumn(e,!1);this._hasSelection=!1,this._activeGrid=this._hosts[0]||null,this._clearMenuIcon()}this._updateGroupSelection()},N.prototype.clearSelectedColumns=N.prototype.clearAllSelections,N.prototype.clearSelection=function(t){if(t)if(Array.isArray(t))for(var e=t.length;--e>=0;)this.setSelectedColumn(t[e],!1);else"number"==typeof t&&this.setSelectedColumn(t,!1);else this.clearAllSelections()},N.prototype.selectAll=N.prototype.selectAllColumns,N.prototype.deselectAll=N.prototype.clearSelection,N.prototype.isSelectedColumn=function(t){return!!this._activeGrid&&this._activeGrid.isSelectedColumn(t)},N.prototype.getActiveGrid=function(){return this._activeGrid},N.prototype._setSelectedColumn=function(t,e,i){if(!(t>=0))return!1;if(i&&i!==this._activeGrid&&(this._activeGrid=i),!this._activeGrid&&(this._activeGrid=this._hosts[0],!this._activeGrid))return!1;if(t>=this.getColumnCount())return!1;var o=!!e;if(o&&this._getColumnOption(t,"unselectable"))return!1;this._hasSelection=!!o||null,this._pendingSelectionOnAdded=-1,this._pendingSelectionOnRemoved=-1;for(var n=this._hosts.length,r=0;r<n;++r)this._hosts[r].selectColumn(t,o);return this._updateMenuIcon(),!0},N.prototype._isSelectedColumns=function(t){var e=!1,i=t.length;if(this._activeGrid)for(var o=0;o<i;o++){var n=t[o];if(!(e=this._activeGrid.isSelectedColumn(n)))break}return e},N.prototype._updateGroupSelection=function(){this._cgp&&this._cgp.selectGroupHeaders&&this._cgp.selectGroupHeaders(this.getSelectedColumns())},N.prototype._onClick=function(t){if(!this._disabled){var e=this.getRelativeGrid(t);if(e){var i=this._cgp,o=i?i.getCellInfo(t):e.getRelativePosition(t);if(o.hit&&"title"===o.sectionType){if(2===t.button){if("click"===t.type)return;if(this.isSelectedColumn(o.colIndex))return}var n,r,s=o.colIndex,l=!this._activeGrid||this._activeGrid!==e,a=o.groupId;if(a&&(r=(n=i.getChildColumnIndices(a)).length),l&&(this.clearAllSelections(),this._activeGrid=e,this._anchorCol=-1),t.ctrlKey||t.metaKey)if(a||this._singleSelMode&&!this.isSelectedColumn(s)){for(var u=!this._isSelectedColumns(n),d=0;d<r;d++)this.setSelectedColumn(n[d],u,e);this._anchorCol=u?n[0]:this.getFirstSelectedColumn()}else this.setSelectedColumn(s,!this.isSelectedColumn(s)),this._anchorCol=this.isSelectedColumn(s)?s:this.getFirstSelectedColumn();else if(t.shiftKey&&!this._singleSelMode){if(a){var h=n[0],c=n[r-1];this._anchorCol>=h&&this._anchorCol<=c?(this._anchorCol=h,s=c):this._anchorCol>h?s=h:this._anchorCol<c&&(s=c)}this._selectFromAnchorToTarget(s)}else if(this._clickToggleMode){var p=this.getSelectedColumns();1===p.length&&p[0]===s?(this.setSelectedColumn(s,!1),this._anchorCol=-1):n&&p.length==r&&this._isSelectedColumns(n)?(this.clearAllSelections(),this._anchorCol=-1):a?this.selectSingleGroup(a):this.selectSingleColumn(s)}else if(this._singleSelMode){if(a)return;this.selectSingleColumn(s)}else a?this.selectSingleGroup(a):this.selectSingleColumn(s);this._anchorCol<0&&(this._hasSelection=!1,this._activeGrid=this._hosts[0]||null),this._dispatchSelectionChanged(t,s)}}}},N.prototype._onMouseDown=function(t){if(2===t.button){if(t.shiftKey||t.ctrlKey)return;this._onClick(t)}},N.prototype._onKeyDown=function(t){if(this._activeGrid&&this.hasSelectedColumn())switch(t.keyCode){case 9:this._selectByTab(t)&&this._dispatchSelectionChanged(t);break;case 37:this._selectByKey(-1,t)&&this._dispatchSelectionChanged(t);break;case 39:this._selectByKey(1,t)&&this._dispatchSelectionChanged(t);break;case 40:this._gotoContent()&&this._dispatchSelectionChanged(t)}},N.prototype._onColumnRemoved=function(t){var e=t.colIndex;if(this._timerId)this._pendingSelectionOnAdded>0&&e<this._pendingSelectionOnAdded&&(this._pendingSelectionOnAdded=this._pendingSelectionOnAdded-1);else if(this._hasSelection){var i=this.getFirstSelectedColumn();i<0?(this._hasSelection=!1,this._pendingSelectionOnRemoved<0&&(e>=this.getColumnCount()&&(e=this.getColumnCount()-1),this._pendingSelectionOnRemoved=e),this._timerId=setTimeout(this._onReselection,10)):this._pendingSelectionOnRemoved=i}},N.prototype._onColumnAdded=function(t){this._timerId?this._pendingSelectionOnAdded=t.colIndex:this._hasSelection&&(this.clearAllSelections(),this._pendingSelectionOnAdded<0&&(this._pendingSelectionOnAdded=t.colIndex),this._timerId=setTimeout(this._onReselection,10))},N.prototype._onReselection=function(t){this._timerId=0;var e=this._pendingSelectionOnAdded>-1?this._pendingSelectionOnAdded:this._pendingSelectionOnRemoved;this.setSelectedColumn(e,!0),this._pendingSelectionOnAdded=-1,this._pendingSelectionOnRemoved=-1,this._activeGrid||(this._activeGrid=this._hosts[0]),this._activeGrid.focus()},N.prototype._onBeforeBatchOperation=function(t){var e=this._activeGrid;if(this._hasSelection&&"reset"===t.batchType){for(var i=this.getColumnCount(),o=0;o<i;++o)if(this.isSelectedColumn(o)){var n=e.getColumnId(o),r=e.getColumnField(o);n?this._prevSelectedCols[n]=r:this._prevSelectedCols[r]=""}this.clearAllSelections()}},N.prototype._onAfterBatchOperation=function(t){if("reset"===t.batchType){var e=Object.keys(this._prevSelectedCols),i=e.length;if(i){this.clearAllSelections();for(var o=0;o<i;o++){var n=e[o],r=this._prevSelectedCols[n],s=this.getColumnIndex(n);s<0&&(s=this.getColumnIndex(r)),this.setSelectedColumn(s,!0)}this._prevSelectedCols={}}}},N.prototype._selectByTab=function(t){var e=t.shiftKey?-1:1,i=e<0?this.getFirstSelectedColumn():this.getLastSelectedColumn();if(i<0)return!1;f.i.preventDefault(t),i+=e;var o=this.getColumnCount();if(i<0){if(this._gotoPrevGrid())return!0;i=0}else if(i>=o){if(this._gotoNextGrid())return!0;i=o-1}return this.selectSingleColumn(i),this._activeGrid.scrollToColumn(i),!0},N.prototype._selectByKey=function(t,e){var i=t<0?this.getFirstSelectedColumn():this.getLastSelectedColumn();if(i<0)return!1;var o=this.getColumnCount(),n=this._getNextSelection(i,t);if(n<0){if(!e.shiftKey&&this._gotoPrevGrid())return f.i.preventDefault(e),!0;n=0}else if(n>=o){if(!e.shiftKey&&this._gotoNextGrid())return f.i.preventDefault(e),!0;n=o-1}return!!this._activeGrid.isColumnVisible(n)&&(f.i.preventDefault(e),e.shiftKey&&!this._singleSelMode?this._selectFromAnchorToTarget(n):this.selectSingleColumn(n),this._activeGrid.scrollToColumn(n),!0)},N.prototype._getNextSelection=function(t,e){for(var i=t+e,o=this.getColumnCount();!this._activeGrid.isColumnVisible(i)&&!(i<0||i>=o);)i+=e;return i},N.prototype._gotoPrevGrid=function(){if(this._activeGrid===this._hosts[0])return this._gotoContent();var t=this._hosts.indexOf(this._activeGrid);return t>0&&(this.selectSingleColumn(this._getNextSelection(this.getColumnCount(),-1),this._hosts[t-1]),!0)},N.prototype._gotoNextGrid=function(){var t=this._hosts.length-1;if(this._activeGrid===this._hosts[t])return this._gotoContent();var e=this._hosts.indexOf(this._activeGrid);return e>=0&&(this.selectSingleColumn(this._getNextSelection(-1,1),this._hosts[e+1]),!0)},N.prototype._gotoContent=function(){if(this._activeGrid){var t=this._getPlugin("RowSelectionPlugin");if(t)return setTimeout(function(t,e,i){t.selectSingleRow(0,e,i)}.bind(null,t,this._activeGrid.getSectionSettings("content"),this._activeGrid),10),this.clearAllSelections(),!0}return!1},N.prototype._selectFromAnchorToTarget=function(t){if(this._anchorCol<0)this.selectSingleColumn(t);else{var e,i=this._activeGrid;if(this.clearAllSelections(),t<=this._anchorCol)for(e=t;e<=this._anchorCol;++e)this._setSelectedColumn(e,!0,i);else for(e=this._anchorCol;e<=t;++e)this._setSelectedColumn(e,!0,i);this._updateGroupSelection()}},N.prototype._dispatchSelectionChanged=function(t,e){if(this._activeGrid){var i=this._getPlugin("RowSelectionPlugin");i&&i.clearSelectedRows();var o=this._getPlugin("CellEditingPlugin");o&&o.closeCellEditor(),(o=this._getPlugin("InCellEditingPlugin"))&&o.closeCellEditor()}this._dispatch("selectionChanged",{selectedCols:this.getSelectedColumns(),colIndex:e,grid:this._activeGrid,event:t})},N.prototype.dispatchSelectionChanged=function(){var t=this.getSelectedColumns(),e=t.length?t[0]:-1;this._dispatch("selectionChanged",{selectedCols:t,colIndex:e,grid:this._activeGrid})},N.prototype.selectByMouse=function(t,e){e||(e={}),e.sectionType="title";var i=this._mockMouseEvent(t,0,e);this._onClick(i)},N.prototype.selectByKey=function(t,e){var i=this._mockKeyboardEvent(t,e);this._onKeyDown(i)};var H=function(t,e,i){var o=t[e],n=t[i];return o===n?0:o<0?1:n<0?-1:o-n},z=function(t,e){return t[e]>=0},V=function(t){if(t){var e=t.children;if(e&&e.length){var i=t.activeColumn;if(!i||e.indexOf(i)<0)return t.activeColumn=t.spreading?e[e.length-1]:e[0],!0}}return!1},U=function(){this._onPreSectionRender=this._onPreSectionRender.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onColumnMoved=this._onColumnMoved.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onBeforeBatchOperation=this._onBeforeBatchOperation.bind(this),this._onAfterBatchOperation=this._onAfterBatchOperation.bind(this),this._onMenuItemClicked=this._onMenuItemClicked.bind(this),this._onStackButtonClicked=this._onStackButtonClicked.bind(this),this._updateUI=this._updateUI.bind(this),this._toColumnId=this._toColumnId.bind(this),this._requestFilterRefresh=this._requestFilterRefresh.bind(this),this._hosts=[],this._groupDefs=new G,this._filterConflator=new w(50,this._requestFilterRefresh),this._conflator=new w(50,this._updateUI)};o.p.inherits(U,a),U.prototype._groupDefs,U.prototype._pendingStacks,U.prototype._usingField=!1,U.prototype._updating=!1,U.prototype._inReordering=0,U.prototype._inResetting=!1,U.prototype._menuElement=null,U.prototype._menuItemClicked=null,U._runningId=0,U.prototype._generateStackId=function(){for(var t="Stack"+U._runningId++;this._groupDefs.getGroup(t);)t="Stack"+U._runningId++;return t},U.prototype.getName=function(){return"ColumnStackPlugin"},U.prototype.hasMultiTableSupport=function(){return!0},U.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){if(this._hosts.push(t),e){if(e.icons){var i=e.icons.columnStack;i&&(this._stackIconName=i.stack,this._expandIconName=i.expand,this._collapseIconName=i.collapse)}var o=e.columnStack;if(o&&1===this._hosts.length){var n=o.menuElement;n&&"object"==typeof n&&1===n.nodeType&&(n.addEventListener("item-trigger",this._onMenuItemClicked),this._menuElement=n);var r=o.menuItemClicked;"function"==typeof r&&(this._menuItemClicked=r)}}U._applyThemeColor(t),1===this._hosts.length&&(this.config(e),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnMoved",this._onColumnMoved),t.listen("columnAdded",this._onColumnAdded),t.listen("beforeBatchOperation",this._onBeforeBatchOperation),t.listen("afterBatchOperation",this._onAfterBatchOperation)),t.listen("preSectionRender",this._onPreSectionRender)}},U.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("columnMoved",this._onColumnMoved),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("beforeBatchOperation",this._onBeforeBatchOperation),t.unlisten("afterBatchOperation",this._onAfterBatchOperation),t.unlisten("preSectionRender",this._onPreSectionRender),this._menuElement&&this._menuElement.removeEventListener("item-trigger",this._onMenuItemClicked),this._hosts.length<=0&&(this._conflator.reset(),this._filterConflator.reset(),this._groupDefs.removeAllGroups()),this._dispose())},U._styles=(0,s.CA)([".tr-grid .collapsed .cell.grouping .valigner",["width: 0;"],".tr-grid .collapsed .cell.grouping .floating-panel",["width: 100%;","margin: 0;","justify-content: center;"],".tr-grid .collapsed .cell.grouping .front-panel,.tr-grid .collapsed .cell.grouping .floating-panel *:not(.stack-icon),.tr-grid .collapsed .cell.grouping .sort-symbol",["display: none;"],".floating-panel .stack-icon",["cursor: pointer;"],".tr-grid .collapsed .cell.grouping .floating-panel .stack-icon",["margin-left: 0;"],".stack-icon",["color: var(--grid-title-filter-icon-color);"],".stack-icon:hover",["color: var(--grid-title-filter-icon-hover-color);"]]),U._applyThemeColor=function(t){t._columnStackingStyles||(t._columnStackingStyles=!0,(0,s.kM)(U._styles,t.getElement()))},U.prototype.config=function(t){if(t){var e,i=t.columns;i||(i=[]);var o=i.length,n=t.columnStack,r="",s={},l=!1,a=null;if(n)if(this.addListener(n,"clicked"),this._usingField=!1,n.fields&&n.fields.length>1)this._usingField=!0,l=!0,s[r=this._generateStackId()]={id:r,spreading:!0===n.spreading,collapsed:!1!==n.collapsed,fields:n.fields};else if(n.stacks&&n.stacks.length){l=!0;var u=n.stacks.length;for(e=0;e<u;e++)r=(a=n.stacks[e]).id||this._generateStackId(),null==a.collapsed&&(a.collapsed=!0),null==a.spreading&&(a.spreading=!1),s[r]=a}if(!l)for(e=0;e<o;++e){var d=i[e],h=d.stackId||d.stack;if(h){r="";var c=!1,p=!0,_="";"string"==typeof h?r=h:"object"==typeof h&&(r=(a=h).id||"",c=!0===a.spreading,p=!1!==a.collapsed,_=a.activeColumn||""),r&&((h=s[r])||(h=s[r]={id:r,spreading:c,collapsed:p},_&&(h.activeColumn=_),l=!0),h.children||(h.children=[]),h.children.push(e))}}this._initializedGrid?this._applyUserConfigs(l?s:null):this._pendingStacks=this._pendingStacks||s}},U.prototype.getConfigObject=function(t){var e=t||{},i=this.getStacks();return i.length&&(e.columnStack={},e.columnStack.stacks=i),e},U.prototype._afterInit=function(){this._pendingStacks&&(this._applyUserConfigs(this._pendingStacks),this._pendingStacks=null)},U.prototype._toColumnId=function(t){return"string"!=typeof t?"number"==typeof t?this.getColumnId(t):"":t||""},U.prototype._applyUserConfigs=function(t){if(t)for(var e in this.removeAllStacks(!1),t){var i=t[e],o=i.children,n=i.fields;n&&(this._usingField=!0,o=n),this.stackColumns(o,e,i)}else this.removeAllStacks()},U.prototype._getColumnStackOptions=function(t){if(t>=0&&t<this.getColumnCount()){var e=this.getColumnId(t);return this._groupDefs.getParentGroup(e)||null}return null},U.prototype._getSelectedColumns=function(){var t=this._getPlugin("ColumnSelectionPlugin");return t&&t.isEnabled()?t.getSelectedColumns():[]},U.prototype._hideStackedColumns=function(t,e,i){if(!t.spreading||t.collapsed)for(var o="number"==typeof i?i:this.getColumnIndex(t.activeColumn),n=null,r=(n="number"==typeof e?[e]:null==n?this.getColumnIndices(t.children):e).length,s=0;s<r;++s){var l=n[s];l!==o&&this._setColumnVisibility(l,!1)}},U.prototype._setColumnVisibility=function(t,e){if(t>=0){for(var i=!1,o=this._hosts.length;--o>=0;)i|=this._hosts[o].setColumnVisibility(t,e,2);i&&this._requestFilterRefresh()}},U.prototype._requestFilterRefresh=function(){if(!this._filterConflator.conflate()){var t=this._getPlugin("RowFilteringPlugin");t&&t.refresh&&t.refresh()}},U.prototype._moveStackedColumns=function(t){var e=this.getColumnIndices(t);e.length>1&&this.reorderColumns(e,e[0])},U.prototype._isIconAvailable=function(){return l.u.hasComponent("ef-icon")&&(l.u.hasTheme("elf-theme-solar")||l.u.hasTheme("elf-theme-luna"))},U.prototype._updateIcon=function(t,e){for(var i=!!e&&e.spreading,o=this._hosts.length,r=0;r<o;++r){var s=this._hosts[r],l=s.getSection("title"),a=l.getRowCount(),u=l.getCell(t,a-1,!0);if(u){var d=u._stackIcon;if(e){var h=this.isActiveStackedColumn(t);!d&&h?(i?(u.addClass("grouping"),d=this._expandIconName?e.collapsed?b.create(this._expandIconName):b.create(this._collapseIconName):e.collapsed?f.i.text(">"):f.i.text("<")):(u.addClass("stacking"),this._stackIconName?d=b.create(this._stackIconName):(d=f.i.text("≡")).style.fontSize="1.3em"),d.className="stack-icon",d.addEventListener("click",this._onStackButtonClicked,!1),d.addEventListener("dblclick",n.PF,!1),d.addEventListener("mousedown",n.PF,!1),d.addEventListener("keydown",n.PF,!1),u.insertFloatingIcon(d,20),u._stackIcon=d,this._dispatch("iconCreated",{icon:d,colIndex:t,grid:s,cell:u})):d&&!h&&(u.removeFloatingIcon(u._stackIcon),u._stackIcon=null)}else d&&(u.removeFloatingIcon(u._stackIcon),u._stackIcon=null,u.removeClass("grouping"),u.removeClass("stacking"))}}},U.prototype._updateUI=function(){if(!this._updating&&!this._conflator.conflate()){this._updating=!0;for(var t,e,i=this.getColumnCount(),o=this._hosts.length,n=0;n<i;++n){e=!0===(e=!!(t=this._getColumnStackOptions(n))&&t.spreading);for(var r=0;r<o;++r)this._hosts[r].enableColumnClass(n,"grouped",e);this._updateIcon(n,t),t&&(t.spreading?this._collapseMember(n,t.collapsed):this._setColumnVisibility(n,this._isActiveStackedColumn(n,t)))}this._updating=!1}},U.prototype._forceUpdateUI=function(){this._conflator.disable(),this._updateUI(),this._conflator.enable()},U.prototype._collapseMember=function(t,e){var i=this._getColumnStackOptions(t);if(i)for(var o=this._hosts.length;--o>=0;){var n=this._hosts[o];if(n.enableColumnClass(t,"collapsed",e),this.isActiveStackedColumn(t)){n.setColumnVisibility(t,!0,2);var r=n.getSection("title"),s=r.getRowCount(),l=r.getCell(t,s-1,!0);e?(i.collapsed===e&&i._origWidth||(i._origWidth=this._getColumnWidth(n,t),i._scalable=n.getColumnScalability(t)),n.setColumnWidth(t,r.getRowHeight(0),!1),l._stackIcon&&(this._expandIconName?l._stackIcon.setAttribute("icon","right"):l._stackIcon.textContent=">")):(null!=i._origWidth&&n.setColumnWidth(t,i._origWidth,i._scalable),l._stackIcon&&(this._collapseIconName?l._stackIcon.setAttribute("icon","left"):l._stackIcon.textContent="<"))}else n.setColumnVisibility(t,!e,2)}},U.prototype._getColumnWidth=function(t,e){if(t){var i=t.getMinimumColumnWidth(e),o=t.getColumnCustomLaneSize(e);return o<i?i:o}return NaN},U.prototype.getMemberIndices=function(t){var e=this._getColumnStackOptions(t);return e?this.getColumnIndices(e.children):null},U.prototype.collapseGroup=function(t,e){var i=this._getColumnStackOptions(t);if(!i)return null;if(!i.spreading)return null;if(e=!1!==e,i.collapsed!==e){var o=this.getColumnIndices(i.children);if(o){for(var n=o.length;--n>=0;)this._collapseMember(o[n],e);return i.collapsed=e,o}}return null},U.prototype.expandGroup=function(t){return this.collapseGroup(t,!1)},U.prototype.isColumnStackable=function(t){if(!t)return!1;for(var e=t.length,i=0;i<e;++i)if(this._getColumnStackOptions(t[i]))return!1;return!0},U.prototype.isColumnStacked=function(t){t||(t=this._getSelectedColumns());for(var e=t.length,i=0;i<e;++i)if(this._getColumnStackOptions(t[i]))return!0;return!1},U.prototype.isInactiveStackedColumn=function(t){var e=this._getColumnStackOptions(t);return!!e&&!this._isActiveStackedColumn(t,e)},U.prototype.isActiveStackedColumn=function(t){return this._isActiveStackedColumn(t,this._getColumnStackOptions(t))},U.prototype._isActiveStackedColumn=function(t,e){return!!e&&(V(e),t===this.getColumnIndex(e.activeColumn))},U.prototype.isStackingMode=function(t){var e=this._getColumnStackOptions(t);return!!e&&!0!==e.spreading},U.prototype.isCollapsingMode=function(t){var e=this._getColumnStackOptions(t);return!!e&&!0===e.spreading},U.prototype.isColumnInCollection=function(t){return!!this._getColumnStackOptions(t)},U.prototype.isInCollection=U.prototype.isColumnInCollection,U.prototype.isColumnCollapsed=function(t){var e=this._getColumnStackOptions(t);return!!e&&!0===e.spreading&&!0===e.collapsed},U.prototype.isColumnActive=function(t){var e=this._getColumnStackOptions(t);return!!e&&(e.spreading?!e.collapsed:t===this.getColumnIndex(e.activeColumn))},U.prototype.getStackId=function(t){var e="number"==typeof t?t:this.getColumnIndex(t);if(e>=0){var i=this._getColumnStackOptions(e);if(i)return i.id||""}return""},U.prototype.stackColumns=function(t,e,i){var o=!1,n=e;if(n?this._removeStack(n)&&(o=!0):n=this._generateStackId(),t||(t=this._getSelectedColumns()),(t?t.length:0)<2)return o&&this._updateUI(),o;i||(i={});var r=!0===i.spreading,s=!1!==i.collapsed,l=i.activeColumn||"",a={};if(a.id=n,a.name=i.name||"",a.spreading=r,a.collapsed=s,a.activeColumn=l,!this._initializedGrid){var u=this._pendingStacks;return u||(u=this._pendingStacks={}),a.children=t,u[n]=a,!1}var d=this.getColumnIndices(t);if(!this.isColumnStackable(d))return o&&this._updateUI(),o;var h=d.map(this._toColumnId);a.children=h;var c=-1;l&&"string"==typeof l?(c=this.getColumnIndex(l),a.activeColumn=l=this.getColumnId(c)):"number"==typeof l&&(c=l),V(a)&&(l=a.activeColumn,c=this.getColumnIndex(l)),this._hideStackedColumns(a,d,c),this.reorderColumns(d,d[0]);var p=d.length;if(!r){var _=this._getPlugin("ColumnSelectionPlugin");if(_&&_.isEnabled()){for(var g=!1,f=0;f<p;++f){var m=d[f];if(m!==c&&_.isSelectedColumn(m)){g=!0;break}}g&&(_.selectSingleColumn(c),_.dispatchSelectionChanged&&_.dispatchSelectionChanged())}}return this._verifyColumnPinning(a),this._groupDefs.setGroup(n,a),this._updateUI(),!0},U.prototype._verifyColumnPinning=function(t){t.leftPinned=!1,t.rightPinned=!1;var e=this._hosts[0],i=e.getFrozenColumnCount()-1,o=e.getFirstPinnedRightIndex(),n=this.getColumnCount();if(!(i<0&&o===n)){for(var r=this.getColumnIndices(t.children),s=r[0],l=r[0],a=1;a<r.length;a++){var u=r[a];u>l&&(l=u),u<s&&(s=u)}s<=i?(t.leftPinned=!0,l>i&&this._freezeColumn(l,n-o)):l>=o&&(t.rightPinned=!0,s<o&&this._freezeColumn(i,n-s))}},U.prototype._freezeColumn=function(t,e){for(var i=this._hosts,o=0;o<i.length;o++)i[o].freezeColumn(t,e)},U.prototype.setStack=function(t,e){this.removeAllStacks();var i={};return e&&(i.activeColumn=e),this.stackColumns(t,"_uniqueStack",i),!0},U.prototype.setStacks=function(t){this.removeAllStacks();for(var e=t?t.length:0,i=0;i<e;++i){var o=t[i];o&&o.children&&this.stackColumns(o.children,o.id,o)}},U.prototype.getStacks=function(){var t=this._groupDefs.getGroupMap(),e=[];for(var i in t){var o=t[i],n=o.id,r={id:n},s=o.name,l=o.collapsed,a=o.spreading;if(s&&(r.name=s),!0!==l&&(r.collapsed=l),!1!==a&&(r.spreading=a),this._usingField){for(var u=this.getStackMemberIndices(n),d=u.length,h=new Array(d),c=0;c<d;++c)h[c]=this.getColumnField(u[c]);r.fields=h,r.activeColumn=this.getActiveColumnField(n)}else r.children=this.getStackMemberIds(n).slice(),o.activeColumn&&(r.activeColumn=o.activeColumn);e.push(r)}return e},U.prototype.unstackColumns=function(t){t||(t=this._getSelectedColumns());for(var e=!1,i=t.length,o=0;o<i;++o){var n=t[o],r=this._getColumnStackOptions(n);r&&(e=!0,this._removeStack(r.id))}return e&&this._updateUI(),e},U.prototype._removeStack=function(t){var e=this._groupDefs.getGroup(t);if(!e)return!1;for(var i=this.getColumnIndices(e.children),o=i.length,n=0;n<o;++n){var r=i[n];e.spreading&&e.collapsed&&this._collapseMember(r,!1),this._setColumnVisibility(r,!0)}return this._groupDefs.removeGroup(t),!0},U.prototype.removeStack=function(t){return!!this._removeStack(t)&&(this._updateUI(),!0)},U.prototype.removeAllStacks=function(t){var e=this._groupDefs.getGroupIds(),i=e.length;if(i){for(var o=0;o<i;++o)this._removeStack(e[o]);this._groupDefs.removeAllGroups(),!1!==t&&this._updateUI()}return!!i},U.prototype.setActiveColumn=function(t){var e=this.getColumnIndex(t);if(e<0)return!1;if(e>=this.getColumnCount())return!1;var i=this.getColumnId(e),o=this._groupDefs.getParentGroup(i);if(!o)return!1;var n=o.children,r=n.indexOf(i);return!(r<0)&&this._setActiveColumn(o,n[r])},U.prototype.swapColumn=function(t,e){var i="number"==typeof t?t:this.getColumnIndex(t),o=this._getColumnStackOptions(i);if(!o)return!1;var n=o.children;return!!n&&this._setActiveColumn(o,n[e])},U.prototype._setActiveColumn=function(t,e){if(!e)return!1;if(e===t.activeColumn)return!1;var i=this.getColumnIndex(t.activeColumn),o=this.getColumnIndex(e);t.activeColumn=e,this._setColumnVisibility(o,!0),this._setColumnVisibility(i,!1),this._updateIcon(i,t),this._updateIcon(o,t);var n=this._getPlugin("ColumnSelectionPlugin");return n&&n.isEnabled()&&(n.selectSingleColumn(o),n.dispatchSelectionChanged&&n.dispatchSelectionChanged()),!0},U.prototype._onPreSectionRender=function(t){"title"===t.sectionType&&this._forceUpdateUI()},U.prototype._onColumnRemoved=function(t){if(!this._inResetting){var e=t.colId,i=this._groupDefs.getParentGroup(e);i&&(i.children.length<=2?(this._removeStack(i.id),this._updateUI()):(this._groupDefs.removeGroupChild(i.id,e),this._updateActiveColumn(i)))}},U.prototype._onColumnMoved=function(t){if(this._inReordering||this._inResetting)this._inReordering&&(this._inReordering=2);else{var e=t.toColIndex,i=this.getColumnId(e),o=this._groupDefs.getParentGroup(i);if(o){var n=this._getColumnStackOptions(e-1),r=this._getColumnStackOptions(e+1),s=!0,l=!1;o&&(o===n||o===r?(this._repositionMembers(o),s=!1):o.children.length<=2?this._removeStack(o.id):this._removeRefFromStack(o,i,e),l=!0),s&&this._isWithinStack(e)&&this._addRefToStack(n,e)&&(l=!0),l&&this._updateUI()}}},U.prototype._onColumnAdded=function(t){if(!this._inResetting){var e=t.colIndex,i=this._isWithinStack(e);i&&this._addRefToStack(i,e)&&this._updateUI()}},U.prototype._onBeforeBatchOperation=function(t){"reset"===t.batchType?this._inResetting=!0:"move"===t.batchType&&(this._inReordering=1)},U.prototype._onAfterBatchOperation=function(t){var e,i,o,n;if("reset"===t.batchType){for(this._inResetting=!1,i=(e=this._groupDefs.getGroups()).length,o=0;o<i;++o)this._repositionMembers(e[o],!0);for(i=(e=this._groupDefs.getGroups()).length,o=0;o<i;++o)n=e[o],this._updateActiveColumn(n),this._hideStackedColumns(n)}else if("move"===t.batchType){if(2===this._inReordering)for(i=(e=this._groupDefs.getGroups()).length,o=0;o<i;++o)this._repositionMembers(e[o]);this._inReordering=0}},U.prototype._isWithinStack=function(t){var e=this._getColumnStackOptions(t-1);return e&&e===this._getColumnStackOptions(t+1)?e:null},U.prototype._addRefToStack=function(t,e){var i=this._toColumnId(e);this._hideStackedColumns(t,e);var o=this._toColumnId(e+1),n=t.children.indexOf(o);return this._groupDefs.addGroupChild(t.id,i,n)},U.prototype._removeRefFromStack=function(t,e,i){return!!this._groupDefs.removeGroupChild(t.id,e)&&(t.spreading&&t.collapsed?this._collapseMember(i,!1):this._setColumnVisibility(i,!0),this._updateActiveColumn(t),!0)},U.prototype._repositionMembers=function(t,e){for(var i=t.children,o=i?i.length:0,n={},r=-1,s=!1,l=!1,a=0;a<o;a++){var u=i[a],d=this.getColumnIndex(u);n[u]=d,d>=0?d<r&&(s=!0):l=!0,r=d}e&&l&&(i=i.filter(z.bind(null,n)),this._groupDefs.removeAllChildren(t.id),t.children=i,this._groupDefs.setGroup(t.id,t),o=i.length),o<2?e&&(this._removeStack(t.id),this._updateUI()):(s||l)&&i.sort(H.bind(null,n))},U.prototype._onStackButtonClicked=function(t){var e=t.currentTarget;if(!t.button){var i=this.getRelativeGrid(t).getRelativePosition(t),o=i.colIndex,n=this._getColumnStackOptions(o);if(n){t.stopPropagation();var r=n.children,s=this.getColumnIndices(r);if(n.spreading){var l=!n.collapsed;this.collapseGroup(o,l),i.menuData=null,i.activeIndex=-1,i.collapsed=l}else{for(var a=r.indexOf(n.activeColumn),u=r.length,d=new Array(u),h=u;--h>=0;)d[h]={value:h,selected:h===a,label:this.getColumnName(s[h]),field:this.getColumnField(s[h]),colId:r[h]};i.menuData=d,i.activeIndex=a,i.collapsed=!1}if(i.spreading=n.spreading,i.columnIndices=s,i.activeColIndex=this.getColumnIndex(n.activeColumn),i.event=t,i.stackId=n.id,e.focus(),this._menuElement&&!n.spreading){var c=i.event.srcElement,p=this._menuElement;p.data=i.menuData,p.positionTarget=c,p.opened=!0}this._dispatch("clicked",i)}}},U.prototype._onMenuItemClicked=function(t){if(t.detail){var e=parseInt(t.detail.value,0),i=this._menuElement.data[e].colId;this.setActiveColumn(i)}this._menuElement.opened=!1,this._menuItemClicked&&this._menuItemClicked(t)},U.prototype.getStackMemberIndices=function(t){return this.getColumnIndices(this.getStackMemberIds(t))},U.prototype.getStackMemberIds=function(t){if(t){var e=this._groupDefs.getGroup(t);if(e)return e.children}return[]},U.prototype.getColumnIdsByIndex=function(t){Array.isArray(t)||(t=[t]);for(var e,i=[],o=0;o<t.length;++o)e=this.getColumnId(t[o]),i.push(e);return i},U.prototype.getColumnIndicesByColumnIds=function(t){Array.isArray(t)||(t=[t]);for(var e,i=[],o=0;o<t.length;++o)e=this.getColumnIndex(t[o]),i.push(e);return i},U.prototype.getColumnIdsByFields=function(t){if(!t)return[];for(var e=Array.isArray(t)?t:[t],i=t.length,o=new Array(i),n=0;n<i;++n){var r=e[n],s=-1;"number"==typeof r?s=r:r&&"string"==typeof r&&(s=this.getColumnIndex(r)),o[n]=s>=0?this.getColumnId(s):""}return o},U.prototype.addColumnToStack=function(t,e){var i=this._toColumnId(t),o=this._groupDefs.getGroup(e);if(!this._groupDefs.getParentGroup(i)&&o){this._hideStackedColumns(o,this.getColumnIndex(i)),this._groupDefs.addGroupChild(e,i);var n=this._hosts[0],r=n.getFrozenColumnCount()-1,s=n.getPinnedRightColumnCount(),l=this.getColumnIndex(i);if(this._moveStackedColumns(o.children),o.leftPinned||o.rightPinned){var a=this.getColumnCount();o.leftPinned&&l>r?(r++,this._freezeColumn(r,s)):o.rightPinned&&l<a-s&&(s++,this._freezeColumn(r,s))}this._updateUI()}},U.prototype.removeColumnFromStack=function(t){var e="string"==typeof t?this.getColumnIndex(t):t;if(!(e<0)){var i=this.getColumnId(e),o=this._groupDefs.getParentGroup(i);if(o){var n=o.children,r=n.length;if(r<=2)return 2===r&&i===n[0]&&this.moveColumnById(e,this.getColumnIndex(n[1])+1),void this.removeStack(o.id);var s=this.getColumnIndices(n);this._removeRefFromStack(o,i,e),this.moveColumnById(e,s[r-1]+1),this._updateUI()}}},U.prototype.reorderStackColumns=function(t,e){if(this._groupDefs.getGroup(e)&&t&&t.length){var i=this.getColumnIndices(t);if(i.length){for(var o=this.getStackMemberIndices(e),n=o.length,r={},s=0;s<n;++s){var l=o[s];r[l]=i.indexOf(l)}o.sort(H.bind(null,r)),this.reorderColumns(o,o[0])}}},U.prototype.setStackName=function(t,e){this._groupDefs.setGroupName(t,e)},U.prototype.getStackName=function(t){return this._groupDefs.getGroupName(t)},U.prototype.getActiveColumnId=function(t){var e=this._groupDefs.getGroup(t);return e&&e.activeColumn||""},U.prototype.getActiveColumnField=function(t){return this.getColumnField(this.getActiveColumnIndex(t))},U.prototype.getActiveColumnIndex=function(t){var e=this._groupDefs.getGroup(t);return e?this.getColumnIndex(e.activeColumn):-1},U.prototype.addStackChild=function(t,e){this.addColumnToStack(e,t)},U.prototype.removeStackChild=function(t,e){t===this.getStackId(e)&&this.removeColumnFromStack(e)},U.prototype.unsetParent=U.prototype.removeColumnFromStack,U.prototype.reorderColumns=function(t,e){return this._reorderColumns(t,e)},U.prototype.moveColumnById=function(t,e){return this._moveColumnById(t,e)},U.prototype._updateActiveColumn=function(t){if(V(t)){var e=this.getColumnIndex(t.activeColumn);e>=0&&(this._setColumnVisibility(e,!0),this._updateUI())}},U.prototype.hideStack=function(t,e){if(t){var i=this._groupDefs.getGroup(t);if(i){null==e&&(e=!0);for(var o=i.children,n=0;n<o.length;n++)for(var r=this._hosts.length;--r>=0;)this._hosts[r].hideColumn(this.getColumnIndex(o[n]),e)}}},U.prototype.showStack=function(t){t&&this.hideStack(t,!1)},U.prototype.isStackHidden=function(t){var e=this._groupDefs.getGroup(t),i=this._host||this._hosts[0];if(!e||!i)return null;var o=this.getColumnIndex(e.activeColumn);return!i.isColumnVisible(o)},U.prototype.moveStack=function(t,e){if(!t)return!1;var i=this.getStackMemberIds(t);return this.reorderColumns(i,e)},U.prototype.pinStack=function(t,e){if(t){var i=this._groupDefs.getGroup(t);if(i){var o,n=this._hosts[0],r=n.getFrozenColumnCount()-1,s=n.getPinnedRightColumnCount(),l=this.getColumnCount(),a=this.getStackMemberIds(t),u=a.length;if("right"===e){if(i.rightPinned)return;i.leftPinned&&(this.unpinStack(t),r=n.getFrozenColumnCount()-1),i.rightPinned=!0,o=l-s,s+=u}else{if(i.leftPinned)return;i.rightPinned&&(this.unpinStack(t),s=n.getPinnedRightColumnCount()),i.leftPinned=!0,o=-1===r?0:r+1,r+=u}this.reorderColumns(a,o),this._freezeColumn(r,s)}}},U.prototype.unpinStack=function(t,e){if(t){var i=this._groupDefs.getGroup(t);if(i&&(i.leftPinned||i.rightPinned)){var o=this._hosts[0],n=o.getFrozenColumnCount(),r=o.getPinnedRightColumnCount(),s=this.getColumnCount()-r,l=this.getStackMemberIds(t),a=l.length,u=null;if(null!=e){var d=this.getColumnIndex(e);u=this.getColumnId(d)}i.leftPinned?(i.leftPinned=!1,this.reorderColumns(l,n),this._freezeColumn(n-(1+a))):i.rightPinned&&(i.rightPinned=!1,this.reorderColumns(l,s),this._freezeColumn(n-1,r-a)),null!=u&&this.reorderColumns(l,u)}}};var W={"⇧":1,"B⇧":1,"↑":1,"B↑":1,26:1,1:1,'"1"':1,"-1":-1,"⇩":-1,"B⇩":-1,"↓":-1,"B↓":-1,27:-1,2:-1,'"2"':-1},j={CF_TICK:1,PRCTCK_1:1,BID_TICK:1,ASK_TICK:1};var q={"||":1,"&&":2,"<":3,">":3,"<=":3,">=":3,"!=":3,"=":3,"==":3,"===":3,"+":4,"-":4,"*":5,"%":6,"/":6,"!":7,"!!":7},K={"+":function(t,e){return t+e},"-":function(t,e){return t-e},"*":function(t,e){return t*e},"/":function(t,e){return t/e},"%":function(t,e){return t%e},"<":function(t,e){return t<e},">":function(t,e){return t>e},"<=":function(t,e){return t<=e},">=":function(t,e){return t>=e},"==":function(t,e){return t==e},"!=":function(t,e){return t!=e},"&&":function(t,e){return t&&e},"||":function(t,e){return t||e},"!":function(t,e){return!t},"!!":function(t,e){return!!t}},Y={"+":2,"-":2,"*":2,"/":2,"%":2,"<":2,">":2,"<=":2,">=":2,"==":2,"!=":2,"&&":2,"||":2,"!":1,"!!":1},J=function(t,e,i,o){var n={value:e,type:i};return o&&(n.dataType=o),"operator"===i?n.precedence=q[e]:"parenthesis"===i&&(n.precedence=0),t.push(n),t.length-1},Z={_tokens:[],_withString:function(t){return" #"+J(Z._tokens,t.substring(1,t.length-1),"literal","string")+"#"},_withField:function(t){return" #"+J(Z._tokens,t,"literal","variable")+"#"},_withFieldInBrackets:function(t){return Z._withField(t.substring(1,t.length-1))},_withNegativeNumber:function(t){var e=+t;return e==e?" #"+J(Z._tokens,e,"literal","number")+"#":""},_withPositiveNumber:function(t){return 35===t.charCodeAt(0)?t:Z._withNegativeNumber(t)},_withOperator:function(t){return q[t]?("="!=t&&"==="!=t||(t="=="),"#"+J(Z._tokens,t,"operator")+"#"):""},_withParenthesis:function(t){return"#"+J(Z._tokens,t,"parenthesis")+"#"},_tester:function(t){for(var e=t._rpn,i=e.length,o=0,n=0,r=0;r<i;++r){var s=e[r];if("literal"!==s.type){var l=Y[s.value];if(!(o>=l))return console.warn("Cannot parse an expression with insufficient number of operands"),!0;o-=l}++o>n&&(n=o)}return 1!==o||(t._stackSize=n,!1)},_filter:function(t,e){for(var i,o=t._rpn,n=new Array(t._stackSize),r=o.length,s=0,l=0;l<r;++l){var a=o[l],u=a.value;"literal"===a.type?i="variable"!==a.dataType?u:e?e[u]:null:1===Y[u]?(i=K[u](n[s-1]),s-=1):(i=K[u](n[s-2],n[s-1]),s-=2),n[s++]=i}return!!n[0]},parse:function(t){if("function"==typeof t)return t;if(!t||"string"!=typeof t)return null;var e=t.trim();if(!e)return null;Z._tokens.length=0,e=(e=(e=(e=(e=(e=(e=(e=e.replace(/".+?"/g,Z._withString)).replace(/'.+?'/g,Z._withString)).replace(/\[.+?\]/g,Z._withFieldInBrackets)).replace(/-[0-9.]+/g,Z._withNegativeNumber)).replace(/[0-9.#]+/g,Z._withPositiveNumber)).replace(/[a-zA-Z_]\w*/g,Z._withField)).replace(/[\-\/+*%!=<>&|]+/g,Z._withOperator)).replace(/[()]/g,Z._withParenthesis);var i=Z._tokens,o=i.length;if(!o)return null;var n,r,s,l=[],a=e.match(/#[0-9]+#/g);for(n=0;n<o;++n){var u=a[n];if("literal"===(s=(r=i[+u.substring(1,u.length-1)]).type)){var d=l[l.length-1];if(d&&"literal"===d.type){if(!(r.value<0&&"number"===r.dataType))return console.warn("Cannot parse an expression with insufficient number of operators"),null;J(l,"-","operator"),r.value*=-1}}l.push(r)}Z._tokens.length=0,o=l.length;var h=[],c=[],p=null,_=!1;for(n=0;n<o;++n)if("literal"===(s=(r=l[n]).type))h.push(r);else if("parenthesis"===s)if("("===r.value)c.push(r);else{for(_=!1;c.length;){if("("===(p=c.pop()).value&&"parenthesis"===p.type){_=!0;break}h.push(p)}_||console.warn("No left parenthesis paired with the right one")}else{for(;c.length&&!(r.precedence>c[c.length-1].precedence);)h.push(c.pop());c.push(r)}for(_=!1;c.length;)"("===(p=c.pop()).value&&"parenthesis"===p.type?_=!0:h.push(p);if(_&&console.warn("No right parenthesis paired with the left one"),!h.length)return null;var g={_rpn:h};return Z._tester(g)?null:Z._filter.bind(null,g)}},X=function(){this._conditions=[],this._scopes=[],X._painters.push(this)};X.ColoringTypes={TEXT:1,HEATMAP:2,CONDITIONAL:3},X.prototype._coloringType=0,X.prototype._conditions=null,X.prototype._effectiveStyles=null,X.prototype._blinkCondition=null,X.prototype._scopes,X.prototype._columnStats=null,X.prototype._levelColorDisabled=!1,X.prototype._blinkingDuration=250,X._runningBlinkId=0,X._painters=[],X._emptyAry=[],X._emptyObj={},X._bgObj={backgroundColor:"",color:""},X._colorObj={color:""},X.bgStyles=["backgroundColor","color"],X.nonBgStyles=["fontSize","fontWeight","fontStyle","textAlign","textDecoration"],X.supportedStyles=X.bgStyles.concat(X.nonBgStyles),X.themeReady=null,X.parse=Z.parse,X.prototype.dispose=function(){var t=X._painters.indexOf(this);t>=0&&X._painters.splice(t,1),this.reset(),this._conditions=null,this._scopes.length=0,this._blinkCondition=null},X.prototype.reset=function(){this._setColoringType(0);var t=this._scopes.length;if(t){for(var e=0;e<t;++e){var i=this._scopes[e];X._clearBlinkTimer(i)&&i._restorer();var o=i.cell;o&&delete o.blinking,i.cell=null}this._scopes.length=0}this._blinkCondition=null},X.prototype.resetColoring=function(){this._setColoringType(0),this._effectiveStyles=null,this._conditions.length=0},X.prototype.resetBlinking=function(){this._blinkCondition=null,this._scopes.length=0},X.prototype.clearBlinking=function(){this._blinkCondition=null;var t=this._scopes.length;if(t){for(var e=0;e<t;++e){var i=this._scopes[e];X._clearBlinkTimer(i)&&i._restorer();var o=i.cell;o&&delete o.blinking,i.cell=null}this._scopes.length=0}},X.prototype.resetHeatMap=function(){this._conditions.length=0,this._columnStats=null},X.prototype.clearHeatMap=function(){return this._blinkCondition?(this._setColoringType(0),this.resetHeatMap(),!1):(this.dispose(),!0)},X.prototype.applyThemeColor=function(){var t=l.u.getColors();if(this._coloringType===X.ColoringTypes.HEATMAP){var e=this._conditions[0];if(e&&(e.textMode?e.baseColor=t.baseText:e.baseColor=t.baseGrid,e.useThemeColor)){var i=t.up,o=t.down,n=t.level===t.baseText?"":t.level;X._setUpDownColors(e,i,o,n)}}this._blinkCondition&&this._blinkCondition.useThemeColor&&X._setUpDownColors(this._blinkCondition,t.up,t.down,t.level,!0)},X.prototype.getConditions=function(){return this._conditions},X.prototype.getColoringType=function(){return this._coloringType},X.prototype._setColoringType=function(t){this._coloringType!==t&&(this._coloringType=t)},X.prototype.setEffectiveStyles=function(t){this._effectiveStyles=t},X.prototype.getEffectiveStyles=function(){return this._effectiveStyles},X.prototype.setConditions=function(t){this._conditions.length=0,this._setColoringType(X.ColoringTypes.CONDITIONAL);for(var e=t.length,i=0;i<e;i++)this._addCondition(t[i])},X.prototype.setColumnStats=function(t){this._columnStats=t&&t.getMin?t:null},X.prototype.getColumnStats=function(){return this._columnStats},X.prototype._addCondition=function(t){var e=t.expression;e&&(t._fn=Z.parse(e.text||e),this._conditions.push(t))},X.prototype.addHeatmap=function(t,e,i,o,n,r){this._setColoringType(X.ColoringTypes.HEATMAP);var s={heatmap:!0};return s.field=t,s.expression=X._heatMapCondition.bind(s),s.midPoint=e,X._setUpDownColors(s,i,o),s.baseColor=n,!0!==r&&"text"!==r||(s.textMode=!0),this._addCondition(s),s},X.prototype.addHeatmapWithTheme=function(t,e,i){var o=l.u.themeColors,n=this.addHeatmap(t,e,o.up,o.down,o.baseGrid,i);return!0!==i&&"text"!==i||(n.baseColor=o.baseText),n.useThemeColor=!0,n},X.prototype._addColorText=function(t,e,i,o,n){this._setColoringType(X.ColoringTypes.TEXT);var r={};return r.field=e,r.expression=t.bind(null,e),r.upClass=i,r.downClass=o,r.levelClass=n,this._addCondition(r),r},X.prototype.addColorText=function(t,e,i,o){return this._addColorText(j[t]?X._tickColorTextCondition:X._colorTextCondition,t,e,i,o)},X.prototype.addColorTextWithTheme=function(t){return this.addColorText(t,"positive","negative","neutral")},X.prototype.addTickColorText=function(t,e,i){return this.addColorText("CF_TICK",t,e,i)},X.prototype.addTickColorTextWithTheme=function(){var t=l.u.themeColors,e=this.addTickColorText(t.tickUp,t.tickDown,t.level);return e.useThemeColor=!0,e},X.prototype.addTickBlink=function(t,e,i,o){return this.addBlink("CF_TICK",t,e,i,o)},X.prototype.addTickBlinkWithTheme=function(t){var e=l.u.themeColors,i=this.addTickBlink(e.tickUp,e.tickDown,e.level,t);return i.useThemeColor=!0,i},X.prototype.addBlink=function(t,e,i,o,n){return this._addBlink(j[t]?X._tickBlinkCondition:X._fieldBlinkCondition,t,e,i,o,n)},X.prototype.addBlinkWithTheme=function(t,e){var i=l.u.themeColors,o=this.addBlink(t,i.up,i.down,i.level,e);return o.useThemeColor=!0,o},X.prototype._addBlink=function(t,e,i,o,n,r){var s=this._blinkCondition={};return s.blink=!0,s.blinkId=X._runningBlinkId++,s.field=e,s._fn=s.expression=t,!0!==r&&"border"!==r||(s.border=!0),X._setUpDownColors(s,i,o,n,!0),s},X.prototype.renderForPrinting=function(t,e,i,o){if(t){var n=this._getStyles(e,i,o),r=n.cssClass;null!=r?(elem._coloringCssClass&&elem._coloringCssClass!==r&&(elem.classList.remove(elem._coloringCssClass),elem._coloringCssClass=null),r&&(elem.classList.add(r),elem._coloringCssClass=r)):(t._coloringCssClass&&(t.classList.remove(t._coloringCssClass),t._coloringCssClass=null),t.style.backgroundColor=n.backgroundColor||"",t.style.color=n.color||"")}},X._colorTextCondition=function(t,e){var i=e[t];if(i||0===i){if(i>0)return 1;if(i<0)return-1}return"u"},X._tickColorTextCondition=function(t,e){var i=W[e[t]];if(i)return i},X._heatMapCondition=function(t,e,i){var o=t[this.field],n=o||0===o?o-this.midPoint:NaN;if(0===n||n!=n)return 0;var r=1;return n>0?(r=i-this.midPoint)<0&&(r=e-this.midPoint):(r=e-this.midPoint)>0&&(r=i-this.midPoint),r<0&&(r=-r),n/r},X._tickBlinkCondition=function(t){var e=W[t];if(e)return e},X._fieldBlinkCondition=function(t,e){return t>e?1:t<e?-1:0},X._borderRestorer=function(t){t.blinkTimer=0;var e=t.cell.getElement();e&&(e.style.border="")},X._cellRestorer=function(t){t.blinkTimer=0;var e=t.cell.getElement();if(e){var i=t.rowData,o=NaN,n=NaN;if(this._coloringType===X.ColoringTypes.HEATMAP){var r=this._columnStats;r&&(o=r.getMin(),n=r.getMax())}var s=this._getStyles(i,o,n),l=s.cssClass;null!=l?(e._coloringCssClass&&e._coloringCssClass!==l&&(e.classList.remove(e._coloringCssClass),e._coloringCssClass=null),l&&(e.classList.add(l),e._coloringCssClass=l),e.style.backgroundColor="",e.style.color=""):(e._coloringCssClass&&(e.classList.remove(e._coloringCssClass),e._coloringCssClass=null),e.style.backgroundColor=s.backgroundColor||"",e.style.color=s.color||"")}},X.prototype._getStyles=function(t,e,i){if(!t)return X._emptyObj;for(var o=this._conditions.length,n=0;n<o;++n){var r,s=this._conditions[n],l=s._fn;try{var a=l&&l(t,e,i)}catch(t){}if(a)return this._coloringType===X.ColoringTypes.HEATMAP?(r=a>0?X.blendColor(s.baseColor,s.upColor,a):X.blendColor(s.baseColor,s.downColor,-a),s.textMode?(X._colorObj.color=X.num2Hex(r),X._colorObj):(X._bgObj.backgroundColor=X.num2Hex(r),X._bgObj.color=X.blackAndWhite(r),X._bgObj)):this._coloringType===X.ColoringTypes.TEXT?(s.cssClass=a>0?s.upClass:a<0?s.downClass:this._levelColorDisabled?"":s.levelClass,s.cssClass=s.cssClass||"",s):s}return X._emptyObj},X.blendColor=function(t,e,i){i>1?i=1:i<0&&(i=0);for(var o=X.hex2Num(t),n=X.hex2Num(e),r=[],s=0;s<3;++s){var l=(n[s]-o[s])*i;r.push(o[s]+l)}return r},X.blackAndWhite=function(t){return Math.sqrt(t[0]*t[0]*.241+t[1]*t[1]*.691+t[2]*t[2]*.068)>=135?"#000000":"#FFFFFF"},X.rgb2Hex=s.iC,X.num2Hex=function(t){return"#"+(16777216+(t[2]|t[1]<<8|t[0]<<16)).toString(16).slice(1)},X.num2Rgb=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},X.hex2Num=function(t){var e=parseInt(t.replace(/[^0-9A-F]/gi,""),16);return[e>>16&255,e>>8&255,255&e]},X.hex2Rgb=function(t){if(t){var e=parseInt(t.replace(/[^0-9A-F]/gi,""),16);return"rgb("+(e>>16&255)+", "+(e>>8&255)+", "+(255&e)+")"}return""},X.themeChanged=function(){},X.setThemeColors=function(){},X._onThemeChanged=function(){for(var t=X._painters,e=t.length;--e>=0;)t[e].applyThemeColor()},X.loadThemeColors=function(){return X.themeReady||(X.themeReady=l.u.getThemeColors(X._onThemeChanged).then(X._onThemeChanged).catch(X._onThemeChanged)),X.themeReady},X.reloadThemeColors=function(){return X.themeReady=l.u.reloadThemeColors().then(X._onThemeChanged).catch(X._onThemeChanged),X.themeReady},X.clearCellStyle=function(t,e){var i=t.getElement();if(i){var o=t.blinking;if(o&&(X._clearBlinkTimer(o),delete t.blinking,o.cell=null),i._coloringCssClass&&i.classList.remove(i._coloringCssClass),e||(e=X.supportedStyles),Array.isArray(e))for(var n=e.length;--n>=0;)i.style[e[n]]="";else for(var r in e)i.style[r]=""}},X._setUpDownColors=function(t,e,i,o,n){t.upColor=e,null!=e&&n&&(t.contrastUpColor=X.getOppositeColor(e)),t.downColor=i,null!=i&&n&&(t.contrastDownColor=X.getOppositeColor(i)),t.levelColor=o,null!=o&&n&&(t.contrastLevelColor=X.getOppositeColor(o))},X._clearBlinkTimer=function(t,e){return!!t.blinkTimer&&(clearTimeout(t.blinkTimer),t.blinkTimer=0,!0)},X.getOppositeColor=function(t){if("string"==typeof t){if("#"===t.charAt(0)){var e=X.hex2Num(t);return X.blackAndWhite(e)}}else if(Array.isArray(t))return X.blackAndWhite(t);return""},X.prototype.render=function(t,e,i,o,n){null!=i&&i==i?this._paintCell(t,e,i,o):this._conditions.length&&this._coloringType===X.ColoringTypes.CONDITIONAL&&this._paintCell(t,e)},X.prototype.renderHeatMap=function(t,e,i,o){this._paintCell(t,e,i,o)},X.prototype.renderColoring=function(t,e){this._paintCell(t,e)},X.prototype._paintCell=function(t,e,i,o){if(t){var n=t.getElement();if(n){var r,s=this._blinkCondition;if(!(s&&(r=t.blinking)&&r.blinkTimer)||s.border){var l=this._getStyles(e,i,o),a=n.style,u=l.cssClass;n._coloringCssClass&&n._coloringCssClass!==u&&(n.classList.remove(n._coloringCssClass),n._coloringCssClass=null),null!=u?u&&(n.classList.add(u),n._coloringCssClass=u):(l.backgroundColor?a.backgroundColor=l.backgroundColor:this._effectiveStyles&&!this._effectiveStyles.backgroundColor||(a.backgroundColor=""),l.color?a.color=l.color:this._effectiveStyles&&!this._effectiveStyles.color||(a.color=""))}}}},X.prototype.blink=function(t,e,i){this._blinkCell(t,i,e)},X.prototype.blinkCell=function(t,e,i,o){if(!this._blinkCondition)return!1;var n=this._blinkCondition._fn(e,i);return this._blinkCell(t,o,n)},X.prototype._blinkCell=function(t,e,i){if(!t)return!1;if(this._levelColorDisabled&&!i)return!1;var o=t.getElement();if(!o)return!1;var n=this._blinkCondition;if(!n)return!1;var r,s,l=t.blinking;if(l||((l={}).cell=t,t.blinking=l,this._scopes.push(l)),l.blinkId!==n.blinkId){l.blinkId=n.blinkId,l.field=n.field;var a=n.border?X._borderRestorer:X._cellRestorer;l._restorer=a.bind(this,l)}l.rowData=e,i>0?(r=n.upColor,s=n.contrastUpColor):i<0?(r=n.downColor,s=n.contrastDownColor):(r=n.levelColor,s=n.contrastLevelColor);var u=!0;return n.border?(o.style.border="1px solid "+r,u=!1):(o.style.backgroundColor=r,o.style.color=s),X._clearBlinkTimer(l),l.blinkTimer=setTimeout(l._restorer,this._blinkingDuration),u},X.prototype.verifyBlinking=function(t,e){var i=t.blinking;i&&i.blinkTimer&&i.rowData!==e&&(i.rowData=e,X._clearBlinkTimer(i)&&i._restorer())},X.prototype.disableLevelColor=function(t){this._levelColorDisabled=!1!==t},X.prototype.setBlinkingDuration=function(t){"number"==typeof t&&(this._blinkingDuration=t)};const Q=X;var $=i(787),tt={or:1,OR:1,Or:1,oR:1,"||":1},et=function(t){return"number"==typeof t?t:t?Number(t):!1===t?0:NaN},it=/^\w{3} \w{3}/,ot=function(t){if("string"==typeof t){var e=new Date(t),i=e.getTime();if(i==i&&it.test(t))return e}return t},nt=function(t){return"string"==typeof t?t:t?t+"":0===t?"0":!1===t?"false":""},rt=function(t,e){return t&&t.getTime?e?1e4*t.getUTCFullYear()+100*t.getUTCMonth()+t.getUTCDate():1e4*t.getFullYear()+100*t.getMonth()+t.getDate():NaN},st=function(t,e){var i=t._conds,o=i?i.length:0;if(!o)return!0;var n,r,s,l,a=t._fieldName,u=t._formattedFieldName,d=e[a];t._rawDataAccessor&&(d=t._rawDataAccessor(d));for(var h=!1,c=!1,p=0;p<o;++p){var _=0;if(p>0)if(_=tt[i[p-1].connector]){if(h)return!0}else if(!h)continue;var g=i[p],f=$.lw[g.operatorId];c=!1;var m=f.type,v=f.id,C=$.MV[v];"blank"===m?c=C(d):"number"===m?(null==s&&(s=et(d)),c=C(s,g.value)):"date"===m?(null==l&&(l=rt(d,!1)),c=C(l,g.value)):(null==n&&(t._formattedDataAccessor?n=t._formattedDataAccessor(e[a]):t._formatter?n=t._formatter(e):u!==a?null==(n=e[u])&&(n=d):n=d,n=nt(n)),f.caseSensitive?c=C(n,g.value):(null==r&&(r=n.toLowerCase()),c=C(r,g.value))),h=p>0?_?h||c:h&&c:c}return h},lt=function(t,e){var i=e[t._fieldName];return t._rawDataAccessor&&(i=t._rawDataAccessor(i)),!!t._itemMap[i]},at=function(t){return[t.operatorId,t.origValue,t.connector]},ut=function(t){this._initStaticVariables(),this._conditions=[],this.init(t)};ut.prototype._initStaticVariables=function(){if(!ut._initStatic){ut._initStatic=!0,ut._updateTimezoneOffset();var t=864e5-new Date%864e5;setTimeout(ut._setUpdateInterval,t)}},ut._initStatic=!1,ut.prototype._fieldName="",ut.prototype._formattedFieldName="",ut.prototype._formatter=null,ut.prototype._useUTCTime=!1,ut.prototype._rawDataAccessor=null,ut.prototype._formattedDataAccessor=null,ut.prototype._conditions,ut._timezoneOffset=0,ut._updateTimezoneOffset=function(){ut._timezoneOffset=60*(new Date).getTimezoneOffset()},ut._setUpdateInterval=function(){ut._updateTimezoneOffset(),setInterval(ut._updateTimezoneOffset,864e5)},ut.prototype.reset=function(){this.setFieldDefinition(""),this._rawDataAccessor=this._formattedDataAccessor=null},ut.prototype.init=function(t){if(t){var e=t.field;e?this.setFieldDefinition(e,t.formatter,t.formattedField):null!=e&&this.setFieldDefinition("");var i=t.useUTCTime;null!=i&&(this._useUTCTime=!!i);var o=t.rawDataAccessor,n=t.formattedDataAccessor;null==o&&null==n||this.setDataAccessors(o,n)}},ut.prototype.setFieldDefinition=function(t,e,i){this._fieldName=t,this._formattedFieldName=i||this._fieldName+"_FORMATTED",this._formatter=e||null,this._conditions.length=0},ut.prototype.setDefaultUTCUsage=function(t){this._useUTCTime=!!t},ut.prototype.setDataAccessors=function(t,e){this._rawDataAccessor="function"==typeof t?t:null,this._formattedDataAccessor="function"==typeof e?e:null},ut.prototype.addCondition=function(t,e,i,o){var n=t?t.toUpperCase():"",r=$.lw[n];if(!r)return!1;if("{}"===e||"{*}"===e)n=r.positive^"{}"===e?"EQ_NBLANK":"EQ_BLANK",r=$.lw[n];else if(!e&&"blank"!==r.type&&0!==e&&!1!==e)return!1;var s={operatorId:n,origValue:e,connector:i||""};return null!=o&&(s.useUTCTime=o),this._conditions.push(s),!0},ut.prototype.addConditions=function(t){var e=0;if(Array.isArray(t)){for(var i=t.length,o=0;o<i;++o){var n=t[o];Array.isArray(n)&&this.addCondition(n[0],n[1],n[2],n[3])&&++e}i>1&&!e&&!Array.isArray(t[0])&&this.addCondition(t[0],t[1],t[2])&&++e}return e},ut.prototype.getConditions=function(){return this._conditions.length?this._conditions.map(at):null},ut.prototype.buildFilter=function(){if(!this._fieldName)return null;var t=this._conditions.length;if(!t)return null;for(var e=this._formatter,i=this._conditions.slice(),o=0;o<t;++o){var n=i[o],r=$.lw[n.operatorId],s=r.type,l=n.origValue;if("number"===s)l=ot(l),l=et(l);else if("date"===s){var a=null;l instanceof Date?a=l:"number"!=typeof l&&"string"!=typeof l||(a=new Date(l)),l=rt(a,null!=n.useUTCTime?n.useUTCTime:this._useUTCTime)}else"string"===s&&(l=nt(l),r.caseSensitive||(l=l.toLowerCase()));n.value=l}var u={_conds:i,_fieldName:this._fieldName||"",_formatter:e||null,_formattedFieldName:this._formattedFieldName||"",_rawDataAccessor:this._rawDataAccessor||null,_formattedDataAccessor:this._formattedDataAccessor||null};return this._conditions.length=0,st.bind(null,u)},ut.prototype.buildMonitorFilter=function(t,e,i,o){this.setFieldDefinition(e,i,o);for(var n=e.lastIndexOf("_LOCAL")===e.length-6,r=t.split("♣"),s=0;s<r.length;s++){var l=r[s].split("♦");n&&(l[1]=(l[1]-ut._timezoneOffset)%86400+""),this.addCondition(l[0],l[1],l[2])}return this.buildFilter()},ut.prototype.parse=function(t,e,i,o,n,r){var s=typeof t;return"string"===s?t.indexOf("♦")>=0?this.buildMonitorFilter(t,e,i,o):Z.parse(t):"function"===s?t:Array.isArray(t)?(e&&(this.setFieldDefinition(e,i,o),this.setDataAccessors(n,r)),this.addConditions(t),this.buildFilter()):"object"===s?function(t,e,i){if(!t||!e)return null;var o={_fieldName:e,_itemMap:t};return i&&(o._rawDataAccessor=i),lt.bind(null,o)}(t,e,n):null};var dt="coloring",ht="blinking",ct={backgroundColor:1},pt={color:1},_t={backgroundColor:1,color:1},gt=/\[[^\[\]]*\]/g,ft=function(t){var e=[];if(t&&"string"==typeof t)for(var i=t.match(gt),o=0;o<i.length;o++)e.push(i[o].replace(/[\[\]]/g,""));return e},mt=function(){this._onSectionBinding=this._onSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onThemeLoaded=this._onThemeLoaded.bind(this),mt.cleanUpPrevRows=mt.cleanUpPrevRows.bind(this),mt._cleanUpPrevFields=mt._cleanUpPrevFields.bind(this),this._hosts=[]};o.p.inherits(mt,a),mt._cleanUpTimer=0,mt._controlClass="predefined-conditional-color",mt._colorTextStyles,mt.prototype._blinkingEnabled=!1,mt.prototype._pendingFields,mt.prototype._predefinedColors=null,mt.prototype._blinkingDuration=250,mt.prototype._insertionBlinking=!1,mt._predefinedColorsStyles,mt.prototype.getName=function(){return"ConditionalColoringPlugin"},mt.prototype.hasMultiTableSupport=function(){return!0},mt.prototype.initialize=function(t,e){t._prevDataRows={};var i=this._hosts;if(!(i.indexOf(t)>=0)){i.push(t);var o=e.conditionalColoring;if(o){var n=o.predefinedColors;null!=n&&"object"==typeof n&&(this._predefinedColors||(this._predefinedColors=n,this._predefinedColorsStyles=this._prepareStyles(n)),this._injectPredefinedColors(t),t.enableClass(mt._controlClass));var r=o.blinkingDuration;null!=r&&"number"==typeof r&&(this._blinkingDuration=r);var s=o.insertionBlinking;null!=s&&(this._insertionBlinking=s)}1===i.length?this.config(e):(this._applyStyle(t,e),this._injectColorTextStyles()),t.listen("postSectionDataBinding",this._onSectionBinding),t.listen("columnAdded",this._onColumnAdded),t.listen("columnRemoved",this._onColumnRemoved),X.themeReady||X.loadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded),l.u.getThemeColors(this._onThemeLoaded)}},mt.prototype._afterInit=function(){var t=this._pendingFields;if(t){for(var e,i,o,n=0;n<t.length;n++)e=t[n][0],i=t[n][1],o=t[n][2],this._addDataFields(e,i,o);this._pendingFields=null}},mt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("postSectionDataBinding",this._onSectionBinding),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnRemoved",this._onColumnRemoved),t._prevDataRows=null,this._dispose())},mt.prototype.beforeProcessOption=function(t,e){if("blinker"==t)return null},mt.prototype.config=function(t){if(t){var e=t.columns;if(e)for(var i=e.length,o=0;o<i;++o)this.setColumnColoring(o,e[o])}},mt.prototype.getConfigObject=function(t){var e=t||{},i=e.conditionalColoring;i||(i=e.conditionalColoring={}),null!=this._predefinedColors&&(i.predefinedColors=this._predefinedColors),250!==this._blinkingDuration&&(i.blinkingDuration=this._blinkingDuration),!1!==this._insertionBlinking&&(i.insertionBlinking=this._insertionBlinking);var o=e.columns;o||(o=e.columns=[]);for(var n=this.getColumnCount(),r=0;r<n;++r){var s=o[r];s||(s=o[r]={}),this.getColumnColoring(r,s)}return e},mt.prototype.getColumnColoring=function(t,e){e||(e={});var i=this._hosts[0],o=this._getColumnOption(t,"conditions",i);if(Array.isArray(o)&&o.length>0){e.conditions=[];for(var n=["expression","backgroundColor","color","cssClass","field"],r=o.length,l=0;l<r;l++){var a={},u=o[l];if((0,s.kt)(a,u,n),"function"==typeof a.expression){var d=u.origExpression;d&&(a.expression=d)}e.conditions.push(a)}}var h=this._getColumnOption(t,"colorText",i);h&&(e.colorText=h);var c=this._getColumnOption(t,"tickColor",i);c&&(e.tickColor=c);var p=this._getColumnOption(t,"blinking",i);p&&(e.blinking=p);var _=this._getField(t);return _&&(e.field=_),e},mt.prototype._applyStyle=function(t,e){if(e){var i=e.columns;if(i)for(var o,n=i.length,r=0;r<n;++r)o=this.getColumnPainter(r),this._isValidPainter(o)&&t.enableColumnClass(r,"conditionally-colored",!0)}},mt.prototype._enableColumnStyle=function(t,e){e=!1!==e;for(var i=this._hosts,o=i.length;--o>=0;)i[o].enableColumnClass(t,"conditionally-colored",e)},mt.prototype._isValidPainter=function(t){return!!t&&t.getColoringType()!==X.ColoringTypes.HEATMAP},mt.prototype._clearCellStyles=function(t,e){var i,o,n,r,s,l=this._hosts;for(i=l.length;--i>=0;)for(n=(o=l[i].getSection("content")).getRowCount(),r=0;r<n;++r)(s=o.getCell(t,r,!1))&&X.clearCellStyle(s,e)},mt.prototype._cachePreviousValue=function(){var t,e,i,o=this.getColumnCount(),n=this._hosts,r=n.length;for(t=0;t<r;t++)for(i=n[t],e=0;e<o;++e)this._cacheColumnPreviousValue(e,i)},mt.prototype._cacheColumnPreviousValue=function(t,e){var i=e._prevDataRows||{},o=e.getDataSource(),n=o.getRowCount(),r=this._getColumnData(t);if(r.blinking){var s,l,a,u,d=r.blinkingField||this._getField(t);for(s=0;s<n;s++)l=o.getRowId(s),null!=(a=this._getData(o,s,d))&&((u=i[l])||(u=i[l]={}),u[d]=a);e._prevDataRows=i}},mt.prototype._addDataFields=function(t,e,i){if(this._realTimeGrid&&t&&i){var o=null;if(null!=e){var n="object"==typeof e?e:this._realTimeGrid.getColumnDefinition(e);o=n?n.getId()+"_"+i:null}this._realTimeGrid.addDataFields(t,o)}},mt.prototype._removeDataFields=function(t,e,i){if(this._realTimeGrid&&t&&i){var o=null;if(null!=e){var n="object"==typeof e?e:this._realTimeGrid.getColumnDefinition(e);o=n?n.getId()+"_"+i:null}this._realTimeGrid.removeDataFields(t,o)}},mt.prototype._removeFieldReferrer=function(t,e){if(this._realTimeGrid&&e){var i=null;if(null!=t){var o=t;if("number"==typeof t){var n=this._realTimeGrid.getColumnDefinition(t);n&&(o=n.getId())}i=o?o+"_"+e:null,this._realTimeGrid.removeFieldReferrer(i)}}},mt.prototype.setColumnColoring=function(t,e){var i,o;e&&(i=e.blinking,o=e.field),this.setColumnBlinking(t,i,o),this.setConditionalColoring(t,e);var n=this._newColumnData(t);!n.painter||n.coloringFields||n.blinkingField||this._clearPainter(n)},mt.prototype.setConditionalColoring=function(t,e){var i=this._newColumnData(t);i.conditions=null,e?(i.colorText=e.colorText,i.tickColor=e.tickColor,i.field=e.field):(i.colorText=null,i.tickColor=null);var o=i.painter,n=i.coloringFields?Object.keys(i.coloringFields):null,r=this._prepareColorOptions(t,e);if(this._isValidPainter(o)){if(n){var s=o.getEffectiveStyles();this._clearCellStyles(t,s)}o.resetColoring()}if(r.hasColor){i.conditions=e.conditions;var l=r.fields;if(o){if(n){for(var a,u=[],d=0;d<n.length;d++)l[a=n[d]]||u.push(a);u.length&&this._removeDataFields(u,t,dt)}}else o=i.painter=new X;if(r.condColoring){var h=r.condColoring.conditions;o.setConditions(h),this._setEffectiveStyles(o,h)}else if(r.colorText){var c=r.colorText;c.useThemeColors?(mt._colorTextStyles||(mt._colorTextStyles=this._prepareStyles({positive:{color:"var(--color-scheme-positive)"},negative:{color:"var(--color-scheme-negative)"},neutral:{color:"var(--color-scheme-neutral)"}})),this._injectColorTextStyles(),o.addColorTextWithTheme(r.colorText.field)):o.addColorText(c.field,c.upClass,c.downClass,c.levelClass)}var p=Object.keys(l);this._initializedGrid?this._addDataFields(p,t,dt):(this._pendingFields||(this._pendingFields=[]),this._pendingFields.push([p,t,dt])),this._enableColumnStyle(t,!0),o.inputField=r.inputField,i.coloringFields=l}else n&&this._removeFieldReferrer(t,dt),i.coloringFields=null,this._enableColumnStyle(t,!1);if(this._initializedGrid){var _=this._hosts[0];if(_){var g=_.getPlugin("RowColoringPlugin");g&&g.forceUpdateRowColor&&g.forceUpdateRowColor()}this._requestRowRefresh()}},mt.prototype.setColumnBlinking=function(t,e,i){var o=this._newColumnData(t),n=o.blinkingField;o.blinking=e;var r=o.painter,s=this._prepareBlinkingOptions(t,e,i);if(s){var l=s.field;r?n&&(r.clearBlinking(),n!==l&&this._removeDataFields(n,t,ht)):o.painter=r=new X;var a=s.duration||this._blinkingDuration;if(r.setBlinkingDuration(a),r.disableLevelColor(!1===s.level),s.customColor?r.addBlink(l,s.up,s.down,s.level,s.border):r.addBlinkWithTheme(l,s.border),o.blinkingField=l,this._blinkingEnabled=!0,!n&&(this._compositeGrid||this._initializedGrid))for(var u,d=this._hosts,h=0;h<d.length;h++)u=d[h],this._cacheColumnPreviousValue(t,u);mt._startCleanUpInterval(),this._initializedGrid?this._addDataFields(l,t,ht):(this._pendingFields||(this._pendingFields=[]),this._pendingFields.push([l,t,ht]))}else n&&(r&&(r.clearBlinking(),mt._cleanUpPrevFields()),this._removeFieldReferrer(t,ht)),o.blinkingField=null},mt.prototype.blinkRow=function(t,e,i){if(i=i||this._hosts[0]){var o=i.getDataSource();if(o){var n=i.getSection("content");if(n)for(var r=o.getRowDataAt(t),s=n.getColumnCount(),l=0;l<s;++l){var a=this.getColumnPainter(l);if(a){var u=n.getCell(l,t,!1);u&&a.blink(u,e,r)}}}}},mt.prototype._prepareBlinkingOptions=function(t,e,i){if(null==t||!e)return null;var o={},n=i||this._getField(t),r=n;return"string"==typeof e?r=e:"object"==typeof e&&(r=e.field||n,o.border=e.border,o.duration=e.duration,(e.up||e.down||e.level)&&(o.customColor=!0,o.up=e.up,o.down=e.down,o.level=e.level),!1===e.level&&(o.level=!1)),o.field=mt._convertKeyword(r,n),o.inputField=r,o};var vt=function(t,e){if(e)if(Array.isArray(e))for(var i=e.length,o=0;o<i;++o)t[e[o]]=!0;else t[e]=!0};mt.prototype._prepareColorOptions=function(t,e){if(!e)return{};var i=this._getField(t),o=e.inputField||"",n=mt._convertKeyword(o,i);e.field&&(n=e.field);var r=0,s={},l=e.colorText||e.tickColor,a=e.conditions,u=a?a.length:0,d={};if(u){d.condColoring={},d.condColoring.conditions=a;for(var h=n==i?e.textFormatter:null,c=mt.getFilterBuilder(),p=u;--p>=0;){var _=a[p],g=_?_.expression:null;if(Array.isArray(g)){var f=_.field||n;_.expression=c.parse(g,f,null,f),_.expression&&(_.origExpression=g,r=1,s[f]=!0)}else if("function"==typeof g)r=1,vt(s,_.fields||_.field);else if("string"==typeof g)r=1,vt(s,ft(g));else if(n&&_.condition){r=1,c.setFieldDefinition(n,h,n);var m=_.condition,v=_.value1,C=_.value2;"BTW"!==m?c.addCondition(m,v):(c.addCondition("GTE",v),c.addCondition("LTE",C)),_.expression=c.buildFilter(),s[n]=!0}}}else l&&(d.colorText={},d.colorText.useThemeColors=!0,"string"==typeof l?n=l:"object"==typeof l&&(n=l.field||n,(l.upClass||l.downClass||l.levelClass)&&(d.colorText.useThemeColors=!1,d.colorText.upClass=l.upClass,d.colorText.downClass=l.downClass,d.colorText.levelClass=l.levelClass)),n&&(d.colorText.field=n,r=1,s[n]=!0));return r?(d.hasColor=1,d.fields=s,d.inputField=o,d):{}},mt._convertKeyword=function(t,e){return t&&t.indexOf("THIS_COLUMN")<0?t:e},mt._mapInsertedRowId=function(t){for(var e={},i=t?t.length:0,o=0;o<i;++o){var n=t[o];"inserted"===n.type&&(e[n.rid]=!0)}return e},mt._mergeUpdates=function(t){var e,i,o=t.events,n=o?o.length:0,r=t.dataSource,s=[];for(i=0;i<n;++i)if("updated"===(e=o[i]).type){var l=r.getRowIndex(e.rid);s[l]||(s[l]={changed:{},rid:e.rid});var a=s[l].changed,u=e.changes;for(var d in u)a[d]=1}return s},mt.prototype._prepareStyles=function(t){var e,i,o,n=".tr-grid."+mt._controlClass+" .column.conditionally-colored .cell",r=[];for(var l in t)r.push(n+"."+l),e=[],(o=(i=t[l]).backgroundColor)&&e.push("background-color: "+o+";"),(o=i.color)&&e.push("color: "+o+";"),r.push(e);return(0,s.CA)(r)},mt.prototype._injectColorTextStyles=function(){if(mt._colorTextStyles)for(var t=this._hosts,e=t.length,i=0;i<e;i++){var o=t[i];o.enableClass(mt._controlClass),o._colorTextStyles||((0,s.kM)(mt._colorTextStyles,o.getElement()),o._colorTextStyles=!0)}},mt.prototype._injectPredefinedColors=function(t){t._conditionalColoringStyleTag&&(t._conditionalColoringStyleTag.parentNode.removeChild(t._conditionalColoringStyleTag),t._conditionalColoringStyleTag=null),t._conditionalColoringStyleTag=(0,s.kM)(this._predefinedColorsStyles,t.getElement())},mt.prototype.setPredefinedColors=function(t){if(null!=t&&"object"==typeof t){this._predefinedColors=t,this._predefinedColorsStyles=this._prepareStyles(t);for(var e=this._hosts,i=e.length,o=0;o<i;o++)this._injectPredefinedColors(e[o])}},mt.prototype.setInsertionBlinking=function(t){null!=t&&(this._insertionBlinking=t)},mt.getFilterBuilder=function(){return mt._fb||(mt._fb=new ut),mt._fb},mt._fb=null,mt.prototype._requestRowRefresh=function(){for(var t=this._hosts.length;--t>=0;)this._hosts[t].requestRowRefresh()},mt.prototype.getColumnPainter=function(t){return this._getColumnOption(t,"painter")},mt.prototype.applyColor=function(t,e,i){var o=this.getColumnPainter(t);if(o){i||(i={});var n={};n[this._getField(t)]=1,o.render(e,i,NaN,NaN,n)}},mt.prototype._onSectionBinding=function(t){var e=t.dataRows;if(e){var i,o,n,r,s,l,a,u,d,h,c,p,_,g,f=t.section,m=f.getColumnCount(),v=t.fromRowIndex,C=t.toRowIndex,y=t.actualUpdate,b=t.dataSource,S=t.sender,w=y&&this._blinkingEnabled;w&&(c=mt._mapInsertedRowId(t.events),this._compositeGrid&&(d=mt._mergeUpdates(t)));var x,T=S._prevDataRows,I=Object.keys(T).length;for(o=v;o<C;++o)if(h=this._rowGetter(e[o])){s=null;var R=!1,D=null;for(w&&(this._realTimeGrid?(l=h.ROW_DEF)&&(a=l.getRowId(),s=l.getUpdates()):(u=d[o])&&(a=u.rid,s=u.changed),(R=!(D=a?c[a]:null)||this._insertionBlinking)||(s=null)),a||(a=this._realTimeGrid?(l=h.ROW_DEF)?l.getRowId():"":b.getRowId(o)),x=T[a],_={},g=!1,i=0;i<m;++i)if((n=f.getCell(i,o,!1))&&(r=this.getColumnPainter(i))){var E=!1;if((p=this._getColumnData(i)).blinking&&y){var A=!1,k=p.blinkingField||this._getField(i),P=h[k];if(R)if(x){var M=x[k];null!=M&&s&&s[k]&&(A=!0,E=r.blinkCell(n,P,M,h,h))}else I&&D&&(A=!0,E=r.blinkCell(n,P,P,h,h));A||r.verifyBlinking(n,h),_[k]=P,g=!0}p.coloringFields&&!E&&r.renderColoring(n,h)}g&&(T[a]=_),a=null}}},mt.prototype._onColumnAdded=function(t){t.context&&this.setColumnColoring(t.colIndex,t.context,t.sender)},mt.prototype._onColumnRemoved=function(t){var e=t.columnData;if(e){this._clearPainter(e);var i=t.colId;i&&(e.coloringFields&&this._removeFieldReferrer(i,dt),e.blinkingField&&this._removeFieldReferrer(i,ht));var o=e.field;if(o){var n=e.COL_DEF;if(!n||!n.isRealTimeField())for(var r=this.getColumnCount(),s=0;s<r;s++)(e=this._getColumnData(s)).coloringFields&&e.coloringFields[o]&&this.setConditionalColoring(s,null),e.blinkingField===o&&this.setColumnBlinking(s,null)}}},mt.prototype._onThemeLoaded=function(){this._requestRowRefresh()},mt.prototype._clearPainter=function(t){if(t){mt._cleanUpPrevFields();var e=t.painter;if(e){if(this._isValidPainter(e))return e.dispose(),t.painter=null,!0;e.clearBlinking()}}return!1},mt.prototype._setEffectiveStyles=function(t,e){for(var i=null,o=!1,n=!1,r=e?e.length:0,s=0;s<r;s++){var l=e[s];l.color&&(o=!0),l.backgroundColor&&(n=!0)}o&&n?i=_t:o?i=pt:n&&(i=ct),t.setEffectiveStyles(i)},mt._cleanUpPrevFields=function(){for(var t,e=this.getColumnCount(),i={},o=!1,n=0;n<e;n++)(t=this._getColumnData(n)).blinking&&(i[t.blinkingField]=o=!0);var r,s=this._hosts,l=s.length;if(o){var a,u,d,h;for(r=0;r<l;r++)for(d in u=s[r]._prevDataRows)for(h in a=u[d])i[h]||delete a[h]}else{for(r=0;r<l;r++)s[r]._prevDataRows={};mt._stopCleanUpInterval()}},mt.cleanUpPrevRows=function(){var t,e,i,o,n,r,s,l=this._hosts,a=l.length;for(i=0;i<a;i++)if(e=(t=l[i]).getDataSource())for(s=t._prevDataRows,n=Object.keys(s),o=0;o<n.length;o++)r=n[o],e.getRowData(r)||delete s[r]},mt._startCleanUpInterval=function(){mt._cleanUpTimer||(mt._cleanUpTimer=setInterval(mt.cleanUpPrevRows,18e5))},mt._stopCleanUpInterval=function(){mt._cleanUpTimer&&(clearInterval(mt._cleanUpTimer),mt._cleanUpTimer=0)},mt.setThemeColors=X.setThemeColors,mt.prototype.reloadThemeColors=function(){return X.reloadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded)};var Ct=function(){this._onColumnAdded=this._onColumnAdded.bind(this),this._onRecalculation=this._onRecalculation.bind(this),this._requestRecalculation=this._requestRecalculation.bind(this),this._hosts=[]};o.p.inherits(Ct,a),Ct.prototype._adjusting=!1,Ct.prototype._freezingThreshold=10,Ct.prototype._recalTimer=0,Ct.prototype._evenRowHeight=!1,Ct.prototype.beforeProcessOption=function(t){if("rowVirtualRendering"===t)return!1},Ct.prototype.getName=function(){return"ContentWrapPlugin"},Ct.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),window.addEventListener("load",this._requestRecalculation),t.listen("widthChanged",this._requestRecalculation),t.listen("postSectionDataBinding",this._requestRecalculation),this.config(e),t.listen("columnAdded",this._onColumnAdded))},Ct.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),window.removeEventListener("load",this._requestRecalculation),t.unlisten("widthChanged",this._requestRecalculation),t.unlisten("postSectionDataBinding",this._requestRecalculation),t.unlisten("columnAdded",this._onColumnAdded),this._dispose(),this._clearTimer())},Ct.prototype.config=function(t){if(t){var e=t.contentWrap;e&&(this._evenRowHeight=!!e.evenRowHeight);var i=t.columns;if(i)for(var o=i.length,n=0;n<o;++n)this._setColumnContentWrapping(n,i[n])}},Ct.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this._getColumnOption(n,"contentWrap",this._hosts[0]);s&&(r.contentWrap=s)}var l=e.contentWrap;return l||(l=e.contentWrap={}),l.evenRowHeight=this._evenRowHeight,e},Ct.prototype.adjustRowHeight=function(t,e,i){if(this._adjusting||!this._hosts.length)return!1;this._clearTimer(),null==t&&(t="content");var o=this._hosts[0].getSection(t);if(!o)return!1;var n=o.getElement();if(!n||!n.offsetParent)return!1;this._adjusting=!0;var r=[],s=NaN,l=null;this._evenRowHeight?s=this._calcMaxRowHeight(o,r,e,i):l=this._calcRowHeights(o,r,e,i);var a,u,d=r.length,h=!1;if(d>this._freezingThreshold&&o.getFrozenLayout&&(h=o.getFrozenLayout(),o.setFrozenLayout(!0)),this._evenRowHeight)for(a=0;a<d;++a)u=r[a],o.setRowHeight(u,s);else for(a=0;a<d;++a)u=r[a],o.setRowHeight(u,l[u]);return d>this._freezingThreshold&&o.setFrozenLayout&&o.setFrozenLayout(h),this._adjusting=!1,!!d},Ct.prototype.adjustRowHeightAt=function(t,e){var i=this._hosts[0].getSection(t);if(!i)return!1;var o=this._calculateRowHeightAt(i,e);return!(!o||i.getRowHeight(e)===o||(i.setRowHeight(e,o),0))},Ct.prototype.calculateRowHeightAt=function(t,e){var i=this._hosts[0].getSection(t);return i?this._calculateRowHeightAt(i,e):NaN},Ct.prototype._setColumnContentWrapping=function(t,e){var i=!!e.contentWrap;this._newColumnData(t).contentWrap=i,this._wrapContent(t,i)},Ct.prototype._requestRecalculation=function(){this._recalTimer||this._adjusting||(this._recalTimer=setTimeout(this._onRecalculation,100))},Ct.prototype._onRecalculation=function(){this._recalTimer=0,this.adjustRowHeight("content")},Ct.prototype._clearTimer=function(){this._recalTimer&&(clearTimeout(this._recalTimer),this._recalTimer=0)},Ct.prototype._getSteppingHeight=function(t){return Math.ceil(t)+14},Ct.prototype._calculateRowHeightAt=function(t,e){for(var i=t.getDefaultRowHeight(),o=t.getColumnCount(),n=0;n<o;++n)if(this.isWrappingContent(n)){var r=t.getCell(n,e,!1);if(r&&r.isVisible()){var s=r.getContent();if(s&&s.offsetParent){var l=this._getSteppingHeight(s.offsetHeight);l>i&&(i=l)}}}return i},Ct.prototype._calcMaxRowHeight=function(t,e,i,o){if(null==i?i=t.getFirstIndexInView():(!i||i<0)&&(i=0),null==o)o=t.getLastIndexInView()+1;else{var n=t.getRowCount();(!o||o>n)&&(o=n)}var r,s=0;for(r=i;r<o;++r){var l=this._calculateRowHeightAt(t,r);s<l&&(s=l)}if(s)for(r=i;r<o;++r)s!==t.getRowHeight(r)&&e.push(r);return s},Ct.prototype._calcRowHeights=function(t,e,i,o){if(null==i?i=t.getFirstIndexInView():(!i||i<0)&&(i=0),null==o)o=t.getLastIndexInView()+1;else{var n=t.getRowCount();(!o||o>n)&&(o=n)}for(var r=new Array(o),s=i;s<o;++s){var l=this._calculateRowHeightAt(t,s);r[s]=l,l&&l!==t.getRowHeight(s)&&e.push(s)}return r},Ct.prototype._wrapContent=function(t,e){this._hosts[0].enableColumnClass(t,"wrap",e,"content"),this._requestRecalculation()},Ct.prototype.enableContentWrapping=function(t,e){var i={contentWrap:e};this._setColumnContentWrapping(t,i)},Ct.prototype.isWrappingContent=function(t){return!!this._getColumnOption(t,"contentWrap")},Ct.prototype._onColumnAdded=function(t){t.context&&this._setColumnContentWrapping(t.colIndex,t.context)};var yt=function(t){this._model=t,this._items=[],this._runningId=0};yt.prototype.clear=function(){this._items.length=0,this._runningId=0},yt.prototype.addItem=function(t){this._addItem(t,0)},yt.prototype.addItems=function(t){this._addItem(t,0)},yt.prototype._addItem=function(t,e){if(t)if(e>=10)console.warn("Circular reference detected");else if("string"==typeof t)"SEPARATOR"===t||t.match(/-{3,}/)?this.addSeparator():this._addItem(this._model.items[t],e+1);else if(Array.isArray(t))for(var i=t.length,o=0;o<i;++o)this._addItem(t[o],e+1);else this._assignId(t),this._items.push(t)},yt.prototype.addSeparator=function(){this._items.push({type:"separator"})},yt.prototype.getMenuItems=function(){return this._items},yt.prototype.findItem=function(t){return this._findItem(t,this._items)},yt.prototype._findItem=function(t,e){var i;if(!e)return null;if(Array.isArray(e)){for(var o=e.length,n=0;n<o;++n)if(i=this._findItem(t,e[n]))return i;return null}return e.id===t?[e]:((i=this._findItem(t,e.items))&&i.push(e),i)},yt.prototype._assignId=function(t){if(Array.isArray(t))for(var e=0;e<t.length;e++)this._assignId(t[e]);else t.id="_item_"+this._runningId++,t.items&&this._assignId(t.items)};const bt=yt;var St=function(t){var e=this;e._onItemHovered=e._onItemHovered.bind(e),e._onItemClicked=e._onItemClicked.bind(e),e._init(t),e._config(t)};o.Z.inherits(St,n.ZP),St.prototype._elem,St.prototype._options,St.prototype._isSelectable=!0,St.prototype._init=function(t){var e=this,i=document.createElement("li");i.className="tr-contextmenu-item",i.addEventListener("mouseover",e._onItemHovered),i.addEventListener("click",e._onItemClicked),e._elem=i,e._options=t},St.prototype.dispose=function(){var t=this;t.removeAllEventListeners(),t._elem.removeEventListener("mouseover",t._onItemHovered),t._elem.removeEventListener("click",t._onItemClicked),t._elem.parentNode.removeChild(t._elem)},St.prototype._config=function(t){var e;t||(t={});var i=this;(e=t.id)&&i.setId(e),(e=t.type)&&i.setType(e),(e=t.text)&&i.setText(e),(e=t.value)&&i.setValue(e),null!=(e=t.isDisabled)&&(!0===e?i.setSelectable(!1):i.setSelectable(!0)),null!=(e=t.isSelectable)&&(!1===e?i.setSelectable(!1):i.setSelectable(!0)),e=t.items,Array.isArray(e)&&i.setItems(e)},St.prototype._onItemHovered=function(t){var e=this;e.isSelectable()&&(t.item=e._options,e._dispatch("itemHovered",t))},St.prototype._onItemClicked=function(t){var e=this;e.isSelectable()&&!Array.isArray(e.getItems())&&(t.item=e._options,e._dispatch("itemClicked",t))},St.prototype.setId=function(t){this._elem.setAttribute("id",t),this._id=t},St.prototype.getId=function(){return this._id},St.prototype.setText=function(t){this._elem.textContent=t+"",this._text=t},St.prototype.getText=function(){return this._text},St.prototype.setValue=function(t){this._value=t},St.prototype.getValue=function(){return this._value},St.prototype.setSelectable=function(t){var e=this;t?(e._elem.removeAttribute("data-unselectable"),e._elem.removeAttribute("disabled")):(e._elem.setAttribute("data-unselectable","true"),e._elem.setAttribute("disabled","true")),e._isSelectable=!!t},St.prototype.isSelectable=function(){return this._isSelectable},St.prototype.setItems=function(t){this._items=t,this._elem.classList.add("has-child")},St.prototype.getItems=function(){return this._items},St.prototype.setType=function(t){this._elem.setAttribute("data-type",t),this._type=t},St.prototype.getType=function(){return this._type},St.prototype.getElement=function(){return this._elem};const wt=St;var xt=function(t,e){var i=this;i.show=i.show=i.show.bind(i),i.hide=i.hide=i.hide.bind(i),i.toggle=i.toggle=i.toggle.bind(i),i._onBlur=i._onBlur.bind(i),i._onBlurTimer=i._onBlurTimer.bind(i),i._onResize=i._onResize.bind(i),i.updatePosition=i.updatePosition.bind(i),i._onScroll=i._onScroll.bind(i),i._onMouseOver=i._onMouseOver.bind(i),i._onMouseOut=i._onMouseOut.bind(i),i._onMouseOverTimeout=i._onMouseOverTimeout.bind(i),t&&1!==t.nodeType&&(e=t,t=null),t?(i._elem=t,f.i.removeParent(t)):i._elem=document.createElement("div"),i._elem.style.position="fixed",i._elem.style.left="0",i._elem.style.top="0",i._elem.style.display="inline-block",i._focusElements=[i._elem],i._children=[],i._evtArg={target:i._elem,currentTarget:i._elem},i._parentElement=document.body,i.init(e)};o.p.inherits(xt,n.pB),xt.prototype._elem=null,xt.prototype._disabled=!1,xt.prototype._inDoc=!1,xt.prototype._autoHiding=!0,xt.prototype._blurTimer=0,xt.prototype._resizeTimer=0,xt.prototype._attachedElem=null,xt.prototype._positioning="under",xt.prototype._focusElements,xt.prototype._parentElement,xt.prototype._children,xt.prototype._evtArg,xt.prototype._autoClipping=!0,xt.prototype._origW=null,xt.prototype._origH=null,xt.prototype._hoverToShow=!1,xt.prototype._hoverTimer=0,xt.prototype._gap=0,xt.prototype._uiBlocking=!1,xt.prototype._hideOnScroll=!0,xt.prototype._autoRepositioning=!0,xt.prototype.dispose=function(){this._removeEventListeners(),this._clearMouseOverTimer();for(var t=this._children.length;--t>=0;)this._children[t].dispose();this._inDoc=!1,f.i.removeParent(this._elem),f.i.removeParent(this._overlay),this._elem=null},xt.prototype.getElement=function(){return this._elem},xt.prototype.appendChild=function(t){t&&this._elem.appendChild(t)},xt.prototype.disable=function(t){this._disabled=!1!==t},xt.prototype.enable=function(t){this._disabled=!1===t},xt.prototype.init=function(t){if(t){t.positioning&&(this._positioning=t.positioning),null!=t.autoHiding&&(this._autoHiding=!!t.autoHiding),null!=t.uiBlocking&&this.enableUIBlocking(t.uiBlocking),null!=t.hoverToShow&&(this._hoverToShow=!!t.hoverToShow),null!=t.autoClipping&&(this._autoClipping=!!t.autoClipping),null!=t.attachedElement&&this.attachTo(t.attachedElement),null!=t.contentElement&&this.appendChild(t.contentElement),null!=t.parentElement&&this.setParentElement(t.parentElement),null!=t.popupChild&&this.addPopupChild(t.popupChild),0==t.hideOnScroll&&(this._hideOnScroll=!1),0==t.autoRepositioning&&(this._autoRepositioning=!1),this.addListener(t,"show"),this.addListener(t,"hide"),this.addListener(t,"shown"),this.addListener(t,"hidden");var e=t.focusElement||t.focusElements;if(e)if(Array.isArray(e))for(var i=e.length;--i>=0;)this.addFocusElement(e[i]);else this.addFocusElement(e)}},xt.prototype.attachTo=function(t,e){t||(t=null),this._attachedElem!==t&&(this._hoverToShow&&this._attachedElem&&(this._attachedElem.removeEventListener("mouseover",this._onMouseOver,!1),this._attachedElem.removeEventListener("mouseout",this._onMouseOut,!1)),this.removeFocusElement(this._attachedElem),this._attachedElem=t,this.addFocusElement(this._attachedElem),this._hoverToShow&&this._attachedElem&&(this._attachedElem.addEventListener("mouseover",this._onMouseOver,!1),this._attachedElem.addEventListener("mouseout",this._onMouseOut,!1))),null!=e&&this.setPositioning(e)},xt.prototype.setAttachedElement=xt.prototype.attachTo,xt.prototype.addFocusElement=function(t){t&&this._focusElements.indexOf(t)<0&&this._focusElements.push(t)},xt.prototype.removeFocusElement=function(t){if(t){var e=this._focusElements.indexOf(t);e>=0&&this._focusElements.splice(e,1)}},xt.prototype.addPopupChild=function(t){return t||((t=new xt).setPositioning("right"),t.attachTo(this._elem)),this.addFocusElement(t.getElement()),this._children.push(t),t},xt.prototype.setPopupGap=function(t){this._gap="number"==typeof t?t:0},xt.prototype.setParentElement=function(t){return t instanceof Element?this._parentElement=t:this._parentElement||(this._parentElement=document.body),this._parentElement},xt.prototype.show=function(t,e){var i=this;if(i._clearMouseOverTimer(),!i._disabled){var o=!1!==t;if(i._inDoc!==o){var n=o?"show":"hide";if(i._evtArg.type=n,i._dispatch(n,i._evtArg),i._evtArg.cancel)i._evtArg.cancel=!1;else{if(o)i._inDoc=!0,e instanceof Element||(e=i._parentElement),i._uiBlocking&&i._attachOverlay(e),e.appendChild(i._elem),e.addEventListener("scroll",i._onScroll,!0),i._autoHiding&&(window.addEventListener("mousedown",i._onBlur,!0),window.addEventListener("touchstart",i._onBlur,!0)),window.addEventListener("resize",i._onResize,!1),window.addEventListener("scroll",i._onScroll,!0);else if(i._inDoc){i._removeEventListeners(),i._restoreElementSize();for(var r=i._children.length;--r>=0;)i._children[r].hide();i._inDoc=!1,f.i.removeParent(i._elem),f.i.removeParent(i._overlay)}n=o?"shown":"hidden",i._evtArg.type=n,i._dispatch(n,i._evtArg),o&&i.updatePosition()}}else i.updatePosition()}},xt.prototype.hide=function(t){this.show(!1===t)},xt.prototype.toggle=function(t,e){null==t&&(t=!this._inDoc),t?this.show(!0,e):this.hide()},xt.prototype.isShown=function(){return this._inDoc},xt.prototype.isHidden=function(){return!this._inDoc},xt.prototype.contains=function(t){if(t){t=Array.isArray(t)?t:[t];for(var e=this._focusElements,i=e.length;--i>=0;)if(t.indexOf(e[i])>=0||e[i].contains(t[0]))return!0}return!1},xt.prototype.setPositioning=function(t){this._positioning!==t&&(this._positioning=t,this.updatePosition())},xt.prototype.disableAutoHiding=function(t){var e=!1===t;this._autoHiding!==e&&(this._autoHiding=e,this._inDoc&&(e?(window.addEventListener("mousedown",this._onBlur,!0),window.addEventListener("touchstart",this._onBlur,!0)):(window.removeEventListener("mousedown",this._onBlur,!0),window.removeEventListener("touchstart",this._onBlur,!0))))},xt.prototype.disableAutoRepositioning=function(t){var e=!1===t;this._autoRepositioning!==e&&(this._autoRepositioning=e)},xt.prototype.disableAutoClipping=function(t){var e=!1===t;this._autoClipping!==e&&(this._autoClipping=e)},xt.prototype.disableHideOnScroll=function(t){var e=!1===t;this._hideOnScroll!==e&&(this._hideOnScroll=e)},xt.prototype.updatePosition=function(t){null==t&&(t=!0);var e=this;if(e._resizeTimer=0,e._inDoc){if(e._attachedElem){if(!e._attachedElem.offsetWidth)return;e._autoClipping&&e._restoreElementSize();var i=document.body;"over"===e._positioning&&(i=document.documentElement);var o,n,r=f.i.getRelativePosition(e._attachedElem,i),s=r.x,l=r.y,a=window.innerWidth,u=window.innerHeight,d=null!=window.scrollX?window.scrollX:window.pageXOffset,h=null!=window.scrollY?window.scrollY:window.pageYOffset,c=a+d,p=u+h,_=e._attachedElem.offsetWidth,g=e._attachedElem.offsetHeight,m=e._elem.offsetWidth,v=e._elem.offsetHeight;"right"==e._positioning?(o=s+_+this._gap,n=l):"over"==e._positioning?(o=s,n=l):(o=s,n=l+g),t&&("right"==e._positioning?(o+m>c&&s-m>d&&(o=s-m-this._gap),n+v>p&&l+g-v>h&&(n=l+g-v)):"over"==e._positioning?(o+m>c&&s+_-m>d&&(o=s+_-m),n+v>p&&l+_-v>h&&(n=l+_-v)):(o+m>c&&s+_-m>d&&(o=s+_-m),n+v>p&&(l-v>h?n=l-v:(n-=n+v-p)<0&&(n=0)))),e._autoClipping&&(o+m>c&&(null==e._origW&&(e._origW=e._elem.style.width),e._elem.style.width=c-o+"px"),n+v>p&&(null==e._origH&&(e._origH=e._elem.style.height),e._elem.style.height=p-n+"px")),e._elem.style.left=Math.floor(o-d)+"px",e._elem.style.top=Math.floor(n-h)+"px"}else"fixed"!=e._positioning&&"custom"!=e._positioning&&(e._elem.style.left="calc(50vw - "+Math.floor(e._elem.offsetWidth/2)+"px)",e._elem.style.top="calc(46vh - "+Math.floor(e._elem.offsetHeight/2)+"px)");var C="positioning";e._evtArg.type=C,e._dispatch(C,e._evtArg)}},xt.prototype.enableUIBlocking=function(t){var e=this._uiBlocking;return this._uiBlocking=!1!==t,e},xt.prototype._attachOverlay=function(t){if(!this._overlay){var e=(this._overlay=document.createElement("div")).style;e.height="100%",e.width="100%",e.top="0",e.left="0",e.backgroundColor="rgba(0, 0, 0, 0)"}t===document.body?this._overlay.style.position="fixed":this._overlay.style.position="absolute",t.appendChild(this._overlay)},xt.prototype._onBlur=function(t){if(!this._blurTimer&&this._inDoc){if(t)if(t.composedPath){if(this.contains(t.composedPath()))return}else if(this.contains(t.target))return;this._blurTimer=setTimeout(this._onBlurTimer,10)}},xt.prototype._onBlurTimer=function(){this._blurTimer=0,this.contains(document.activeElement)||this.hide()},xt.prototype._onResize=function(){!this._resizeTimer&&this._inDoc&&this._autoRepositioning&&(this._resizeTimer=setTimeout(this.updatePosition,50))},xt.prototype._onScroll=function(t){!this.contains(t.target)&&this._hideOnScroll&&this.hide()},xt.prototype._onMouseOver=function(t){this._hoverTimer||this._inDoc||(this._hoverTimer=setTimeout(this._onMouseOverTimeout,500))},xt.prototype._onMouseOut=function(t){this._hoverTimer&&(t.currentTarget.contains(t.relatedTarget)||this._clearMouseOverTimer())},xt.prototype._onMouseOverTimeout=function(){this._hoverTimer=0,this.show()},xt.prototype._clearMouseOverTimer=function(){this._hoverTimer&&(clearTimeout(this._hoverTimer),this._hoverTimer=0)},xt.prototype._restoreElementSize=function(){null!=this._origW&&(this._elem.style.width=this._origW,this._origW=null),null!=this._origH&&(this._elem.style.height=this._origH,this._origH=null)},xt.prototype._removeEventListeners=function(){this._blurTimer&&(clearTimeout(this._blurTimer),this._blurTimer=0),this._resizeTimer&&(clearTimeout(this._resizeTimer),this._resizeTimer=0),window.removeEventListener("mousedown",this._onBlur,!0),window.removeEventListener("touchstart",this._onBlur,!0),window.removeEventListener("resize",this._onResize,!1),window.removeEventListener("scroll",this._onScroll,!0),this._elem.parentElement&&this._elem.parentElement.removeEventListener("scroll",this._onScroll,!0)};const Tt=xt;var It=function(t){var e=this;e.show=e.show.bind(e),e.attachTo=e.attachTo.bind(e),e.setMenu=e.setMenu.bind(e),e.setPosition=e.setPosition.bind(e),e._hoveredItem=e._hoveredItem.bind(e),e._hoveredChildItem=e._hoveredChildItem.bind(e),e._clickedItem=e._clickedItem.bind(e),e._clickedChildItem=e._clickedChildItem.bind(e),e._init(t)};o.Z.inherits(It,n.ZP),It.prototype._evtArg,It.prototype._children,It.prototype._childrenItem,It.prototype._parentElement,It.prototype._x,It.prototype._y,It.prototype._popup,It.prototype._ulElem,It.prototype._isMounted,It.prototype._init=function(t){var e=this,i=document.createElement("div");i.className="tr-contextmenu-popup";var o=document.createElement("ul");o.className="tr-contextmenu",i.appendChild(o),e._popup=new Tt(i),e._popup.setPositioning("custom"),e._ulElem=o,e._children=[],e._childrenItem=[],e._x=0,e._y=0,e._isMounted=!0,e._parentElement=t||window.document,e._evtArg={target:e._popup._elem,currentTarget:e._popup._elem}},It.prototype.isDisposed=function(){return!this._isMounted},It.prototype.dispose=function(){var t=this;t._isMounted&&(t.removeAllEventListeners(),t._popup.dispose(),t._disposeChildren(),t._isMounted=!1)},It.prototype._disposeChildren=function(){var t=this;t._children.forEach((function(t){t&&t.dispose()})),t._childrenItem.forEach((function(t){t&&t.dispose()})),t._children.length=0,t._childrenItem.length=0},It.prototype.show=function(){var t=this;t._popup.show(!0,t._parentElement),t.setPosition(t._popup._positioning,t._x,t._y)},It.prototype.hide=function(){this._popup.hide()},It.prototype.attachTo=function(t,e){t&&this._popup.attachTo(t,e)},It.prototype.setPosition=function(t,e,i){var o=this;if("custom"===t){o._x=e,o._y=i;var n=window.innerWidth,r=window.innerHeight,s=null!=window.scrollX?window.scrollX:window.pageXOffset,l=null!=window.scrollY?window.scrollY:window.pageYOffset,a=n+s,u=r+l,d=o._popup._elem.offsetWidth,h=o._popup._elem.offsetHeight;e+d>a&&(e=a-d),i+h>u&&(i=u-h),o._popup._elem.style.left=e-s+"px",o._popup._elem.style.top=i-l+"px"}},It.prototype.addPopupChild=function(t,e){e instanceof It&&(e.attachTo(t,"right"),this._popup.addFocusElement(e._popup),this._children.push(e))},It.prototype.setMenu=function(t){if(t&&Array.isArray(t)){var e=this;Array.isArray(e._menuItems)&&e._disposeChildren(),e._menuItems=t;for(var i=0;i<t.length;i++){var o=t[i],n=new wt(o);if(n.addEventListener("itemHovered",e._hoveredItem),n.addEventListener("itemClicked",e._clickedItem),e._childrenItem.push(n),Array.isArray(n.getItems())){var r=new It(e._parentElement);r._id=n.getId(),r.setMenu(n.getItems()),r.addEventListener("itemHovered",e._hoveredChildItem),r.addEventListener("itemClicked",e._clickedChildItem),e.addPopupChild(n.getElement(),r)}e._ulElem.appendChild(n.getElement())}}},It.prototype._hoveredChildItem=function(t){this._dispatch("itemHovered",t)},It.prototype._clickedChildItem=function(t){this._dispatch("itemClicked",t),this.hide()},It.prototype._hoveredItem=function(t){var e=this,i=e._evtArg,o=t.srcElement,n=e._children;if(o&&n.length)for(var r=0;r<n.length;r++){var s=n[r];s._id===o.getAttribute("id")?s.show():s.hide()}else i=t;e._dispatch("itemHovered",i)},It.prototype._clickedItem=function(t){var e=this;if(t.item&&t.item.id)for(var i=0;i<e._menuItems.length;i++){var o=e._menuItems[i];if(o.id===t.item.id){e._evtArg.item=o;break}}e._dispatch("itemClicked",e._evtArg),e.hide()};const Rt=It;var Dt=function(t){var e=this;e._hosts=[],e._onItemClicked=e._onItemClicked.bind(e),e._rightClickedHandler=e._rightClickedHandler.bind(e),e._onThemeLoaded=e._onThemeLoaded.bind(e),e.config({contextMenu:t})};o.Z.inherits(Dt,a),Dt.prototype._contextMap={title:"header",content:"content",footer:"footer",filterRow:"filterRow"},Dt._styles="",Dt._stylePromise=null,Dt.prototype._disabled=!1,Dt.prototype._popup=null,Dt.prototype._mouseInfo=null,Dt.prototype._menuAPI=null,Dt.prototype._csp=null,Dt.prototype._rsp=null,Dt.prototype._contextMenu=null,Dt.prototype.getName=function(){return"ContextMenuPlugin"},Dt.prototype.initialize=function(t,e){var i=this;i._hosts.indexOf(t)>=0||(i._hosts.push(t),t.listen("postSectionRender",i._onPostSectionRender),t.listen("contextmenu",i._rightClickedHandler),i.config(e),Dt._styles?Dt._applyThemeColor(t):(Dt._stylePromise||(Dt._stylePromise=l.u.getThemeColors()),Dt._stylePromise.then(i._onThemeLoaded).catch(i._onThemeLoaded)))},Dt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("postSectionRender",this._onPostSectionRender),t.unlisten("contextmenu",this._rightClickedHandler),this._hosts.splice(e,1),this._dispose(),this._hosts.length||(this._csp=this._rsp=null))},Dt.prototype.config=function(t){if(t){var e=this,i=t.contextMenu;null!=i&&("object"==typeof i?(e._menuAPI=new bt(i),i.items||(i.items={})):"function"==typeof i&&(i={contextmenu:i}),this.addListener(i,"contextmenu"),e._contextMenu=i,e._disabled=!i)}},Dt.prototype.getConfigObject=function(t){var e=t||{};return e.contextMenu=this._contextMenu,e},Dt.prototype.getMenuModel=function(){return this._contextMenu},Dt.prototype._configureMouseInfo=function(t){var e=this._hosts[0].getRelativePosition(t);e.context=this._contextMap[e.sectionType]||"";var i=e.colIndex,o=e.columnDef={};if(e.field=o.field=this.getColumnField(i),e.colId=o.id=this.getColumnId(i),this._csp||(this._csp=this._getPlugin("ColumnSelectionPlugin")),this._rsp||(this._rsp=this._getPlugin("RowSelectionPlugin")),this._csp){var n=this._csp.getSelectedColumns();e.selectedColumns=n&&n.length?n:null}else e.selectedColumns=null;if(this._rsp){var r=this._rsp.getSelectedRows();e.selectedRows=r&&r.length?r:null}else e.selectedRows=null;return e.mouseEvent=t,e},Dt.prototype._rightClickedHandler=function(t){var e=this,i=e._hosts[0];if(i&&null!=i.getRelativePosition(t).rowIndex){t.preventDefault();var o=e._mouseInfo=e._configureMouseInfo(t),n=e._contextMenu;if(n&&!e._disabled){if(e._menuAPI){var r;if(o.items=n.items,e._menuAPI.clear(),o.menu=e._menuAPI,n.onMenu&&(n.onMenu(o),r=o.menu.getMenuItems()),!r||!r.length)return;e._popup&&!e._popup.isDisposed()&&e._popup.dispose();var s=i.getElement();e._popup=new Rt(s),e._popup.setMenu(r),e._popup.setPosition("custom",t.pageX,t.pageY),e._popup.addEventListener("itemClicked",e._onItemClicked),e._popup.show()}e._dispatch("contextmenu",o),delete o.mouseEvent}}},Dt.prototype._onItemClicked=function(t){var e=t.item,i=e.items;if(!i||!i.length){var o=this._menuAPI.findItem(e.id);if(o)for(var n=o.length,r=0;r<n;++r){var s=o[r];if(s.callback){for(var l in this._mouseInfo)t[l]=this._mouseInfo[l];s.callback(t);break}}}},Dt.prototype._onThemeLoaded=function(){if(!Dt._styles){var t,e=l.u.getColors(),i=(0,s.CA)([".tr-contextmenu",["outline: none;","box-sizing: border-box;","-moz-box-sizing: border-box;","border-style: solid;","border-width: 1px;","overflow: hidden;","padding: 1px;","margin: 0;","user-select: none;","list-style-type: none;","background-color: backgroundColor;","color: fontColor;","border-color: borderColor;"],".tr-contextmenu-item",["list-style: none;","padding: 3px 7px;","margin: 0;","vertical-align: middle;","white-space: nowrap;","cursor: pointer;","line-height: 20px;"],".tr-contextmenu-item[disabled]",["color: disabledColor;","cursor: default;"],".tr-contextmenu-item",["padding-right: 20px;"],".tr-contextmenu-item:hover:not([disabled])",["background-color: hoveredColor;"],".tr-contextmenu-popup",["box-shadow: 0 0 10px rgba(0,0,0,0.5);","z-index: 10;"],".tr-contextmenu-item.has-child",["position: relative;"],".tr-contextmenu-item.has-child:after",["box-sizing: border-box;","-moz-box-sizing: border-box;","display: inline-block;","width: 7px;","height: 7px;","border-style: solid;","border-width: 1px;",'content: "";',"-webkit-transform: rotate(45deg);","transform: rotate(45deg);","border-left-width: 0;","border-bottom-width: 0;","position: absolute;","right: 8px;","top: -webkit-calc(50% - 4px);","top: -moz-calc(50% - 4px);","top: calc(50% - 4px);","border-color: fontColor;"],'.tr-contextmenu-item[data-type="separator"]',["padding: 0;","border: none;","border-bottom-style: solid;","border-bottom-width: 1px;","border-bottom-color: disabledColor;"]]),o=Q.rgb2Hex(e.tableBg),n=Q.hex2Num(o),r=Q.blackAndWhite(n);"#000000"===r?(t=.1,i=i.replace(/disabledColor/g,"lightgrey")):(t=.2,i=i.replace(/disabledColor/g,"gray"));var a=Q.num2Hex(Q.blendColor(o,r,t));i=(i=(i=(i=i.replace(/hoveredColor/g,a)).replace(/backgroundColor/g,e.tableBg)).replace(/fontColor/g,e.tableText)).replace(/borderColor/g,e.tableBorder),Dt._styles=i}for(var u=this._hosts.length;--u>=0;)Dt._applyThemeColor(this._hosts[u])},Dt._applyThemeColor=function(t){t&&!t._contextMenuStyles&&Dt._styles&&(t._contextMenuStyles=!0,(0,s.kM)(Dt._styles,t.getElement()))};var Et={from:function(t){if(t){var e=t;if("string"==typeof t||"number"==typeof t?e=new Date(t):Array.isArray(t)&&(e=new Date(Date.UTC(t[0]||0,t[1]||0,t[2]||0))),Et.isValid(e))return e}return null},isValid:function(t){if(t&&t.getTime){var e=t.getTime();return e==e}return!1},prefixSingleDigit:function(t){return t<10&&t>=0?"0"+t:""+t},_ymdRe:/^\d{4}\-d{2}\-\d{2}/,toYMD:function(t){if("string"==typeof t&&Et._ymdRe.test(t))return t;var e=Et.from(t);return e?e.getFullYear()+"-"+Et.prefixSingleDigit(e.getMonth()+1)+"-"+Et.prefixSingleDigit(e.getDate()):""},setDate:function(t,e){t&&(t.isAttached?t.value=Et.from(e):t.value=Et.toYMD(e))},getDate:function(t){return t?Et.from(t.value):null},compare:function(t,e){if(t!==e)if(t=Et.from(t),e=Et.from(e),t){if(!e)return 1;if(t<e)return-1;if(t>e)return 1}else if(e)return-1;return 0},equal:function(t,e){return!Et.compare(t,e)},extractDate:function(t){return Et.isValid(t)?[t.getFullYear(),t.getMonth(),t.getDate()]:null}};var At={create:function(t){if(Array.isArray(t)){for(var e=t.length,i=new Array(e),o=0;o<e;++o){var n=t[o];null!=n?"object"!=typeof n&&(n={value:n}):n={value:""};var r=n.label;r||"string"==typeof r||(n.label=n.value+""),i[o]=n}return i}return null}};var kt=function(t){this._onInputChanged=this._onInputChanged.bind(this),this._onOpenedChanged=this._onOpenedChanged.bind(this),this._onDateChanged=this._onDateChanged.bind(this),this._onPostDataSourceChanged=this._onPostDataSourceChanged.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onRowFilteringRetrieved=this._onRowFilteringRetrieved.bind(this),this._onRowFilteringFailed=this._onRowFilteringFailed.bind(this),this._onColumnFilterFailed=this._onColumnFilterFailed.bind(this),this.refresh=this.refresh.bind(this),this._updateUIs=this._updateUIs.bind(this),this._hosts=[],t&&this.config({filterInput:t})};o.p.inherits(kt,a),kt.prototype._filterProc=null,kt.prototype._gridConfig=null,kt.prototype._inputSects=null,kt.prototype._refreshTimer=0,kt.prototype._uiTimer=0,kt.prototype._freezeInputValue=!1,kt.prototype._inputTrigger="keyup",kt.prototype.getName=function(){return"FilterInputPlugin"},kt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.listen("postDataSourceChanged",this._onPostDataSourceChanged),t.listen("columnAdded",this._onColumnAdded),this.config(e))},kt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("postDataSourceChanged",this._onPostDataSourceChanged),this._hosts.splice(e,1),this._inputSects&&e<this._inputSects.length&&this._inputSects.splice(e,1),this._hosts.length||(this._compositeGrid=this._realTimeGrid=this._filterBuilder=null,this._filterProc=this._gridConfig=this._inputSects=null,this._refreshTimer&&(clearTimeout(this._refreshTimer),this._refreshTimer=0),this._uiTimer&&(clearTimeout(this._uiTimer),this._uiTimer=0)))},kt.prototype.beforeProcessOption=function(t,e){if("filterRow"===t||"FilterRow"===t)return!1},kt.prototype._afterInit=function(){this._requestPlugin(this._hosts[0],"RowFilteringPlugin",this._gridConfig).then(this._onRowFilteringRetrieved).catch(this._onRowFilteringFailed).finally(this._onPostDataSourceChanged)},kt.prototype.config=function(t){if(t){this._gridConfig=t;var e=t.filterInput;this.addListener(e,"inputCreated"),e&&null!=e.trigger&&(this._inputTrigger=e.trigger);for(var i=t.columns,o=i?i.length:0,n=0;n<o;++n)this._retrieveColumnOption(n,i[n])}},kt.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=r.filterInput={},l=this._getExtColumnOption(n);l&&(null!=l.disabled&&(s.disabled=l.disabled),null!=l.placeholder&&(s.placeholder=l.placeholder),null!=l.type&&(s.type=l.type),null!=l.entries&&(s.entries=l.entries),null!=l.defaultValue&&(s.defaultValue=l.defaultValue),null!=l.trigger&&(s.trigger=l.trigger))}return e},kt.prototype._onRowFilteringRetrieved=function(t){this._gridConfig=null,t&&(this._filterProc=t,this.refresh())},kt.prototype._onRowFilteringFailed=function(){return this._requestPlugin(this._hosts[0],"ColumnFilterPlugin",this._gridConfig).then(this._onRowFilteringRetrieved).catch(this._onColumnFilterFailed)},kt.prototype._onColumnFilterFailed=function(){this._gridConfig=null},kt.prototype._onColumnAdded=function(t){t.context&&null!=t.colIndex&&this._retrieveColumnOption(t.colIndex,t.context),this._requestUIUpdate()},kt.prototype._requestUIUpdate=function(){this._uiTimer||(this._uiTimer=setTimeout(this._updateUIs,50))},kt.prototype._updateUIs=function(){if(this._uiTimer=0,this._inputSects)for(var t=this._inputSects.length,e=0;e<t;++e)this._createColumnInputs(this._inputSects[e],this._hosts[e])},kt.prototype._onPostDataSourceChanged=function(t){if(!this._inputSects){var e=this._hosts.length;if(e){this._inputSects=[];var i,o=window.getComputedStyle(this._hosts[0].getElement()).getPropertyValue("--grid-row-height");o&&(o=parseInt(o,10));for(var n=0;n<e;++n){var r=(i=this._hosts[n]).getAllSections("title"),s=r[r.length-1],l=s?s.getIndex()+1:0,a=this._inputSects[n]=i.addSectionAt(l,"title","filterInputs");o&&a.setDefaultRowHeight(o),a.enableClass("filter-inputs"),a.addRow(1)}(!i.getVScrollStartIndex||i.getVScrollStartIndex()>=0)&&i.freezeSection(l),this._requestUIUpdate()}}},kt.prototype._onDateChanged=function(t){var e=this.getRelativeGrid(t);if(e){var i=e.getRelativePosition(t).colIndex,o=Et.getDate(t.detail)||t.target.value,n=o?o.toDateString().substr(4):"";this.filterColumn(i,n)}},kt.prototype._createColumnInputs=function(t,e){for(var i=t.getColumnCount(),o=0;o<i;++o){var n=t.getCell(o,0),r=n.getContent();if(!r){n.enableClass("no-sort");var s=this._newExtColumnOption(o);if(!s.disabled){r=this._createFilterUI(s),n.setContent(r);var l=s._filterArguments={};l.input=r,l.field=this._getField(o),l.cell=n,l.grid=e;var a={input:r,cell:n,colIndex:o,rowIndex:0,grid:e,section:t};this._compositeGrid&&(a.colId=this._compositeGrid.getColumnId(o)),this._dispatch("inputCreated",a);var u=s.defaultValue;if(u){var d=s.type.toLowerCase();if("date"==d){var h=Et.from(u);u=h?h.toDateString().substr(4):""}if("multiselect"==d){var c=kt._createMapObject(u);this.filterColumn(o,"",c)}else this.filterColumn(o,u)}}}}},kt._uiMap={number:"ef-input",select:"ef-select",multiselect:"ef-combo-box",dropdown:"ef-select",date:"ef-datetime-picker"},kt.prototype._createFilterUI=function(t){var e=t.type;e&&(e=e.toLowerCase());var i=t.defaultValue,o=null!=t.trigger?t.trigger:this._inputTrigger,n=kt._uiMap[e]||"input";"ef-input"==n?l.u.hasComponent("ef-number-field")&&(n="ef-number-field"):"input"==n&&l.u.hasComponent("ef-search-field")&&(n="ef-search-field");var r=document.createElement(n);r.className="filter-input",r.style.width="100%",r.style.margin="0";var s=t.placeholder;switch(s&&r.setAttribute("placeholder",s),r.addEventListener("keydown",kt._stopPropagation,!1),r.addEventListener("click",kt._stopPropagation,!1),n){case"ef-input":r.setAttribute("type","number"),0!=o&&""!=o&&r.addEventListener("value-changed",this._onInputChanged,!1);break;case"ef-number-field":0!=o&&""!=o&&r.addEventListener("value-changed",this._onInputChanged,!1);break;case"ef-select":r.data=At.create(t.entries),r.addEventListener("opened-changed",this._onOpenedChanged,!1),0!=o&&""!=o&&r.addEventListener("value-changed",this._onInputChanged,!1);break;case"ef-combo-box":r.multiple=!0,r.data=At.create(t.entries),0!=o&&""!=o&&r.addEventListener("value-changed",this._onInputChanged,!1);break;case"ef-datetime-picker":0!=o&&""!=o&&r.addEventListener("value-changed",this._onDateChanged,!1);break;case"ef-search-field":if(0!=o&&""!=o)if("enter"==o){var a=this;r.addEventListener("keyup",(function(t){"Enter"==t.key&&a._onInputChanged(t)}),!1)}else r.addEventListener("value-changed",this._onInputChanged,!1);break;default:if(r.setAttribute("type","search"),0!=o&&""!=o)if("enter"==o){var u=this;r.addEventListener("keyup",(function(t){"Enter"==t.key&&u._onInputChanged(t)}),!1)}else r.addEventListener("keyup",this._onInputChanged,!1)}return i&&("multiselect"===e?r.values=i:r.value=i),r},kt.prototype._getExtColumnOption=function(t){return this._getColumnOption(t,"filterInputOption")||null},kt.prototype._newExtColumnOption=function(t){var e=this._newColumnData(t),i=e.filterInputOption;return i||((i=e.filterInputOption={})._comparingLogic=kt._containingFilter),i},kt.prototype._retrieveColumnOption=function(t,e){var i=e?e.filterInput:null;if(null!=i){var o=this._newExtColumnOption(t);if(i){var n=i.type;"string"==typeof n&&(n=n.toLowerCase(),o.type=n);var r=i.filterLogic||i.defaultLogic;null!=r&&("function"==typeof r?o._comparingLogic=r:r||(o._comparingLogic=null)),"multiselect"==n&&o._comparingLogic===kt._containingFilter&&(o._comparingLogic=kt._multiSelectionFilter);var s=i.disabled;null!=s&&(o.disabled=!!s);var l=i.placeholder;"string"==typeof l&&(o.placeholder=l);var a=i.entries;Array.isArray(a)&&("select"===n&&a.push({label:"No Filter",value:"No Filter"}),o.entries=a);var u=i.defaultValue;u&&(o.defaultValue=u);var d=i.trigger;"string"!=typeof d&&0!=d||(o.trigger=d)}else o.disabled=!0}else this._getExtColumnOption(t)&&(this._getColumnData(t).filterInputOption=null)},kt.prototype.updateUI=function(t,e){if(!this._freezeInputValue){var i=this.getColumnInput(t);i&&(i.value=e),this._updateColumnOption(t,e)}},kt.prototype._updateColumnOption=function(t,e,i){var o=this._getExtColumnOption(t);if(!o)return null;var n="";(e||0===e)&&(n="string"!=typeof e?e+"":e);var r=o._filterArguments;return r&&(r.inputText=o.inputText=n,r.lowerCasedText=n.toLowerCase(),r.colIndex=t,i&&!Object.keys(i).length&&(i=null),r.textMap=o.textMap=i),o},kt.prototype.getColumnInput=function(t){if(this._inputSects){var e=this._inputSects[0].getCell(t,0);if(e&&e.getElement())return e.getContent()}return null},kt.prototype.removeColumnFilters=function(t){if(this._inputSects&&this._inputSects[0])if(null!=t)this.updateUI(t,"");else for(var e=this.getColumnCount(),i=0;i<e;i++)this.updateUI(i,"");this._freezeInputValue=!0,this._filterProc.removeColumnFilters(t),this._freezeInputValue=!1},kt.prototype.removeColumnFilter=kt.prototype.removeColumnFilters,kt.prototype.setInputValue=function(t,e){var i=this.getColumnInput(t);if(i){var o=this._getExtColumnOption(t),n=o.type?o.type.toLowerCase():"";if("date"==n){var r=Et.from(e);e=r?r.toDateString().substr(4):""}if("multiselect"==n){i.values=e;var s=kt._createMapObject(e);this.filterColumn(t,"",s)}else i.value=e,this.filterColumn(t,e)}},kt.prototype.refresh=function(t){t?this._refreshTimer||(this._refreshTimer=setTimeout(this.refresh,t)):(this._refreshTimer=0,this._filterProc&&this._filterProc.refresh())},kt.prototype.setFilterLogic=function(t,e,i){if(!(t<0)){var o=this._newExtColumnOption(t),n=o.inputText,r=o.textMap;e?null!=i&&(o._filterArguments=i):e=null,o._comparingLogic=e,(n||r)&&this.filterColumn(t,n,r)}},kt.prototype.filterColumn=function(t,e,i){var o=this._updateColumnOption(t,e,i);o&&this._setColumnFilter(t,o)},kt.prototype._setColumnFilter=function(t,e){var i=this._filterProc;if(i){this._freezeInputValue=!0,i.hasColumnFilter()&&i.removeColumnFilters(t);var o=e.inputText||e.textMap;if(e._comparingLogic&&o){var n=e._columnFilter;n||(n=this._realTimeGrid?kt._rtCompareRow:kt._compareRow,n=e._columnFilter=n.bind(null,e)),i.addColumnFilter(t,n)}this._freezeInputValue=!1}},kt.prototype._onInputChanged=function(t){kt._stopPropagation(t);var e=this.getRelativeGrid(t);if(e){var i,o=e.getRelativePosition(t).colIndex,n=t.currentTarget,r=n.value;"No Filter"===r&&n.tagName.indexOf("SELECT")>=0?r=null:n.tagName.indexOf("COMBO-BOX")>=0&&(i=kt._createMapObject(n.values)),this.filterColumn(o,r,i)}},kt.prototype._onOpenedChanged=function(t){if(t.detail.value)t.currentTarget.style.pointerEvents="none";else{var e=t.currentTarget;setTimeout((function(){e.style.pointerEvents=""}))}},kt._stopPropagation=function(t){t&&t.stopPropagation()},kt._compareRow=function(t,e,i){return t._comparingLogic(t._filterArguments,e)},kt._rtCompareRow=function(t,e,i){return t._comparingLogic(t._filterArguments,e.ROW_DEF.getRowData())},kt._createMapObject=function(t){var e={};if(t)for(var i=t.length,o=0;o<i;o++){var n=t[o];null!=n&&""!==n&&(e[kt._transformToLowercaseString(n)]=!0)}return e},kt._transformToLowercaseString=function(t){var e="";return"string"!=typeof t?e=t instanceof Date?t.toDateString().toLowerCase():(t+"").toLocaleLowerCase():t&&(e=t.toLowerCase()),e},kt._containingFilter=function(t,e){var i=t.lowerCasedText||t.inputText,o=t.input&&t.input.type;if(i){var n=e[t.field];if(null!=n){var r=kt._transformToLowercaseString(n);if(r)return"number"===o?Number(r)===Number(i):r.indexOf(i)>=0}return!1}return!0},kt._multiSelectionFilter=function(t,e){var i=t.textMap;if(i){var o=e[t.field];if(null!=o){var n=kt._transformToLowercaseString(o);if(n)return!!i[n]}return!1}return!0};var Pt=function(){this._onSectionBinding=this._onSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._onThemeLoaded=this._onThemeLoaded.bind(this),this._hosts=[]};o.p.inherits(Pt,a),Pt._runningId=0,Pt.prototype._themeLoading=!1,Pt.prototype.getName=function(){return"HeatMapPlugin"},Pt.prototype.hasMultiTableSupport=function(){return!0},Pt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this.config(e,t),t.listen("postSectionDataBinding",this._onSectionBinding),t.listen("columnAdded",this._onColumnAdded),t.listen("columnRemoved",this._onColumnRemoved),this._themeLoading||(this._themeLoading=!0,X.loadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded)))},Pt.prototype._afterInit=function(){if(this._realTimeGrid)for(var t,e,i=this.getColumnCount(),o=0;o<i;o++)(e=this.getColumnHeatMap(o))&&(t=e.getColumnStats())&&t.setColumnDataGetter(g)},Pt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("postSectionDataBinding",this._onSectionBinding),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnRemoved",this._onColumnRemoved),this._dispose())},Pt.prototype.config=function(t,e){if(t){var i=t.columns;if(i)for(var o=i.length,n=0;n<o;++n){var r=i[n];this.setColumnHeatMap(n,r,e)}}},Pt.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this.getColumnHeatMap(n);if(s)if(0!==s.midPoint||"cell"!==s.mode){var l=r.heatMap={};null!=s.midPoint&&(l.midPoint=s.midPoint),null!=s.mode&&(l.mode=s.mode)}else r.heatMap=!0}return e},Pt.prototype.getColumnHeatMap=function(t,e){var i=this._getColumnOption(t,"painter",e);return i&&i.getColoringType()===X.ColoringTypes.HEATMAP?i:null},Pt.prototype.setColumnHeatMap=function(t,e,i){var o="",n=0,r=e?e.field:"",s=r?e.heatMap||e.heatmap:null;if(s){var l=s.mode||s.type;o="string"==typeof l?l:"cell";var a=s.midPoint;"number"!=typeof a&&(a=+a),n=a||0}if(i)this._setColumnHeatMap(i,t,o,n,r);else for(var u=this._hosts.length;--u>=0;)this._setColumnHeatMap(this._hosts[u],t,o,n,r)},Pt.prototype._setColumnHeatMap=function(t,e,i,o,n){var r=t.getDataSource();if(r){var s,l,a,u,d,h=this._newColumnData(e),c=h.painter;if(i&&n){if(c){for(a=(l=t.getSection("content")).getRowCount(),u=0;u<a;++u)(d=l.getCell(e,u,!1))&&X.clearCellStyle(d,X.bgStyles);(s=c.getConditions()[0])&&r.enableColumnStats(s.field,!1,s.refId),c.resetHeatMap()}else c=h.painter=new X;c.midPoint=o,c.mode=i,(s=c.addHeatmapWithTheme(n,o,"text"===i)).refId="_hm"+Pt._runningId++;var p=r.enableColumnStats(n,!0,s.refId);this._initializedGrid&&this._realTimeGrid&&p.setColumnDataGetter(g),c.setColumnStats(p),t.enableColumnClass(e,"heat-map",!0),t.requestRowRefresh()}else if(c&&this._clearPainter(h,t))for(t.enableColumnClass(e,"heat-map",!1),a=(l=t.getSection("content")).getRowCount(),u=0;u<a;++u)(d=l.getCell(e,u,!1))&&(d.setStyle("color",""),d.setStyle("backgroundColor",""))}else console.log("Heat map requires a data source")},Pt.prototype.getColumnHeatMapOptions=function(t,e){e||(e={});var i=this.getColumnHeatMap(t);return i&&(e.midPoint=i.midPoint,e.mode=i.mode),e},Pt.prototype._clearPainter=function(t,e){if(t){var i=t.painter;if(i&&i.getColoringType()===X.ColoringTypes.HEATMAP){var o=i.getConditions()[0];return o&&e.getDataSource().enableColumnStats(o.field,!1,o.refId),i.clearHeatMap()&&(t.painter=null),!0}}return!1},Pt.prototype._onThemeLoaded=function(){for(var t=this._hosts.length;--t>=0;)this._hosts[t].requestRowRefresh()},Pt.prototype._onSectionBinding=function(t){if(l.u.isThemeLoaded())for(var e=t.sender,i=t.section,o=t.dataRows,n=i.getColumnCount(),r=t.fromRowIndex,s=t.toRowIndex,a=0;a<n;++a){var u=this.getColumnHeatMap(a,e);if(u)for(var d=u.getColumnStats(),h=d.getMin(),c=d.getMax(),p=r;p<s;++p){var _=i.getCell(a,p,!1);_&&u.renderHeatMap(_,this._getRowData(o[p]),h,c)}}},Pt.prototype._onColumnAdded=function(t){if(t.context&&(this.setColumnHeatMap(t.colIndex,t.context,t.sender),this._realTimeGrid)){var e=this.getColumnHeatMap(t.colIndex);if(e){var i=e.getColumnStats();i&&i.setColumnDataGetter(g)}}},Pt.prototype._onColumnRemoved=function(t){this._clearPainter(t.columnData,t.sender)};var Mt=function(t){var e=this;e._onDoubleClick=e._onDoubleClick.bind(e),e._onPopupHide=e._onPopupHide.bind(e),e._onScroll=e._onScroll.bind(e),e._onTextKeyDown=e._onTextKeyDown.bind(e),e._onTextKeyUp=e._onTextKeyUp.bind(e),e._onTouchStart=e._onTouchStart.bind(e),e._onTouchEnd=e._onTouchEnd.bind(e),e._onTouchTimer=e._onTouchTimer.bind(e),e._createContentEditor=e._createContentEditor.bind(e),e._createTitleEditor=e._createTitleEditor.bind(e),e._onColumnAdded=e._onColumnAdded.bind(e),e._onValueChanged=e._onValueChanged.bind(e),e._onMultiSelectionValueChanged=e._onMultiSelectionValueChanged.bind(e),e._onMultiSelectionEditorChanged=e._onMultiSelectionEditorChanged.bind(e),e._onAutoSuggestItemSelected=e._onAutoSuggestItemSelected.bind(e),e._hosts=[],t&&this.config({inCellEditing:t})};o.p.inherits(Mt,a),Mt._uiElementTypesMap={input:"input",text:"input",number:"ef-number-field",select:"ef-select",dropdown:"ef-select",date:"ef-datetime-picker",checkbox:"ef-checkbox",boolean:"ef-checkbox",combobox:"ef-combo-box"},Mt.prototype._editableTitle=!1,Mt.prototype._editableContent=!1,Mt.prototype._activePos=null,Mt.prototype._activeCell=null,Mt.prototype._activeRowId="",Mt.prototype._lastActiveGrid=null,Mt.prototype._prevContent=null,Mt.prototype._initialText="",Mt.prototype._headerInCellCache=null,Mt.prototype._activeInCellCache=null,Mt.prototype._usingBalloon=!1,Mt.prototype._balloonMode=!1,Mt.prototype._dataBinding=!0,Mt.prototype._dblClick=!0,Mt.prototype._autoCommitText=!1,Mt.prototype._touchTimerId=0,Mt.prototype._longPressTime=1e3,Mt.prototype._editing=!1,Mt.prototype._customElement=null,Mt.prototype._customElementPopup=null,Mt.prototype._tabToMove=!1,Mt.prototype._contentSource="textContent",Mt.prototype._inlineStyling=!1,Mt.prototype._disablingScroll=!1,Mt.prototype._uiBlocking=!1,Mt.prototype._autoSuggest=null,Mt.prototype._defaultTag="input",Mt.prototype._rowClosing=!1,Mt.prototype._closingOnScroll=!0,Mt.prototype._autoHiding=!0,Mt.prototype._editorTimerId=0,Mt._scrolling=!1,Mt.prototype._elfVersion=0,Mt._primaryColor="",Mt._styles=(0,s.CA)([":host .cell.editing input[type=text]",["border-style: solid;"],":host .cell.editing",["z-index: 2;"]]),Mt._onThemeLoaded=function(){var t=l.u.getColors();Mt._primaryColor=t.primary},Mt.prototype._createInputElement=function(t,e){var i=this,o=document.createElement(t);for(var n in e)o.setAttribute(n,e[n]);var r=Mt._uiElementTypesMap;return o.style.width="100%",o.style.height="100%",o.style.margin="0",o.style.borderColor=Mt._primaryColor||"#ee7600",o.style.maxHeight="unset",t===r.checkbox?(o.style.borderStyle="solid",o.style.borderWidth="1px",o.style.boxSizing="border-box",o.style.display="flex",o.style.justifyContent="center",o.addEventListener("keydown",(function(t){13===t.keyCode&&t.preventDefault()}))):t===r.select||t===r.combobox||t===r.date?t===r.combobox&&e&&e.multiple?(o.addEventListener("value-changed",i._onMultiSelectionValueChanged),o.addEventListener("opened-changed",i._onMultiSelectionEditorChanged)):o.addEventListener("value-changed",i._onValueChanged):"ef-input"===t?o.setAttribute("type","number"):t===r.input&&o.setAttribute("type","text"),this._autoSuggest&&(this._autoSuggest.addEventListener("item-select",i._onAutoSuggestItemSelected),this._autoSuggest.addEventListener("wheel",i._stopPropagation,!1)),o.addEventListener("keydown",i._onTextKeyDown,!1),o.addEventListener("keyup",i._onTextKeyUp,!1),o.addEventListener("mousedown",i._stopPropagation,!1),o.addEventListener("mouseup",i._stopPropagation,!1),o.addEventListener("click",i._stopPropagation,!1),o.addEventListener("copy",i._stopPropagation,!1),o.addEventListener("cut",i._stopPropagation,!1),o.addEventListener("paste",i._stopPropagation,!1),o},Mt.prototype._createEditor=function(){var t=document.createElement("div");return t.className="cell editing",t.style.position="absolute",t},Mt.prototype._createBalloonPopup=function(t){return new xt(t,{positioning:"over"})},Mt.prototype._createInCellCache=function(t,e,i){var o=this._createEditor(),n=this._createInputElement(e,i),r=new xt(o,{positioning:"over"});return o.appendChild(n),{grid:t,inputElement:n,editor:o,balloonPopup:r}},Mt.prototype._createTitleEditor=function(t){var e=this;return e._headerInCellCache||(e._headerInCellCache=e._createInCellCache(t,"input")),e._headerInCellCache},Mt.prototype._createContentEditor=function(t,e){var i=this,o=Mt._uiElementTypesMap,n=i._getColumnData(t,e),r=n.inCellEditing,s=o[r&&r.type]||i._defaultTag;if(!n.inCellCache){var l=r?r.attributes:null;n.inCellCache=i._createInCellCache(e,s,l)}var a=n.inCellCache;return s!==o.select&&s!==o.combobox||(a.inputElement.data=r&&r.entries),a},Mt.prototype.getName=function(){return"InCellEditingPlugin"},Mt.prototype._onColumnAdded=function(t){t.context&&null!=t.colIndex&&this._retrieveColumnOption(t.context,t.colIndex)},Mt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.length||window.addEventListener("scroll",this._onScroll),t.listen("columnAdded",this._onColumnAdded),t.getVScrollbar().listen("scroll",this._onScroll),t.getHScrollbar().listen("scroll",this._onScroll),this._dblClick&&(t.listen("dblclick",this._onDoubleClick),(0,s.b1)()&&(t.listen("touchstart",this._onTouchStart),t.listen("touchend",this._onTouchEnd),t.listen("touchcancel",this._onTouchEnd))),this._hosts.push(t),l.u.getElfVersion()<4&&(Mt._uiElementTypesMap.number="ef-input"),l.u.isHaloTheme()&&(t._inCellEditingStyles||(t._inCellEditingStyles=!0,(0,s.kM)(Mt._styles,t.getElement()))),this.config(e),Mt._primaryColor||l.u.getThemeColors().then(Mt._onThemeLoaded).catch(Mt._onThemeLoaded))},Mt.prototype.beforeProcessOption=function(t,e){if("cellEditing"==t)return null},Mt.prototype._afterInit=function(){this._elfVersion=l.u.getElfVersion()},Mt.prototype.config=function(t){if(t){var e=this,i=t.columns;if(i)for(var o=i.length,n=0;n<o;++n)e._retrieveColumnOption(i[n],n);var r=t.inCellEditing;r&&(r.type&&(e._defaultTag=Mt._uiElementTypesMap[r.type]),r.balloonMode&&e.enableBalloonMode(r.balloonMode),r.editableTitle&&e.enableTitleEditing(r.editableTitle),r.editableContent&&(e._editableContent=!0),r.tabToMove&&(e._tabToMove=!0),r.autoCommitText&&e.enableAutoCommitText(r.autoCommitText),null!=r.dataBinding&&e.disableDataBinding(!r.dataBinding),null!=r.contentSource&&(e._contentSource=r.contentSource),r.popupElement&&e.setPopupElement(r.popupElement),null!=r.doubleClick&&e.disableDblClick(!r.doubleClick),r.inlineStyling&&(e._inlineStyling=!0),r.disablingScroll&&(e._disablingScroll=!0),r.uiBlocking&&(e._uiBlocking=!0),r.autoSuggest&&(e._autoSuggest=r.autoSuggest),0==r.closingOnScroll&&(e._closingOnScroll=!1),0==r.autoHiding&&(e._autoHiding=!1),e.addListener(r,"preEditorOpening"),e.addListener(r,"editorOpened"),e.addListener(r,"beforeCommit"),e.addListener(r,"editorClosed"),e.addListener(r,"keyUp"),e.addListener(r,"beforeRowCommit"),e.addListener(r,"rowEditorClosed"))}};var Ft=function(t,e,i,o){if(o){if(!i)return t[e]=!1,!0}else if(i)return t[e]=!0,!0;return!1};Mt.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o,n,r=this.getColumnCount(),s=0;s<r;++s){var l=i[s];l||(l=i[s]={}),(n=this._getColumnData(s))&&(null!=n.editableContent&&(l.editableContent=n.editableContent),null!=n.inCellEditing&&(l.inCellEditing={},null!=(o=n.inCellEditing.type)&&(l.inCellEditing.type=o),null!=(o=n.inCellEditing.entries)&&(l.inCellEditing.entries=o),null!=(o=n.inCellEditing.attributes)&&(l.inCellEditing.attributes=o)))}var a=e.inCellEditing,u=0;return a||(a={}),u|=Ft(a,"balloonMode",this._balloonMode,!1),u|=Ft(a,"editableTitle",this._editableTitle,!1),u|=Ft(a,"tabToMove",this._tabToMove,!1),u|=Ft(a,"autoCommitText",this._autoCommitText,!1),u|=Ft(a,"dataBinding",this._dataBinding,!0),u|=Ft(a,"doubleClick",this._dblClick,!0),u|=Ft(a,"inlineStyling",this._inlineStyling,!1),u|=Ft(a,"disablingScroll",this._disablingScroll,!1),u|=Ft(a,"uiBlocking",this._uiBlocking,!1),u|=Ft(a,"closingOnScroll",this._closingOnScroll,!0),u|=Ft(a,"autoHiding",this._autoHiding,!0),"textContent"!==this._contentSource&&(u=1,a.contentSource=this._contentSource),u&&(e.inCellEditing=a),e},Mt.prototype._retrieveColumnOption=function(t,e){var i=t.inCellEditing,o=t.editableContent;if(null!=i||null!=o){var n=this._newColumnData(e);null!=i&&(n.inCellEditing=i,i.entries=At.create(i.entries)),null!=o&&(n.editableContent=o)}},Mt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnAdded",this._onColumnAdded),t.getVScrollbar().unlisten("scroll",this._onScroll),t.getHScrollbar().unlisten("scroll",this._onScroll),t.unlisten("dblclick",this._onDoubleClick),t.unlisten("touchstart",this._onTouchStart),t.unlisten("touchend",this._onTouchEnd),t.unlisten("touchcancel",this._onTouchEnd),this._hosts.length||(this._touchTimerId=0,this._editorTimerId=0,window.removeEventListener("scroll",this._onScroll)),this._dispose())},Mt.prototype.openEditor=function(t,e,i,o){if(o||(o=this._hosts[0])){var n=o.getSectionSettings(i||"content"),r=this._activePos;if(r){var s=n?n.getType():"";if(r.colIndex===t&&r.rowIndex===e&&r.sectionName===s&&r.grid===o)return;this.closeCellEditor()}var l=n?n.getSection():null,a=l?l.getCell(t,e):null;a&&(o.scrollToColumn(t),o.scrollToRow(null,e),setTimeout(this._openEditor.bind(this,a,o),100))}},Mt.prototype.closeCellEditor=function(t){this._commitText(t||this._autoCommitText)},Mt.prototype.enableBalloonMode=function(t){this._balloonMode=!1!==t},Mt.prototype.enableTitleEditing=function(t){this._editableTitle=!1!==t},Mt.prototype.disableTitleEditing=function(t){this._editableTitle=!1===t},Mt.prototype.disableCellEditing=function(t,e){t&&t.enableClass("no-editing",!1!==e)},Mt.prototype.disableDataBinding=function(t){this._dataBinding=!1===t},Mt.prototype.disableDblClick=function(t){var e=!1===t;if(this._dblClick!==e){this._dblClick=e;for(var i=this._hosts.length;--i>=0;)this._listenForTriggering(this._hosts[i],e)}},Mt.prototype.isEditing=function(){return this._editing},Mt.prototype.getTextBox=function(t,e){if(this._activeRowId){if(e=e||this._hosts[0]){var i=this._getColumnData(t,e).inCellCache;if(i)return i.inputElement}}else if(this._activeInCellCache)return this._activeInCellCache.inputElement;return null},Mt.prototype.getInitialText=function(){return this._initialText},Mt.prototype._getSourceContent=function(t,e,i,o){if("field"==this._contentSource)return this._getData(t,e,i);var n,r;if(o)for(var s=o.childNodes.length,l=0;l<s;++l)if(3===o.childNodes[l].nodeType){n=o.childNodes[l];break}return n?r=n.textContent:o&&(r=o.textContent),r},Mt.prototype._getRowIndex=function(t){if(t&&this._lastActiveGrid){var e=this._lastActiveGrid.getDataSource();if(e)return e.getRowIndex(t)}return-1},Mt.prototype._getRowId=function(t){if(null!=t&&this._lastActiveGrid){var e=this._lastActiveGrid.getDataSource();if(e)return e.getRowId(t)}return""},Mt.prototype.getActiveGrid=function(){return this._activePos?this._activePos.grid:null},Mt.prototype.getActiveColIndex=function(){if(this._activePos){var t=this._activePos.colIndex;if(null!=t)return t}return-1},Mt.prototype.getActiveRowIndex=function(){if(this._activeRowId)return this._getRowIndex(this._activeRowId);if(this._activePos){var t=this._activePos.rowIndex;if(null!=t)return t}return-1},Mt.prototype.getInputElementPosition=function(){return this._activePos||null},Mt.prototype.enableAutoCommitText=function(t){this._autoCommitText=!1!==t},Mt.prototype.isColumnEditable=function(t){var e=this._getColumnOption(t,"editableContent");return null==e?this._editableContent:e},Mt.prototype._onDoubleClick=function(t,e){var i=this,o=e||i.getRelativeGrid(t);if(!i.isEditing()&&o){var n=o.getRelativePosition(t),r=n.sectionType;if(("content"!==r||i.isColumnEditable(n.colIndex))&&("title"!==r||i._editableTitle)&&"header"!==r){var s=n.dataSource;if(null!=s){var l=s.getRowId(n.rowIndex);if(s.getGroupByRowId(l))return}t.preventDefault&&f.i.preventDefault(t),i.openEditor(n.colIndex,n.rowIndex,n.section,o)}}},Mt.prototype._openEditor=function(t,e,i){var o=this;if(e.getElement()&&!(this._hosts.indexOf(e)<0)&&(i||(i=e.getRelativePosition(t)),i.hit&&(o._dispatch("preEditorOpening",i),!i.cancel))){var n=i.colIndex,r=i.rowIndex,s=i.section,l=s.getCell(n,r),a=1,u=s.getStretchedCell(l,r);if(u?l=u:a=s.getCellRowSpan(n,r),l&&!l.hasClass("no-editing")){o.closeRowEditor(!1,e),s.addClass("edit-mode"),o._lastActiveGrid=e,o._activePos=i,i.cell=o._activeCell=l,i.content=o._prevContent=l.getContent(),i.field=o._getField(n);var d=i.dataSource;if(null!=d){var h=i.rowId=this._getRowId(i.rowIndex);i.segmentSeparator=d.isSegmentSeparator(h),i.groupHeader=d.getGroupByRowId(h),i.rowData=this._getRow(d,h),d.stall&&d.stall(!0)}"title"===i.sectionType?o._activeInCellCache=o._createTitleEditor(e):o._activeInCellCache=o._createContentEditor(n,e);var c=i.inputElement=o._activeInCellCache.inputElement,p=i.editor=o._activeInCellCache.editor,_=o._activeInCellCache.balloonPopup,g=i?o._getSourceContent(i.dataSource,i.rowIndex,i.field,i.content):"";r+1>=s.getRowCount()?c.classList.add("bottom"):c.classList.remove("bottom"),o._usingBalloon=o._isBalloonMode(l),o._usingBalloon?p.classList.add("balloon"):p.classList.remove("balloon");var f=p.style;(this._elfVersion||o._inlineStyling)&&(f.backgroundColor=s.getComputedStyle().backgroundColor);var m=s.getRowHeight(r),v=l.getWidth();if(!e.isPinnedColumn(n)){var C=e.getHScrollbar();if(C.isActive()){var y=C.getPaneSize();v>y&&(v=y)}}!o._usingBalloon||v>208?f.width=v+"px":f.width="",f.height=a>1?l.getHeight()+"px":m+"px";var b=document.body;if(o._compositeGrid||o._realTimeGrid){var S=o.getActiveGrid();S&&(b=S.getElement().parentElement)}_.enableUIBlocking(o._uiBlocking),_.addEventListener("hidden",o._onPopupHide),_.disableAutoHiding(!o._autoHiding),_.disableHideOnScroll(!0),_.attachTo(l.getElement()),_.show(!0,b),this._updateEditorPopup(o._activeInCellCache,l,e),o._customElement&&(o._customElementPopup.attachTo(p),o._customElementPopup.show(!0,b),o._customElementPopup.disableAutoHiding(!1),i.popupElement=o._customElement),o._setText(g,c),i.initialText=o._initialText=g,o._disablingScroll&&o._freezeScrolling(e,!0),i.autoSuggest=o._autoSuggest,o._autoSuggest&&(o._autoSuggest.attach===c&&(o._autoSuggest.attach=null),o._autoSuggest.parentNode!==p&&p.appendChild(o._autoSuggest),o._autoSuggest.attach=c,o._autoSuggest.positionTarget=c),o._dispatch("editorOpened",i),c.focus(),"function"==typeof c.select&&c.select(),i.initialText=o._initialText=o.getText(),o._editing=!0}}},Mt.prototype.openRowEditor=function(t,e){var i=this;if(e=e||i._hosts[0],i._getRowIndex(i._activeRowId)!==t&&e){var o,n;i.closeRowEditor(!1,e),i._commitText(!1);var r=e.getSection("content"),s=e.getDataSource(),l=(r.getColumnCount()||0)-1,a=t+1>=r.getRowCount(),u=this._elfVersion||i._inlineStyling?r.getComputedStyle().backgroundColor:null,d=r.getRowHeight(t),h=document.body;(i._compositeGrid||i._realTimeGrid)&&(h=e.getElement().parentElement);for(var c=0;c<=l;c++)if(i.isColumnEditable(c)){var p=r.getCell(c,t);if(p&&!p.hasClass("no-editing")){var _=i._createContentEditor(c,e),g=p.getContent(),f=i._getField(c),m=i._getSourceContent(s,t,f,g),v=_.inputElement,C=_.editor,y=_.balloonPopup;o?y.enableUIBlocking(!1):(o=v,n=y,y.enableUIBlocking(i._uiBlocking)),i._setText(m,v),a?v.classList.add("bottom"):v.classList.remove("bottom");var b=C.style;u&&(b.backgroundColor=u),b.height=d+"px";var S=r.getCellWidth(c,t);b.width=S+"px",C.classList.remove("balloon"),y.disableAutoHiding(!0),y.disableHideOnScroll(!0),y.attachTo(p.getElement()),y.show(!0,h),this._updateEditorPopup(_,p,e)}}o&&(n.addEventListener("hidden",i._onPopupHide),i._lastActiveGrid=e,i._editing=!0,i._activeRowId=this._getRowId(t),o.focus(),r.addClass("edit-mode"),i._disablingScroll&&i._freezeScrolling(e,!0))}},Mt.prototype.closeRowEditor=function(t){var e=this,i=e._lastActiveGrid;if(e._activeRowId&&i){var o=e._activeRowId,n=e._getRowIndex(o);t=!(n<=-1)&&!1!==t;for(var r,s=i.getSection("content"),l=i.getColumnCount(),a={},u=[],d=0;d<l;d++){var h=e._getColumnData(d,i);if((r=h&&h.inCellCache)&&(r.columnIndex=d,u.push(r),t)){var c=e._getField(d);r.field=c,a[c]=this._getValue(r.inputElement)}}var p,_,g=u.length;if(t&&(e.hasListener("beforeRowCommit")&&(_={grid:i,rowIndex:n,fieldValue:a,cancel:!1,rowId:e._activeRowId},e._dispatch("beforeRowCommit",_),t=!_.cancel),t)){var f=i.getDataSource();for(p=0;p<g;p++){var m=a[(r=u[p]).field];f&&e._setData(f,n,r.field,m);var v=s.getCell(r.columnIndex,n),C=v.getContent();C&&C.classList.contains("text")&&v.setContent(m)}}for(e.hasListener("rowEditorClosed")&&(_={grid:i,rowIndex:n,fieldValue:a,committed:t},e._dispatch("rowEditorClosed",_)),p=0;p<g;p++){var y=u[p].balloonPopup;y.removeEventListener("hidden",e._onPopupHide),y.hide()}e._freezeScrolling(i,!1),s.removeClass("edit-mode"),e._editing=!1,e._activeRowId="",e._lastActiveGrid=null,i.focus()}},Mt.prototype.toggleRowEditor=function(t,e,i){this._getRowIndex(this._activeRowId)===t?this.closeRowEditor(e,i):this._activeRowId?(this.closeRowEditor(e,i),this.openRowEditor(t,i)):this.openRowEditor(t,i)},Mt.prototype._onScroll=function(t){if(this._scrolling=!0,!this._closingOnScroll&&this._editing)if(this._activeInCellCache)this._activeInCellCache.balloonPopup.hide();else if(this._activeRowId)for(var e=this.getActiveGrid()||this._lastActiveGrid,i=(e.getSection("content").getColumnCount()||0)-1,o=0;o<=i;o++){var n=this._getColumnData(o,e).inCellCache;if(n){var r=n.balloonPopup;r&&r.hide()}}this._onPopupHide(),this._scrolling=!1},Mt.prototype._onPopupHide=function(t){this._closingOnScroll||!this._scrolling?(this._commitText(this._autoCommitText),this.closeRowEditor(!1)):this.requestShowEditorPopup()},Mt.prototype._onAutoSuggestItemSelected=function(t){var e=t.detail;if(e){var i=e.target;if(i){var o=e.method;"click"!==o&&"enter"!==o||(this.setText(i.value),this._commitText(!0,e.suggestion))}}},Mt.prototype._onValueChanged=function(t){this._activeRowId||this._commitText(!0)},Mt.prototype._onMultiSelectionValueChanged=function(t){t.currentTarget.dirty=!0},Mt.prototype._onMultiSelectionEditorChanged=function(t){if(t.detail&&!1===t.detail.value&&this._activePos){var e=this._activePos.inputElement;e.dirty&&(this._onValueChanged(t),e.dirty=!1)}},Mt.prototype._onTextKeyDown=function(t){t.stopPropagation(),this._activeRowId||(27===t.keyCode&&this._commitText(this._autoCommitText),9===t.keyCode&&(this._autoSuggest&&this._autoSuggest.suggestions.length>0&&this._activeInCellCache.inputElement.focus(),t.preventDefault()))},Mt.prototype._onTextKeyUp=function(t){if(t.stopPropagation(),!this._activeRowId){this.hasListener("keyUp")&&(this._activePos.text=this._activePos.enteredText=this._activeInCellCache.inputElement.value,this._dispatch("keyUp",this._activePos));var e=9===t.keyCode;if(e||13===t.keyCode){var i=this.getText(),o=this._activePos;if(this._initialText!==i){if(t.preventDefault(),this._autoSuggest&&this._autoSuggest.suggestions.length>0)return this._activeInCellCache.inputElement.focus(),void(this._autoSuggest.suggestions=[]);this._commitText(!0)}else this._commitText(!1);if(e&&this._tabToMove&&!t.altKey&&!t.ctrlKey){var n=o?o.grid:null;if(n&&n.getCellInfo)for(var r=n.getDataSource();o;)if((o=t.shiftKey?n.getPrevCell(o):n.getNextCell(o))&&o.cell){if(r.getRowDataAt(o.rowIndex)&&this.isColumnEditable(o.colIndex)){this.openEditor(o.colIndex,o.rowIndex,o.sectionName,o.grid);break}}else o=null}}}},Mt.prototype._commitText=function(t,e){var i=this,o=i._activePos;if(i.isEditing()&&o){o.section.removeClass("edit-mode"),i._editing=!1;var n=o.text=this.getValue(),r=o.groupHeader||!1;if(t&&(e&&(o.suggestionDetail=e),i.hasListener("beforeCommit")&&(i._dispatch("beforeCommit",o),t=!o.cancel,n=o.text),t&&i._dataBinding&&!r)){var s=o.sectionSettings,l=s.getType();if("content"===l){if(this._realTimeGrid&&"X_RIC_NAME"===o.field){var a=null;if(e){var u=e.value;if(u.p){var d=u.p.PermId;d&&(a={permId:d})}}this._realTimeGrid.setRic(o.rowId,n,a)}else{var h=s.getDataSource();h&&(this._realTimeGrid?i._setStaticData(h,o.rowIndex,o.field,n):i._setData(h,o.rowIndex,o.field,n))}i._prevContent&&!i._prevContent.classList.contains("text")||i._activeCell.setContent(n)}else if("title"===l){var c=this.getGridApi();c&&c.setColumnName(o.colIndex,n)}else i._activeCell.setContent(n)}i.hasListener("editorClosed")&&(o.canceled=o.cancelled=!t,o.committed=t,i._dispatch("editorClosed",o)),i._activeInCellCache&&i._activeInCellCache.balloonPopup&&(i._activeInCellCache.balloonPopup.removeEventListener("hidden",i._onPopupHide),i._activeInCellCache.balloonPopup.hide()),f.i.removeParent(i._customElement);var p=o.grid;p&&(i._freezeScrolling(p,!1),p.focus());var _=o.dataSource;_&&_.stall&&_.stall(!1),i._activePos=i._activeCell=i._prevContent=i._lastActiveGrid=i._activeInCellCache=null}},Mt.prototype._stopPropagation=function(t){t.stopPropagation()},Mt.prototype._isBalloonMode=function(t){var e=t.getElement(),i=e?window.getComputedStyle(e):{};return this._balloonMode||"none"===i.display||"hidden"===i.visibility},Mt.prototype._listenForTriggering=function(t,e){e?(t.listen("dblclick",this._onDoubleClick),(0,s.b1)()&&(t.listen("touchstart",this._onTouchStart),t.listen("touchend",this._onTouchEnd),t.listen("touchcancel",this._onTouchEnd))):(t.unlisten("dblclick",this._onDoubleClick),t.unlisten("touchstart",this._onTouchStart),t.unlisten("touchend",this._onTouchEnd),t.unlisten("touchcancel",this._onTouchEnd))},Mt.prototype._onTouchStart=function(t){this._resetTouchTimer(),this._touchTimerId=setTimeout(this._onTouchTimer,this._longPressTime)},Mt.prototype._onTouchTimer=function(t){this._touchTimerId=0},Mt.prototype._onTouchEnd=function(t){this._resetTouchTimer()||this._onDoubleClick(t)},Mt.prototype._resetTouchTimer=function(){return!!this._touchTimerId&&(clearTimeout(this._touchTimerId),this._touchTimerId=0,!0)},Mt.prototype.setPopupElement=function(t){var e=this._activeInCellCache&&this._activeInCellCache.balloonPopup;this._customElement&&(e&&e.removeFocusElement(this._customElement),this._customElementPopup.dispose(),this._customElementPopup=null),this._customElement=t,this._customElement&&(this._customElementPopup=new xt(this._customElement),e&&e.addFocusElement(this._customElement))},Mt.prototype.setText=function(t){this._activeInCellCache&&this._setText(t,this._activeInCellCache.inputElement)},Mt.prototype._setText=function(t,e){e._origValue=t;var i=e.tagName.toLowerCase(),o=Mt._uiElementTypesMap;if(i===o.checkbox)t&&"f"!==t&&"false"!==t?e.setAttribute("checked","true"):e.removeAttribute("checked");else if(i===o.combobox)e.getAttribute("multiple")?e.values=t.split(/, */):this._elfVersion<=3?(e.value="",e.value={value:t,label:t}):e.value=t;else if(i===o.date)Et.setDate(e,t);else{var n="";null!=t&&(n="string"==typeof t?t:t+""),e.value=n}},Mt.prototype.getText=function(){return this._activeInCellCache?this._getText(this._activeInCellCache.inputElement):""},Mt.prototype._getText=function(t){var e=t.tagName.toLowerCase(),i=Mt._uiElementTypesMap;if(e===i.checkbox)return t.checked+"";if(e===i.combobox){if(this._elfVersion<=3)return t.value?t.value.value:""}else if(e===i.date)return t.value+"";return t.value},Mt.prototype.getValue=function(){return this._activeInCellCache?this._getValue(this._activeInCellCache.inputElement):null},Mt.prototype._getValue=function(t){var e=t.tagName.toLowerCase(),i=Mt._uiElementTypesMap;return e===i.checkbox?!!t.checked:e===i.date?Et.getDate(t):e===i.number||"number"==typeof t._origValue?+t.value:e===i.combobox&&t.getAttribute("multiple")?t.values.join(", "):this._getText(t)},Mt.prototype.clearText=function(){this.setText("")},Mt.prototype.appendText=function(t){t&&this._activeInCellCache&&(this._activeInCellCache.inputElement.value+=t)},Mt.prototype.commitText=function(t){t&&this.setText(t),this._commitText(!0)},Mt.prototype.getBalloonPopup=function(){return this._activeInCellCache?this._activeInCellCache.balloonPopup:null},Mt.prototype.getAutoSuggest=function(){return this._autoSuggest},Mt.prototype.setDisablingScroll=function(t){var e=t;return this._disablingScroll=t,e},Mt.prototype._freezeScrolling=function(t,e){if(t){var i=t.getVScrollbar(),o=t.getHScrollbar();i&&i.freezeScrolling(e),o&&o.freezeScrolling(e)}},Mt.prototype.requestShowEditorPopup=function(){this._editorTimerId||(this._editorTimerId=setTimeout(this._onUpdateEditorPopup.bind(this),100))},Mt.prototype._onUpdateEditorPopup=function(){this._editorTimerId=0;var t=this.getActiveGrid()||this._lastActiveGrid;if(t){var e,i,o=document.body;if((this._compositeGrid||this._realTimeGrid)&&(o=t.getElement().parentElement),this._activeInCellCache){var n=this._activePos;if(n){e=n.rowIndex,i=n.colIndex;var r=t.getSection(n.sectionType),s=r.getCell(i,e),l=r.getStretchedCell(s,e);if(l&&(s=l),s){var a=this._activeInCellCache.balloonPopup;a.attachTo(s.getElement()),a.show(!0,o),this._updateEditorPopup(this._activeInCellCache,s,t)}}}else if(this._activeRowId){var u=t.getSection("content");if(e=this._getRowIndex(this._activeRowId),u.isRowVisible(e))for(var d=(u.getColumnCount()||0)-1,h=0;h<=d;h++){var c=this._getColumnData(h,t).inCellCache,p=u.getCell(h,e);if(c&&p){var _=c.balloonPopup;_.attachTo(p.getElement()),_.show(!0,o),this._updateEditorPopup(c,p,t)}}}}},Mt.prototype._updateEditorPopup=function(t,e,i){var o=t.balloonPopup,n=t.editor,r=t.inputElement,s=o.getElement(),l=i.getRelativePosition(e),a=e.getWidth(),u=e.getHeight(),d=i.getColumnRect(0,i.getColumnCount()),h=i.getRowRect(0,i.getRowCount()),c=d.scrollViewSize,p=h.scrollViewSize,_=0,g="content"==l.sectionType?h.scrollViewTop:0,f=u,m=a,v="inline-block",C=0,y=0;if(-1!=d.leftPinnedIndex){var b=0;i.getVScrollbar().isActive()&&(b-=8),c+=b+=d.width-d.scrollViewSize,_+=b}if(n.classList.contains("balloon")&&!this._activeRowId&&(s.style.display="",n.style.width="",n.style.marginLeft="",n.style.marginTop="",C=-4,y=-4,m=o.getElement().offsetWidth),l.hit){var S=l.x+m,w=l.y-g+f;i.isPinnedColumn(l.colIndex)||l.x<_&&(m-=_-l.x,C+=Math.abs(l.x-_)),S>c&&(m-=S-c),l.y<g&&(f=f+l.y-g,y+=Math.abs(l.y-g)),w>p&&(f-=w-p),(m<48&&m!=a||f<16&&f!=u)&&(v="none")}else v="none";s.style.display=v,n.style.width=m?m+"px":"",n.style.height=f?f+"px":"",n.style.marginLeft=C?C+"px":0,n.style.marginTop=y?y+"px":0,r.focus()};var Gt=function(t){this._onPageChanged=this._onPageChanged.bind(this),this._onPageSizeChanged=this._onPageSizeChanged.bind(this),this._onDataChanged=this._onDataChanged.bind(this),this._resolveUIs=this._resolveUIs.bind(this),this._onDispatchEvent=this._onDispatchEvent.bind(this),this._hosts=[],this._controls=[],t&&this.config({pagination:t})};o.p.inherits(Gt,a),Gt.prototype._controls,Gt.prototype._userUI,Gt.prototype._uiTimer=0,Gt.prototype._pageChangeTimer=0,Gt.prototype._dateView=null,Gt.prototype._defaultPageSize=!0,Gt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this._dataView=t.getDataSource(),this._dataView.listen("dataChanged",this._onDataChanged),this.config(e),this._defaultPageSize&&this._dataView.setPageSize(10),this._controls.length||this._requestUIUpdate())},Gt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),this._dispose(),this._hosts.length||(this._dataView.unlisten("dataChanged",this._onDataChanged),this._dataView=null,this.setElement(null),this._uiTimer&&(clearTimeout(this._uiTimer),this._uiTimer=0),this._pageChangeTimer&&(clearTimeout(this._pageChangeTimer),this._pageChangeTimer=0)))},Gt.prototype.setElement=function(t){if(this._userUI!==t){this._userUI=t;var e=this._controls.length;if(e){for(var i=0;i<e;++i){var o=this._controls[i];l.u.getElfVersion()<4?(o.removeEventListener("page-changed",this._onPageChanged),o.removeEventListener("page-size-changed",this._onPageSizeChanged)):o.removeEventListener("value-changed",this._onPageChanged)}this._controls.length=0}null!==t&&this._requestUIUpdate()}},Gt.prototype._requestUIUpdate=function(){this._uiTimer||(this._uiTimer=setTimeout(this._resolveUIs,100))},Gt.prototype._resolveUIs=function(){if(this._uiTimer=0,!this._controls.length){var t,e,i;if(this._userUI){var o=Array.isArray(this._userUI)?this._userUI:[this._userUI];for(e=o.length,t=0;t<e;++t){var n=o[t];"string"==typeof n?(i=document.getElementById(n))&&this._controls.push(i):n&&1===n.nodeType&&this._controls.push(n)}}if(!this._controls.length&&null!==this._userUI){var r=document.getElementsByTagName("ef-pagination"),s=-1;"number"==typeof this._userUI?s=this._userUI:1===r.length&&(s=0),(i=r[s])&&this._controls.push(i)}for(this._userUI=null,t=this._controls.length;--t>=0;){var a=this._controls[t];l.u.getElfVersion()<4?(a.totalItems=this.getTotalRows(),a.pageSize=this.getPageSize(),a.page=this.getPageIndex(),a.addEventListener("page-changed",this._onPageChanged),a.addEventListener("page-size-changed",this._onPageSizeChanged)):(a.max=this.getPageCount(),a.addEventListener("value-changed",this._onPageChanged))}}},Gt.prototype.getName=function(){return"PaginationPlugin"},Gt.prototype.config=function(t){t&&this._configPaging(t.pagination)},Gt.prototype.getConfigObject=function(t){var e=t||{},i=e.pagination;return i||(i=e.pagination={}),i.page=this.getPageIndex(),i.pageSize=this.getPageSize(),e},Gt.prototype.beforeProcessOption=function(t,e){if("paging"==t&&e)return this._configPaging(e),null},Gt.prototype._configPaging=function(t){if(t){var e=t.elements||t.element;void 0!==e&&this.setElement(e);var i=t.pageSize;"number"==typeof i&&this.setPageSize(i),"number"==typeof(i=t.page)&&this.setPage(i),this.addListener(t,"pageChanged")}},Gt._toNumber=function(t){return"number"==typeof t?t:parseInt(t,10)},Gt.prototype._onPageChanged=function(t){var e=Gt._toNumber(t.detail.value);this.setPage(e),this._pageChangeTimer||(this._pageChangeTimer=setTimeout(this._onDispatchEvent,20))},Gt.prototype._onDispatchEvent=function(){this._pageChangeTimer=0,this._dispatch("pageChanged",{page:this.getPageIndex()})},Gt.prototype._onPageSizeChanged=function(t){var e=Gt._toNumber(t.detail.value);this._setPageSize(e)},Gt.prototype._onDataChanged=function(t){var e=this._controls.length;if(e&&!t.positionChangeOnly){var i,o=this.getPageIndex();if(l.u.getElfVersion()<4){var n=this.getTotalRows(),r=this.getPageSize();for(i=0;i<e;++i)this._controls[i].page=o,this._controls[i].totalItems=n,this._controls[i].pageSize=r}else{var s=this.getPageCount();for(i=0;i<e;++i)this._controls[i].value=o,this._controls[i].max=s}}},Gt.prototype.getTotalRows=function(){return this._dataView?this._dataView.getSortedRowIds(!0).length:0},Gt.prototype.getPageIndex=function(){return this._dataView?this._dataView.getPageIndex():1},Gt.prototype.getPageCount=function(){return this._dataView?this._dataView.getPageCount():0},Gt.prototype.getPageSize=function(){return this._dataView?this._dataView.getPageSize():0},Gt.prototype.setPageSize=function(t){this._defaultPageSize=!1,this._setPageSize(t)},Gt.prototype._setPageSize=function(t){this._dataView&&this._dataView.setPageSize(t)},Gt.prototype.setPage=function(t){this._dataView&&this._dataView.setPage(t)},Gt.prototype.goto=Gt.prototype.setPage,Gt.prototype.first=function(){this._dataView.firstPage()},Gt.prototype.last=function(){this._dataView.lastPage()},Gt.prototype.next=function(){this._dataView.nextPage()},Gt.prototype.previous=function(){this._dataView.previousPage()};var Bt={l:"l",c:"c",r:"r",L:"l",C:"c",R:"r"},Lt=function(t){return t&&Bt[t.charAt(0)]||""},Ot=function(t,e){this._topNode=t||f.i.div(),this._topNode._percentBar=this,this._topNode.classList.add("tr-percent-bar"),this._bar=f.i.div(),this._track=f.i.div(),this._track.appendChild(this._bar),this._txt=f.i.create("span");var i="l";if(e){e.alignment&&(i=e.alignment),null!=e.movementColor&&this.useMovementColor(!!e.movementColor),null!=e.barColor&&this.setBarColor(e.barColor);var o=0;null!=e.textWidth&&(o=1,this.setTextWidth(e.textWidth)),null!=e.textHidden&&(o|=this.hideText(e.textHidden)),null!=e.zeroValueHidden&&(o|=this.hideZeroValue(e.zeroValueHidden)),o&&this.isTextHidden()&&(this._textInDoc=!1,this._topNode.appendChild(this._track))}this.setAlignment(i)};function Nt(t){return Nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nt(t)}Ot.prototype._topNode=null,Ot.prototype._track=null,Ot.prototype._bar=null,Ot.prototype._txt=null,Ot.prototype._textWidth="56px",Ot.prototype._textHidden=!1,Ot.prototype._zeroValueHidden=!1,Ot.prototype._textInDoc=!0,Ot.prototype._alignment,Ot.prototype._absValue,Ot.prototype._maxValue=100,Ot.prototype._sign=1,Ot.prototype._dirtySign=!0,Ot.prototype._invalid=!1,Ot.prototype._movementColor=!0,Ot.prototype._barColor="",Ot.prototype._tooltipEnabled=!0,Ot._styles=(0,s.CA)([".tr-percent-bar",["position: relative;","text-align: left;","overflow: hidden;","white-space: nowrap;"],".tr-percent-bar>div",["position: relative;","display: inline-block;","height: 8px;","vertical-align: middle;"],".tr-percent-bar>div>div ",["position: absolute;","height: 100%;"],".tr-percent-bar>span",["display: inline-block;","vertical-align: middle;","box-sizing: border-box;","padding-left: 4px;","padding-right: 4px;","overflow: hidden;","max-width: 100%;"]]),Ot.injectCss=function(t){(0,s.kM)(this._styles,t)},Ot.toAlignment=Lt,Ot.prototype.getElement=function(){return this._topNode},Ot.prototype.getValue=function(){return this._absValue*this._sign},Ot.prototype.getPercent=function(){return this._absValue/this._maxValue*this._sign},Ot.prototype.isInvalid=function(){return this._invalid},Ot.prototype._checkInvalidity=function(){var t=this._absValue!=this._absValue||!this._maxValue;return t!==this._invalid&&(this._invalid=t,this._topNode.style.display=t?"none":""),t},Ot.prototype.setValue=function(t,e,i){var o=this;t&&"number"!=typeof t&&(t=+t),t||0===t?t>=0?(o._absValue=t,o._dirtySign|=1!==o._sign,o._sign=1):(o._absValue=-t,o._dirtySign|=-1!==o._sign,o._sign=-1):o._absValue=NaN,null!=e&&e==e&&(o._maxValue=e>=0?e:-e),o._checkInvalidity()||(o._absValue>o._maxValue&&(o._absValue=o._maxValue),o._updateValue(!0,i))},Ot.prototype.setMax=function(t){t==t&&(this._maxValue=t>=0?t:-t,this._checkInvalidity()||(this._absValue>this._maxValue&&(this._absValue=this._maxValue),this._updateValue(!0)))},Ot.prototype.hideZeroValue=function(t){var e=!1!==t;return this._zeroValueHidden!==e&&(this._zeroValueHidden=e,this._alignment&&this._updateTextVisibility()&&this._updateTextWidth(),!0)},Ot.prototype.setText=function(t){this._invalid||(t||0===t?"string"!=typeof t&&(t+=""):t="",this._txt._prevText!==t&&(this._txt._prevText=t,this._txt.textContent=t,this._tooltipEnabled&&(t?this._topNode.setAttribute("title",t):this._topNode.removeAttribute("title"))))},Ot.prototype.hideText=function(t){var e=!1!==t;return this._textHidden!==e&&(this._textHidden=e,this._alignment&&this._updateTextVisibility()&&this._updateTextWidth(),!0)},Ot.prototype.isTextHidden=function(){return!(!this._textHidden&&"0px"!==this._textWidth&&(!this._zeroValueHidden||this._absValue))},Ot.prototype._updateTextVisibility=function(){var t=!this.isTextHidden();return this._textInDoc!==t&&(this._textInDoc=t,t?this._reorderElements():f.i.removeParent(this._txt),!0)},Ot.prototype._updateTextWidth=function(){return"c"!==this._alignment&&(this._textInDoc?this._track.style.width="calc(100% - "+this._textWidth+")":this._track.style.width="100%",this._txt.style.width=this._textWidth,!0)},Ot.prototype.setTextWidth=function(t){var e="56px";"number"==typeof t?e=t>8?t+"px":"0px":"string"==typeof t&&t&&(e="0"!==t?t:"0px"),this._textWidth!==e&&(this._textWidth=e,this._alignment&&(this._updateTextVisibility(),this._updateTextWidth()))},Ot.prototype.setMaxTextLength=Ot.prototype.setTextWidth,Ot.prototype.getTextScrollWidth=function(){return this._txt.scrollWidth>this._txt.offsetWidth?this._txt.scrollWidth:NaN},Ot.prototype.getAlignment=function(){return this._alignment},Ot.prototype.setAlignment=function(t){t=Lt(t)||"l",this._alignment!==t&&(this._alignment=t,"c"===t?(this._track.style.width="50%",this._txt.style.width="50%"):(this._updateTextWidth(),this._txt.style.textAlign="right",this._track.style.left="",this._txt.style.transform="",this._bar.style.right="r"===t?"0":""),this._textInDoc&&this._reorderElements(),this._dirtySign=!0,this._updateValue(!1))},Ot.prototype._reorderElements=function(){"l"!==this._alignment?(this._topNode.appendChild(this._track),this._topNode.appendChild(this._txt)):(this._topNode.appendChild(this._txt),this._topNode.appendChild(this._track))},Ot.prototype.useMovementColor=function(t){var e=!1!==t;this._movementColor!==e&&(this._movementColor=e,this.updateBarColor())},Ot.prototype.setTrackColor=function(t){this._track.style.backgroundColor=t||""},Ot.prototype.setBarColor=function(t){var e=t||"";this._barColor!==e&&(this._barColor=e,this.updateBarColor())},Ot.prototype.enableTooltip=function(t){this._tooltipEnabled=!1!==t,this._tooltipEnabled||this._topNode.removeAttribute("title")},Ot.prototype._updateValue=function(t,e){var i=this;if(i._dirtySign&&(i._dirtySign=!1,"c"===i._alignment&&(i._sign>=0?(i._track.style.left="50%",i._bar.style.right="",i._txt.style.transform="translateX(-100%)",i._txt.style.textAlign="right"):(i._track.style.left="",i._bar.style.right="0",i._txt.style.transform="",i._txt.style.textAlign="left")),i._movementColor&&!i._barColor&&i.updateBarColor()),!1!==t){this._zeroValueHidden&&this._updateTextVisibility()&&this._updateTextWidth();var o=100!==i._maxValue?i._absValue/i._maxValue*100:i._absValue;i._bar.style.width=o+"%",null!=e?!1!==e&&i.setText(e):i.setText((o*i._sign*100|0)/100+"%")}},Ot.prototype.updateBarColor=function(){var t;if(t=this._barColor?this._barColor:this._movementColor?this._sign>=0?l.u.themeColors.up:l.u.themeColors.down:l.u.themeColors.trackColor){var e=this._bar.style;e.backgroundColor!==t&&(e.backgroundColor=t)}};var Ht=function(){this._onPostSectionBinding=this._onPostSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._requestRowRefresh=this._requestRowRefresh.bind(this),this._renderer=this._renderer.bind(this),this._onThemeLoaded=this._onThemeLoaded.bind(this),this._hosts=[]};function zt(t){return zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zt(t)}o.p.inherits(Ht,a),Ht._runningId=0,Ht._themeRevision=0,Ht.prototype._themeLoading=!1,Ht.prototype._padding=8,Ht.prototype._percentageLabel=!0,Ht.prototype._autoFitting=!1,Ht.prototype._zeroValueHidden=!1,Ht.prototype._autoTextSizing=!0,Ht._helper=null,Ht.prototype.getName=function(){return"PercentBarPlugin"},Ht.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this.config(e,t),t.listen("postSectionDataBinding",this._onPostSectionBinding),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnAdded),t.listen("columnRemoved",this._onColumnRemoved),t.listen("columnAlignmentChanged",this._requestRowRefresh)),this._themeLoading||(this._themeLoading=!0,l.u.getThemeColors(this._onThemeLoaded).then(this._onThemeLoaded).catch(this._onThemeLoaded)))},Ht.prototype._afterInit=function(){for(var t=this.getColumnCount(),e=0;e<t;++e)this._setColumnRenderer(e)},Ht.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("postSectionDataBinding",this._onPostSectionBinding),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("columnAlignmentChanged",this._requestRowRefresh),this._hosts.length||f.i.removeParent(Ht._helper),this._dispose())},Ht.prototype.config=function(t){if(t){var e=t.percentBar;if("object"===Nt(e)){this._autoFitting=!0===e.autoFitting,null!=e.zeroValueHidden&&(this._zeroValueHidden=!!e.zeroValueHidden),this._autoTextSizing=!1!==e.autoTextSizing,this._percentageLabel=!1!==e.percentageLabel;var i=e.padding;"number"==typeof i&&(this._padding=i)}for(var o=t.columns,n=o?o.length:0,r=0;r<n;++r){var s=o[r];this.setColumnPercentBar(r,s)}}},Ht.prototype.getColumnConfigObject=function(t,e){e||(e={});var i=this._getColumnData(t),o=i?i.percentBar:null;if(!o)return e;var n=e.percentBar={};return o.alignment&&(n.alignment=o.alignment),"string"==typeof o.field&&(n.field=o.field),null!=o.textHidden&&(n.textHidden=o.textHidden),null!=o.textWidth&&(n.textWidth=o.textWidth),null!=o.useMovementColor&&(n.useMovementColor=o.useMovementColor),o.barColor&&(n.barColor=o.barColor),null!=o.padding&&(n.padding=o.padding),null!=o.autoTextSizing&&(n.autoTextSizing=o.autoTextSizing),null!=o.percentageLabel&&(n.percentageLabel=o.percentageLabel),null!=o.autoFitting&&(n.autoFitting=o.autoFitting),e},Ht.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n)i[n]||(i[n]={}),this.getColumnConfigObject(n,i[n]);var r=e.percentBar;return r||(r=e.percentBar={}),r.padding=this._padding,r.autoFitting=this._autoFitting,r.zeroValueHidden=this._zeroValueHidden,r.autoTextSizing=this._autoTextSizing,r.percentageLabel=this._percentageLabel,e},Ht.prototype.setPercentBarAlignment=function(t,e){var i=this._getColumnPercentBarOptions(t);i&&(e=Ot.toAlignment(e),i.alignment!==e&&(i.alignment=e,this._requestRowRefresh()))},Ht.prototype.setColumnPercentBar=function(t,e){var i=e?e.percentBar:null,o=this._newColumnData(t),n=o.percentBar,r=!1;if(i){r=!0;var s=n;if(n=o.percentBar={},s&&s.refId&&(n.refId=s.refId,n.colStats=s.colStats),"object"===Nt(i))for(var l in i)n[l]=i[l];null==n.field&&(n.field=e.field?e.field:this._getField(t)),null!=n.alignment&&(n.alignment=Ot.toAlignment(n.alignment)),null!=n.autoTextSizing&&(n.autoTextSizing=!!n.autoTextSizing),null!=n.autoFitting?n.autoFitting=!!n.autoFitting:n.autoFitting=this._autoFitting,null!=n.zeroValueHidden?n.zeroValueHidden=!!n.zeroValueHidden:n.zeroValueHidden=this._zeroValueHidden,null!=n.percentageLabel?n.percentageLabel=!!n.percentageLabel:n.percentageLabel=this._percentageLabel,n._maxTextWidth=0;var a=n.padding;"number"!=typeof a&&(n.padding=a||null==a?this._padding:0)}else if(n){if(r=!0,n.refId){var u=this._hosts[0],d=u?u.getDataSource():null;d&&d.enableColumnStats(n.field,!1,n.refId),n.refId=null,n.colStats=null}o.percentBar=null}r&&this._initializedGrid&&(this._setColumnRenderer(t),this._requestRowRefresh())},Ht.prototype._setColumnRenderer=function(t){var e=this._getColumnPercentBarOptions(t);if(e){if(!e.refId){var i=this._hosts[0],o=i?i.getDataSource():null;if(o){e.refId="_pb"+Ht._runningId++;var n=o.enableColumnStats(e.field,!0,e.refId);this._realTimeGrid&&n.setColumnDataGetter(g),e.colStats=n}}this._activateColumnRenderer(t,"_percentBar",this._renderer)}else this._activateColumnRenderer(t)},Ht.prototype._getColumnPercentBarOptions=function(t){return this._getColumnOption(t,"percentBar")},Ht.prototype._getPercentBarAlignment=function(t,e){return e.alignment||Ot.toAlignment(this._hosts[0].getColumnAlignment(t))||"l"},Ht.prototype._getAutoTextSizing=function(t,e){return!e.textWidth&&!e.textHidden&&"c"!==this._getPercentBarAlignment(t,e)&&(null!=e.autoTextSizing?e.autoTextSizing:this._autoTextSizing)},Ht.prototype._onThemeLoaded=function(){Ht._themeRevision++,this._requestRowRefresh()},Ht.prototype._onPostSectionBinding=function(t){if(l.u.isThemeLoaded())for(var e=t.section,i=t.dataRows,o=e.getColumnCount(),n=t.fromRowIndex,r=t.toRowIndex,s=this._hosts[0].getPlugin("TextFormattingPlugin"),a=t.dataSource,u=0;u<o;++u){var d=this._getColumnPercentBarOptions(u);if(d){var h=d.field,c=d.colStats,p=d.barColor,_=d.useMovementColor,g=null!=d.textHidden&&d.textHidden,f=null!=d.zeroValueHidden&&d.zeroValueHidden,m=c.getMax(),v=s?s.getFormatter(u):null,C=this._getPercentBarAlignment(u,d),y=this._getAutoTextSizing(u,d);d._curAlignment!==C&&(d._curAlignment=C,d._maxTextWidth=0);for(var b=n;b<r;++b){var S=e.getCell(u,b,!1);if(S){var w=S.getContent(),x=w?w._percentBar:null;x||(w=(x=new Ot).getElement(),null!=_&&(x._themeRevision=Ht._themeRevision)),y?d._maxTextWidth&&x.setTextWidth(d._maxTextWidth+d.padding):x.setTextWidth(d.textWidth),x.setAlignment(C),x._themeRevision!==Ht._themeRevision&&(x._themeRevision=Ht._themeRevision,x.updateBarColor(_)),x.useMovementColor(_),x.setBarColor(p),x.hideText(g),x.hideZeroValue(f);var T=this._getRowData(i[b]),I=T?T[h]:NaN;if(v)if(d.percentageLabel){x.setValue(I,m,!1);var R=x.getPercent();x.setText(v.formatValue(R))}else x.setValue(I,m,v.formatValue(I));else{var D=d.percentageLabel?null:I;x.setValue(I,m,D)}S.setContent(w)}}y&&this._updateTextSize(e,a,u,d.field,m,v)}}},Ht.prototype._getHelper=function(){var t=Ht._helper;return t||((t=Ht._helper=f.i.div("percent-bar-helper")).style="visibility: hidden; position: fixed; bottom: -50px; left: -50px; white-space: pre;"),t.parentNode||document.body.appendChild(t),t},Ht.prototype._getTextWidth=function(t){var e=this._getHelper();e.textContent=t;var i=e.clientWidth;return e.removeChild(e.lastChild),i},Ht.prototype._updateTextSize=function(t,e,i,o,n,r){var s,l=this._getColumnPercentBarOptions(i),a=t.getFirstIndexInView(),u=t.getLastIndexInView(),d=[];for(s=a;s<=u;++s){var h=this._getData(e,s,o);r?h=r.formatValue(h):(h=(h/n*1e4|0)/100,h+="%"),d.push(h)}var c=this._getTextWidth(d.join("\n"));if(l.autoFitting||(c=c>l._maxTextWidth?c:l._maxTextWidth),c!==l._maxTextWidth)for(l._maxTextWidth=c,c+=l.padding,s=a;s<=u;++s){var p=t.getCell(i,s,!1);if(p){var _=p.getContent();_&&_._percentBar&&_._percentBar.setTextWidth(c)}}},Ht.prototype._renderer=function(t){},Ht.prototype._onColumnAdded=function(t){t.context&&this.setColumnPercentBar(t.colIndex,t.context)},Ht.prototype._onColumnRemoved=function(t){var e=t.columnData;if(e&&e.percentBar){var i=e.percentBar;t.sender.getDataSource().enableColumnStats(i.field,!1,i.refId),e.percentBar=null}},Ht.prototype._requestRowRefresh=function(){for(var t=this._hosts.length;--t>=0;)this._hosts[t].requestRowRefresh()},Ht.prototype.reloadThemeColors=function(){return l.u.reloadThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded)};var Vt=function(t,e,i){return 200*(t-e)/(t-i)-100},Ut=function(t,e){var i,o,n,r,s,l;return t.field?(i=t.start,n=e[t.field],o=t.end):(i=e[t.low],n=e[t.last],o=e[t.high],r=e[t.close],s=e[t.vwap],l=e[t.tick]),{low:i,last:n,high:o,close:r,vwap:s,tick:l}},Wt=["var(--color-scheme-neutral)","var(--color-scheme-tickup)","var(--color-scheme-tickdown)"],jt=function(){this._onPostSectionBinding=this._onPostSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._onColumnRemoved=this._onColumnRemoved.bind(this),this._renderer=this._renderer.bind(this),this._onThemeLoaded=this._onThemeLoaded.bind(this),this._hosts=[]};o.p.inherits(jt,a),jt._LEDGuage=!0,jt.prototype._themeLoading=!1,jt.prototype._start=0,jt.prototype._end=100,jt.prototype._tooltip=!0,jt.prototype.valueLabel=!1,jt._styles=(0,s.CA)(["ef-led-gauge",["padding: 0;","height: 16px;","--led-width: 3px;","--led-spacing: 2px;","overflow: visible;"]]),jt.prototype.getName=function(){return"RangeBarPlugin"},jt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this.config(e),t.listen("columnAdded",this._onColumnAdded),t.listen("columnRemoved",this._onColumnRemoved),t.listen("postSectionDataBinding",this._onPostSectionBinding),jt._applyThemeColor(t),this._themeLoading||(this._themeLoading=!0,l.u.getThemeColors().then(this._onThemeLoaded).catch(this._onThemeLoaded)))},jt.prototype._afterInit=function(){l.u.hasComponent("ef-led-gauge")||(console.log("The LED Gauge component is required for the range bar extension. Please make sure to import both the LED Gauge component and its theme."),jt._LEDGuage=!1);for(var t=this.getColumnCount(),e=0;e<t;++e)this._setColumnRenderer(e)},jt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnRemoved",this._onColumnRemoved),t.unlisten("postSectionDataBinding",this._onPostSectionBinding),this._dispose())},jt.prototype.config=function(t){if(t){var e=t.rangeBar;if("object"===zt(e)){var i=e.tooltip;null!=i&&(this._tooltip=i),null!=(i=e.valueLabel)&&(this.valueLabel=i)}var o=t.columns;if(o)for(var n=o.length,r=0;r<n;++r)this._setColumnRangeBar(r,o[r])}},jt._applyThemeColor=function(t){t._rangeBarStyles||(t._rangeBarStyles=!0,(0,s.kM)(jt._styles,t.getElement()))},jt.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n)i[n]||(i[n]={}),this.getColumnConfigObject(n,i[n]);var r=e.rangeBar;r||(r=e.rangeBar={});var s=this._tooltip;return 1!=s&&(r.tooltip=s),0!=(s=this.valueLabel)&&(r.valueLabel=s),e},jt.prototype.getColumnConfigObject=function(t,e){e||(e={});var i=this._getColumnRangeBarOptions(t);if(!i)return e;var o=e.rangeBar={};return null!=i.field&&(o.field=i.field),null!=i.start&&(o.start=i.start),null!=i.end&&(o.end=i.end),null!=i.low&&(o.low=i.low),null!=i.last&&(o.last=i.last),null!=i.high&&(o.high=i.high),null!=i.close&&(o.close=i.close),null!=i.vwap&&(o.vwap=i.vwap),null!=i.tick&&(o.tick=i.tick),e},jt.prototype.getValue=function(t,e){if((t=this.getColumnIndex(t))<0)return null;var i=this._getColumnRangeBarOptions(t);if(!i)return null;var o=this._hosts[0].getDataSource();if(!o)return null;if("string"==typeof e&&(e=o.getRowIndex(e)),null==e||e<0)return null;var n=this._getRow(o,e);return n?Ut(i,n):null},jt.prototype.getTooltipText=function(t,e){if((t=this.getColumnIndex(t))<0)return"";var i=this._getColumnRangeBarOptions(t);if(!i)return"";var o=this._hosts[0].getDataSource();if(!o)return"";if("string"==typeof e&&(e=o.getRowIndex(e)),e<0)return"";var n=this._getRow(o,e);if(!n)return"";var r=Ut(i,n);return this._tooltip?this._calculateTooltip(i,r):""},jt.prototype._calculateTooltip=function(t,e){var i,o=e.low,n=e.last,r=e.high,s=e.vwap,l=e.close,a=t.priceGraph;if(t.field)i=null!=n?n:"--";else{var u=null!=o?o:"--",d=null!=n?n:"--",h=null!=r?r:"--";i=a?"Low: "+u+" Last: "+d+" High: "+h+" VWAP: "+(null!=s?s:"--")+" Close: "+(null!=l?l:"--")+" ":"Low: "+u+" Last: "+d+" High: "+h}return i},jt.prototype._setColumnRangeBar=function(t,e){var i=e.rangeBar;if(i){(i.vwap||i.close||i.tick)&&(i.priceGraph=!0);var o=this._newColumnData(t);!0!==i&&"string"!=typeof i.field||(i={field:i.field||e.field,start:i.start||this._start,end:"number"==typeof i.end?i.end:this._end}),o.rangeBar=i,this._setColumnRenderer(t)}},jt.prototype._setColumnRenderer=function(t){this._getColumnRangeBarOptions(t)&&this._initializedGrid&&(this._realTimeGrid?this._realTimeGrid.setColumnRenderer(t,this._renderer):this._hosts[0].setColumnDataBindingHandler(t,this._renderer))},jt.prototype._onThemeLoaded=function(){for(var t=this._hosts.length;--t>=0;)this._hosts[t].requestRowRefresh()},jt.prototype._onPostSectionBinding=function(t){if(jt._LEDGuage)for(var e=t.section,i=t.dataRows,o=e.getColumnCount(),n=t.fromRowIndex,r=t.toRowIndex,s=0;s<o;++s){var l=this._getColumnRangeBarOptions(s);if(l)for(var a=l.priceGraph,u=n;u<r;++u){var d=e.getCell(s,u,!1);if(d){var h,c=this._getRowData(i[u]),p=Ut(l,c),_=p.low,g=p.last,f=p.high,m=d.getContent(),v=m?m._rangeBar:null;if(v||((v=document.createElement("ef-led-gauge")).neutralColor=!0,v._rangeBar=v,m=v),this._tooltip){var C=this._calculateTooltip(l,p);d.setTooltip(C)}if(null!=f||null!=_||null!=g)if(null==f||null==_||f<_)(h=document.createElement("span")).textContent="N/A",d.setContent(h);else if(f!==_||f!==g){var y=Vt(_,g,f);if(v.range.length=0,a){var b,S=p.close,w=p.vwap,x=Vt(_,w,f);b=S>g?"var(--color-scheme-tickdown)":"var(--color-scheme-tickup)";var T,I=Vt(_,S,f);T=y<I?[y,I]:[I,y],v.range=T,v.topValue=y,v.bottomValue=x,v.style.setProperty("--range-color",b),v.style.setProperty("--bottom-selected-color","var(--neutral-color)"),v.style.setProperty("--top-selected-color",Wt[p.tick]),v.style.setProperty("--clash-color","var(--color-scheme-secondary)")}else{if(g<_){var R=Vt(g,_,f);v.range=[y,R]}else if(g>f){var D=Vt(_,f,g);v.range=[D,y]}_===f&&(v.range=[-100,100],y=g<_?-100:100),null==g&&(v.range=[],y=null),v.topValue=y,this.valueLabel&&(v.topLabel=g)}d.setContent(m)}else v.range=[-100,100],v.topValue=0,d.setContent(v);else(h=document.createElement("span")).textContent="",d.setContent(h)}}}},jt.prototype.isRangeBarColumn=function(t){return!!this._getColumnOption(t,"rangeBar")},jt.prototype._renderer=function(t){},jt.prototype._getColumnRangeBarOptions=function(t){return this._getColumnOption(t,"rangeBar")},jt.prototype._onColumnAdded=function(t){t.context&&this._setColumnRangeBar(t.colIndex,t.context)},jt.prototype._onColumnRemoved=function(t){var e=t.columnData;e&&e.rangeBar&&(e.rangeBar=null)};var qt=function(t){return!(!t||"content"!==t.sectionType)},Kt=function(t){return!t||"CONTENT"===t||"CHAIN"===t||"GROUP_HEADER"===t},Yt=function(t){var e=this;e.startDrag=e.startDrag.bind(e),e.stopDrag=e.stopDrag.bind(e),e._clearCache=e._clearCache.bind(e),e._onMouseDown=e._onMouseDown.bind(e),e._onDragPulse=e._onDragPulse.bind(e),e._onDragStart=e._onDragStart.bind(e),e._onMouseMove=e._onMouseMove.bind(e),e._onDragEnd=e._onDragEnd.bind(e),e._onThemeLoaded=e._onThemeLoaded.bind(e),e._onJETDrop=e._onJETDrop.bind(e),e._onJETDragOver=e._onJETDragOver.bind(e),e._delayStart=e._delayStart.bind(e),e._hosts=[],e._guideline=document.createElement("div"),e._guideline.className="tr-row-guideline",e._dragBox=document.createElement("div"),e._dragBox.className="drag-box-disabled",e._dragBoxIcon=document.createElement("ef-icon"),e._dragBoxIcon.className="drag-box-icon",t&&e.config({rowDragging:t})};o.p.inherits(Yt,a),Yt._styles="",Yt._stylePromise=null,Yt.prototype._guideline=null,Yt.prototype._dragBox=null,Yt.prototype._dragBoxIcon=null,Yt.prototype._uiDisabled=!1,Yt.prototype._disabled=!1,Yt.prototype._dragTarget=null,Yt.prototype._dragBoxRenderer=null,Yt.prototype._legacyRowReorder=null,Yt.prototype._pos=null,Yt.prototype._startingRid="",Yt.prototype._startingRowType="",Yt.prototype._startingGrid=null,Yt.prototype._dragPulseId=0,Yt.prototype._topBound=0,Yt.prototype._btmBound=0,Yt.prototype._scrollStep=40,Yt.prototype._dragging=!1,Yt.prototype._scrollingZone=!1,Yt.prototype._touchMode=!1,Yt.prototype._mouseInput=!0,Yt.prototype._dragBoxEnabled=!1,Yt.prototype._dataTransfer=!0,Yt.prototype._autoScroll=!0,Yt.prototype._dragUI=null,Yt.prototype._timerId=-1,Yt.prototype._jetDnD=!1,Yt.prototype._jetDragContent=null,Yt.prototype._jetContentHasRic=!1,Yt.prototype._jetContentHasField=!1,Yt.prototype._entryPoint="";var Jt=function(t){Yt._applyThemeColor(t),m.applyThemeColor(t)};function Zt(t){return Zt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zt(t)}Yt.prototype.beforeProcessOption=function(t,e){if("rowReorder"===t)return this._legacyRowReorder=e,!1},Yt.prototype.hasMultiTableSupport=function(){return!0},Yt.prototype.getName=function(){return"RowDraggingPlugin"},Yt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),this.config(e),this._mouseInput&&(t.setAttribute("draggable","true"),t.listen("dragstart",this.startDrag)),t.listen("mousedown",this._onMouseDown),t.listen("touchstart",this._onMouseDown),this._dragUI=new m({dragBox:this._dragBox,dragBoxIcon:this._dragBoxIcon}),m.stylePromise||(m.stylePromise=l.u.getThemeColors()).then(this._onThemeLoaded).catch(this._onThemeLoaded),setTimeout(Jt.bind(this,t),0))},Yt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("dragstart",this.startDrag),t.unlisten("mousedown",this._onMouseDown),t.unlisten("touchstart",this._onMouseDown),this._hosts.splice(e,1),this._hosts.length||this._clearCache(),this._dispose())},Yt.prototype._onThemeLoaded=function(){Yt._styles||(Yt._styles=(0,s.CA)([":host .row-dragging .cover-layer .selection-bound",["border: var(--grid-drag-indicator)"],":host .row-dragging .tr-lg .cell.selected-row",["background-color: unset;"]]));var t=l.u.getColors();this._dragUI.onThemeLoaded(t);for(var e=this._hosts.length;--e>=0;)Jt(this._hosts[e])},Yt._applyThemeColor=function(t){t&&!t._rowDraggingStyles&&Yt._styles&&(t._rowDraggingStyles=!0,(0,s.kM)(Yt._styles,t.getParent()))},Yt.prototype.config=function(t){if(t){var e=t.rowDragging||this._legacyRowReorder;if(e){if("function"==typeof e.dragBoxRenderer){this._dragBoxRenderer=e.dragBoxRenderer;var i="drag-box";l.u.getElfVersion()<3&&(i="tr-dragbox content-dragging"),this._dragBox.className=i}else this._dragBox.className="drag-box-disabled";this._dragBoxEnabled=!!e.dragBox;var o=e.mouseInput;null!=o&&(this._mouseInput=!!o),null!=(o=e.dataTransfer)&&(this._dataTransfer=!!o),null!=(o=e.autoScroll)&&(this._autoScroll=!!o),e.disabled&&(this._uiDisabled=!0),this.addListener(e,"dragStart"),this.addListener(e,"drag"),this.addListener(e,"dragEnd"),this.addListener(e,"dataMoved"),this.addListener(e,"beforeDataMoved")}}},Yt.prototype.getConfigObject=function(t){var e=t||{},i=e.rowDragging;return i||(i=e.rowDragging={}),i.dragBox=this._dragBoxEnabled,i.mouseInput=this._mouseInput,i.autoScroll=this._autoScroll,i.dataTransfer=this._dataTransfer,i.disabled=this._uiDisabled,e},Yt.prototype.dragStart=function(t,e){e||(e={}),e.type="dragstart";var i=this._hosts[0],o=i?i.getCell("content",0,t):null;e.target=o?o.getElement():null,this._onMouseDown(e),this.startDrag(e)},Yt.prototype.dragMove=function(t,e){e||(e={}),e.type="mousemove",e.which=1;var i=this._hosts[0],o=i?i.getCell("content",0,t):null,n=i.getRelativePosition(o);e.clientX=n.x,e.pageY=n.y,e.target=o?o.getElement():null,e.stopPropagation=function(){},e.preventDefault=function(){},this._onMouseMove(e)},Yt.prototype.dragEnd=function(t,e){e||(e={}),e.type="mouseup";var i=this._hosts[0],o=i?i.getCell("content",0,t):null;e.target=o?o.getElement():null,e.stopPropagation=function(){},e.preventDefault=function(){},this._onDragEnd(e)},Yt.prototype.startDrag=function(t){this._startDrag(!1,t)},Yt.prototype.stopDrag=function(){this._dragging?(this.cancelDrag(),this._onDragEnd()):this.cancelDrag()},Yt.prototype.cancelDrag=function(){this._pos&&(this._pos.cancel=!0)},Yt.prototype.getGuideline=function(){return this._guideline},Yt.prototype.disable=function(t){this._disabled=!1!==t},Yt.prototype.isDisabled=function(){return this._disabled},Yt.prototype.disableUIs=function(t){this._uiDisabled=!1!==t},Yt.prototype.allowDrag=function(t){this._pos&&(this._pos.invalidTarget=!1===t)},Yt.prototype.allowDrop=Yt.prototype.allowDrag,Yt.prototype.setDragContent=function(t){this._dragUI.setContent(t)},Yt.prototype.getDragBox=function(){return this._dragBox},Yt.prototype.getDragSource=function(){return this._entryPoint},Yt.prototype.isDragging=function(){return this._dragging},Yt.prototype.disableDragging=function(t){this._disabled=!1!==t},Yt.prototype.enableJETDragAndDrop=function(t){var e=!1!==t;if(this._jetDnD!==e){this._jetDnD=e;var i=window.JET;i&&(i.ContainerDescription&&"EikonNowContainer"!==i.ContainerDescription.name?this._jetDnD?(i.onDrop(this._onJETDrop),i.onDragOver(this._onJETDragOver),i.onDragLeave(this.stopDrag)):(i.onDrop(null),i.onDragOver(null),i.onDragLeave(null)):this._jetDnD=!1)}},Yt.prototype.getJETDragContent=function(){return this._jetDragContent},Yt.prototype.setJETDragContent=function(t){this._jetDragContent=t;var e=window.tr,i=e?e.grid:null,o=i?i.JetDragContent:null;if(t&&o){var n=new o(t),r=n.getRicsToDrop(),s=n.getFieldsToDrop();this._jetContentHasRic=!!(r&&r.length>0),this._jetContentHasField=!!(s&&s.length>0)}else this._jetContentHasRic=!1,this._jetContentHasField=!1},Yt.prototype._hitTest=function(t){var e=this.getRelativeGrid(t);if(e){var i;if(t.changedTouches){var o=t.changedTouches[0];i=e.getRelativePosition(document.elementFromPoint(o.clientX,o.clientY)),f.Z.getRelativePosition(o,e.getElement(),i)}else i=e.getRelativePosition(t);return i}return t||{}},Yt.prototype._onMouseDown=function(t){t.changedTouches&&(this._touchMode=!0),this._dragTarget=t.target,this._setEntryPoint("grid")},Yt.prototype._onDragStart=function(t,e){if(!this._dragging&&this._pos){this._listenAbortActions(!1);var i=!1,o=window.JET;if(e)i=!0;else{if(this._dispatch("dragStart",this._pos),this._isDragCancelled())return;o&&this._jetDnD&&this._jetDragContent&&(i=!0,o.dragStart(this._jetDragContent))}if(this._dragging=!0,document.body.classList.add("tr-dragging"),i||(window.addEventListener("mousemove",this._onMouseMove,!1),window.addEventListener("touchmove",this._onMouseMove,!1)),window.addEventListener("mouseup",this._onDragEnd,!1),window.addEventListener("touchend",this._onDragEnd,!1),window.addEventListener("touchcancel",this._onDragEnd,!1),this._touchMode)for(var n=this._hosts.length;--n>=0;){var r=this._hosts[n];r.getVScrollbar().disableTouchInput(),r.getHScrollbar().disableTouchInput()}if(!this._uiDisabled){var l=this._pos.grid||null;if(!l)return;if(this._dataTransfer){var a=this._pos.rowIndex,u=l.getDataSource();this._startingRid=u.getRowId(a),this._startingGrid=l;var d=this.getGridApi().getRowType(a);if(this._startingRowType=d,this._dragBoxRenderer){var h=(0,s.kI)(t);h.dragBox=this._dragBox,h.dataRow=this._getRowData(u.getRowDataAt(a)),this._legacyRowReorder?this._dragBoxRenderer(t,h.dragBox,[h.dataRow]):this._dragBoxRenderer(h)}}var c=l.getElement();if(c.classList.add("mouse-dragging"),c.classList.add("row-dragging"),this._updateGuidePosition(),this._autoScroll){var p=l.getVScrollbar();this._topBound=p.getTop()+50,this._btmBound=p.getTop()+p.getHeight()-50,this._topBound<this._btmBound&&(this._scrollStep=Math.floor(l.getScrollHeight()/25),this._scrollStep<40?this._scrollStep=40:this._scrollStep>400&&(this._scrollStep=400),this._dragPulseId=setInterval(this._onDragPulse,130))}}}},Yt.prototype._onMouseMove=function(t){if(this._dragging){if("touchmove"!=t.type){if(!t||1!==t.which)return void this.stopDrag();f.Z.preventDefault(t)}this._pos=this._hitTest(t),this._pos.dragBox=this._dragBox,this._pos.grid&&this._shouldPreventDrop(this._pos.rowIndex)&&(this._pos.dragBoxIcon="void");var e=!0;"JET"!==this._entryPoint||this._jetContentHasRic||(e=!1),e&&this._updateGuidePosition(t),this._dispatch("drag",this._pos),!this._uiDisabled&&e&&(t.dragBoxIcon=this._pos.dragBoxIcon,this._dragUI.renderDragBox(t,this._startingGrid)||this.cancelDrag())}},Yt.prototype._onDragEnd=function(t){if(this._dragging){if(this._dragging=!1,t&&f.Z.preventDefault(t),f.Z.removeParent(this._guideline),f.Z.removeParent(this._dragBox),document.body.classList.remove("tr-dragging"),window.removeEventListener("mousemove",this._onMouseMove,!1),window.removeEventListener("touchmove",this._onMouseMove,!1),window.removeEventListener("mouseup",this._onDragEnd,!1),window.removeEventListener("touchend",this._onDragEnd,!1),window.removeEventListener("touchcancel",this._onDragEnd,!1),this._touchMode)for(var e=this._hosts.length;--e>=0;){var i=this._hosts[e];i.getVScrollbar().disableTouchInput(!1),i.getHScrollbar().disableTouchInput(!1)}var o=this._startingGrid||this._hosts[0],n=o.getElement();n.classList.remove("mouse-dragging"),n.classList.remove("row-dragging");var r=this._pos;if(!this._isDragCancelled()){if(r.srcGrid=o,r.dropTarget=t?t.target:null,!this._jetDnD&&this._dataTransfer&&qt(this._pos)){var s=r.grid||o,l=r.rowIndex,a=o.getPlugin("RowSelectionPlugin"),u=a&&a.getSelectedRows();u&&u.length||(u=this._startingRid),this._moveRows(u,l,o,s,r)}var d=r.cellElement,h=0;if(t&&d){var c=d.getBoundingClientRect(),p=(t.clientX-c.left)/r.zoomFactor;h=Math.round(p/d.offsetWidth)}r.colIndex+=h,r.currentPosition=r,r.data=this._jetDragContent,r.dropTarget=t.target}this._dispatch("dragEnd",r||{}),this._clearCache(),this._jetDragContent=null}},Yt.prototype._moveRows=function(t,e,i,o,n){var r,s,l=null,a=i.getDataSource(),u=o.getDataSource();if("string"==typeof t){var d=a.getRowIndex(this._startingRid);d>=0&&(l=[d])}else Array.isArray(t)&&(l=t);if(!l)return 0;var h=l.length,c=new Array(h),p=[],_="",g=this.getGridApi();for(g&&!g.getRowType&&(g=null),r=0;r<h;++r){var f=l[r],m=g?g.getRowType(f):"CONTENT";c[r]=a.getRowId(f),p[r]=m,_?_!==m&&(_="MIXED"):_=m}_||(_="CONTENT");var v,C,y=g?g.getRowType(e):"",b=u.getRowId(e);if(this.hasListener("beforeDataMoved")&&(n.srcRowIndices=l,n.srcRowIds=c,n.srcRowTypes=p,n.consolidatedSrcRowType=_,n.destRowIndex=e,n.destRowId=b,n.destRowType=y,this._dispatch("beforeDataMoved",n),n.cancel))return 0;var S=i.getPlugin("RowSegmentingPlugin"),w=null;if(i===o){if("MIXED"===_)w=a.moveRow(c,b);else if("CONTENT"===_)"GROUP_HEADER"===y?(C=S.getSegmentChildIds(b))?w=a.moveRow(c,b):(S.addSegmentChildren(b,c),w=c):Kt(y)?w=a.moveRow(c,b):"GROUP_MEMBER"===y&&(v=S.getSegmentParentRowId(b),S.addSegmentChildren(v,c),a.moveRow(c,b),w=c);else if("CHAIN"===_||"GROUP_HEADER"===_)Kt(y)&&(w=a.moveRow(c,b));else if("GROUP_MEMBER"===_)if(1===h){var x=c[0];v=S.getSegmentParentRowId(x);var T=(C=S.getSegmentChildIds(v))?C.length:0;if(e===a.getRowIndex(v)+T+1)w=a.moveRow(c,b);else if("GROUP_MEMBER"===y){var I=S.getSegmentParentRowId(b);v===I||(S.removeSegmentChild(v,x),S.addSegmentChild(I,x)),w=a.moveRow(c,b)}else Kt(y)&&(S.removeSegmentChild(v,c[0]),w=a.moveRow(c[0],b))}else w=a.moveRow(c,b)}else{w=c,n.destGrid=o;var R=[];for(r=0;r<h;++r){var D=a.getRowData(rowId);D&&R.push(D)}if(s=R.length)if(a.removeRows(l),this._realTimeGrid)for(r=0;r<s;++r)R[r].ROW_DEF.registerToView(u,b);else for(r=0;r<s;++r)u.insertRow(b,R[r])}var E=w?w.length:0;return E&&(n.originRowId=w[0],n.originRowIds=w,n.destinationRowId=b,this._dispatch("dataMoved",n)),E},Yt.prototype._isDragCancelled=function(){return!(!this._pos||!this._pos.cancel)},Yt.prototype._updateGuidePosition=function(t){var e=this._pos;if(!this._uiDisabled&&e&&!e.invalidTarget)if("not-allowed"!==e.dragBoxIcon&&"void"!==e.dragBoxIcon){if(qt(e)){var i=this._guideline,o=e.section,n=o.getColumnHost();n!==i.parentNode&&(i.style.width=o.getWidth()+"px",n.appendChild(i));var r=e.cellElement,s=f.Z.getRelativePosition(r,n),l=s.y,a=e.rowIndex,u=0;if(a&&(u=-1,t)){var d=o.getRowCount()-1;if(a>=d){var h=o.getRowHeight(d);(s=f.Z.getRelativePosition(t,r)).y>=h/2|0&&(u=h-3,++e.rowIndex)}}i.style.top=l+u+"px"}}else f.Z.removeParent(this._guideline)},Yt.prototype._shouldPreventDrop=function(t){var e=this.getGridApi();if(!e)return!1;if("CONSTITUENT"===this._startingRowType||"SUBGROUP_HEADER"===this._startingRowType)return!0;var i=this._pos.grid.getPlugin("RowSegmentingPlugin");if(!i)return!1;var o=i.getSegmentParentRowId(t),n=i.getSegmentParentRowId(this._startingRid);if("GROUP_MEMBER"===this._startingRowType){if("SUBGROUP_HEADER"===e.getRowType(n))return e.getRowType(o),!n||!o||o!==n}else if("CHAIN"===this._startingRowType){if(o)return!0}else if("GROUP_HEADER"===this._startingRowType&&o!==n)return!0;var r=e.getRowType(t);return"CONSTITUENT"===r||"SUBGROUP_HEADER"===r||"GROUP_MEMBER"===r&&"SUBGROUP_HEADER"===e.getRowType(o)},Yt.prototype._clearCache=function(){this._dragPulseId&&(clearInterval(this._dragPulseId),this._dragPulseId=0),this._pos=this._dragTarget=this._startingGrid=null,this._scrollingZone=!1},Yt.prototype._onDragPulse=function(){if(this._dragging){this._dispatch("dragInterval",this._pos);var t=this._pos.grid||this._startingGrid;if(t&&t.getVScrollbar().isActive()){var e=this._pos.y;if(null!=e)if(e>=this._topBound&&e<=this._btmBound)this._scrollingZone=!1;else{this._scrollingZone=!0;var i=this._scrollStep*(.8+Math.random())|0;e<this._topBound&&(i=-i),t.scrollDown(i)}}}},Yt.prototype.setJETDragContent=function(t){this._jetDragContent=t;var e=window.tr,i=e?e.grid:null,o=i?i.JetDragContent:null;if(t&&o){var n=new o(t),r=n.getRicsToDrop(),s=n.getFieldsToDrop();this._jetContentHasRic=!!(r&&r.length>0),this._jetContentHasField=!!(s&&s.length>0)}else this._jetContentHasRic=!1,this._jetContentHasField=!1},Yt.prototype._setEntryPoint=function(t){this._entryPoint=t,this.setDragContent(null)},Yt.prototype._onMouseOut=function(t){var e=(t=t||window.event).relatedTarget||t.toElement;e&&"HTML"!=e.nodeName||(this._timerId>=0&&(clearTimeout(this._timerId),this._timerId=-1),this._onDragStart(),this.stopDrag())},Yt.prototype._delayStart=function(t){this._startingGrid.unlisten("mousemove",this._delayStart),this._timerId<0&&(this._timerId=window.setTimeout(this._onDragStart,200)),this._jetDnD&&document.addEventListener("mouseout",this._onMouseOut,!1)},Yt.prototype._listenAbortActions=function(t){!1!==t?window.addEventListener("mouseup",this._clearCache,!1):window.removeEventListener("mouseup",this._clearCache,!1)},Yt.prototype._startDrag=function(t,e,i){if(!(this._dragging||this._hosts.length<=0||this._disabled)){var o;if(e)if("dragstart"===e.type){e.preventDefault&&f.Z.preventDefault(e);var n=this.getRelativeGrid(e);n&&(o=n.getRelativePosition(this._dragTarget))}else o=this._hitTest(e);else{var r=this._dragTarget||this._hosts[0].getSection("content").getCell(0,0);o=this._hitTest(r)}qt(o)&&(this._clearCache(),this._pos=o,this._startingGrid=o.grid,t?(this._startingGrid.listen("mousemove",this._delayStart),this._listenAbortActions()):this._onDragStart(e,i))}},Yt.prototype._onJETDragOver=function(t){if(t)if(this._dragging)this._onDrag(t.e);else{if(!t.dropData)return;this._setEntryPoint("JET"),this.setJETDragContent(t.dropData),this._startDrag(!1,t.e,!0)}},Yt.prototype._onJETDrop=function(t){this._dragging&&(this._jetDragContent||(this._jetDragContent=t),this._onDragEnd(t.mouse.srcEvent))};var Xt=function(t){var e=t._context[0];return{field:t._field||"",expression:t._expressions[0],context:null==e||e._autoGenerated?null:e}},Qt=function(){var t=this;t._onPreSectionRender=t._onPreSectionRender.bind(t),t._onColumnAdded=t._onColumnAdded.bind(t),t._onColumnRemoved=t._onColumnRemoved.bind(t),t._onPreLoadedDialog=t._onPreLoadedDialog.bind(t),t._onIconClicked=t._onIconClicked.bind(t),t._filterLogic=t._filterLogic.bind(t),t._updateAllColumnIcons=t._updateAllColumnIcons.bind(t),t.refresh=t.refresh.bind(t),t._requestFilterRefresh=t._requestFilterRefresh.bind(t),t._globalFilters=[],t._globalContexts=[],t._columnFilters=[],t._hosts=[],t._dvs=[],t._funcMap={},t._nameMap={}};o.p.inherits(Qt,a),Qt.prototype._funcMap=null,Qt.prototype._nameMap,Qt.prototype._disabled=!1,Qt.prototype._disablingIds=null,Qt.prototype._globalFilters,Qt.prototype._globalContexts,Qt.prototype._columnFilters,Qt.prototype._activeColFilters=null,Qt.prototype._iconActivation="onActiveFilter",Qt.prototype._filterId=0,Qt.prototype._uiTimerId=0,Qt.prototype._filterTimerId=0,Qt.prototype._overridingFilter=null,Qt.prototype._preTransform=null,Qt.prototype._rowTransform=null,Qt.prototype._filterDialog=null,Qt.prototype._dialogInitialized=!1,Qt.prototype._dialogOptions=null,Qt._filterBuilder=null,Qt.prototype._dvs,Qt.prototype.getName=function(){return"RowFilteringPlugin"},Qt.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),Qt._styles||(Qt._styles=(0,s.CA)([".hovering-filter-icon .cell:not(.active-filter):hover .floating-panel .title-filter-icon",["display: flex;"],".hovering-filter-icon .cell:not(.active-filter) .floating-panel .title-filter-icon",["display: none;"],".floating-panel",["position:relative;"],".floating-panel .title-filter-icon",["color: var(--grid-title-filter-icon-color,inherit);"],".title .floating-panel .title-filter-icon:hover",["color: var(--grid-title-filter-icon-hover-color,inherit);"],".always-on-filter .floating-panel .title-filter-icon",["color: var(--grid-header-txtcolor,inherit);"],".always-on-filter .active-filter .floating-panel .title-filter-icon",["color: var(--grid-title-filter-icon-hover-color,inherit);"],".hovering-filter-icon .tiny-col .cell:hover, .tr-grid .tiny-col .cell.active-filter",["padding-left:0px;"],".tiny-col.movable .cell .floating-panel .title-filter-icon:before",["content: '.';","position: absolute;","margin-left: auto;","margin-right: auto;","left: 0;","right: 0;","top: -10px;","font-size: 10px;","font-family: monospace;","color: var(--grid-title-dot-icon,inherit);","text-align:center;"]])),t._rowFilteringStyles||(t._rowFilteringStyles=!0,(0,s.kM)(Qt._styles,t.getElement())),t.unloadPlugin("ColumnFilterPlugin"),t.listen("preSectionRender",this._onPreSectionRender),t.listen("postDataSourceChanged",this._requestFilterRefresh),t.listen("columnAdded",this._onColumnAdded),t.listen("columnRemoved",this._onColumnRemoved),this.config(e))},Qt.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(this._hosts.splice(e,1),t.unlisten("preSectionRender",this._onPreSectionRender),t.unlisten("postDataSourceChanged",this._requestFilterRefresh),t.unlisten("columnAdded",this._onColumnAdded),t.unlisten("columnRemoved",this._onColumnRemoved),this._hosts.length||(this._uiTimerId&&(clearTimeout(this._uiTimerId),this._uiTimerId=0),this._filterTimerId&&(clearTimeout(this._filterTimerId),this._filterTimerId=0),this._hasPendingFilter=!1,this._filterDialog&&(this._filterDialog.hide(),this._filterDialog=null,this._dialogInitialized=!1)),this._dispose())},Qt.prototype._afterInit=function(){this._filterDialog||(this._filterDialog=Qt._createDialog(),this._dialogInitialized=!1,this._filterDialog&&(this._filterDialog.style.display="none",document.body.appendChild(this._filterDialog),setTimeout(this._onPreLoadedDialog,10))),this._applyPendingFilter()},Qt.prototype._applyPendingFilter=function(){if(this._initializedGrid&&this._hasPendingFilter){this._hasPendingFilter=!1;for(var t=this.getColumnCount(),e=0;e<t;++e){var i=this._getUserColumnSettings(e);i.expression?this.addColumnFilter(e,i.expression,i.filterState):this._removeColumnFilters(e)}}},Qt.prototype._onPreLoadedDialog=function(){if(this._filterDialog){this._filterDialog.style.display="";var t=this._filterDialog.parentNode;t&&t.removeChild(this._filterDialog)}},Qt.prototype.config=function(t){if(t){var e=t.rowFiltering;if(e){if((e.disabledUI||e.uiDisabled)&&(this._iconActivation="none"),null!=e.emptySegmentFiltering&&this.enableEmptySegmentFiltering(!!e.emptySegmentFiltering),null!=e.separatorFiltering&&this.enableSeparatorFiltering(!!e.separatorFiltering),e.iconActivation){this._iconActivation=e.iconActivation;for(var i=0;i<this._hosts.length;i++)"onHover"===this._iconActivation?this._hosts[i].enableClass("hovering-filter-icon",!0):this._hosts[i].enableClass("hovering-filter-icon",!1),"always"===this._iconActivation?this._hosts[i].enableClass("always-on-filter",!0):this._hosts[i].enableClass("always-on-filter",!1)}e.dialogOptions&&(this._dialogOptions=e.dialogOptions),e.clicked&&(e.click=e.clicked),this.addListener(e,"click"),this.addListener(e,"beforeDialogOpened"),this.addListener(e,"dialogCommitted"),this.addListener(e,"iconCreated"),this.addListener(e,"filterChanged"),this.addListener(e,"refreshed")}var o=t.columns;if(o){for(var n=o.length,r=0;r<n;++r){var s=o[r];this._setColumnOptions(r,s)}this._applyPendingFilter()}}},Qt.prototype.getConfigObject=function(t){var e=t||{},i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={});var s=this._getUserColumnSettings(n),l=s.expression;l&&"function"!=typeof l&&(r.filter=l);var a=s.filterState;null!=a&&("object"===Zt(a)&&a._autoGenerated||(r.filterState=a))}var u=e.rowFiltering,d=!1;return u||(u={}),"onActiveFilter"!==this._iconActivation&&(u.iconActivation=this._iconActivation,d=!0),this._dialogOptions&&(u.dialogOptions=this._dialogOptions,d=!0),d&&(e.rowFiltering=u),e},Qt.prototype.disable=function(t,e){var i=!1!==t;for(var o in this._disablingIds||(this._disablingIds={}),e||(e="_"),this._disablingIds[e]=i,i=!1,this._disablingIds)if(this._disablingIds[o]){i=!0;break}this._disabled!==i&&(this._disabled=i,i?(this.refresh(),this._updateAllColumnIcons()):(this._requestFilterRefresh(),this._setTimerForUpdatingIcons()))},Qt.prototype.addFilter=function(t,e,i){var o=this._parseFilter(t,-1);return o?(e||(e="_"+this._filterId++),this._nameMap[e]||this._globalFilters.indexOf(o)>=0?"":(i=null!=i?i:null,this._nameMap[e]=o,this._globalFilters.push(o),this._globalContexts.push(i),this._dispatch("filterChanged",{filterType:"global",changeType:"add",colIndex:-1,field:null}),this._requestFilterRefresh(),e)):""},Qt.prototype.addGridFilter=function(t,e){return this.addFilter(t,null,e)},Qt.prototype._parseFilter=function(t,e,i){if(!t)return null;if("function"==typeof t)return t;var o=Qt._getFilterBuilder(),n=e||0===e,r=n?this._getField(e):"",s=n?this._getFormatter(e):null,l=null;if("string"==typeof t)null==(l=this._funcMap[t])&&(l=this._funcMap[t]=o.parse(t,r,s,r));else{var a=null,u=null;i&&(a=i.rawDataAccessor||null,u=i.formattedDataAccessor||null),l=o.parse(t,r,s,r,a,u)}return l},Qt.prototype.addColumnFilter=function(t,e,i){if(t<0||t>=this.getColumnCount())return!1;var o=this._getColumnFilterOption(t);if(o&&o._expressions[0]===e)return!1;var n=null;if("function"==typeof e?(n=e,i&&"string"==typeof i&&(e=i)):n=this._parseFilter(e,t,i),!n)return!1;var r=this._getUserColumnSettings(t);r.expression=e,r.filterState=i,null==i&&(i={_autoGenerated:!0});var s=this._getField(t);return i&&"object"===Zt(i)&&(i.field=s),(o=this._initColumnFilterOption(t))._field=s,o._filters.push(n),o._expressions.push(e),o._context.push(i),o._rawDataAccessor=i.rawDataAccessor||null,o._formattedDataAccessor=i.formattedDataAccessor||null,this._columnFilters.push(o),this._dispatch("filterChanged",{filterType:"column",changeType:"add",colIndex:t,field:s}),this._requestFilterRefresh(),this._updateColumnIcon(t),!0},Qt.prototype.setColumnFilter=function(t,e,i){if(this._getColumnExpression(t)===e)return!1;var o=this._removeColumnFilters(t),n=this.addColumnFilter(t,e,i);return!n&&o&&this._updateColumnIcon(t),o||n},Qt.prototype._getColumnExpression=function(t){return this._getUserColumnSettings(t).expression||null},Qt.prototype._setColumnOptions=function(t,e){var i=this._getUserColumnSettings(t),o=e.filterIcon,n=e.fieldDataType||e.dataType;n&&(i.fieldDataType=n),null!=o&&(i.filterIcon=o);var r=e.filter;null!=r&&(i.expression=r,i.filterState=null,this._hasPendingFilter=!0);var s=e.filterState;null!=s&&(i.filterState=s);var l=0==o?"none":this._iconActivation;return"always"!=l&&"onHover"!=l||this._updateColumnIcon(t),null!=r},Qt.prototype._getUserColumnSettings=function(t){var e=this._newColumnData(t),i=e.rowFiltering;return i||(i=e.rowFiltering={}),i},Qt.prototype._getColumnFilterOption=function(t){var e=this._getUserColumnSettings(t);return e&&e.filterOption||null},Qt.prototype._removeActiveFilterStates=function(t){var e=this._getUserColumnSettings(t);e.expression=null,e.filterState=null;var i=e.filterOption;i&&(e.filterOption=null,i._filters.length&&this._dispatch("filterChanged",{filterType:"column",changeType:"remove",colIndex:t,field:this._getField(t)}))},Qt.prototype._initColumnFilterOption=function(t){var e=this._getColumnFilterOption(t);return e||((e={})._filters=[],e._expressions=[],e._context=[],this._getUserColumnSettings(t).filterOption=e),e},Qt.prototype.removeFilter=function(t){var e=null,i="",o=-1;if("string"==typeof t)i=t,e=this._nameMap[t],o=this._globalFilters.indexOf(e);else if(e=t,(o=this._globalFilters.indexOf(e))>=0)for(var n in this._nameMap)this._nameMap[n]===e&&(i=n);return!(o<0||(delete this._nameMap[i],this._globalFilters.splice(o,1),this._globalContexts.splice(o,1),this._requestFilterRefresh(),0))},Qt.prototype.removeColumnFilters=function(t){if(null==t)return this.removeAllColumnFilters();var e=this._removeColumnFilters(t);return e&&this._updateColumnIcon(t),e},Qt.prototype._removeColumnFilters=function(t){var e=this._getColumnFilterOption(t);if(e){var i=this._columnFilters.indexOf(e);i>=0&&this._columnFilters.splice(i,1),this._removeActiveFilterStates(t);var o=this._getPlugin("FilterInputPlugin");o&&o.updateUI(t,""),this._requestFilterRefresh()}return!!e},Qt.prototype.removeColumnFilter=Qt.prototype.removeColumnFilters,Qt.prototype.removeAllColumnFilters=function(){if(this._columnFilters.length){this._columnFilters.length=0;for(var t=this._getPlugin("FilterInputPlugin"),e=this._getColumnCount(),i=0;i<e;++i)this._removeActiveFilterStates(i),t&&t.updateUI(i,"");return this._updateAllColumnIcons(),this._requestFilterRefresh(),!0}return!1},Qt.prototype.removeAllFilters=function(){this._globalFilters.length+this._columnFilters.length<=0||(this._globalFilters.length&&(this._globalFilters.length=0,this._nameMap={},this._dispatch("filterChanged",{filterType:"global",changeType:"remove",colIndex:-1,field:""})),this.removeAllColumnFilters(),this._requestFilterRefresh())},Qt.prototype.setOverridingFilter=function(t){this._overridingFilter=t},Qt.prototype.setPreTransform=function(t){this._preTransform=t},Qt.prototype.setRowTransform=function(t){this._rowTransform=t},Qt.prototype.getFilters=function(){return this._globalFilters},Qt.prototype.getAllColumnFilters=function(){for(var t=[],e=this._columnFilters.length,i=0;i<e;++i)for(var o=this._columnFilters[i],n=o._filters.length,r=0;r<n;++r)t.push(o._filters[r]);return t},Qt.prototype.getFilterExpressions=function(){return this._columnFilters.length?this._columnFilters.map(Xt):null},Qt.prototype.setFilterExpressions=function(t){if(this.removeAllColumnFilters(),Array.isArray(t))for(var e=this.getGridApi().getColumnFields(),i=t.length,o=0;o<i;++o){var n=t[o],r=n.field,s=e.indexOf(r);s>=0&&this.setColumnFilter(s,n.expression,n.context)}},Qt.prototype.hasColumnFilter=function(){return this._columnFilters.length>0},Qt.prototype.getColumnFilterIcons=function(t){for(var e=[],i=this._hosts.length;--i>=0;){var o=this._hosts[i].getSection("title");if(o){var n=o.getRowCount(),r=o.getCell(t,n-1,!0);r&&r._filterIcon&&e.push(r._filterIcon)}}return e},Qt.prototype.updateAllColumnIcons=function(){this._uiTimerId&&(clearTimeout(this._uiTimerId),this._uiTimerId=0),this._updateAllColumnIcons()},Qt.prototype.addDataView=function(t){this._dvs.indexOf(t)<0&&(this._dvs.push(t),this._requestFilterRefresh())},Qt.prototype.removeDataView=function(t){var e=this._dvs.indexOf(t);e>=0&&(this._dvs.splice(e,1),this._requestFilterRefresh())},Qt.prototype._onPreSectionRender=function(t){"title"===t.sectionType&&this._setTimerForUpdatingIcons()},Qt.prototype._onIconClicked=function(t){var e=this._hosts[0];if(e){var i=e.getRelativePosition(t);this.openDialog(i.colIndex),t.stopPropagation(),t.preventDefault(),this._dispatch("click",t)}},Qt.prototype._filterLogic=function(t,e){if(e){var i;this._rowGetter&&(e=this._rowGetter(e)),this._preTransform&&(e=this._preTransform(e));var o=this._globalFilters.length;for(i=0;i<o;++i)if(!this._globalFilters[i](e,t,this._globalContexts[i]))return!1;if(o=this._activeColFilters.length){if(this._overridingFilter){var n=this._overridingFilter(e,t);if(n)return n>0}for(this._rowTransform&&(e=this._rowTransform(e)),i=0;i<o;++i)for(var r=this._activeColFilters[i],s=r._filters.length,l=0;l<s;++l)if(!r._filters[l](e,t,r._context[l]))return!1}}return!0},Qt.prototype._requestFilterRefresh=function(){this._filterTimerId||(this._filterTimerId=setTimeout(this.refresh,10))},Qt.prototype._setTimerForUpdatingIcons=function(){"none"!==this._iconActivation&&(this._uiTimerId||(this._uiTimerId=setTimeout(this._updateAllColumnIcons,10)))},Qt.prototype.refresh=function(){if(this._filterTimerId=0,this._activeColFilters=this._columnFilters,this._getPlugin("ColumnStackPlugin")){var t,e,i=this._hosts[0],o=this._getColumnCount();for(this._activeColFilters=[],t=0;t<o;++t)(e=this._getColumnFilterOption(t))&&i.getColumnVisibility(t,2)&&this._activeColFilters.push(e)}for(var n=this._globalFilters.length+this._activeColFilters.length,r=!this._disabled&&n?this._filterLogic:null,s=0,l=this._getAvailableDataViews(),a=l.length;--a>=0;)s|=l[a].filterIn(r);s&&this._dispatch("refreshed",{})},Qt.prototype._updateColumnIcon=function(t){for(var e=this._getColumnFilterOption(t),i=0==this._getUserColumnSettings(t).filterIcon?"none":this._iconActivation,o=e?e._filters.length:0,n=this._hosts.length;--n>=0;){var r=this._hosts[n],s=r.getSection("title");if(s){var a=s.getRowCount(),u=s.getCell(t,a-1,!0),d=s.getColumn(t);if(u){u.updatePadding&&u.updatePadding(),r.isColumnMovable(t)?d.enableClass("movable",!0):d.enableClass("movable",!1);var h,c="always"!==i&&"onHover"!==i;if(this._disabled||"none"===i||c&&!o)u._filterIcon&&(u.removeFloatingIcon(u._filterIcon),u._filterIcon=null,u.enableClass("active-filter",!1));else u._filterIcon||(l.u.hasComponent("ef-icon")>=3?(h=document.createElement("ef-icon")).setAttribute("icon","filter"):(h=document.createElement("div")).className="filter-symbol icon-filter ef-icon",h.classList.add("title-filter-icon"),h.addEventListener("click",this._onIconClicked,!1),this._dispatch("iconCreated",{icon:h,colIndex:t,grid:r}),u.insertFloatingIcon(h,10),u._filterIcon=h),o?u.enableClass("active-filter",!0):u.enableClass("active-filter",!1)}}}},Qt.prototype._updateAllColumnIcons=function(){this._uiTimerId=0;for(var t=this._getColumnCount(),e=0;e<t;++e)this._updateColumnIcon(e)},Qt.prototype._getColumnCount=function(){var t=this._hosts[0];return t?t.getColumnCount():0},Qt.prototype.setColumnFilterState=function(t,e){var i=this._getColumnFilterOption(t);return!!i&&(i._context[0]=e,this._requestFilterRefresh(),!0)},Qt.prototype.getColumnFilterState=function(t){var e=this._getColumnFilterOption(t);return e?e._context[0]:null},Qt.prototype.getColumnFilterStates=function(){for(var t=this._hosts[0]?this._hosts[0].getColumnCount():0,e=new Array(t),i=0;i<t;++i)e[i]=this.getColumnFilterState(i);return e},Qt.prototype._getAvailableDataViews=function(){if(this._dvs.length)return this._dvs;for(var t=this._hosts.length,e=[],i=0;i<t;++i){var o=this._hosts[i].getDataSource();o&&e.push(o)}return e},Qt.prototype._getDataTable=function(t){for(var e=t?t.getDataSource():null;e&&e.getDataSource();)e=e.getDataSource();return e},Qt.prototype.getUniqueValues=function(t,e,i,o,n,r,s){if(!t)return null;for(var l=this._getAvailableDataViews().map(this._getDataTable),a=l.length,u={},d=0;d<a;++d)for(var h=l[d].getAllRowData(),c=h.length,p=0;p<c;++p){var _=h[p];this._rowGetter&&(_=this._rowGetter(_)),this._rowTransform&&(_=this._rowTransform(_));var g=_[t],f=g;if(o&&(f=o(f)),f||0===f||!1===f){var m=f;if(n?m=n(g):e?m=e(_):i&&(m=_[i]),"string"!=typeof m&&(m?m="object"!=Zt(m)?f+"":m instanceof Date?m.toLocaleString("en-GB"):"":0===m?m="0":!1===m&&(m="false")),m){r&&(s[m]||(s[m]=Qt._getFilteredValue(_,r)));var v=u[m];v?v.indexOf(f)<0&&v.push(f):u[m]=[f]}}}return u},Qt._createDialog=function(){var t=Qt._dialogTagName;if(null==t){var e=l.u.hasComponent("filter-dialog");t=Qt._dialogTagName=e?e>=3?"filter-dialog":"tr-grid-filter-dialog":""}return t?document.createElement(t):null},Qt._getFilteredValue=function(t,e){for(var i=e.length;--i>=0;)if(!e[i](t))return!1;return!0},Qt._formatArrayExpression=function(t,e,i){if(Array.isArray(t)){var o=t.slice(),n=o[1],r=ot(n);if(r!==n&&(o.rawValue=r,o.formattedValue=n),e&&i&&"string"!=typeof r&&null!=r){var s={};s[e]=r,(n=i(s))&&(o.rawValue=r,o.formattedValue=n,r=n)}return o[1]=r,o}return null},Qt.prototype.openDialog=function(t,e){var i=this._getPlugin("SortableTitlePlugin");if(this._filterDialog&&this._dialogInitialized||(this._filterDialog||(this._filterDialog=Qt._createDialog()),this._filterDialog&&(this._dialogInitialized=!0,i?this._filterDialog.addEventListener("sortChanged",this._onDialogSortChanged.bind(this)):this._filterDialog.hideSortUI(),this._filterDialog.addEventListener("filterChanged",this._onDialogFilterChanged.bind(this)))),this._filterDialog){if(!this._filterDialog.isShown||(this._filterDialog.hide(),this._filterDialog._colIndex!==t)){var o=this._hosts[0];if(o){var n=o.getSection("title");if(n){var r=n.getRowCount(),s=n.getCell(t,r-1,!0);if(s&&s.getElement()){var l=this._getField(t);if(l){if(this.hasListener("beforeDialogOpened")){var a={colIndex:t,field:l,grid:o};if(e&&(a.dialogOptions=e),this._dispatch("beforeDialogOpened",a),a.cancel)return;a.dialogOptions&&(e=a.dialogOptions)}"object"!==Zt(e)&&(e=null),i&&this._filterDialog.setSortState(i.getSortOrder(t));var u=o.getColumnData(t).formatOptions,d=!1;u&&u.formatType&&(d=!0,null!=u.useUTCTime&&(d=u.useUTCTime));var h={sortUI:!0,filterUI:!0,fieldDataType:"",lang:"",rawDataAccessor:null,formattedDataAccessor:null,sortLogic:null},c=null,p=this._getUserColumnSettings(t);p.fieldDataType&&(c={fieldDataType:p.fieldDataType}),Qt._overrideConfig(h,this._dialogOptions),Qt._overrideConfig(h,c),Qt._overrideConfig(h,e);var _=this._initColumnFilterOption(t),g=_._rawDataAccessor=h.rawDataAccessor||null,f=_._formattedDataAccessor=h.formattedDataAccessor||null,m=h.sortLogic||null,v=this._getFormatter(t),C=null,y="",b=null,S=p.expression;S&&(Array.isArray(S)?S.length&&((C=Array.isArray(S[0])?S.slice():[S])[0]=Qt._formatArrayExpression(C[0],l,v),C[1]=Qt._formatArrayExpression(C[1],l,v),y="advanced"):"function"!=typeof S&&"string"!=typeof S&&"object"!==Zt(S)||_._filters&&_._filters.length&&(b=_._filters));var w={},x=_.uniqueValues=this.getUniqueValues(l,v,"",g,f,b,w),T=Object.keys(x);m&&T.sort((function(t,e){var i=x[t][0],o=x[e][0];return m(i,o)}));var I=T.map((function(t,e){return{id:e,title:t,nodes:[],checked:!!w[t]}}));if(C){var R=C[0];R&&R.formattedValue&&(x[R.formattedValue]||(x[R.formattedValue]=[R.rawValue])),(R=C[1])&&R.formattedValue&&(x[R.formattedValue]||(x[R.formattedValue]=[R.rawValue]))}this._filterDialog.init&&this._filterDialog.init(h),this._filterDialog.useUTCTime=d,this._filterDialog.target=s.getElement(),this._filterDialog._colIndex=t,this._filterDialog.data=I,this._filterDialog.filterMode=y,this._filterDialog.conditions=C,this._filterDialog.show()}}}}}}else console.log("Filter dialog does not exist")},Qt._overrideConfig=function(t,e){if(e){var i=e.sortUI;null!=i&&(t.sortUI=i);var o=e.filterUI;null!=o&&(t.filterUI=o);var n=e.fieldDataType;null!=n&&(t.fieldDataType=n);var r=e.lang;null!=r&&(t.lang=r);var s=e.rawDataAccessor;"function"!=typeof s&&null!==s||(t.rawDataAccessor=s);var l=e.formattedDataAccessor;"function"!=typeof l&&null!==l||(t.formattedDataAccessor=l);var a=e.sortLogic;"function"!=typeof a&&null!==a||(t.sortLogic=a)}},Qt.prototype._getFormatter=function(t){var e=this._getPlugin("TextFormattingPlugin");if(e){var i=e.getFormatter(t);if(i)return i.format||null}return null},Qt._getFilterBuilder=function(){return Qt._filterBuilder||(Qt._filterBuilder=new ut),Qt._filterBuilder},Qt.prototype._onDialogFilterChanged=function(t){var e=this._filterDialog._colIndex,i=this._getColumnFilterOption(e),o=i.uniqueValues,n=i._rawDataAccessor,r=i._formattedDataAccessor,s=null;(n||r)&&(s={rawDataAccessor:n||null,formattedDataAccessor:r||null}),this.removeColumnFilters(e);var l=t.detail.conditions;if(Array.isArray(l)){for(var a=l.length,u=0;u<a;++u){var d=l[u],h=$.lw[d[0]];if(h&&"string"!==h.type){var c=o[d[1]];null!=c&&(d[1]=c[0])}}return s&&(s._autoGenerated=!0),void this.addColumnFilter(e,l,s)}var p=t.detail.value,_=null;if(p){if("string"==typeof p)return void this.addColumnFilter(e,p);_=p}var g=_?_.length:0;if(g){for(var f={},m={},v=!1,C=0;C<g;++C){var y=_[C].title,b=o[y];if(b){v=!0,m[y]=!0;for(var S=b.length,w=0;w<S;++w)f[b[w]]=!0}}v&&this.addColumnFilter(e,f,s),this._dispatch("dialogCommitted",{value:t.detail.value,fieldDataType:t.detail.fieldDataType,colIndex:e})}},Qt.prototype._onDialogSortChanged=function(t){var e=this._getPlugin("SortableTitlePlugin");if(e){var i=this._filterDialog._colIndex,o=t.detail.value?t.detail.value:t.detail;e.getSortOrder(i)===o?e.sortColumn(i,"n"):e.sortColumn(i,o),this._dispatch("dialogCommitted",{sortOrder:t.detail.value,colIndex:i})}},Qt.prototype._onColumnAdded=function(t){t.context&&this._setColumnOptions(t.colIndex,t.context)&&this._applyPendingFilter()},Qt.prototype._onColumnRemoved=function(t){var e=t.columnData;if(e){var i=e.rowFiltering.filterOption;if(i){var o=this._columnFilters.indexOf(i);o>=0&&this._columnFilters.splice(o,1),this._dispatch("filterChanged",{filterType:"column",changeType:"remove",colIndex:t.colIndex,field:i._field||""}),this._requestFilterRefresh()}}},Qt.prototype.enableEmptySegmentFiltering=function(t){var e=this._hosts[0],i=e?e.getDataSource():null;i&&i.enableEmptySegmentFiltering&&i.enableEmptySegmentFiltering(t)},Qt.prototype.enableSeparatorFiltering=function(t){var e=this._hosts[0],i=e?e.getDataSource():null;i&&i.enableSeparatorFiltering&&i.enableSeparatorFiltering(t)};var $t=function(t){var e=this;e._onColumnIndexChanged=e._onColumnIndexChanged.bind(e),e._getRowsForContentAsHeader=e._getRowsForContentAsHeader.bind(e),e._onPostSectionDataBinding=e._onPostSectionDataBinding.bind(e),e._onCellClicked=e._onCellClicked.bind(e),e._onMapCriteria=e._onMapCriteria.bind(e),e._onGroupCriteriaChanged=e._onGroupCriteriaChanged.bind(e),e._onGroupAdded=e._onGroupAdded.bind(e),e._onBeforeGroupAdded=e._onBeforeGroupAdded.bind(e),e._updateCursor=e._updateCursor.bind(e),e.updateHeaders=e.updateHeaders.bind(e),e.sortGroups=e.sortGroups.bind(e),e._onItemGroupColumnClicked=e._onItemGroupColumnClicked.bind(e),e._onItemUnGroupColumnClicked=e._onItemUnGroupColumnClicked.bind(e),e._onItemExpandAllClicked=e._onItemExpandAllClicked.bind(e),e._onItemCollapseAllClicked=e._onItemCollapseAllClicked.bind(e),e._criteria=[],e._criteriaFuncs=[],e._hosts=[],e.config({rowGrouping:t})};function te(t){return!!t&&"function"!=typeof t}o.p.inherits($t,a),$t.prototype._dirty=!1,$t.prototype._shouldUpdateDisplayColumn=!0,$t.prototype._criteria,$t.prototype._criteriaFuncs,$t.prototype._predefinedGroups=null,$t.prototype._groupSortFunction,$t.prototype._disabled=!1,$t.prototype._fixedDisplayColumn=-1,$t.prototype._displayColumn=0,$t.prototype._headerColumn=-1,$t.prototype._headerColumnField="",$t.prototype._indentSizes=null,$t.prototype._arrowSize=9,$t.prototype._noCollapsible=!1,$t.prototype._headerSpanning=!0,$t.prototype._footerSpanning=!1,$t.prototype._autoGroupSorting=!1,$t.prototype._sortingTimer=0,$t.prototype._footerRows=0,$t.prototype._autoGroupRemoval=!1,$t.prototype._autoGroupHiding=!1,$t.prototype._contentAsHeader=!1,$t.prototype._timerId=0,$t._iconName="",$t.prototype._clickableCell=!0,$t.prototype._hiddenArrow=!1,$t.prototype._clickDisabled=!1,$t.prototype._rowPainter=null,$t.prototype._colorTag=null,$t.prototype._predefinedColors=null,$t.prototype._groupColors=null,$t._controlClass="predefined-color-tag",$t.prototype._styleTag=null,$t.prototype._criteriaGetter=null,$t._defaultCriteriaGetter=function(t,e){var i=e[t];return $t._toArrayOfString(i)},$t._rowDefCriteriaGetter=function(t,e){var i=e.ROW_DEF.getRowData()[t];return $t._toArrayOfString(i)},$t._toArrayOfString=function(t){return Array.isArray(t)?t.map(String):[t+""]},$t.prototype._findCheckboxColumnIndexFromConfig=function(t){if(!Array.isArray(t))return-1;for(var e=-1,i=t.length,o=0;o<i;o++)if(t[o].checkboxColumn){e=o;break}return e},$t.prototype.beforeProcessOption=function(t,e){if("rowGrouping"==t&&e)return this.config({rowGrouping:e}),null},$t.prototype._afterInit=function(){this._realTimeGrid?this._criteriaGetter=$t._rowDefCriteriaGetter:this._criteriaGetter=$t._defaultCriteriaGetter,this._shouldUpdateDisplayColumn=!0,this._applyGrouping()},$t.prototype.getName=function(){return"RowGroupingPlugin"},$t.prototype.beforeInit=function(t,e){l.u.isHaloTheme()&&(this._arrowSize=18)},$t.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){this._hosts.push(t),y.loadExpanderStyles(),t.unloadPlugin("CollapsibleHeaderPlugin"),t.listen("columnMoved",this._onColumnIndexChanged),t.listen("columnAdded",this._onColumnIndexChanged),t.listen("columnRemoved",this._onColumnIndexChanged),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),this.config(e);var i=null!=this._colorTag?this._colorTag:l.u.isHaloTheme();S.disableColorTag(t,!1===i),null!=this._predefinedColors&&(this._injectStyles(this._predefinedColors),t.enableClass($t._controlClass)),S.applyGroupingStyles(t),this._applyGrouping()}},$t.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("columnMoved",this._onColumnIndexChanged),t.unlisten("columnAdded",this._onColumnIndexChanged),t.unlisten("columnRemoved",this._onColumnIndexChanged),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),this._hosts.splice(e,1),this._dispose(),this._hosts.length||(this._compositeGrid=null,this._timerId&&(clearTimeout(this._timerId),this._timerId=0),this._sortingTimer&&(clearTimeout(this._sortingTimer),this._sortingTimer=0)))},$t.prototype.config=function(t){if(t){var e=t.rowGrouping;if(e){if(null!=e.autoGroupRemoval&&(this._autoGroupRemoval=!!e.autoGroupRemoval),null!=e.autoGroupHiding&&(this._autoGroupHiding=!!e.autoGroupHiding),null!=e.headerSpanning&&(this._headerSpanning=!!e.headerSpanning),null!=e.footerSpanning&&(this._footerSpanning=!!e.footerSpanning),null!=e.autoGroupSorting&&(this._autoGroupSorting=!!e.autoGroupSorting),null!=e.defaultCollapse&&this.setDefaultCollapse(e.defaultCollapse),null!=e.predefinedGroups&&this.setPredefinedGroups(e.predefinedGroups),(e.groupBy||e.groupCriteria)&&this.setGroupingCriteria(e.groupBy||e.groupCriteria),"number"==typeof e.displayColumn&&(this._displayColumn=e.displayColumn),null!=e.fixedDisplayColumn&&(this._fixedDisplayColumn=e.fixedDisplayColumn?this._displayColumn:-1),"function"==typeof e.groupSortLogic&&this.setGroupSortingLogic(e.groupSortLogic),!e.groupHeaderBinding&&e.headerBinding&&(e.groupHeaderBinding=e.headerBinding),!e.groupFooterBinding&&e.footerBinding&&(e.groupFooterBinding=e.footerBinding),null!=e.hiddenArrow){var i=e.hiddenArrow;if(Array.isArray(i)){var o=i.length;this._hiddenArrow={};for(var n=0;n<o;n++)this._hiddenArrow[i[n]]=!0}else"number"==typeof i?(this._hiddenArrow={},this._hiddenArrow[i]=!0):this._hiddenArrow=!!e.hiddenArrow}null!=e.contentAsHeader&&(this._contentAsHeader=!!e.contentAsHeader),null!=e.clickableCell&&(this._clickableCell=!!e.clickableCell);var r=e.indentSize;if(null!=r)if("boolean"==typeof r)this._indentSizes=r?null:[0];else if("number"==typeof r){this._indentSizes=new Array(5);for(var s=0;s<5;s++)this._indentSizes[s]=r*s}else Array.isArray(r)&&(this._indentSizes=r);null!=e.noCollapsible&&(this._noCollapsible=!!e.noCollapsible,this._noCollapsible&&(this._indentSizes=[0])),(this._contentAsHeader||this._noCollapsible)&&(this._clickableCell=!1,this._hiddenArrow=!0),this.addListener(e,"clicked"),this.addListener(e,"groupAdded"),this.addListener(e,"beforeGroupAdded"),this.addListener(e,"groupHeaderBinding"),this.addListener(e,"nonGroupBinding"),this.addListener(e,"groupFooterBinding"),this.hasListener("groupFooterBinding")&&(this._footerRows=1),null!=e.colorTag&&(this._colorTag=e.colorTag),null!=e.groupColors&&"object"==typeof e.groupColors&&(this._groupColors=e.groupColors),null!=e.predefinedColors&&"object"==typeof e.predefinedColors&&(this._predefinedColors=e.predefinedColors)}if(this._rowPainter=new S({clickableCell:this._clickableCell,headerSpanning:this._headerSpanning,footerSpanning:this._footerSpanning,onCellClicked:this._onCellClicked}),this._fixedDisplayColumn<0){var l=this._findCheckboxColumnIndexFromConfig(t.columns);l>=0&&l<=this._displayColumn&&this._displayColumn++}}},$t.prototype.getConfigObject=function(t){var e=t||{},i=e.rowGrouping;i||(i=e.rowGrouping={}),this._autoGroupRemoval&&(i.autoGroupRemoval=this._autoGroupRemoval),this._autoGroupHiding&&(i.autoGroupHiding=this._autoGroupHiding),this._predefinedGroups&&(i.predefinedGroups=this._predefinedGroups);var o=this._criteria.filter(te);if(o.length&&(i.groupBy=o),this._displayColumn>0&&(i.displayColumn=this._displayColumn),this._fixedDisplayColumn>=0&&(i.fixedDisplayColumn=!0),this._noCollapsible&&(i.noCollapsible=this._noCollapsible),i.clickableCell=this._clickableCell,this._hiddenArrow)if(!0===this._hiddenArrow)i.hiddenArrow=!0;else{var n=i.hiddenArrow=[];for(var r in this._hiddenArrow)n.push(+r)}this._contentAsHeader&&(i.contentAsHeader=this._contentAsHeader),this._headerSpanning||(i.headerSpanning=this._headerSpanning),this._footerSpanning&&(i.footerSpanning=this._footerSpanning),this._autoGroupSorting&&(i.autoGroupSorting=this._autoGroupSorting),this._indentSizes&&(i.indentSize=this._indentSizes),null!=this._colorTag&&(i.colorTag=this._colorTag),null!=this._groupColors&&(i.groupColors=this._groupColors),null!=this._predefinedColors&&(i.predefinedColors=this._predefinedColors);var s=this.getDefaultCollapse();return null!=s&&(i.defaultCollapse=s),e},$t.prototype.getColumnMenu=function(t,e){e||(e={});var i=e.menus;i||(i=e.menus=[]);var o=i[0];o||(o=i[0]={menuItems:[]});var n=this._getField(t),r=this.hasGroupingCriteria(),s=[{indexScore:200,label:"Group",group:"FREQUENTLY_USED",subMenu:{menuItems:[{indexScore:220,label:"Expand All",group:"FREQUENTLY_USED",click:this._onItemExpandAllClicked,disabled:!r},{indexScore:210,label:"Collapse All",group:"FREQUENTLY_USED",click:this._onItemCollapseAllClicked,disabled:!r}]}}];return this._hasInGroupCriteria(n)?s[0].subMenu.menuItems.push({indexScore:230,label:"Un-Group by This Column",group:"FREQUENTLY_USED",value:{colIndex:t},click:this._onItemUnGroupColumnClicked}):s[0].subMenu.menuItems.push({indexScore:230,label:"Group by This Column",group:"FREQUENTLY_USED",value:{colIndex:t},click:this._onItemGroupColumnClicked}),Array.prototype.push.apply(o.menuItems,s),e},$t.prototype._injectStyles=function(t){var e,i=".tr-grid."+$t._controlClass+" .tr-lg .cell",o=[];for(var n in t)o.push(i+"."+n+"::before"),(e=t[n].backgroundColor)&&o.push(["background-color: "+e+";"]);var r=this._hosts[0];this._styleTag&&(this._styleTag.parentNode&&this._styleTag.parentNode.removeChild(this._styleTag),this._styleTag=null),this._styleTag=(0,s.kM)((0,s.CA)(o),r.getElement())},$t.prototype._onItemGroupColumnClicked=function(t){var e=this._getField(t.currentTarget.value.colIndex);this._addGroup(e),this._hideColumnMenu()},$t.prototype._onItemUnGroupColumnClicked=function(t){var e=this._getField(t.currentTarget.value.colIndex);this._ungroup(e),this._hideColumnMenu()},$t.prototype._onItemExpandAllClicked=function(t){this.expandAll(),this._hideColumnMenu()},$t.prototype._onItemCollapseAllClicked=function(t){this.collapseAll(),this._hideColumnMenu()},$t.prototype._hideColumnMenu=function(){var t=this._hosts[0].getPlugin("ColumnMenuPlugin");t&&t.hide()},$t.prototype._addGroup=function(t){var e=this.getGroupingCriteria();e.indexOf(t)<0&&e.push(t),this._dirty=!0,this._applyGrouping()},$t.prototype._ungroup=function(t){var e=this.getGroupingCriteria(),i=e.indexOf(t);i>=0&&e.splice(i,1),this._dirty=!0,this._applyGrouping()},$t.prototype.getGroupingCriteria=function(){return this._criteria},$t.prototype.hasGroupingCriteria=function(){return this._criteria.length>0},$t.prototype._hasInGroupCriteria=function(t){return this._criteria.indexOf(t)>=0},$t.prototype.setGroupingCriteria=function(t){this._criteria.length>0&&(this._dirty=!0,this._criteria.length=0),"string"==typeof t||"function"==typeof t?(this._dirty=!0,this._criteria.push(t)):Array.isArray(t)&&(this._dirty=!0,this._criteria=t.concat()),this._applyGrouping()},$t.prototype.groupBy=$t.prototype.setGroupingCriteria,$t.prototype._applyGrouping=function(){if(this._dirty&&this._criteriaGetter){var t=this.getDataView();t&&("function"==typeof t.enableContentAsHeader&&t.enableContentAsHeader(this._contentAsHeader),this._criteria.length?(t.listen("groupCriteriaChanged",this._onGroupCriteriaChanged),t.listen("groupAdded",this._onGroupAdded),t.listen("beforeGroupAdded",this._onBeforeGroupAdded),this._autoGroupRemoval&&t.enableAutoGroupRemoval&&t.enableAutoGroupRemoval(),this._autoGroupHiding&&t.enableAutoGroupHiding&&t.enableAutoGroupHiding(),this._predefinedGroups&&t.setPredefinedGroups(this._predefinedGroups),this._criteriaFuncs=this._criteria.map(this._onMapCriteria),t.groupBy(this._criteriaFuncs),this.sortGroups()):(this._clearSectionStyles(this._headerColumn),t.groupBy(null)),this._dirty=!1)}},$t.prototype.getDataView=function(){var t=this._hosts[0];return t?t.getDataSource():null},$t.prototype.setGroupSortingLogic=function(t){this._groupSortFunction=t},$t.prototype.getGroupSortingLogic=function(){return this._groupSortFunction?this._groupSortFunction:$t._standardGroupSortFunction},$t.prototype.setPredefinedGroups=function(t){if(!t||Array.isArray(t)){this._predefinedGroups=t;var e=this.getDataView();e&&e.setPredefinedGroups(this._predefinedGroups)}},$t.prototype.setPredefinedColors=function(t){null!=t&&"object"==typeof t&&(this._predefinedColors=t,this._injectStyles(t))},$t.prototype.setDefaultCollapse=function(t){var e=this.getDataView();e&&e.setDefaultCollapse(t)},$t.prototype.getDefaultCollapse=function(){var t=this.getDataView();return!!t&&t.getDefaultCollapse()},$t.prototype.sortGroups=function(){if(this._sortingTimer=0,this._groupSortFunction){var t=this.getDataView();t&&t.sortGroups(this._groupSortFunction)}},$t.prototype._onPostSectionDataBinding=function(t){this._disabled||this._updateHeader(t.sectionSettings,t.fromRowIndex,t.toRowIndex-1)},$t._standardGroupSortFunction=function(t,e){var i=""+t,o=""+e;return i<o?-1:i>o?1:0},$t.prototype._isArrowHidden=function(t){if(this._hiddenArrow&&t){if(!0===this._hiddenArrow)return!0;var e=t.getGroupLevel();if(this._hiddenArrow[e])return!0}return!1},$t.prototype._hasGroupHeader=function(t){if(t&&"content"===t.getType()){var e=t.getDataSource();if(e)return e.hasGroup()}return!1},$t.prototype._clearSectionStyles=function(t){var e=this._hosts[0];if(e&&t>=0)for(var i=e.getAllSections("content"),o=this._rowPainter,n=i.length;--n>=0;)for(var r=i[n],s=r.getFirstIndexInView(),l=r.getLastIndexInView(),a=s;a<=l;a++)o.removeAllStyles(r,t,a)},$t.prototype._getHeaderColumnIndex=function(){for(var t=this.getColumnCount(),e=0;e<t;e++)if(this._getColumnOption(e,"isHeaderColumn"))return e;return-1},$t.prototype._onGroupCriteriaChanged=function(t){t.sender.hasGroup()?(this._fixedDisplayColumn<0||this._displayColumn<0||this._displayColumn>=this.getColumnCount()||this._getHeaderColumnIndex()<0)&&(this._shouldUpdateDisplayColumn=!0,this._updateDisplayColumn()):(this._shouldUpdateDisplayColumn=!0,this._updateDisplayColumn())},$t.prototype._onGroupAdded=function(t){this._footerRows&&t.newGroup.addFooter(this._footerRows);var e=t.newGroup;!this._contentAsHeader&&e.disableCollapsing&&this._isArrowHidden(e)&&e.disableCollapsing(),this._dispatch("groupAdded",t),this._autoGroupSorting&&(this._sortingTimer||(this._sortingTimer=setTimeout(this.sortGroups,100)))},$t.prototype._onBeforeGroupAdded=function(t){this._contentAsHeader&&t.dataView.getGroupLevel()>=this._criteria.length-1&&(t.hideHeaderRow=!0),this._dispatch("beforeGroupAdded",t)},$t.prototype._updateDisplayColumn=function(){if(this._shouldUpdateDisplayColumn){this._shouldUpdateDisplayColumn=!1;var t,e=this._hosts[0],i=e.getColumnCount();if(this._headerColumn=this._getHeaderColumnIndex(),this._displayColumn<0)if(this._headerColumn<0){for(t=0;t<i;++t)if(this._headerColumnField===this._getField(t)){this._displayColumn=t;break}}else this._displayColumn=this._headerColumn;var o=-1;if(this._displayColumn>=0)for(t=this._displayColumn;t<i;++t)if(e.isColumnVisible(t)&&!this._getColumnOption(t,"isCheckboxColumn")){o=t;break}if(this._headerColumn!==o){if(this._clearSectionStyles(this._headerColumn),this._headerColumn>=0){var n=this._getColumnData(this._headerColumn);n&&(n.isHeaderColumn=!1)}o>=0&&((n=this._newColumnData(o)).isHeaderColumn=!0,this._headerColumnField=this._getField(o)),this._headerColumn=o}}return this._headerColumn},$t.prototype._updateHeader=function(t,e,i){if(this._hasGroupHeader(t)){var o=this._updateDisplayColumn();if(!(o<0)&&this._getColumnOption(o,"isHeaderColumn")){var n=t.getDataSource(),r=t.getSection(),s=null!=e?e:r.getFirstIndexInView(),l=null!=i?i:r.getLastIndexInView(),a=this._getRowsForContentAsHeader(),u=-1,d=r.getCell(o,0,!1);!this._headerSpanning&&d&&(u=d.getWidth()-27);for(var h,c=r.getColumnCount(),p=this.hasListener("nonGroupBinding"),_=n.getGroupLevel(s),g={section:r,colCount:c},f=this._autoGroupHiding||this._contentAsHeader,m=0;m<c;m++)if(this._getColumnOption(m,"isCheckboxColumn")){g.checkboxColumnIndex=m;break}for(var v=this._rowPainter,C=s;C<=l;C++){var y=0,b=n.getRowId(C),S=r.getCell(o,C,!1);if(S){g.cell=S,g.rowIndex=C,g.colIndex=o,g.rowId=b,g.rowData=this._rowGetter(n.getRowData(b)),g.noIndent=!1;var w=a[b],x=n.getGroupByRowId(b);if(x){h=x,_=x.getGroupLevel(),g.footerIndex=x.getFooterRowIndex(b);var T=g.footerRow=g.footerIndex>=0;g.groupId=x.getGroupId(),g.dataSource=x,g.collapsed=x.isCollapsed(),g.hiddenArrow=!(!T&&!this._isArrowHidden(x))}else f?_=(h=n.getGroup(b)).getGroupLevel():h||(h=n.getGroup(b)),(w||p)&&(g.dataSource=n,g.footerIndex=null,g.groupId=null,w&&(g.collapsed=w.isCollapsed()),p&&(g.rowData=this._rowGetter(n.getRowData(b)))),w?y=-2:this._contentAsHeader&&this._criteria.length>1&&(y=-1);g.groupLevel=_;var I,R=this._autoGroupHiding&&null==h.getGroupValue()&&1===_&&!this._contentAsHeader;g.nonGroupRow=R,I=g.noIndent||R?0:x?_-1:_+y;var D=0;if(this._indentSizes){if(D=this._indentSizes[0],I>0){var E=this._indentSizes.length;D=I<E?this._indentSizes[I]:this._indentSizes[E-1]}}else I>0&&(D=8+4*I,x||(D+=this._arrowSize));if(u>-1&&u<D&&(D=u),g.indentSize=D,this._groupColors){var A=h||n.getGroup(b);if(_>1)for(var k=_;k>1;k--)A=A.getDataSource();var P=A.getGroupId();g.colorTagClass=this._groupColors[P]}x?(v.applyHeaderStyle(g),this._dispatch(T?"groupFooterBinding":"groupHeaderBinding",g)):(v.removeHeaderStyle(r,o,C),w&&v.applyContentAsHeaderStyle(g),v.applyRowStyle(g),this._dispatch("nonGroupBinding",g))}}this._updateCursorTimer||(this._updateCursorTimer=setTimeout(this._updateCursor,100))}}},$t.prototype._getRowsForContentAsHeader=function(){if(!this._contentAsHeader)return{};var t={},e=this.getDataView().getAllGroups();for(var i in e){var o=e[i];if(!o.hasGroup()){var n=o.getAllRowIds(!0)[0];n&&(t[n]=o)}}return t},$t.prototype._onColumnIndexChanged=function(t){this._fixedDisplayColumn>=0?(this._displayColumn=this._fixedDisplayColumn,this.updateHeaders()):(this._headerColumn>=0&&(this._displayColumn=-1),this._timerId||(this._timerId=setTimeout(this.updateHeaders,50)))},$t.prototype.updateHeaders=function(){this._timerId=0,this._shouldUpdateDisplayColumn=!0;var t=this._hosts[0];if(t&&!this._disabled)for(var e=t.getAllSectionSettings("content"),i=e.length;--i>=0;)this._updateHeader(e[i])},$t.prototype._collapseDataRowId=function(t,e){if(this.getDataView()){var i=this._getRowsForContentAsHeader()[t];i&&i.collapse(e)}},$t.prototype._onCellClicked=function(t){if(!this._clickDisabled){var e=!1,i=this._hosts[0].getRelativePosition(t),o=i.cell?i.cell.getElement():null;if(o){var n=o.classList.contains("closed"),r=i.rowIndex,s=i.sectionSettings.getDataSource(),l=s.getRowId(r),a=s.getGroupByRowId(l);if(a){if(e=!0,a.isCollapsible&&!a.isCollapsible())return;a.collapse(!n)}else this._contentAsHeader&&(e=!0,this._collapseDataRowId(l,!n));e&&(n?o.classList.remove("closed"):o.classList.add("closed")),i.expanded=n,i.group=a,this._dispatch("clicked",i)}}},$t.prototype._updateCursor=function(){var t=this._hosts[0];if(t){var e=!1,i=!1;this._clickableCell||(i=!0),this._clickDisabled&&(e=!0,i=!0),e?t.addClass("expander-disabled"):t.removeClass("expander-disabled"),i?t.addClass("folder-disabled"):t.removeClass("folder-disabled")}this._updateCursorTimer=0},$t.prototype._onMapCriteria=function(t){return"string"==typeof t?this._criteriaGetter.bind(null,t):t},$t.prototype.expandAll=function(t){this.collapseAll(!1===t)},$t.prototype.collapseAll=function(t){var e=this.getDataView();e&&e.collapseAllGroups(t)},$t.prototype.expand=function(t,e){this.collapse(t,!1===e)},$t.prototype.collapse=function(t,e){var i=this.getDataView();if(i){var o=i.getGroup(t);o&&o.collapse(e)}},$t.prototype.disableClicking=function(t){this._clickDisabled=!1!==t,this._updateCursor()},$t.prototype.getGroupingStates=function(){return this.getDataView().getAllGroups().map((function(t){return{groupId:t.getGroupId(),collapsed:t.isCollapsed()}}))},$t.prototype.setGroupingStates=function(t){"string"==typeof t&&(t=JSON.parse(t));for(var e=0;e<t.length;e++){var i=t[e],o=null==i.groupId?e:i.groupId;this.collapse(o,i.collapsed)}},$t.prototype.enableFixedDisplayColumn=function(t){this._fixedDisplayColumn=!1!==t?this._displayColumn:-1},$t.prototype.enableFooterRow=function(t){null==t||!0===t?t=1:t<=0&&(t=0),this._footerRows=t},$t.prototype.getFooterRowCount=function(){return this._footerRows};var ee=(0,s.V5)(),ie=function(t){var e=this;e._onMouseDown=e._onMouseDown.bind(e),e._onMouseMove=e._onMouseMove.bind(e),e._onCopy=e._onCopy.bind(e),e._onClick=e._onClick.bind(e),e._onKeyDown=e._onKeyDown.bind(e),e._onBeforeRowRemoved=e._onBeforeRowRemoved.bind(e),e._onReselection=e._onReselection.bind(e),e._onPostSectionDataBinding=e._onPostSectionDataBinding.bind(e),e._onThemeLoaded=e._onThemeLoaded.bind(e),e._onRowPositionChanged=e._onRowPositionChanged.bind(e),e._updateMenuIcon=e._updateMenuIcon.bind(e),e._hosts=[],e._isIE=(0,s.w1)(),e._textRange=document.createRange(),t&&e.config({rowSelection:t})};o.p.inherits(ie,a),ie.prototype._activeGrid=null,ie.prototype._anchorSection=null,ie.prototype._disabled=!1,ie.prototype._singleSelMode=!1,ie.prototype._clickToggleMode=!1,ie.prototype._pendingClickIndex=-1,ie.prototype._basedOnContent=!1,ie.prototype._selectionField="SELECTED_ROW",ie.prototype._anchorRowId="",ie.prototype._isIE=!1,ie.prototype._textRange=null,ie.prototype._onMenuClicked=null,ie.prototype._menuButton=null,ie.prototype._menuPosition="outside",ie.prototype._timerId=0,ie.prototype._timerMenuId=0,ie.prototype._pendingSelection=null,ie.prototype.getName=function(){return"RowSelectionPlugin"},ie.prototype.hasMultiTableSupport=function(){return!0},ie.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){this._hosts.push(t),t.listen("mousedown",this._onMouseDown),t.listen("click",this._onClick),t.listen("keydown",this._onKeyDown),t.listen("postSectionDataBinding",this._onPostSectionDataBinding),t.listen("rowPositionChanged",this._onRowPositionChanged);var i=this.getGridApi(t);i&&i.listen("beforeRowRemoved",this._onBeforeRowRemoved),this.config(e),this._onMenuClicked&&(ie._stylePromise?ie._applyThemeColor(t):(ie._stylePromise=l.u.getThemeColors()).then(this._onThemeLoaded).catch(this._onThemeLoaded))}},ie.prototype._onThemeLoaded=function(){ie._styles||(ie._styles=(0,s.CA)([".row-selection-menu",["position: absolute;","background-color: var(--grid-column-menu-icon-bgcolor);","color: var(--grid-column-menu-icon-color);","z-index: 1;","cursor: pointer;","text-align: center;","width: 16px;","height: 16px;","padding: 6px;"],".row-selection-menu:hover",["background-color: var(--grid-column-menu-icon-hover-bgcolor);"],".row-selection-menu-inside",["padding: 4px;"]]));for(var t=this._hosts.length;--t>=0;)ie._applyThemeColor(this._hosts[t])},ie._applyThemeColor=function(t){t&&!t._rowSelectionStyles&&ie._styles&&(t._rowSelectionStyles=!0,(0,s.kM)(ie._styles,t.getParent()))},ie.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("mousedown",this._onMouseDown),t.unlisten("copy",this._onCopy),t.unlisten("cut",this._onCopy),t.unlisten("click",this._onClick),t.unlisten("keydown",this._onKeyDown),t.unlisten("postSectionDataBinding",this._onPostSectionDataBinding),t.unlisten("rowPositionChanged",this._onRowPositionChanged),this._hosts.splice(e,1),this._hosts.length||this._timerId&&(clearTimeout(this._timerId),this._timerId=0,this._timerMenuId=0,this._pendingSelection=null),this._dispose())},ie.prototype.config=function(t){if(t){var e=t.rowSelection;if(e){if("object"==typeof e){e.singleSelection&&(this._singleSelMode=!0),e.clickToggle&&(this._clickToggleMode=!0),e.basedOnContent&&(this._basedOnContent=!0),e.selectionField&&(this._selectionField=e.selectionField);var i=e.menuClicked;"function"==typeof i&&(this._onMenuClicked=i),(i=e.menuPosition)&&(this._menuPosition=i)}else"single"===e&&(this._singleSelMode=!0);this.addListener(e,"selectionChanged"),this.addListener(e,"beforeSelection")}else null!=e&&this.disable()}},ie.prototype.getConfigObject=function(t){var e=t||{},i=e.rowSelection;return i||(i=e.rowSelection={}),this._singleSelMode&&(i.singleSelection=this._singleSelMode),this._clickToggleMode&&(i.clickToggle=this._clickToggleMode),this._basedOnContent&&(i.basedOnContent=this._basedOnContent),"SELECTED_ROW"!==this._selectionField&&(i.selectionField=this._selectionField),e},ie.prototype.clearAllSelections=function(t,e){null==t&&(t=!0),this._clearSelectedRows(t),e&&(this._activeGrid=e)},ie.prototype.clearSelectedRows=ie.prototype.clearAllSelections,ie.prototype.clearSelection=ie.prototype.clearAllSelections,ie.prototype.getActiveGrid=function(){return this._activeGrid},ie.prototype.getRowAnchor=function(t){if(this._basedOnContent){var e=this._activeGrid?this._activeGrid.getDataSource():null;if(e&&this._anchorRowId)return e.getRowIndex(this._anchorRowId)}else{var i=this._getSection(t);if(i&&i.getRowAnchor)return i.getRowAnchor()}return-1},ie.prototype.getFirstSelectedIndex=function(t){var e=this._getSection(t);if(e){if(this._basedOnContent){var i=this._activeGrid?this._activeGrid.getDataSource():null;if(!i)return null;for(var o,n=i.getVisibleRowIds(!0),r=i.getMultipleRowData(n),s=r.length,l=0;l<s;l++)if((o=this._rowGetter(r[l]))&&o[this._selectionField])return l;return null}return e.getFirstSelectedRow()}return null},ie.prototype.getLastSelectedIndex=function(t){var e=this._getSection(t);if(e){if(this._basedOnContent){var i=this._activeGrid?this._activeGrid.getDataSource():null;if(!i)return null;for(var o,n=i.getVisibleRowIds(!0),r=i.getMultipleRowData(n),s=r.length-1;s>=0;s--)if((o=this._rowGetter(r[s]))&&o[this._selectionField])return s;return null}return e.getLastSelectedRow()}return null},ie.prototype.getSelectedRows=function(t){var e=this._getSection(t);if(e){if(this._basedOnContent){var i=this._activeGrid?this._activeGrid.getDataSource():null;if(!i)return null;for(var o,n=i.getVisibleRowIds(!0),r=i.getMultipleRowData(n),s=r.length,l=[],a=0;a<s;a++)(o=this._rowGetter(r[a]))&&o[this._selectionField]&&l.push(a);return l.length?l:null}return e.getSelectedRows()}return null},ie.prototype.getSelectedRowIds=function(t){var e,i,o=null,n=this.getSelectedRows(t);if(n){var r=this._activeGrid.getDataSource().getVisibleRowIds(!0);for(e=n.length,o=new Array(e),i=0;i<e;++i)o[i]=r[n[i]]||""}return o},ie.prototype.getSelectedRowCount=function(t){var e=this._getSection(t);if(!e)return 0;if(this._basedOnContent){var i=this.getSelectedRows();return i?i.length:0}return e.getSelectedRowCount()},ie.prototype.setSelectedRow=function(t,e,i){var o=this._getSection(i);o&&this._sectionSetSelectedRow(o,t,e)},ie.prototype.selectSingleRow=function(t,e,i){if(!(t>=0))return!1;var o=i?this._activeGrid:null;o&&(this._clearSelectedRows(),this._activeGrid=i);var n=this._getSection(e);return this._selectSingleRow(n,t)?(this._scrollToRow(t),!0):(o&&(this._activeGrid=o),!1)},ie.prototype.selectAllRows=function(t){if(t?this._activeGrid=t:this._activeGrid||(this._activeGrid=this._hosts[0]),this._activeGrid)for(var e=this._activeGrid.getAllSections("content"),i=e.length;--i>=0;)this._selectRowRange(null,null,e[i]),0==i&&(this._anchorSection=e[i]);this._updateMenuIcon()},ie.prototype.selectRowRange=function(t,e,i,o){this._selectRowRange(t,e,i),o&&this._scrollToRow(t),this._updateMenuIcon()},ie.prototype.disable=function(t){this._disabled=!1!==t},ie.prototype.isEnabled=function(){return!this._disabled},ie.prototype.disableMultiSelection=function(t){this._singleSelMode=!1!==t},ie.prototype._onClick=function(t){if(this._pendingClickIndex>=0&&this._anchorSection){this._selectSingleRow(this._anchorSection,this._pendingClickIndex);var e=this.getRelativeGrid(t);this._clearPendingClickIndex(e),this._basedOnContent||this._updateMenuIcon(),this._dispatchSelectionChanged(t)}null!=this._activeGrid&&((this._isIE?document.selection.createRange().htmlText:window.getSelection().toString())||this._activeGrid.focus())},ie.prototype.selectByMouse=function(t,e){var i=this._mockMouseEvent(0,t,e);this._onMouseDown(i)},ie.prototype.selectByKey=function(t,e){var i=this._mockKeyboardEvent(t,e);this._onKeyDown(i)},ie.prototype._onMouseDown=function(t){if(!this._disabled&&(2!==t.button||!t.shiftKey&&!t.ctrlKey)){var e=this.getRelativeGrid(t);if(this._clearPendingClickIndex(e),e){var i=e.getRelativePosition(t);if(i.hit&&"content"===i.sectionType){if(2===t.button){var o=this._getPlugin("ColumnSelectionPlugin");if(o&&o.isEnabled()&&o.isSelectedColumn(i.colIndex))return}var n=i.dataSource,r=i.rowIndex;if(this._basedOnContent&&!this._getRow(n,r))return;if(!this._dispatchBeforeSelection(t,i)){var s=this._singleSelMode||!this._activeGrid||this._activeGrid!==e,l=i.section;if(s||(t.shiftKey?this._selectFromAnchorToTarget(l,r):t.ctrlKey&&!ee||ee&&!t.ctrlKey&&t.metaKey?this._sectionSetSelectedRow(l,r,!l.isSelectedRow(r)):s=!0),s){if(this._anchorSection=l,l.isSelectedRow(r))return void this._setPendingClickIndex(r,e);this._activeGrid!==e&&(this._clearSelectedRows(!0),this._activeGrid=e),this._selectSingleRow(this._anchorSection,r)}var a=e.getHiddenInput();if(a){this._textRange.setStart(a.parentNode,0),this._textRange.setEnd(a,0);var u=window.getSelection();u.removeAllRanges(),u.addRange(this._textRange),this._isIE&&e.getParent().focus()}this._basedOnContent||this._updateMenuIcon(),this._dispatchSelectionChanged(t,r,l)}}}}},ie.prototype._onMouseMove=function(t){var e=this.getRelativeGrid(t);this._clearPendingClickIndex(e)},ie.prototype._setPendingClickIndex=function(t,e){this._pendingClickIndex=t,e&&e.listen("mousemove",this._onMouseMove)},ie.prototype._clearPendingClickIndex=function(t){this._pendingClickIndex=-1,t&&t.unlisten("mousemove",this._onMouseMove)},ie.prototype._onKeyDown=function(t){if(this._activeGrid)switch(t.keyCode){case 33:case 36:this._selectByKey(-1,t,!0);break;case 34:case 35:this._selectByKey(1,t,!0);break;case 37:if(this._dispatchBeforeSelection(t))return;this._gotoPrevGrid()&&n.pB.preventDefault(t);break;case 38:this._selectByKey(-1,t);break;case 39:if(this._dispatchBeforeSelection(t))return;this._gotoNextGrid()&&n.pB.preventDefault(t);break;case 40:this._selectByKey(1,t)}},ie.prototype._onBeforeRowRemoved=function(t){this._timerId||(this._pendingSelection=this.getFirstSelectedIndex(),this._timerId=setTimeout(this._onReselection,10))},ie.prototype._onReselection=function(t){this._timerId=0,null!=this._pendingSelection&&null==this.getFirstSelectedIndex()&&this.setSelectedRow(this._pendingSelection,!0),this._pendingSelection=null},ie.prototype._onCopy=function(t){var e,i;t.clipboardData?(e=t.clipboardData,i="text/plain"):(e=window.clipboardData,i="Text");var o=this.getSelectedText();o&&e.setData(i,o),t.preventDefault()},ie.prototype._onPostSectionDataBinding=function(t){if(this._basedOnContent&&"content"===t.sectionType&&this._activeGrid){var e=t.section,i=t.dataSource,o=this._selectionField;e.clearSelectedRows();for(var n=e.getFirstIndexInView(),r=e.getLastIndexInView(),s=n;s<=r;++s){var l=this._rowGetter(i.getRowDataAt(s));l&&l[o]&&e.setSelectedRow(s,!0)}this._updateMenuIcon()}},ie.prototype._onRowPositionChanged=function(t){this._timerMenuId||t.sender&&t.sender===this._activeGrid&&(this._clearMenuIcon(),this._timerMenuId=setTimeout(this._updateMenuIcon,800))},ie.prototype.getSelectedText=function(){if(!this._compositeGrid&&!this._realTimeGrid)return"";for(var t=this.getSelectedRows(),e=t.length,i=this.getColumnCount(),o="",n=this._activeGrid.getDataSource(),r=0;r<e;r++){var l=t[r],a=this._getRow(n,l);if(a){o.length&&(o+="\n");for(var u=0;u<i;u++){u>0&&(o+="\t");var d=this._getField(u);o+=(0,s.sQ)(a[d])}}}return o},ie.prototype._getSection=function(t){return this._activeGrid||(this._activeGrid=this._hosts[0],this._activeGrid&&(this._anchorSection=this._activeGrid.getSection("content"),this._anchorSection||(this._activeGrid=null))),t?this._activeGrid.getSection(t):(this._anchorSection&&(this._anchorSection.getElement()||(this._anchorSection=null)),this._anchorSection)},ie.prototype._clearSelectedRows=function(t){if(this._activeGrid){if(this._basedOnContent){var e=this._activeGrid.getDataSource();if(e){var i=e.getDataSource();this._setColumnData(i,this._selectionField,!1)}}else for(var o=this._activeGrid.getAllSections("content"),n=o.length;--n>=0;)this._sectionClearSelectedRows(o[n],t);t||(this._anchorSection=null),this._clearPendingClickIndex(this._activeGrid),this._clearMenuIcon()}},ie.prototype._selectByKey=function(t,e,i){if(e.preventDefault(),this._anchorSection){null!=this._activeGrid&&this._activeGrid.focus();var o=e.shiftKey,n=0,r=this._anchorSection.getRowCount()-1;if(i){var s=this._activeGrid.getVScrollView();-1===t?s&&(n=this.getFirstSelectedIndex(this._anchorSection)<=s.firstFullRow?s.prevPageRowIndex:s.firstFullRow):n=s?this.getLastSelectedIndex(this._anchorSection)>=s.lastFullRow?s.nextPageRowIndex:s.lastFullRow:r}else n=-1===t?this.getFirstSelectedIndex(this._anchorSection)+t:this.getLastSelectedIndex(this._anchorSection)+t;if(n<0){var l=this._getPlugin("ColumnSelectionPlugin");return!o&&l&&l.isEnabled()?(l.selectSingleColumn(null,this._activeGrid),void this.clearAllSelections()):void this._scrollToRow(0)}n>r?this._scrollToRow(r):this._dispatchBeforeSelection(e)||(o&&!this._singleSelMode?this._selectFromAnchorToTarget(this._anchorSection,n):this._selectSingleRow(this._anchorSection,n),this._scrollToRow(n),this._basedOnContent||this._updateMenuIcon(),this._dispatchSelectionChanged(e,n))}},ie.prototype._sectionSetSelectedRow=function(t,e,i){if(this._basedOnContent){var o=this._activeGrid?this._activeGrid.getDataSource():null;o&&this._getRow(o,e)&&(this._setData(o,e,this._selectionField,i),i&&(this._anchorRowId=o.getRowId(e)))}else t.setSelectedRow(e,i);this._pendingSelection=null},ie.prototype._selectRangeOnSection=function(t,e,i){if(null==e&&(e=0),this._basedOnContent){var o=this._activeGrid?this._activeGrid.getDataSource():null;if(o){var n=o.getVisibleRowIds(!0);null==i&&(i=n.length);var r=e+i;r>n.length&&(r=n.length);for(var s=[],l=[],a=e;a<r;a++)this._getRow(o,a)&&(s.push(n[a]),l.push(!0));this._setColumnData(o,this._selectionField,l,s)}}else null==i&&(i=t.getRowCount()),t.selectRowRange(e,i)},ie.prototype._sectionClearSelectedRows=function(t,e){if(this._basedOnContent){var i=this.getSelectedRowIds();if(i){var o=this._activeGrid?this._activeGrid.getDataSource():null;if(o){for(var n=i.length,r=new Array(n),s=0;s<n;s++)r[s]=!1;this._setColumnData(o,this._selectionField,r,i)}}e||(this._anchorRowId="")}else t.clearSelectedRows()},ie.prototype._selectSingleRow=function(t,e){return!!t&&(this._clearSelectedRows(),this._sectionSetSelectedRow(t,e,!0),this._anchorSection=t,!0)},ie.prototype._updateMenuIcon=function(){if(this._timerMenuId=0,!this._onMenuClicked)return!1;var t=this._activeGrid,e=this.getFirstSelectedIndex();if(null==e||!t)return!1;var i=this.getLastSelectedIndex(),o=t.getParent().parentNode;if(!this._menuButton){this._menuButton=document.createElement("div"),this._menuButton.classList.add("row-selection-menu"),this._menuButton.addEventListener("click",this._onMenuClicked);var n=document.createElement("ef-icon");n.icon="most-detail",this._menuButton.appendChild(n)}o.appendChild(this._menuButton);var r=28,s=t.getRowRect(e,i);if(s.scrollViewSize<=s.top||s.height+s.top<=0)return this._clearMenuIcon(),!1;var l=s.left+s.width,a=s.top+s.scrollViewTop;return"outside"!==this._menuPosition?(r=24,this._menuButton.classList.add("row-selection-menu-inside"),l=s.left+s.width-r,a=s.top+s.scrollViewTop-r,s.top<r&&(a=s.top+s.scrollViewTop)):(s.top<=0&&(a=s.scrollViewTop),s.top+r>=s.scrollViewSize&&(a=s.scrollViewSize)),this._menuButton.style.left=l+"px",this._menuButton.style.top=a+"px",!0},ie.prototype._clearMenuIcon=function(){this._menuButton&&this._menuButton.parentNode&&this._menuButton.parentNode.removeChild(this._menuButton)},ie.prototype._selectRowRange=function(t,e,i){var o=this._getSection(i);o&&this._selectRangeOnSection(o,t,e)},ie.prototype._selectFromAnchorToTarget=function(t,e){if(this._anchorSection===t){var i=this.getRowAnchor(this._anchorSection);if(i!==e){this._clearSelectedRows(!0);var o=1,n=i,r=e-i;r<0&&(o=-1,n=e),this._selectRangeOnSection(t,n,r*o+1),!this._basedOnContent&&this._anchorSection.setRowAnchor&&this._anchorSection.setRowAnchor(i)}}},ie.prototype._gotoPrevGrid=function(){if(!this._activeGrid)return!1;if(this._activeGrid===this._hosts[0])return!1;var t=this._hosts.indexOf(this._activeGrid);return t>0&&(this._gotoGrid(t-1),!0)},ie.prototype._gotoNextGrid=function(){if(!this._activeGrid)return!1;var t=this._hosts.length-1;if(this._activeGrid===this._hosts[t])return!1;var e=this._hosts.indexOf(this._activeGrid);return e>=0&&(this._gotoGrid(e+1),!0)},ie.prototype._gotoGrid=function(t){var e=this.getRowAnchor(this._anchorSection),i=this._anchorSection.getIndex();this.clearSelectedRows(),this.selectSingleRow(e,i,this._hosts[t]),null!=this._activeGrid&&this._activeGrid.focus()},ie.prototype._scrollToRow=function(t){var e=this._hosts[0];e&&e.scrollToRow(null,t)},ie.prototype._dispatchBeforeSelection=function(t,e){if(this.hasListener("beforeSelection")){if(!e){var i=this._activeGrid||this._hosts[0];e=i?i.getRelativePosition(t):{}}if(e.event=t,this._dispatch("beforeSelection",e),e.cancel)return!0}return!1},ie.prototype._dispatchSelectionChanged=function(t,e,i){if(this._activeGrid){var o=this._getPlugin("ColumnSelectionPlugin");o&&o.isEnabled()&&o.clearSelection();var n=this._getPlugin("CellEditingPlugin");n&&n.closeCellEditor(),(n=this._getPlugin("InCellEditingPlugin"))&&n.closeCellEditor()}if(this.hasListener("selectionChanged")){var r={};r.selectedRows=this.getSelectedRows(),r.rowIndex=null!=e?e:this.getRowAnchor(this._anchorSection),r.section=null!=i?i:this._anchorSection,r.event=t,r.grid=this._activeGrid,this._dispatch("selectionChanged",r)}};var oe=function(t){this._onSectionBinding=this._onSectionBinding.bind(this),this._updateRowColor=this._updateRowColor.bind(this),this._hosts=[],t&&this.config({rowColoring:t})};o.p.inherits(oe,a),oe._controlClass="predefined-color",oe.prototype._disabled=!1,oe.prototype._bgField="BG_COLOR",oe.prototype._txtColorField="TEXT_COLOR",oe.prototype._cssField="CSS_CLASS",oe.prototype._cssRangeField="",oe.prototype._altCssField="",oe.prototype._txtEnabled=!0,oe.prototype._bgEnabled=!0,oe.prototype._predefinedColoring=!1,oe.prototype._predefinedColors=null,oe.prototype._styleTag=null,oe.prototype._updateTimer=0,oe.prototype.getName=function(){return"RowColoringPlugin"},oe.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.listen("preSectionDataBinding",this._onSectionBinding),this.config(e),this._updateTimer=setTimeout(this._updateRowColor,100))},oe.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("preSectionDataBinding",this._onSectionBinding),this._hosts.splice(e,1),this._hosts.length||this._updateTimer&&(clearTimeout(this._updateTimer),this._updateTimer=0),this._dispose())},oe.prototype.config=function(t){if(t){var e=t.rowColoring;if(e){var i=e.bgColoring;if(null!=i&&(this._bgEnabled=!!i),null!=(i=e.textColoring)&&(this._txtEnabled=!!i),null!=(i=e.predefinedColoring)&&(this._predefinedColoring=!!i,i&&this._hosts[0].enableClass("predefined-color")),e.bgColorField||e.textColorField||e.cssField){var o=e.bgColorField;o&&(this._bgField=o),(o=e.textColorField)&&(this._txtColorField=o),(o=e.cssField)&&(this._cssField=o),(o=e.cssRangeField)&&(this._cssRangeField=o),(o=e.altCssField)&&(this._altCssField=o)}e.predefinedColors&&this._injectStyles(e.predefinedColors)}}},oe.prototype.getConfigObject=function(t){var e=t||{},i=e.rowColoring;return i||(i=e.rowColoring={}),i.bgColoring=this._bgEnabled,i.textColoring=this._txtEnabled,i.predefinedColoring=this._predefinedColoring,"BG_COLOR"!==this._bgField&&(i.bgColorField=this._bgField),"TEXT_COLOR"!==this._txtColorField&&(i.textColorField=this._txtColorField),"CSS_CLASS"!==this._cssField&&(i.cssField=this._cssField),this._cssRangeField&&(i.cssRangeField=this._cssRangeField),this._altCssField&&(i.altCssField=this._altCssField),this._predefinedColors&&(i.predefinedColors=this._predefinedColors),e},oe.prototype.setRowColor=function(t,e,i){var o=this._getDataView();if(o&&("string"==typeof t&&(t=o.getRowIndex(t)),!(null==t||t<0))){var n={};n[this._bgField]=e||"",n[this._txtColorField]=i||"",this._setRowData(o,t,n)}},oe.prototype.getRowColor=function(t){var e=this._getDataView();return e?("string"==typeof t&&(t=e.getRowIndex(t)),null==t||t<0?"":this._getData(e,t,this._bgField)||""):""},oe.prototype.removeRowColor=function(t){this.setRowColor(t,"","")},oe.prototype.toggleRowColor=function(t,e,i,o){return null==o&&(o=!!this.getRowColor(t)),o?this.removeRowColor(t):this.setRowColor(t,e,i),!o},oe.prototype.setRowPredefinedColor=function(t,e,i,o){var n=this._getDataView();n&&("string"==typeof t&&(t=n.getRowIndex(t)),null==t||t<0||(this._setStaticData(n,t,this._cssField,e||""),this._cssRangeField&&void 0!==i&&this._setStaticData(n,t,this._cssRangeField,i),this._altCssField&&void 0!==o&&this._setStaticData(n,t,this._altCssField,o)))},oe.prototype.getPredefinedColors=function(){return this._predefinedColors},oe.prototype.setPredefinedColors=function(t){null!=t&&this._injectStyles(t)},oe.prototype._injectStyles=function(t){var e,i,o,n=".tr-grid."+oe._controlClass+" .section .column .cell",r=".tr-grid."+oe._controlClass+" .section .cover-layer .cell",l=[];for(var a in t)l.push(n+"."+a+", "+r+"."+a),e=[],(o=(i=t[a]).backgroundColor)&&e.push("background-color: "+o+";"),(o=i.color)&&e.push("color: "+o+";"),l.push(e);var u=this._hosts[0];this._styleTag&&(this._styleTag.parentNode.removeChild(this._styleTag),this._styleTag=null),this._styleTag=(0,s.kM)((0,s.CA)(l),u.getElement()),this._predefinedColors=t},oe.prototype._getRowId=function(t,e){return"number"==typeof t?e?e.getRowId(t):"":"string"==typeof t?t:""},oe.prototype._getDataView=function(){var t=this._hosts[0];return t?t.getDataSource():null},oe.prototype.disableTextColoring=function(t){this._txtEnabled=!1!==t},oe.prototype.disableBgColoring=function(t){this._bgEnabled=!1!==t},oe.prototype.disableRowColoring=function(t){this._disabled=!1!==t},oe.getContrastColor=function(t){if(!t)return"";var e=parseInt(t.replace(/[^0-9A-F]/gi,""),16),i=e>>16&255,o=e>>8&255,n=255&e;return Math.sqrt(i*i*.241+o*o*.691+n*n*.068)>=135?"#000000":"#FFFFFF"},oe.prototype.getContrastColor=oe.getContrastColor,oe.prototype._onSectionBinding=function(t){"content"===t.sectionType&&this._updateRowColor(t.fromRowIndex,t.toRowIndex)},oe.prototype._applyColor=function(t,e,i,o){for(var n,r,s,l,a,u=t.getColumnCount(),d=this._getDataView(),h=this._txtEnabled,c=this._bgEnabled,p=e;p<i;++p){n=r="";var _=this._getRow(d,p);_&&(h&&(n=_[this._txtColorField]||""),c&&(r=_[this._bgField]||"")),(a=t.getStretchedCell(null,p))&&(s=a.getElement(),(n||s._textColor)&&(s._textColor!==n||o)&&(a.setStyle("color",n),s._textColor=n),(r||s._bgColor)&&(s._bgColor!==r||o)&&(a.setStyle("backgroundColor",r),s._bgColor=r));for(var g=0;g<u;++g)(l=t.getCell(g,p,!1))&&(s=l.getElement())&&((n||s._textColor)&&(s._textColor!==n||o)&&(l.setStyle("color",n),s._textColor=n),(r||s._bgColor)&&(s._bgColor!==r||o)&&(l.setStyle("backgroundColor",r),s._bgColor=r))}},oe.prototype._applyPredefinedColor=function(t,e,i){for(var o,n,r,s,l,a,u,d,h,c=t.getColumnCount(),p=this._getDataView(),_=this._cssField,g=this._altCssField,f=this._cssRangeField,m=e;m<i;++m){o=l="",r=s=a=null;var v=this._getRow(p,m);v&&(o=v[_]||"",l=v[g]||"",a=v[f],Array.isArray(a)&&(r=a[0],s=a[1]?a[0]+a[1]:c)),(d=t.getStretchedCell(null,m))&&(n=d.getElement())._coloringClass!==o&&(n._coloringClass&&(n.classList.remove(n._coloringClass),n._coloringClass=""),o&&(n.classList.add(o),n._coloringClass=o));for(var C=0;C<c;++C)(h=t.getCell(C,m,!1))&&(n=h.getElement())&&(u=o&&a&&(C<r||C>s)?l:o,n._coloringClass!==u&&(n._coloringClass&&(n.classList.remove(n._coloringClass),n._coloringClass=""),u&&(n.classList.add(u),n._coloringClass=u)))}},oe.prototype._updateRowColor=function(t,e){if(this._updateTimer=0,!this._disabled&&this._getDataView()){var i=this._hosts?this._hosts[0]:null,o=i?i.getSection("content"):null;o&&(t||(t=o.getFirstIndexInView()),null==e&&(e=o.getLastIndexInView()+1),this._predefinedColoring?this._applyPredefinedColor(o,t,e):this._applyColor(o,t,e))}},oe.prototype.forceUpdateRowColor=function(){if(!this._disabled&&this._getDataView()){var t=this._hosts?this._hosts[0]:null,e=t?t.getSection("content"):null;if(e){var i=e.getFirstIndexInView(),o=e.getLastIndexInView()+1;this._predefinedColoring?this._applyPredefinedColor(e,i,o):this._applyColor(e,i,o,!0)}}};var ne=function(t){if(t>(0|t)){var e=t+"",i=e.indexOf("."),o=e.slice(i+1)+"00";return+(e.slice(0,i)+o.slice(0,2)+"."+o.slice(2))}return 100*t},re=function(t){this.format=this.format=this.format.bind(this),this.init(t)};re._denominator=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],re._zeroes=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000"],re.prototype._precision=2,re.prototype._sepChar=",",re.prototype._percentChar=" %",re.prototype._precisionEnabled=!1,re.prototype._separatorEnabled=!1,re.prototype._percentSignEnabled=!1,re.prototype._percentFormatEnabled=!1,re.prototype._plusSignEnabled=!1,re.prototype._multiplyBy100Enabled=!1,re.prototype._scaler="",re.prototype.init=function(t){if(t){var e=t.formatType||t.type,i=t.precisionEnabled;this._precisionEnabled=null==i||""===i||!!i,null!=(i=t.decimalPlaces)&&""!==i&&(this._precision="number"==typeof i?i:2),null!=(i=t.plusSign)&&""!==i&&(this._plusSignEnabled=!!i),null!=(i=t.separator)&&""!==i&&(this._separatorEnabled=!!i),this.enableMillionScaling(!1),"scaled"!==e&&"scaledvalue"!==e||(null!=(i=t.scalingUnit)&&""!==i?i&&"string"==typeof i&&("b"==(i=i.charAt(0).toLowerCase())?this.enableBillionScaling():"m"==i&&this.enableMillionScaling()):this.enableMillionScaling()),"percent"===e?(i=t.percentSign,this._percentSignEnabled=null==i||""===i||!!i,(null!=(i=t.multiplyBy100)&&""!==i||null!=(i=t.mutiplyBy100)&&""!==i)&&(this._multiplyBy100Enabled=!!i)):this._percentSignEnabled=this._multiplyBy100Enabled=!1}},re.prototype.resetToDefaults=function(){this._precisionEnabled=!1,this._precision=2,this._plusSignEnabled=!1,this._separatorEnabled=!1,this._percentSignEnabled=!1,this._scaler="",this._multiplyBy100Enabled=!1},re.padDecimalPartWithZeroes=function(t,e){var i=t.lastIndexOf(".");if(i>=0){var o=t.length-i-1;o<e&&(t+=re._zeroes[e-o])}else t+="."+re._zeroes[e];return t},re.multiplyByHundred=function(t){return t<0?-ne(-t):ne(t)},re.prototype.getOptions=function(t){t||(t={});var e=t.formatType;if(!0!==this._precisionEnabled&&(t.precisionEnabled=this._precisionEnabled),2!==this._precision&&(t.decimalPlaces=this._precision),!1!==this._plusSignEnabled&&(t.plusSign=this._plusSignEnabled),!1!==this._separatorEnabled&&(t.separator=this._separatorEnabled),"scaled"===e||"scaledvalue"===e){var i="";"b"==this._scaler&&(i="billion",t.scalingUnit=i)}return"percent"===e&&(!0!==this._percentSignEnabled&&(t.percentSign=this._percentSignEnabled),!1!==this._multiplyBy100Enabled&&(t.multiplyBy100=this._multiplyBy100Enabled)),t},re.prototype.format=function(t){if(!t&&0!==t)return"";if("number"!=typeof t&&(t=Number(t))!=t)return"";var e,i;t>=0?(e=t,i=this._plusSignEnabled?"+":""):(e=-t,i="-");var o=this._percentFormatEnabled?"":this._scaler;this._multiplyBy100Enabled&&(this._precisionEnabled||o?e*=100:e=ne(e));var n,r=e;if(o&&("b"===o&&e<1e9&&(o="m"),"m"===o?e>=1e6?e/=1e6:e>=1e3&&(e/=1e3):"b"===o&&(e/=1e9)),this._precisionEnabled)if(this._precision>0){var s=re._denominator[this._precision];e=Math.round(e*s)/s}else e=Math.round(e);else o&&(e=Math.round(100*e)/100);if(n=e>0?e>=1e-6?i+e:i+"0.000000"+(n=1e7*e/10+"").substr(2):"0",this._separatorEnabled&&e>=1e3){var l=n.split(".");n=l[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),l.length>1&&(n+="."+l[1])}return(this._precisionEnabled||o)&&this._precision>0&&(n=re.padDecimalPartWithZeroes(n,this._precision)),o&&("m"===o?r>=1e6?n+="M":r>=1e3&&(n+="K"):"b"===o&&(n+="B")),(this._percentSignEnabled||this._percentFormatEnabled)&&(n+=this._percentChar),n},re.prototype.enableDefaultFormat=function(){var t=this;t._precisionEnabled=t._separatorEnabled=t._percentSignEnabled=!1,t._percentFormatEnabled=t._plusSignEnabled=t._multiplyBy100Enabled=!1,t._scaler=""},re.prototype.enablePrecision=function(t){this._precisionEnabled=!1!==t},re.prototype.enableSeparator=function(t){this._separatorEnabled=!1!==t},re.prototype.enablePercentSign=function(t){this._percentSignEnabled=!1!==t},re.prototype.enablePercentFormat=function(t){this._percentFormatEnabled=!1!==t},re.prototype.enablePlusSign=function(t){this._plusSignEnabled=!1!==t},re.prototype.enableMultiplyBy100=function(t){this._multiplyBy100Enabled=!1!==t},re.prototype.enableMillionScaling=function(t){this._scaler=!1!==t?"m":""},re.prototype.enableBillionScaling=function(t){this._scaler=!1!==t?"b":""},re.prototype.isDefaultFormatEnabled=function(){return!(this._precisionEnabled||this._separatorEnabled||this._percentSignEnabled||this._scaler||this._percentFormatEnabled)},re.prototype.isPrecisionEnabled=function(){return this._precisionEnabled},re.prototype.isSeparatorEnabled=function(){return this._separatorEnabled},re.prototype.isPercentSignEnabled=function(){return this._percentSignEnabled},re.prototype.isPercentFormatEnabled=function(){return this._percentFormatEnabled},re.prototype.isPlusSignEnabled=function(){return this._plusSignEnabled},re.prototype.isMultiplyBy100Enabled=function(){return this._multiplyBy100Enabled},re.prototype.isMillionScalingEnabled=function(){return"m"===this._scaler},re.prototype.isBillionScalingEnabled=function(){return"b"===this._scaler},re.prototype.getPrecision=function(){return this._precision},re.prototype.setPrecision=function(t){this._precision=t<re._denominator.length?t:re._denominator.length-1},re.prototype.setSeparatorCharacter=function(t){this._sepChar=t},re.prototype.setPercentSignCharacter=function(t){this._percentChar=t};var se=i(251);const le="datetime",ae={DATE:!0,TIME:!0,DATETIME:!0,"DATE-TIME":!0,"TIME-DATE":!0};var ue=function(t){return null!=t&&ae[t.toUpperCase()]?le:""},de=function(t){this.format=this.format=this.format.bind(this),de._startMidnightInterval(),this.init(t)};function he(t){return he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},he(t)}de.prototype._field="",de.prototype._formattedField="",de.prototype._combinedField="",de.prototype._formatType="number",de.prototype._userFormatType="",de.prototype._mixedTypeInput=!1,de.prototype._dateTimeFormat="",de.prototype._idnSource="",de.prototype._timeZone="GMT",de.prototype._df=null,de.prototype._nf=null,de._lastMidnight=null,de._updateMidnight=function(){de._lastMidnight=new Date,de._lastMidnight.setUTCHours(0,0,0,0)},de._startMidnightInterval=function(){if(!de._lastMidnight){de._updateMidnight();var t=de._lastMidnight.valueOf()+86405e3-(new Date).valueOf();setTimeout(de._setMidnightInterval,t)}},de._setMidnightInterval=function(){setInterval(de._updateMidnight,864e5)},de.prototype.init=function(t){if(t){var e=t.field;e&&this.setField(e);var i=t.formatType||t.type,o=t.fieldDataType;this._userFormatType=i||o,(e=(i=ue(this._userFormatType))||this._userFormatType)&&this.setFormatType(e);var n=t.dateTimeFormat,r=t.useUTCTime;null==r&&null==n||this.setDateTimeMeta(n,r,t.idnSource?"idn":""),this._formatType===le&&(this._df||(this._df=se.ou.format))}},de.prototype.getOptions=function(t){return t||(t={}),t.field=this._field,t.formatType=this._userFormatType?this._userFormatType:this._formatType,ue(t.formatType)==le&&(""!==this._dateTimeFormat&&(t.dateTimeFormat=this._dateTimeFormat),"GMT"!==this._timeZone&&(t.useUTCTime=!1)),t},de.prototype.getField=function(){return this._field},de.prototype.clone=function(){var t=new de;return t._field=this._field,t._formattedField=this._formattedField,t._combinedField=this._combinedField,t._formatType=this._formatType,t._mixedTypeInput=this._mixedTypeInput,t._dateTimeFormat=this._dateTimeFormat,t._idnSource=this._idnSource,t._timeZone=this._timeZone,t._df=this._df,t._nf=this._nf,t},de.prototype.setFormatType=function(t){this._formatType=t.toLowerCase(),this._mixedTypeInput="freetext"==this._formatType||"formula"==this._formatType},de.prototype.setField=function(t,e,i){this._field=t,this._formattedField=i||t+"_FORMATTED",this._combinedField=e||""},de.prototype.setDateTimeMeta=function(t,e,i,o){this._dateTimeFormat=t||"",this._timeZone=!1!==e?"GMT":"LOCAL",this._idnSource=i&&"idn"==i.toLowerCase()?"idn":"",se.ou.setLocale(o)},de.prototype.setDateFormatter=function(t){this._df=t},de.prototype.setNumberFormatter=function(t){t?"function"==typeof t?this._nf=t:"function"==typeof t.format&&(this._nf=t.format):this._nf=null},de.prototype.getProperties=function(){var t={field:this._field,formattedField:this._formattedField,combinedField:this._combinedField,type:this._formatType};return this._formatType===le&&(t.dateTimeFormat=this._dateTimeFormat,t.timeZone=this._timeZone,t.idnSource=this._idnSource),t},de.prototype.format=function(t){return!t||"object"!=typeof t||t instanceof Date?this._format(t,null):this.formatRowData(t)},de.prototype.formatRowData=function(t){return t?this._format(t[this._field],t):""},de.prototype.formatValue=function(t){return this._format(t,null)},de.prototype._format=function(t,e){if(!t&&0!==t)return"";if(this._formatType==le)return this._formatDateTime(t,e);if(this._mixedTypeInput&&"number"!=typeof t)return"string"!=typeof t?t+"":t;if(this._nf){if("number"!=typeof t){var i=+t;return i==i?this._nf(i):t+""}return this._nf(t)}return this._mixedTypeInput?"formula"==this._formatType?Math.round(1e6*t)/1e6+"":t+"":this._formatNumber(t,e)},de.prototype._formatDateTime=function(t,e){if(!this._df)return"";if(this._idnSource){var i=+t;if(i!=i)return t;var o=e&&this._combinedField?+e[this._combinedField]:NaN;o==o?i=o:i<86400?i+=de._lastMidnight.valueOf()/1e3:"NEWS_TIME"!==this._field&&"LOCAL"===this._timeZone&&(i+=60*new Date(1e3*i).getTimezoneOffset()),t=new Date(1e3*i)}return this._df(t,this._dateTimeFormat||"MM/DD/YYYY",this._timeZone)},de.prototype._formatNumber=function(t,e){var i;if(e){if(!(i=e[this._formattedField])){if(null===i&&0===t)return"";i=t}}else i=t;if("number"==this._formatType){if("string"==typeof i&&i.indexOf(",")>=0)return i.replace(/,/g,"")}else if("percent"==this._formatType)if("string"==typeof i){if(i.lastIndexOf("%")<0&&0!=+i)return i+" %"}else if("number"==typeof i)return i==i?i+" %":"#INVALID";return i||(0===i?"0":"")};var ce=function(){this._onSectionBinding=this._onSectionBinding.bind(this),this._onColumnAdded=this._onColumnAdded.bind(this),this._hosts=[]};o.p.inherits(ce,a),ce.prototype._noFormatting=!0,ce.prototype._disabled=!1,ce.prototype._idnSource="",ce.prototype.getName=function(){return"TextFormattingPlugin"},ce.prototype.hasMultiTableSupport=function(){return!0},ce.prototype.initialize=function(t,e){this._hosts.indexOf(t)>=0||(this._hosts.push(t),t.listen("postSectionDataBinding",this._onSectionBinding),1===this._hosts.length&&(t.listen("columnAdded",this._onColumnAdded),this.config(e)))},ce.prototype._afterInit=function(){var t=this._realTimeGrid;t&&t.setDateTimeUtil&&t.setDateTimeUtil(se.ou)},ce.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("postSectionDataBinding",this._onSectionBinding),t.unlisten("columnAdded",this._onColumnAdded),this._hosts.splice(e,1))},ce.prototype.config=function(t){if(t){this._idnSource=t.idnSource?"idn":"";var e=t.autoTextFormatting;null!=e&&(this._disabled=!e);var i=t.columns;if(i){for(var o=0,n=i.length,r=0;r<n;++r)o|=this._setColumnFormat(r,i[r]);var s=t.lang;if(s&&se.ou.setLocale(s),o)for(n=this._hosts.length,r=0;r<n;++r)this._hosts[r].requestRowRefresh()}}},ce.prototype.getConfigObject=function(t){var e=t||{};this._idnSource&&(e.idnSource=!0),this._disabled&&(e.autoTextFormatting=!1);var i=e.columns;i||(i=e.columns=[]);for(var o=this.getColumnCount(),n=0;n<o;++n){var r=i[n];r||(r=i[n]={}),this.getColumnFormatOptions(n,r)}return e},ce.prototype.setColumnFormat=function(t,e){if(this._setColumnFormat(t,e))for(var i=this._hosts.length,o=0;o<i;++o)this._hosts[o].requestRowRefresh()},ce.prototype._setColumnFormat=function(t,e){var i,o=this._newColumnData(t),n=e,r=null;if(n){i=n.field;var s=n.autoTextFormatting;null!=s&&(o.autoTextFormatting=!!s);var l=n.formatLogic;"function"==typeof l&&(o.formatLogic=l),(r=n.formatType||n.type)&&"object"===he(r)?(r.field&&(i=r.field),null!=(s=r.autoTextFormatting)&&(o.autoTextFormatting=!!s),"function"==typeof(l=r.formatLogic)&&(o.formatLogic=l)):r=n}var a=o.formatOptions;if(o.formatOptions=null,o.textFormatter=null,o.numberFormatter=null,!r)return!!a;var u=r.formatType||r.type;if(!u||"string"!=typeof u)return!!a;if("general"===(u=u.toLowerCase()))return!!a;i||(i=this._getField(t))||a&&(i=a.field),this._noFormatting=!1,r.field=i,r.formatType=u,r.formattedField||(r.formattedField=i+"_FORMATTED"),null==r.idnSource&&(r.idnSource=this._idnSource);var d=new de(r),h=null;if("number"==u||"scaled"==u||"percent"==u){var c=r.decimalPlaces,p=r.precisionEnabled;"number"==typeof c?(o.precision=c,null==p&&(p=!0)):1==c?(o.precision=null,c=2,p=!0):!1===c?(o.precision=null,c=0,p=!1):(o.precision=null,c=2,null==p&&(p=!0)),r.decimalPlaces=c,r.precisionEnabled=p,h=new re(r),d.setNumberFormatter(h.format)}return o.formatOptions=r,o.textFormatter=d,o.numberFormatter=h,!0},ce.prototype.getColumnFormatOptions=function(t,e){e||(e={});var i=this._getColumnData(t);if(i){var o=i.formatOptions,n=i.textFormatter,r=i.numberFormatter;if(null!=i.autoTextFormatting&&(e.autoTextFormatting=i.autoTextFormatting),o&&(e.formatType=o.formatType||o.type),n&&n.getOptions(e),r){r.getOptions(e);var s=i.precision;null!=s?e.decimalPlaces=s:delete e.decimalPlaces}}return e},ce.prototype._onColumnAdded=function(t){t.context&&this._setColumnFormat(t.colIndex,t.context)},ce._hasAutoFormatting=function(t){return!!t&&!1!==t.autoTextFormatting&&!t.percentBar&&!t.rangeBar},ce.prototype._onSectionBinding=function(t){if(!this._noFormatting&&!this._disabled)for(var e=t.section,i=t.dataRows,o=e.getColumnCount(),n=t.fromRowIndex,r=t.toRowIndex,s={},l=0;l<o;++l){var a=this._getColumnData(l);if(ce._hasAutoFormatting(a)&&a.formatOptions){var u=a.textFormatter,d=a.formatLogic;s.colIndex=l,s.field=u.getField(),s.format=u.format;for(var h=n;h<r;++h){var c=e.getCell(l,h,!1);if(c){var p=this._getRowData(i[h]);s.formattedText=ce._getFormattedText(u,p,c),d?(s.rowIndex=h,s.cell=c,s.rowData=p,d(s)):c.setTextContent(s.formattedText)}}}}},ce._getFormattedText=function(t,e,i){if(e)return t.formatRowData(e);var o=i.getContent();return o?t.formatValue(o.textContent):""},ce.prototype.getFormatter=function(t){return this._getColumnOption(t,"textFormatter")||null},ce.prototype.formatText=function(t,e){if(null!=e){var i=this.getFormatter(t);return i?i.formatValue(e):e+""}return""},ce.prototype.openDialog=function(t){if(this._formatDialog||(this._formatDialog=document.createElement("tr-grid-format-dialog"),this._formatDialog.addEventListener("data-change",this._onFormatDialogDataChange.bind(this))),"tr-grid-format-dialog"===this._formatDialog.is){var e=this.getColumnFormatOptions(t);this._formatDialog.data={valueFormatTab:e},this._formatDialog.colIndex=t,this._formatDialog.show()}},ce.prototype._onFormatDialogDataChange=function(t){var e=this._formatDialog.colIndex,i=t.detail.data.valueFormatTab;this.setColumnFormat(e,i),i.colIndex=e,this._dispatch("formatChanged",i)};var pe=function(){var t=this;t._onSectionAdded=t._onSectionAdded.bind(t),t._requestRecalculation=t._requestRecalculation.bind(t),t._onRecalculation=t._onRecalculation.bind(t),t._onPostSectionRender=t._onPostSectionRender.bind(t),t._hosts=[]};o.p.inherits(pe,a),pe.prototype._adjusting=!1,pe.prototype._paddingTop=6,pe.prototype._paddingBottom=6,pe.prototype._timerId=0,pe.prototype.getName=function(){return"TitleWrapPlugin"},pe.prototype.hasMultiTableSupport=function(){return!0},pe.prototype.initialize=function(t,e){if(!(this._hosts.indexOf(t)>=0)){this._hosts.push(t),window.addEventListener("load",this._requestRecalculation),t.listen("sectionAdded",this._onSectionAdded),t.listen("widthChanged",this._requestRecalculation),t.listen("postSectionRender",this._onPostSectionRender),this.config(e);var i=t.getSection("title");i&&(i.enableClass("wrap",!0),this._adjustRowHeightRefByHost(t,i))}},pe.prototype.unload=function(t){var e=this._hosts.indexOf(t);e<0||(t.unlisten("sectionAdded",this._onSectionAdded),t.unlisten("widthChanged",this._requestRecalculation),t.unlisten("postSectionRender",this._onPostSectionRender),this._hosts.splice(e,1),this._hosts.length||(this._timerId&&(clearTimeout(this._timerId),this._timerId=0),window.removeEventListener("load",this._onCSSLoaded)))},pe.prototype.config=function(t){if(t){var e=t.titlewrap||t.titleWrap;if(e){var i=e.padding;"number"==typeof i&&(this._paddingTop=this._paddingBottom=i/2)}}},pe.prototype.getConfigObject=function(t){var e=t||{},i=e.titleWrap;i||(i=e.titleWrap={});var o=this._paddingTop+this._paddingBottom;return 12!==o&&(i.padding=o),e},pe.prototype._requestRecalculation=function(){this._timerId||(this._timerId=setTimeout(this._onRecalculation,50))},pe.prototype._onRecalculation=function(){this._timerId=0,this.adjustRowHeight("title")},pe.prototype._adjustRowHeightRefByHost=function(t,e,i,o){if(this._adjusting||!t)return!1;var n=t.getSection(e),r=n?n.getElement():null;if(!r||!r.offsetParent)return!1;var s=[];return this._calculateRowHeight(n,i,o,s),this._setRowHeight(n.getIndex(),s)},pe.prototype.adjustRowHeight=function(t,e,i){return this._adjustRowHeightRefByHost(this._hosts[0],t,e,i)},pe.prototype.adjustRowHeightAt=function(t,e){return this._adjustRowHeightRefByHost(this._hosts[0],t,e,e)},pe.prototype.calculateRowHeightAt=function(t,e){var i=this._hosts[0];if(!i)return NaN;var o=i.getSection(t);return o?this._calculateRowHeightAt(o,e):NaN},pe.prototype._setRowHeight=function(t,e){if(this._adjusting)return!1;this._adjusting=!0;var i,o=e.length,n=0;for(i=0;i<o&&!(++n>1);i++);var r=this._hosts.length;for(i=0;i<r;i++){var s=this._hosts[i].getSection(t),l=s.getFrozenLayout();n>1&&s.setFrozenLayout(!0);for(var a=0;a<o;a++)s.setRowHeight(a,e[a]);n>1&&s.setFrozenLayout(l)}return this._adjusting=!1,n>0},pe.prototype._onSectionAdded=function(t){"title"===t.sectionType&&t.section.enableClass("wrap",!0)},pe.prototype._onPostSectionRender=function(t){"title"===t.sectionType&&this._requestRecalculation()},pe.prototype._getSteppingHeight=function(t){return Math.floor(t+1)+this._paddingTop+this._paddingBottom},pe.prototype._calculateRowHeightAt=function(t,e,i){for(var o=t.getDefaultRowHeight(),n=0,r=0,s=t.getColumnCount(),l=i?i.length-1:NaN,a=0;a<s;++a){var u=t.getCellRowSpan(a,e);if(!(u>1||t.getCellColSpan(a,e)<1&&u>=0||1!==u&&e!==l)){var d=1!==u,h=t.getCell(a,e,d);if(h&&h.isVisible()){var c=h.getContent();if(c){var p=this._getSteppingHeight(c.offsetHeight);1===u?p>o&&(o=p):p>n&&(n=p,r=-u)}}}}if(i&&n){for(var _=0,g=l-r;g<l;g++){_+=i[g]||0}n>_+o&&(o=n-_)}return o},pe.prototype._calculateRowHeight=function(t,e,i,o){(!e||e<0)&&(e=0);var n=t.getRowCount();(!i||i>n)&&(i=n);for(var r=new Array(i),s=e;s<i;++s){var l=r[s]=this._calculateRowHeightAt(t,s,r);o&&l!==t.getRowHeight(s)&&(o[s]=l)}return r};var _e={api:!0,wrapper:!0,grid:!0,field:!0,rowIndex:!0,value:!0,setData:!0,getData:!0,disableElement:!0,isElementDisabled:!0,setError:!0,getError:!0,styles:!0,attributes:!0,tagName:!0,refName:!0,events:!0,userEvents:!0,defaultEvents:!0,onContextCreated:!0,onElementCreated:!0,onElementUpdated:!0,onElementRendered:!0,changeHook:!0,changeHooks:!0,changeHandler:!0,changeHandlers:!0};function ge(t,e){for(var i in e)_e[i]||(t[i]=e[i])}function fe(t,e){var i=e.attributes;if(!i)return!1;var o=!1,n=t.attributes;for(var r in n||(n={}),i)o=!0,n[r]=i[r];return!!o&&(t.attributes||(t.attributes=n),!0)}function me(t,e){var i=e.styles;if(!i)return!1;var o=!1,n=t.styles;for(var r in n||(n={}),i){o=!0;var s=i[r];"width"!==r&&"height"!==r||"number"==typeof s&&(s+="px"),n[r]=s}return!!o&&(t.styles||(t.styles=n),!0)}function ve(t,e,i){t.grid.isBinding()||(t.grid.getRelativePosition(i,t),e(i,t))}function Ce(t,e,i){var o=e.events;if(!o)return!1;var n=!1,r=t[i];for(var s in r||(r={}),o){var l=o[s];"function"==typeof l&&(n=!0,r[s]=ve.bind(null,t,l))}return!!n&&(t[i]||(t[i]=r),!0)}function ye(t,e,i){t.grid=i,t.field||(t.field=e.field,null==t.disablingField&&(t.disablingField=t.field?t.field+"_DISABLED":null),null==t.errorField&&(t.errorField=t.field?t.field+"_ERROR":null)),t.disableElement=Te,t.isElementDisabled=Ie,t.setError=Re,t.getError=De}function be(t,e){var i=this.api.getRowDefinition(this.rowIndex);i&&i.setStaticData(t,e)}function Se(t){var e=this.api.getRowDefinition(this.rowIndex);return e?e.getData(t):null}function we(t,e){this.api.getDataView().setDataAt(this.rowIndex,t,e)}function xe(t){return this.api.getDataView().getDataAt(this.rowIndex,t)}function Te(t){this.disablingField&&this.setData(this.disablingField,!1!==t)}function Ie(){return this.getData(this.disablingField)}function Re(t){this.errorField&&this.setData(this.errorField,t)}function De(){return this.getData(this.errorField)}function Ee(t,e){t.api=e.grid,t.wrapper||(t.wrapper="real-time-grid",t.setData=be,t.getData=Se);var i=t.rowData=e.rowData;t.field?t.value=i?i[t.field]:null:t.value=e.data,t.rowIndex=e.rowIndex,t.colIndex=e.colIndex,t.cell=e.cell,ke(t)}function Ae(t,e,i,o,n,r,s,l,a,u){t.api=u,t.wrapper||(t.wrapper="composite-grid",t.setData=we,t.getData=xe);var d=t.rowData=s;t.field?t.value=d?d[t.field]:null:t.value=o,t.rowIndex=e,t.colIndex=i,t.cell=n,ke(t)}function ke(t){var e=t.cell.getContent();if(!e||e._formatterName!==t.refName){(e=document.createElement(t.tagName))._formatterName=t.refName,t.onElementCreated&&t.onElementCreated(e,t);var i=t.attributes;if(i)for(var o in i)e.setAttribute(o,i[o]||"");var n,r,s=t.styles;if(s)for(var l in s)e.style[l]=s[l];if(n=t.defaultEvents)for(r in n)e.addEventListener(r,n[r]);if(n=t.userEvents)for(r in n)e.addEventListener(r,n[r])}var a=t.rowData;t.disablingField&&(a&&a[t.disablingField]?e.setAttribute("disabled",""):e.removeAttribute("disabled")),t.errorField&&(a&&a[t.errorField]?e.setAttribute("error",""):e.removeAttribute("error")),t.onElementUpdated&&t.onElementUpdated(e,t),t.onElementRendered&&t.onElementRendered(e,t),t.cell.setContent(e)}function Pe(){}var Me=function(t){};Me.create=function(t,e){if(t=t||{},(e=e||{}).changeHook){var i=t.changeHandler||e.changeHandler;e.events||(e.events={}),e.events[e.changeHook]=i}else if(e.changeHooks){var o=t.changeHandlers||e.changeHandlers;e.events||(e.events={});for(var n=0;n<o.length;n++)e.events[e.changeHooks[n]]=o[n]}var r={};return function(t,e,i){ge(t,i),ge(t,e),fe(t,i),fe(t,e),me(t,i),me(t,e),Ce(t,i,"defaultEvents"),Ce(t,e,"userEvents"),t.field=e.field||"",t.refName=i.refName||"_defaultFormatter",t.tagName=i.tagName||"div",i.onElementCreated&&(t.onElementCreated=i.onElementCreated),i.onElementUpdated&&(t.onElementUpdated=i.onElementUpdated),"function"==typeof e.onElementRendered&&(t.onElementRendered=e.onElementRendered)}(r,t,e),e.onContextCreated&&e.onContextCreated(r,t),{render:Pe,init:ye.bind(null,r),bind:Ae.bind(null,r),binding:Ee.bind(null,r)}}},251:(t,e,i)=>{i.d(e,{ou:()=>_});const o={en:{sun:"Sun",mon:"Mon",tue:"Tue",wed:"Wed",thu:"Thu",fri:"Fri",sat:"Sat",Sunday:"Sunday",Monday:"Monday",Tuesday:"Tuesday",Wednesday:"Wednesday",Thursday:"Thursday",Friday:"Friday",Saturday:"Saturday",jan:"Jan",feb:"Feb",mar:"Mar",apr:"Apr",may:"May",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Oct",nov:"Nov",dec:"Dec",January:"January",February:"February",March:"March",April:"April",May:"May",June:"June",July:"July",August:"August",September:"September",October:"October",November:"November",December:"December",am:"am",AM:"AM",pm:"pm",PM:"PM"},de:{sun:"So",mon:"Mo",tue:"Di",wed:"Mi",thu:"Do",fri:"Fr",sat:"Sa",Sunday:"Sonntag",Monday:"Montag",Tuesday:"Dienstag",Wednesday:"Mittwoch",Thursday:"Donnerstag",Friday:"Freitag",Saturday:"Samstag",jan:"Jan",feb:"Feb",mar:"Mrz",apr:"Apr",may:"Mai",jun:"Jun",jul:"Jul",aug:"Aug",sep:"Sep",oct:"Okt",nov:"Nov",dec:"Dez",January:"Januar",February:"Februar",March:"März",April:"April",May:"Mai",June:"Juni",July:"Juli",August:"August",September:"September",October:"Oktober",November:"November",December:"Dezember",am:"am",AM:"AM",pm:"pm",PM:"PM"},ja:{sun:"日",mon:"月",tue:"火",wed:"水",thu:"木",fri:"金",sat:"土",Sunday:"日曜日",Monday:"月曜日",Tuesday:"火曜日",Wednesday:"水曜日",Thursday:"木曜日",Friday:"金曜日",Saturday:"土曜日",jan:"1月",feb:"2月",mar:"3月",apr:"4月",may:"5月",jun:"6月",jul:"7月",aug:"8月",sep:"9月",oct:"10月",nov:"11月",dec:"12月",January:"1月",February:"2月",March:"3月",April:"4月",May:"5月",June:"6月",July:"7月",August:"8月",September:"9月",October:"10月",November:"11月",December:"12月",am:"午前",AM:"午前",pm:"午後",PM:"午後"},zh:{sun:"周日",mon:"周一",tue:"周二",wed:"周三",thu:"周四",fri:"周五",sat:"周六",Sunday:"星期日",Monday:"星期一",Tuesday:"星期二",Wednesday:"星期三",Thursday:"星期四",Friday:"星期五",Saturday:"星期六",jan:"1月",feb:"2月",mar:"3月",apr:"4月",may:"5月",jun:"6月",jul:"7月",aug:"8月",sep:"9月",oct:"10月",nov:"11月",dec:"12月",January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月",am:"上午",AM:"上午",pm:"下午",PM:"下午"},"zh-Hant":{sun:"週日",mon:"週一",tue:"週二",wed:"週三",thu:"週四",fri:"週五",sat:"週六",Sunday:"星期日",Monday:"星期一",Tuesday:"星期二",Wednesday:"星期三",Thursday:"星期四",Friday:"星期五",Saturday:"星期六",jan:"1月",feb:"2月",mar:"3月",apr:"4月",may:"5月",jun:"6月",jul:"7月",aug:"8月",sep:"9月",oct:"10月",nov:"11月",dec:"12月",January:"一月",February:"二月",March:"三月",April:"四月",May:"五月",June:"六月",July:"七月",August:"八月",September:"九月",October:"十月",November:"十一月",December:"十二月",am:"上午",AM:"上午",pm:"下午",PM:"下午"}};var n=i(984),r=(new Date(NaN),Date.UTC(1900,0,1)),s=Date.UTC(1900,2,1),l=864e5,a=["sun","mon","tue","wed","thu","fri","sat"],u=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],d=["jan","feb","mar","apr","may","jun","jul","aug","sep","oct","nov","dec"],h=["January","February","March","April","May","June","July","August","September","October","November","December"],c=function(t){return t>9?""+t:"0"+t},p={D:function(t,e){return""+t.getDate()},DD:function(t,e){return c(t.getDate())},DDD:function(t,e){return e[a[t.getDay()]]},D_:function(t,e){return e[u[t.getDay()]]},M:function(t,e){return""+(t.getMonth()+1)},MM:function(t,e){return c(t.getMonth()+1)},MMM:function(t,e){return e[d[t.getMonth()]]},M_:function(t,e){return e[h[t.getMonth()]]},YY:function(t,e){return(""+t.getFullYear()).substr(-2)},Y_:function(t,e){return""+t.getFullYear()},H:function(t,e){return""+t.getHours()},H_:function(t,e){return c(t.getHours())},h:function(t,e){var i=t.getHours()%12;return 0===i?"12":""+i},h_:function(t,e){var i=t.getHours()%12;return c(i=0===i?12:i)},m:function(t,e){return""+t.getMinutes()},m_:function(t,e){return c(t.getMinutes())},s:function(t,e){return""+t.getSeconds()},s_:function(t,e){return c(t.getSeconds())},S:function(t,e){return~~(t.getMilliseconds()/100)},SS:function(t,e){return c(~~(t.getMilliseconds()/10))},S_:function(t,e){return(i=t.getMilliseconds())>99?""+i:i>9?"0"+i:"00"+i;var i},A:function(t,e){return t.getHours()<12?e.AM:e.PM},a:function(t,e){return t.getHours()<12?e.am:e.pm}},_={_dateTimePattern:"M/D/YY h:mm A",_localeSetting:"en",_activeLocaleMap:null,_activeInput:null,setDateTimePattern:function(t){_._dateTimePattern=t||"M/D/YY h:mm A"},setLocale:function(t){var e=n.Z.toLangString(t);_._localeSetting=o[e]?e:"en"},format:function(t,e,i){var o=null,n="",r=!(!i||"LOCAL"!==i.toUpperCase());if("number"==typeof t)t>1e8?o=new Date(t):(o=_.fromDateNumber(t),r=!0);else if(t instanceof Date)o=new Date(t);else{var s=(n=t+"").match(/^\d{4}(-\d{2}(-\d{2}(T\d{2}\:\d{2}\:\d{2})?)?)?$/);n=n.replace(/\-/g,"/"),s&&(n=n.replace(/T/g," ")),o=new Date(n)}return _.isInvalidDate(o)?t||"":(r||o.setTime(o.getTime()+6e4*o.getTimezoneOffset()),_.formatDateObject(o,e))},formatDateObject:function(t,e){if(_.isInvalidDate(t))return"";e||(e=_._dateTimePattern),_._activeInput=t,_._activeLocaleMap=o[_._localeSetting]||DateTimeLocale.en;var i=e.replace(/D+|M+|Y+|H+|S+|A+|d+|m+|y+|h+|s+|a+|\[[^\]]*\]+/g,_._parseDatePattern);return _._activeInput=null,i},_lowerCaseDatePatterns:{d:!0,y:!0},_parseDatePattern:function(t){var e=t?t.charAt(0):"";if("["===e)return t.substring(1,t.length-1);var i=p[t];if(!i){var o=t;_._lowerCaseDatePatterns[e]&&(o=t.toUpperCase(),e=e.toUpperCase(),i=p[o]),i||(i=p[o=e+"_"])}return i?i(_._activeInput,_._activeLocaleMap):t},isValidDate:function(t){if(t&&t.getTime){var e=t.getTime();return e==e}return!1},isInvalidDate:function(t){if(t&&t.getTime){var e=t.getTime();return e!=e}return!0},fromDateNumber:function(t){var e=_.dateNumberToMs(t);if(e==e){var i=_.timeNumberToMs(t);return new Date(e+i)}return new Date(NaN)},dateNumberToMs:function(t){if(!(t=Math.floor(+t))||t<=0||60===t)return NaN;var e=t-25569;return t<60&&e++,e*l},timeNumberToMs:function(t){"number"!=typeof t&&(t=+t);var e=t-Math.floor(t);return e?(e<0&&(e=-e),1e3*Math.round(86400*e)):0},toDateObject:function(t){var e=null;if(t instanceof Date)e=t;else if("number"==typeof t)e=t>3e9||t<=0?new Date(t):t>1e5?new Date(1e3*t):_.fromDateNumber(t);else if(t){var i=t+"",o=i.match(/^\d{4}(-\d{2}(-\d{2}(T\d{2}\:\d{2}\:\d{2})?)?)?$/);i=i.replace(/\-/g,"/"),o&&(i=i.replace(/T/g," ")),e=new Date(i)}else e=new Date(NaN);return e},toDateNumber:function(t){return _._millisecondToDateNumber(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()))},toTimeNumber:function(t){return Date.UTC(1970,0,1,t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds())/l},_millisecondToDateNumber:function(t){if((t=+t)!=t||t<r)return NaN;var e=t/l+25569;return t<s&&e--,e},toYYYYMMDD:function(t){var e=t?t.toJSON():"";return e?e.substr(0,10):""}}},515:(t,e,i)=>{i.d(e,{B:()=>o});var o=function(t,e,i){this.resolve=this.resolve.bind(this),this.reject=this.reject.bind(this),"function"==typeof t&&(this._resolveHandler=t),"function"==typeof e&&(this._rejectHandler=e),null!=i&&(this._ctx=i),this.promise=new Promise(function(t,e){this._resolve=t,this._reject=e}.bind(this))};o.prototype.promise=null,o.prototype._resolve=null,o.prototype._reject=null,o.prototype._resolveHandler=null,o.prototype._rejectHandler=null,o.prototype._ctx=null,o.prototype._fulfilled=!1,o.prototype.resolve=function(t){if(this._resolve){if(this._resolveHandler){var e=this._resolveHandler(t,this._ctx||this);null!=e&&(t=e)}this._resolve(t),this._finally()}},o.prototype.reject=function(t){if(this._reject){if(this._rejectHandler){var e=this._rejectHandler(t,this._ctx||this);null!=e&&(t=e)}this._reject(t),this._finally()}},o.prototype.isFulfilled=function(){return this._fulfilled},o.prototype._finally=function(){this._fulfilled=!0,this._ctx=this._resolveHandler=this._rejectHandler=null,this._resolve=this._reject=null}},940:(t,e,i)=>{i.d(e,{Z:()=>n,i:()=>o});var o={create:function(t,e){var i=document.createElement(t);return e&&(i.className=e),i},div:function(t){return o.create("div",t)},text:function(t,e){var i=o.create("span",e);return(t||0===t)&&(i.textContent=t),i},appendChild:function(t,e){if(!t)return null;var i,o;Array.isArray(arguments[1])?(o=arguments[1],i=0):(o=arguments,i=1);for(var n=o.length;i<n;)t.appendChild(o[i]),++i;return t},buildTree:function(t,e){if(!t)return null;for(var i=arguments,n=i.length,r=1;r<n;++r){var s,l=i[r];l&&(Array.isArray(l)?s=o.buildTree.apply(null,l):1===l.nodeType&&(s=l),s&&t.appendChild(s))}return t},removeParent:function(t){if(!t)return null;var e=t.parentNode;return e&&e.removeChild(t),e},setParent:function(t,e){return t?e?(e.appendChild(t),e):o.removeParent(t):null},removeChildren:function(t,e){if(t){var i=t.childNodes.length;for((null==e||e>i)&&(e=i);--e>=0;)t.removeChild(t.lastChild)}},setContent:function(t,e){if(t)if(e||0===e){var i=e.nodeType;1===i||3===i?e!==t.lastChild&&(o.removeChildren(t),t.appendChild(e)):Array.isArray(e)?(o.removeChildren(t),o.appendChild(t,e)):t.textContent=e}else o.removeChildren(t)},toggleAttribute:function(t,e,i){i?t.setAttribute(e,"string"==typeof i?i:""):null==i?t.hasAttribute(e)?t.removeAttribute(e):t.setAttribute(e,""):t.removeAttribute(e)},toggleClass:function(t,e,i){i?t.classList.add(e):null==i?t.classList.contains(e)?t.classList.remove(e):t.classList.add(e):t.classList.remove(e)},addClasses:function(t,e){if(t)for(var i=Array.isArray(e)?e:arguments,o=i.length,n=0;n<o;++n){var r=i[n];r&&"string"==typeof r&&t.classList.add(r)}},removeClasses:function(t,e){if(t)for(var i=Array.isArray(e)?e:arguments,o=i.length,n=0;n<o;++n){var r=i[n];r&&"string"==typeof r&&t.classList.remove(r)}},preventDefault:function(t){t.preventDefault(),t.stopPropagation()},stopPropagation:function(t){t.stopPropagation()},getClientPosition:function(t,e){var i=e||{x:0,y:0};if(t.getBoundingClientRect){var o=t.getBoundingClientRect();i.x=o.left,i.y=o.top}else i.x=t.clientX,i.y=t.clientY;return i},getRelativePosition:function(t,e,i){i=o.getClientPosition(t,i);var n=o.getClientPosition(e);return i.x-=n.x,i.y-=n.y,i},closestElement:function(t,e){for(var i=t;i;){if(i.classList&&i.classList.contains(e))return i;i=i.parentNode||i.host}return null},closestTagName:function(t,e){for(var i=t;i;){if(i.tagName&&i.tagName==e)return i;i=i.parentNode||i.host}return null}};const n=o},464:(t,e,i)=>{i.d(e,{N:()=>r});var o=i(221),n=i(243),r=function(){};o.p.inherits(r,n.pB),r.prototype._elem=null,r.prototype.getElement=function(){return this._elem},r.prototype.setParent=function(t){t?(t.getElement&&(t=t.getElement()),t.appendChild(this._elem)):(t=this._elem.parentNode)&&t.removeChild(this._elem)},r.prototype.getBoundingClientRect=function(){return this._elem.getBoundingClientRect()},r.prototype.getMousePosition=function(t,e){e||(e={});var i=this.getBoundingClientRect();return e.x=t.clientX-i.left,e.y=t.clientY-i.top,e},r.prototype.addEventListener=function(t,e){r.base(this,"addEventListener",t,e),void 0!==this._elem["on"+t]&&this._elem.addEventListener(t,e,!1)},r.prototype.removeEventListener=function(t,e){r.base(this,"removeEventListener",t,e),void 0!==this._elem["on"+t]&&this._elem.removeEventListener(t,e,!1)}},984:(t,e,i)=>{i.d(e,{u:()=>u,Z:()=>h});var o=i(895),n=i(515),r={},s=function(t,e){"attributes"==e.type&&"lang"==e.attributeName&&(t.lang=e.target.lang||"en")},l=function(t,e,i){"attributes"===i.type&&(null!=e?i.attributeName===e&&t(i.target.getAttribute(e)):t(i.target))};r._getNewId=function(){return"observer_"+ ++r._id},r._addObserver=function(t,e,i){var o=i;o||(o={}),o.attributes=!0,r._observer.observe(t,o),r._addListener(t,e)},r._onMutationCallback=function(t){for(var e=0;e<t.length;e++)for(var i=t[e],o=r._listeners[i.target._observeId],n=0;n<o.length;n++)o[n](i)},r._addListener=function(t,e){var i=r._listeners;if(i||(i=r._listeners={}),!t._observeId){var o=r._getNewId();t._observeId=o}i[t._observeId]||(i[t._observeId]=[]);var n=i[t._observeId];n.indexOf(e)<0&&n.push(e)},r.addLanguageListener=function(t){t&&(t.lang=document.documentElement.lang||"en",r._addObserver(document.documentElement,s.bind(null,t)))},r.addAttributeListener=function(t,e,i){t&&e&&r._addObserver(t,l.bind(null,e,i))},r._observer=new MutationObserver(r._onMutationCallback),r._listeners={},r._id=0;var a={en:!0,de:!0,ja:!0,zh:!0,"zh-Hant":!0},u={_deferred:null,themeReady:null,_defaultColors:{up:"#39C46E",down:"#F5475B",level:"#C2C2C2",tickUp:"#39C46E",tickDown:"#F5475B",baseGrid:"#1A1A1C",baseText:"#C2C2C2",trackColor:"#FF9933"}};u.themeColors=u._defaultColors,u._components={},u._themeName="",u._elfVersion=0,u._dummyIcon=null,u._iconLoaded=!1,u._profileName=null,u._callbacks=[],u._observed=!1,u._pendingResolve=!1,u._themeLoaded=!1,u._icons={"elf-theme-halo":{rowGrouping:{expander:"down"},sorting:{ascending:"hollow-arrow-up",descending:"hollow-arrow-down",sortable:"sort-up-down"},columnStack:{stack:"map-layers",expand:"right",collapse:"left"}},"elf-theme-solar":{columnStack:{stack:"list",expand:"right",collapse:"left"}}},u._icons["halo-theme"]=u._icons["elf-theme-halo"],u._icons["solar-theme"]=u._icons["elf-theme-solar"],u.getElfVersion=function(){if(!u._elfVersion){var t=0;if(window.EFX_GRID){var e=window.EFX_GRID.version;t=+(e=e.split("."))[0]}else if(window.elf)if(window.elf.version){var i=window.elf.version.match(/\d/);i&&i[0]&&(t=parseInt(i[0],10))}else window.elf.customElements?t=3:window.customElements&&(t=4);else window.Polymer&&(t=1);u._elfVersion=t}return u._elfVersion},u.hasComponent=function(t){var e=u._components[t];if(null==e){e=0;var i=u.getElfVersion();t&&(1===i?document.createElement(t).is===t&&(e=i):i>1&&(window.customElements&&window.customElements.get(t)||document.createElement(t).constructor!==HTMLElement)&&(e=i),u._components[t]=e)}return e},u.toLangString=function(t){if(!t)return"";if("zh-hant"===(t=t.toLowerCase()))return"zh-Hant";var e=t.replace(/-.*/,"");return a[e]?e:""},u.hasTheme=function(t){return t===u.getThemeName()},u.getThemeName=function(t){return u._themeName||(u._themeName=u.getCssVariable("--theme-name",document.documentElement)),u._themeName},u.setThemeName=function(t){u._themeName=t},u.isThemeLoaded=function(){return u._themeLoaded},u.getColors=function(){return u.themeColors},u.isHaloTheme=function(t){return null==t&&(t=u.getThemeName()),!!t&&t.indexOf("halo")>=0},u.injectIcons=function(t,e){if("object"==typeof t){var i=u.getThemeName();t.themeName=i;var o=u.getElfVersion();t.elfVersion=o;var n=u._icons[i];n&&(t.icons=n)}},u.getIconList=function(){var t=u._icons[u.getThemeName()];return t?(0,o.YD)(t):[]},u._onIconPreloaded=function(){if(u._dummyIcon){var t=u._dummyIcon.parentNode;t&&t.removeChild(u._dummyIcon),u._dummyIcon=null}},u.prepareIconPreloading=function(){if(!u._iconLoaded){u._iconLoaded=!0;var t=u.getIconList();if(t.length){setTimeout(u._onIconPreloaded,10);var e=u._dummyIcon=document.createElement("ef-icon");return e.style.transform="scale(0)",document.body.appendChild(e),t}}return null},u.getCssVariable=function(t,e){var i="",o=e||document.body;return window&&"string"==typeof t&&1===o.nodeType&&t.match(/^--/)&&(i=(i=window.getComputedStyle(o).getPropertyValue(t)).replace(/[\"\']/g,"")),i},u.getCssVariables=function(t,e){var i=e||document.body;if(window&&1===i.nodeType){var o=window.getComputedStyle(i);for(var n in t){var r=t[n];r&&r.match(/^--/)&&(t[n]=o.getPropertyValue(r).replace(/\"/g,""))}}return t||null},u.setRTK=function(t){null!=t&&(u._rtk=t)},u.getMovementColorProfile=function(){return document.documentElement.getAttribute("movement-color-profile")},u._addThemeChangedCallback=function(t){var e=u._callbacks;e.indexOf(t)<0&&e.push(t)},u.reloadThemeColors=function(){return u._deferred&&u._deferred.isFulfilled()?(u._profileName="",u._themeLoaded=!1,u.themeReady=null,u.getThemeColors()):u.themeReady},u.getThemeColors=function(t){if("function"==typeof t&&u._addThemeChangedCallback(t),u.themeReady)return u.themeReady;var e=u._deferred=new n.B;u.themeReady=e.promise;var i=u.getMovementColorProfile();if(i)i!==u._profileName?setTimeout(u._profileNameRetrieved,100):u._deferred.resolve(u.themeColors);else{var o={providerName:"Configuration",settingName:"RDE_USER_CURRENT_TICK_COLOR"},r=window?window.JET:null;if(u._themeLoaded=!1,u._rtk&&u._rtk.Settings)u._rtk.Settings.getAsync(o).then(u._loadingProfileSuccess).catch(u._loadingProfileFailure);else if(r&&r.Settings)try{r.Settings.read(u._loadingProfileSuccess,o)}catch(t){u._loadingProfileFailure()}else setTimeout(u._profileNameRetrieved,100)}return e.promise};var d=function(t){if(t!==u._profileName){u._retrieveThemeColors(t),u._pendingResolve&&(u._pendingResolve=!1,u._deferred.resolve(u.themeColors));for(var e=u._callbacks,i=0;i<e.length;i++)e[i]()}};u._loadingProfileSuccess=function(t){t&&document.documentElement.setAttribute("movement-color-profile",t.toLowerCase()),u._observed?u._pendingResolve=!0:u._profileNameRetrieved(t)},u._loadingProfileFailure=function(){u._retrieveThemeColors(),u._observed||(u._observed=!0,r.addAttributeListener(document.documentElement,d,"movement-color-profile")),u._deferred.reject("Failed to get movement color profile from settings.")},u._profileNameRetrieved=function(){var t=u.getMovementColorProfile();u._retrieveThemeColors(t),u._observed||(u._observed=!0,r.addAttributeListener(document.documentElement,d,"movement-color-profile")),u._deferred.resolve(u.themeColors)},u._retrieveThemeColors=function(t){u._themeLoaded=!0,u._profileName=t;var e=u.themeColors=u.getCssVariables({primary:"--color-scheme-primary",secondary:"--color-scheme-secondary",tertiary:"--color-scheme-tertiary",complementary:"--color-scheme-complementary",up:"--color-scheme-positive",down:"--color-scheme-negative",level:"--color-scheme-neutral",tickUp:"--color-scheme-tickup",tickDown:"--color-scheme-tickdown"});e.up||(e.up=u._defaultColors.up,e.down=u._defaultColors.down,e.level=u._defaultColors.level,e.tickUp=u._defaultColors.tickUp,e.tickDown=u._defaultColors.tickDown),e.positive=e.up,e.negative=e.down,e.neutral=e.level;var i=document.createElement("table");i.style.visibility="hidden",i.style.position="fixed",i.style.left="0",i.style.top="0",i.style.width="0";var n=i.insertRow(-1),r=n.insertCell(-1);document.body.appendChild(i);var s=window.getComputedStyle(n);e.tableBg=s.backgroundColor;var l=window.getComputedStyle(r);e.tableText=l.color,e.tableBorder=l.borderColor,e.tableText===e.tableBorder&&(r.className="tr-lg",l=window.getComputedStyle(r),e.tableBg=l.backgroundColor,e.tableText=l.color,e.tableBorder=l.borderColor,e.tableText===e.tableBorder&&(e.tableBg=u._defaultColors.baseGrid,e.tableText=u._defaultColors.baseText,e.tableBorder="")),e.tableBg=(0,o.iC)(e.tableBg),e.tableText=(0,o.iC)(e.tableText),e.tableBorder=(0,o.iC)(e.tableBorder),document.body.removeChild(i),e.baseGrid=e.tableBg,e.baseText=e.tableText,e.trackColor=e.primary||u._defaultColors.trackColor};const h=u},243:(t,e,i)=>{i.d(e,{PF:()=>n,ZP:()=>r,pB:()=>o});var o=function(){};o.prototype._events=null,o.prototype._listenerCount=0,o.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var i=this._events[t];i?i.indexOf(e)<0&&(i.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},o.prototype.removeEventListener=function(t,e){var i=this._events?this._events[t]:null;if(i){var o=i.indexOf(e);o>=0&&(i.splice(o,1),--this._listenerCount)}},o.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},o.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},o.prototype.getListener=function(t,e){if(t){var i=this._events?this._events[t]:null;if(i)return e||(e=0),i[e]||null}return null},o.prototype.addListener=function(t,e){var i=t?t[e]:null;"function"==typeof i&&this.addEventListener(e,i)},o.prototype._prepareEventArguments=function(t,e){return e},o.prototype._dispatch=function(t,e){var i=this._events?this._events[t]:null;if(i){e=this._prepareEventArguments(t,e);for(var o=i.length,n=0;n<o;++n)i[n](e)}};var n=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};o.preventDefault=n;const r=o},221:(t,e,i)=>{i.d(e,{Z:()=>n,p:()=>o});var o={inherits:function(t,e){function i(){}i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t,t.base=function(t,i,o){i||(i="constructor");for(var n=arguments.length,r=new Array(n),s=2;s<n;s++)r[s-2]=arguments[s];return e.prototype[i].apply(t,r)}}};const n=o},787:(t,e,i)=>{i.d(e,{MV:()=>n,lw:()=>o});var o={EQ:{id:"EQ",name:"Equal to",type:"string",positive:1,caseSensitive:1,formula:"str == input"},NEQ:{id:"NEQ",name:"Not equal to",type:"string",positive:0,caseSensitive:1,formula:"str != input"},NUMEQ:{id:"NUMEQ",name:"Number equal to",type:"number",positive:1,caseSensitive:1,formula:"val == input"},NUMNEQ:{id:"NUMNEQ",name:"Number not equal to",type:"number",positive:0,caseSensitive:1,formula:"val != input"},GT:{id:"GT",name:"Greater than",type:"number",positive:1,caseSensitive:1,formula:"val > input"},GTE:{id:"GTE",name:"Greater than or equal to",type:"number",positive:1,caseSensitive:1,formula:"val >= input"},LT:{id:"LT",name:"Less than",type:"number",positive:1,caseSensitive:1,formula:"val < input"},LTE:{id:"LTE",name:"Less than or equal to",type:"number",positive:1,caseSensitive:1,formula:"val <= input"},BEGIN:{id:"BEGIN",name:"Begin with",type:"string",positive:1,caseSensitive:0,formula:"str.indexOf(input) === 0"},NBEGIN:{id:"NBEGIN",name:"Not begin with",type:"string",positive:0,caseSensitive:0,formula:"str.indexOf(input) !== 0"},END:{id:"END",name:"End with",type:"string",positive:1,caseSensitive:0,formula:"(str.length >= input.length) && str.lastIndexOf(input) === (str.length - input.length)"},NEND:{id:"NEND",name:"Not end with",type:"string",positive:0,caseSensitive:0,formula:"(str.length < input.length) || str.lastIndexOf(input) !== (str.length - input.length)"},CONT:{id:"CONT",name:"Contain",type:"string",positive:1,caseSensitive:0,formula:"str.indexOf(input) >= 0"},NCONT:{id:"NCONT",name:"Not contain",type:"string",positive:0,caseSensitive:0,formula:"str.indexOf(input) < 0"},EQ_BLANK:{id:"EQ_BLANK",name:"Equal to blank value",type:"blank",positive:1,caseSensitive:1,formula:"!val && val !== 0"},EQ_NBLANK:{id:"EQ_NBLANK",name:"Equal to non blank value",type:"blank",positive:1,caseSensitive:1,formula:"(val || val === 0) ? true : false"},DT:{id:"DT",name:"Date is",type:"date",positive:1,caseSensitive:1,formula:"ts === input"},DTA:{id:"DTA",name:"Date is After",type:"date",positive:1,caseSensitive:1,formula:"ts > input"},DTB:{id:"DTB",name:"Date is Before",type:"date",positive:1,caseSensitive:1,formula:"ts < input"}};o.TXTEQ=o.EQ,o.BLANK=o.EQ_BLANK,o.NBLANK=o.EQ_NBLANK,o.NEQ_BLANK=o.EQ_NBLANK,o.GREATER_THAN=o.GT,o.GREATER_THAN_OR_EQUAL_TO=o.GTE,o.EQUAL_TO=o.EQ,o.LESS_THAN=o.LT,o.LESS_THAN_OR_EQUAL_TO=o.LTE,o.TEXT_THAT_CONTAINS=o.CONT,o.TEXT_THAT_NOT_CONTAINS=o.NCONT,o.TEXT_IS=o.EQ,o.NOT_BLANK=o.EQ_NBLANK;var n={EQ:function(t,e){return t==e},NEQ:function(t,e){return t!=e},NUMEQ:function(t,e){return t==e},NUMNEQ:function(t,e){return t!=e},GT:function(t,e){return t>e},GTE:function(t,e){return t>=e},LT:function(t,e){return t<e},LTE:function(t,e){return t<=e},BEGIN:function(t,e){return 0===t.indexOf(e)},NBEGIN:function(t,e){return 0!==t.indexOf(e)},END:function(t,e){return t.length>=e.length&&t.lastIndexOf(e)===t.length-e.length},NEND:function(t,e){return t.length<e.length||t.lastIndexOf(e)!==t.length-e.length},CONT:function(t,e){return t.indexOf(e)>=0},NCONT:function(t,e){return t.indexOf(e)<0},EQ_BLANK:function(t,e){return!t&&0!==t},EQ_NBLANK:function(t,e){return!(!t&&0!==t)},DT:function(t,e){return t===e},DTA:function(t,e){return t>e},DTB:function(t,e){return t<e}}},895:(t,e,i)=>{i.d(e,{CA:()=>a,V5:()=>h,YD:()=>p,b1:()=>c,iC:()=>_,kI:()=>n,kM:()=>u,kt:()=>o,sQ:()=>g,w1:()=>d});var o=function(t,e,i){if(!t)return null;if(!e||t===e)return t;var o;if(i)for(var n=i.length,s=0;s<n;++s)(o=i[s])&&r(t,e,o);else for(o in e)r(t,e,o);return t},n=function(t,e){return o({},t,e)},r=function(t,e,i){var o=e[i];if(null!=o){var n=t[i];Array.isArray(n)?t[i]=n.concat(o):Array.isArray(o)&&n?t[i]=o.concat(n):t[i]=o}},s=function(t){return Array.isArray(t)?"{\n"+t.join("\n")+"\n}":t},l=function(t){return t.replace(/\n+/g,"\n\t").replace(/\n\t}$/,"\n}")},a=function(t){if(t){var e="";if(e=Array.isArray(t)?t.map(s).join("\n").replace(/{\s*{/g,"{").replace(/\s+{/g," {"):"string"==typeof t?t:t+"")return e.replace(/{[\w\W]*?}/g,l)}return""},u=function(t,e){if(!t)return null;var i=document.createElement("style");i.textContent="\n"+t+"\n";var o,n=function(t){var e;return t&&(t.shadowRoot?e=t.shadowRoot:t.getRootNode&&(e=t.getRootNode()),e&&e!==document&&e!==t)?e:null}(e),r=!0;return n||(r=!1,n=document.head),r&&n.children&&n.children.length&&(o=n.children[0]),o?n.insertBefore(i,o):n.appendChild(i),i},d=function(){var t=window.navigator.userAgent;return t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0},h=function(){return/Mac/.test(navigator.platform)},c=function(){return!!(navigator.maxTouchPoints&&navigator.maxTouchPoints<256||navigator.msMaxTouchPoints&&navigator.msMaxTouchPoints<256)},p=function(t,e){for(var i in e||(e=[]),t){var o=t[i];"object"==typeof o?p(o,e):e.push(o)}return e},_=function(t){if(!t||"string"!=typeof t)return"";if("#"===t.charAt(0))return t;var e=t.match(/\d+/g);if(!e||e.length<3)return t;for(var i="#",o=0;o<3;o++){var n=+e[o];n>=16||(i+="0"),i+=n?n.toString(16).toUpperCase():"0"}return i},g=function(t){if(null==t)return"";var e="string"==typeof t?t:t.toString();return e.length?(e.indexOf("\n")>=0&&(e=e.replace(/[\r\n]/g," ")),e.indexOf("\t")>=0&&(e=e.replace(/\t/g," "))," "!==e.charAt(0)&&" "!==e.charAt(e.length-1)||(e=e.trim()),e):""}},377:(t,e,i)=>{i.d(e,{NH:()=>H});var o=i(940),n=i(895),r=i(221),s=i(464),l=function(t,e,i){for(var o=e;--o>=0;)t.appendChild(document.createElement(i))},a=function(t){var e;e=t?"string"==typeof t?document.createElement(t):t:document.createElement("tbody"),this._elem=e,this._render=a._defaultCellRenderer};r.p.inherits(a,s.N),a.prototype._colCount=0,a.prototype._defaultRowHeight=null,a.prototype._render,a.prototype._getCellTagName=function(){return"THEAD"===this._elem.tagName?"TH":"TD"},a.prototype.addColumns=function(t){if(null==t)t=1;else if(t<=0)return;this._colCount+=t;for(var e=this._getCellTagName(),i=this._elem.children,o=i.length;--o>=0;)l(i[o],t,e)},a.prototype.removeColumns=function(t){if((null==t||t>=this._colCount)&&this.removeAllColumns(),!(t<=0)){this._colCount-=t;for(var e=this._elem.children,i=e.length;--i>=0;)o.i.removeChildren(e[i],t)}},a.prototype.removeAllColumns=function(){this._colCount<=0||(this._colCount=0,this.removeAllRows())},a.prototype.setColumnCount=function(t){t>=this._colCount?this.addColumns(t-this._colCount):this.removeColumns(this._colCount-t)},a.prototype.insertRow=function(t){var e=this._elem.insertRow(t);return l(e,this._colCount,this._getCellTagName()),e},a.prototype.addRows=function(t){var e=null;if(null==t&&(t=1),t>0){e=new Array(t);for(var i=0;i<t;++i)e[i]=this.insertRow();null!=this._defaultRowHeight&&this._applyDefaultRowHeight(e,this._defaultRowHeight+"px")}return e||[]},a.prototype.removeRows=function(t){o.i.removeChildren(this._elem,t)},a.prototype.removeAllRows=function(){o.i.removeChildren(this._elem)},a.prototype.setRowCount=function(t){var e=this.getRowCount();t>=e?this.addRows(t-e):this.removeRows(e-t)},a.prototype.setDefaultRowHeight=function(t){if(t||(t=null),t!==this._defaultRowHeight){this._defaultRowHeight=t;var e=null!=this._defaultRowHeight?this._defaultRowHeight+"px":"";this._applyDefaultRowHeight(this._elem.children,e)}},a.prototype.getColumnCount=function(){return this._colCount},a.prototype.getRowCount=function(){return this._elem.children.length},a.prototype.getCell=function(t,e){var i=this.getRow(e);return i&&i.cells[t]||null},a.prototype.getCellsInColumn=function(t){if(t<0||t>=this._colCount)return null;for(var e=this._elem.children,i=e.length,o=new Array(i),n=0;n<i;++n)o[n]=e[n].cells[t];return o},a.prototype.getCellsInRow=function(t){var e=this.getRow(t);if(e){for(var i=e.cells,o=i.length,n=new Array(o),r=0;r<o;++r)n[r]=i[r];return n}return null},a.prototype.getAllCells=function(){for(var t=this._elem.children,e=t.length,i=this._colCount,o=0,n=new Array(e*i),r=0;r<e;++r)for(var s=t[r],l=0;l<i;++l)n[o++]=s.cells[l];return n},a.prototype.getAllRows=function(){for(var t=this._elem.children,e=t?t.length:0,i=new Array(e),o=0;o<e;++o)i[o]=t[o];return i},a.prototype.getRows=a.prototype.getAllRows,a.prototype.getRow=function(t){return this._elem.children[t]||null},a.prototype.getTextContents=function(){for(var t=this._elem.children,e=t.length,i=new Array(e),o=0;o<e;++o){var n=t[o],r=new Array(this._colCount);i[o]=r;for(var s=0;s<this._colCount;++s)r[s]=n.cells[s].textContent}return i},a.prototype.getCellTextContent=function(t,e){var i=this.getCell(t,e);return i?i.textContent:""},a.prototype.getColumnTextContent=function(t){var e=this._elem.children,i=e.length;if(t>=0&&t<this._colCount&&i>0){for(var o=e[0].cells[t].textContent,n=1;n<i;++n)o+="\n"+e[n].cells[t].textContent;return o}return""},a.prototype.getRowTextContent=function(t){var e=this.getRow(t);if(e&&this._colCount>0){for(var i=e.cells[0].textContent,o=1;o<this._colCount;++o)i+="\t"+e.cells[o].textContent;return i}return""},a.prototype.getTableTextContent=function(){var t=this._elem.children.length;if(t>0){for(var e=this.getRowTextContent(0),i=1;i<t;++i)e+="\n"+this.getRowTextContent(i);return e}return""},a.prototype.toString=function(){var t=this.getElement().outerHTML;t=(t=(t=(t=(t=t.replace(/>\s+</g,"><")).replace(/><tr/g,">\n\t<tr")).replace(/><td/g,">\n\t\t<td")).replace(/><th/g,">\n\t\t<th")).replace(/><\/tr/g,">\n\t</tr");var e=this.getElement().tagName.toLowerCase();return t.replace("</"+e,"\n</"+e)},a.prototype.getColumnIndex=function(t){if(!t)return-1;var e,i,n=t.target;if(this._elem.contains(n)){var r=o.i.closestTagName(n,"TD");if(r||(r=o.i.closestTagName(n,"TH")),r){var s=r.parentElement.children;for(e=s.length,i=0;i<e;++i)if(r===s[i])return i}}else{var l=this._elem.children,a=l[0]?l[0].cells:null;if(a){var u=o.i.getRelativePosition(t,this._elem).x;if(u>=0)for(e=a.length,i=0;i<e;++i)if((u-=a[i].offsetWidth)<0)return i}}return-1},a.prototype.getRowIndex=function(t){if(!t)return-1;var e,i=this._elem.children,n=i?i.length:0;if(!n)return-1;var r=t.target;if(this._elem.contains(r)){var s=o.i.closestTagName(r,"TR");if(s)for(e=0;e<n;++e)if(i[e]===s)return e}var l=o.i.getRelativePosition(t,this._elem).y;if(l>=0)for(e=0;e<n;++e)if((l-=i[e].offsetHeight)<0)return e;return-1},a.prototype.getColumnLeft=function(t,e){var i=this.getCell(t,e||0);return i?i.offsetLeft:NaN},a.prototype.getRowTop=function(t){var e;return(e="number"==typeof t?this.getRow(t):o.i.closestTagName(t,"TR"))?e.offsetTop:NaN},a.prototype.getCellPosition=function(t,e){e||(e={}),e.x=t.offsetLeft;var i=t.parentNode;return e.y=i?i.offsetTop:NaN,e},a.prototype.setCellRenderer=function(t){this._render=t||a._defaultCellRenderer},a.prototype.cloak=function(t,e){if(t){this._elem=t;var i=t.getElementsByTagName("TR");this._colCount=i[0]?i[0].children.length:0}},a.prototype.spanBlock=function(t,e,i,o){var n=this.getCell(t,i);if(!n)return null;e<t&&(e=t),o<i&&(o=i);var r,s,l=+n.getAttribute("colspan"),a=+n.getAttribute("rowspan"),u=a?i+a-1:i;for(r=l?t+l-1:t;r>=t;--r)for(s=u;s>=i;--s)(n=this.getCell(r,s))&&(n.style.display="");for(r=e;r>=t;--r)for(s=o;s>=i;--s)(n=this.getCell(r,s))&&(n.style.display="none");if(n){var d=e-t+1,h=o-i+1;d>1?n.setAttribute("colspan",d):n.removeAttribute("colspan"),d>1?n.setAttribute("rowspan",h):n.removeAttribute("rowspan"),n.style.display=""}return n},a.parseTableContent=function(t){if(!t)return null;var e="TBODY"==t.tagName?t:t.getElementsByTagName("TBODY")[0];if(e||"TABLE"==t.tagName&&(e=t),!e)return null;for(var i=e.getElementsByTagName("TR"),o=i.length,n=new Array(o),r=0;r<o;++r){var s=i[r].getElementsByTagName("TD"),l=s.length,a=new Array(l);n[r]=a;for(var u=0;u<l;++u)a[u]=s[u].textContent}return n},a.prototype._applyDefaultRowHeight=function(t,e){for(var i=t.length;--i>=0;)t[i].style.height=e},a._defaultCellRenderer=function(t,e,i,o){null!=e?e.nodeType?t.appendChild(e):t.textContent=e:t.textContent=""};var u=function(t,e){var i=this,n=0,r=0;t&&1===t.nodeType?i._elem=t:(i._elem=o.i.create("div","inline-table"),"number"==typeof t&&("number"==typeof e&&(r=e,e=null),n=t,t=null)),i._elem.classList.add("js-table"),i._table=o.i.create("table"),i._colgroup=document.createElement("colgroup"),i._tbody=new a("tbody"),i._subs=[i._tbody];var s=null;e&&("number"==typeof e?n=e:s=e),n>0&&i.addColumns(n),r>0&&i.addRows(r),i._table.appendChild(i._colgroup),i._table.appendChild(i._tbody.getElement()),i.fixateTableWidth(),i.init(s),i._elem.appendChild(i._table)};r.p.inherits(u,s.N),u.prototype._table,u.prototype._colgroup,u.prototype._colCount=0,u.prototype._defaultRowHeight=null,u.prototype._defaultColumnWidth=null,u.prototype._autoWidthUpdate=!1,u.prototype._tbody,u.prototype._thead,u.prototype._tfoot,u.prototype._subs,u.prototype.getTableElement=function(){return this._table},u.prototype.setCRWH=function(t,e,i,o){this.setColumnCount(t),this.setRowCount(e),this.setSize(i,o)},u.prototype.init=function(t){if(t){var e=t.colWidth||t.cellWidth;e&&this.setDefaultColumnWidth(e);var i=t.rowHeight||t.cellHeight;i&&this.setDefaultRowHeight(i);var n=t.colCount;n&&this.setColumnCount(n);var r=t.rowCount;r&&this.setRowCount(r);var s=t.width||t.tableWidth;s&&this._colCount&&this.setDefaultColumnWidth(s/this._colCount|0);var l=t.height||t.tableHeight;l&&(r=this.getRowCount())&&this.setDefaultRowHeight(l/r|0);var a=t.header;null!=a&&(a?(r="number"==typeof a?a:1,this._addHeader(),this._thead.setRowCount(r)):this._thead&&(o.i.removeParent(this._thead.getElement()),this._thead=null));var u=t.footer;null!=u&&(u?(r="number"==typeof u?u:1,this._addFooter(),this._tfoot.setRowCount(r)):this._tfoot&&(o.i.removeParent(this._tfoot.getElement()),this._tfoot=null))}},u.prototype.addColumns=function(t){if(null==t)t=1;else if(t<=0)return null;var e,i=[];for(e=t;--e>=0;){var o=document.createElement("col");this._colgroup.appendChild(o),i[e]=o}if(this._colCount+=t,null!=this._defaultColumnWidth){var n=this._defaultColumnWidth+"px";for(e=t;--e>=0;)i[e].style.width=n}for(var r=this._subs.length;--r>=0;)this._subs[r].addColumns(t);return this._updateTableWidth(),i},u.prototype.removeColumns=function(t){if(null==t||t>=this._colCount)this.removeAllColumns();else if(!(t<=0)){this._colCount-=t,o.i.removeChildren(this._colgroup,t);for(var e=this._subs.length;--e>=0;)this._subs[e].removeColumns(t);this._updateTableWidth()}},u.prototype.removeAllColumns=function(){if(!(this._colCount<=0)){this._colCount=0,o.i.removeChildren(this._colgroup);for(var t=this._subs.length;--t>=0;)this._subs[t].removeAllColumns();this._updateTableWidth()}},u.prototype.setColumnCount=function(t){t>=this._colCount?this.addColumns(t-this._colCount):this.removeColumns(this._colCount-t)},u.prototype.addRows=function(t){return this._tbody.addRows(t)},u.prototype.removeRows=function(t){this._tbody.removeRows(t)},u.prototype.removeAllRows=function(){this._tbody.removeAllRows()},u.prototype.setRowCount=function(t){this._tbody.setRowCount(t)},u.prototype.getColumnCount=function(){return this._colCount},u.prototype.getRowCount=function(){return this._tbody.getRowCount()},u.prototype.getCell=function(t,e){return this._tbody.getCell(t,e)},u.prototype.getCellsInColumn=function(t){return this._tbody.getCellsInColumn(t)},u.prototype.getCellsInRow=function(t){return this._tbody.getCellsInRow(t)},u.prototype.getAllCells=function(){return this._tbody.getAllCells()},u.prototype.getAllRows=function(){return this._tbody.getAllRows()},u.prototype.getRows=u.prototype.getAllRows,u.prototype.getRow=function(t){return this._tbody.getRow(t)},u.prototype.spanBlock=function(t,e,i,o){return this._tbody.spanBlock(t,e,i,o)},u.prototype.spanHorizontally=function(t,e){return this._tbody.spanBlock(0,!1!==e?this._colCount:0,t,t)},u.prototype.setColMinWidths=function(t,e){this._setColStyle("width",t,e),this._updateTableWidth()},u.prototype.setColumnWidths=u.prototype.setColMinWidths,u.prototype.setColBackgroundColors=function(t,e){this._setColStyle("background-color",t,e)},u.prototype.setColBGColors=u.prototype.setColBackgroundColors,u.prototype.setColBorders=function(t,e){this._setColStyle("border",t,e)},u.prototype.setSize=function(t,e){this._colCount<0&&this.addColumns(),this.getRowCount()<0&&this.addRows(),this.setCellSize(t/this._colCount|0,e/this.getRowCount()|0)},u.prototype.setCellSize=function(t,e){this.setDefaultColumnWidth(t),this.setDefaultRowHeight(e)},u.prototype.setDefaultColumnWidth=function(t){t||(t=null),t!==this._defaultColumnWidth&&(this._defaultColumnWidth=t,this._colCount>0&&this._setColStyle("width",this._defaultColumnWidth||""),this._updateTableWidth())},u.prototype.setDefaultRowHeight=function(t){if(t||(t=null),t!==this._defaultRowHeight){this._defaultRowHeight=t;for(var e=this._subs.length;--e>=0;)this._subs[e].setDefaultRowHeight(t)}},u.prototype.distributeColumnWidth=function(){if(!(this._colCount<=1)){var t=this._tbody.getTextContents(),e=t.length;if(e){for(var i=new Array(this._colCount),o=t[0],n=0;n<this._colCount;++n)i[n]=o[n].length;for(var r=1;r<e;++r)for(o=t[r],n=0;n<this._colCount;++n)i[n]<o[n].length&&(i[n]=o[n].length);var s=0,l=i[0];for(n=this._colCount;--n>=1;)l<i[n]&&(l=i[n],s=n);for(n=this._colCount;--n>=0;)i[n]=Math.floor(i[n]/l*100)+"%";i[s]="",this.setColumnWidths(i)}}},u.prototype.log=function(t){var e,i=this.getRows(),o=i.length;(!t||t<=0)&&(t=o);var n=new Array(this._colCount);for(e=0;e<this._colCount;++e){var r=this.getHeaderCell(e,0),s=r?r.textContent:"";n[e]=s||""+e}for(var l=[],a=0;a<o;++a){var u={};for(e=0;e<this._colCount;++e)u[n[e]]=i[a].cells[e].textContent;if(!(l.length<t))break;l.push(u)}console.table(l)},u.prototype.getTextContents=function(){return this._tbody.getTextContents()},u.prototype.getCellTextContent=function(t,e){return this._tbody.getCellTextContent(t,e)},u.prototype.getColumnTextContent=function(t){return this._tbody.getColumnTextContent(t)},u.prototype.getRowTextContent=function(t){return this._tbody.getRowTextContent(t)},u.prototype.getTableTextContent=function(){return this._tbody.getTableTextContent()},u.prototype.fixateTableWidth=function(t){this._autoWidthUpdate=!1!==t,this._autoWidthUpdate?this._updateTableWidth():this._table.style.width&&(this._table.style.width="")},u.prototype.loosenTableWidth=function(t){this.fixateTableWidth(!1===t)},u.prototype.addHeaderRows=function(t){return this._addHeader(),this._thead.addRows(t)},u.prototype.getHeaderCell=function(t,e){return this._thead?this._thead.getCell(t,e):null},u.prototype.getAllHeaderCells=function(){return this._thead?this._thead.getAllCells():[]},u.prototype.removeHeaderRows=function(t){this._thead&&this._thead.removeRows(t)},u.prototype.addFooterRows=function(t){return this._addFooter(),this._tfoot.addRows(t)},u.prototype.getFooterCell=function(t,e){return this._tfoot?this._tfoot.getCell(t,e):null},u.prototype.getAllFooterCells=function(){return this._tfoot?this._tfoot.getAllCells():[]},u.prototype.removeFooterRows=function(t){this._tfoot&&this._tfoot.removeRows(t)},u.prototype.getColumnIndex=function(t){return this._tbody.getColumnIndex(t)},u.prototype.getRowIndex=function(t){return this._tbody.getRowIndex(t)},u.prototype.getColumnLeft=function(t,e){return this._tbody.getColumnLeft(t,e)},u.prototype.getRowTop=function(t){return this._tbody.getRowTop(t)+this._tbody.getElement().offsetTop},u.prototype.getCellPosition=function(t,e){return(e=this._tbody.getCellPosition(t,e)).y+=this._tbody.getElement().offsetTop,e},u.prototype.cloak=function(t){if(t&&t.parentElement&&"TABLE"===t.tagName){this._elem=t.parentElement,this._elem.classList.add("js-table"),this._table=t;var e=t.getElementsByTagName("COLGROUP");this._colgroup=e[0]?e[0]:document.createElement("colgroup"),e=t.getElementsByTagName("TR"),this._colCount=e[0]?e[0].children.length:0,this._autoWidthUpdate=!!this._table.getAttribute("width"),(e=t.getElementsByTagName("TBODY"))[0]&&this._tbody.cloak(e[0]),(e=t.getElementsByTagName("THEAD"))[0]&&this._addHeader(e[0]),(e=t.getElementsByTagName("TFOOT"))[0]&&this._addFooter(e[0])}},u.prototype.getBody=function(){return this._tbody},u.prototype.getHeader=function(){return this._thead},u.prototype.getFooter=function(){return this._tfoot},u.prototype._addHeader=function(t){var e=this;e._thead?t&&e._thead.cloak(t):(e._thead=new a(t||"thead"),e._subs.push(e._thead),e._thead.setColumnCount(e._colCount),e._thead.setDefaultRowHeight(e._defaultRowHeight),e._table.insertBefore(e._thead.getElement(),e._tbody.getElement()))},u.prototype._addFooter=function(t){var e=this;e._tfoot?t&&e._tfoot.cloak(t):(e._tfoot=new a(t||"tfoot"),e._subs.push(e._tfoot),e._tfoot.setColumnCount(e._colCount),e._tfoot.setDefaultRowHeight(e._defaultRowHeight),e._table.appendChild(e._tfoot.getElement()))},u.prototype._setColStyle=function(t,e,i){var o,n;if(null==e&&(e=""),e instanceof Array)for(o=e.length<this._colCount?e.length:this._colCount;--o>=0;){var r=e[o];"number"==typeof r&&(r+="px"),r&&((n=this._colgroup.children[o]).style[t]=r)}else if("number"==typeof e&&(e+="px"),"number"==typeof i)(n=this._colgroup.children[i])&&(n.style[t]=e);else for(o=this._colCount;--o>=0;)(n=this._colgroup.children[o]).style[t]=e},u.prototype._updateTableWidth=function(){if(this._autoWidthUpdate){for(var t=!0,e=0,i=this._colCount;--i>=0;){var o=this._colgroup.children[i].style.width;if(!o){t=!1;break}e+=parseFloat(o)}t&&e>0?this._table.style.width=e+"px":this._table.style.width&&(this._table.style.width="")}};var d=i(243),h=function(){var t=this;t._onKeyDown=t._onKeyDown.bind(t),t._onMediaQuery=t._onMediaQuery.bind(t),t._onBeforePrint=t._onBeforePrint.bind(t),t._onAfterPrint=t._onAfterPrint.bind(t),t._onPrintEnd=t._onPrintEnd.bind(t),t._print=t._print.bind(t),t.print=t.print.bind(t),t._eventArg={},h.calculateEnvironment()};r.p.inherits(h,d.pB),h.prototype._defaultWidth=739,h.prototype._defaultHeight=978,h.prototype._window=null,h.prototype._defaultPrint=null,h.prototype._eventArg=null,h.prototype._printMedia=null,h.prototype._correction=!1,h.prototype._fixedSize=!1,h.prototype._state=0,h.prototype._timerId=0,h.DEBUG=!1,h._debugBtn=null,h._env={},h.calculateEnvironment=function(){var t=h._env,e=navigator.userAgent,i=window.JET,o=i?i.ContainerDescription:"";return t.isMac=/Mac/.test(navigator.platform),t.isIE=e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0,t.isEikonDesktop=!!o&&"Thomson Reuters Eikon"===o.name,t},h.prototype.observe=function(t){if(this._state>0&&this._state<3)console.warn("Cannot observe another window object while printing process is running.");else{var e=null;t?t.contentWindow&&(e=t.contentWindow):void 0===t&&(e=window),this._window!==e&&(this._window&&(this._window.print=this._defaultPrint,this._defaultPrint=null,this._window.removeEventListener("keydown",this._onKeyDown,!1),this._window.removeEventListener("afterprint",this._onAfterPrint,!1),this._window=null,this._printMedia&&(this._printMedia.removeListener(this._onMediaQuery),this._printMedia=null)),this._window=e,e&&(this._defaultPrint=e.print,e.print=this.print,e.addEventListener("keydown",this._onKeyDown,!1),e.addEventListener("afterprint",this._onAfterPrint,!1),this._printMedia=e.matchMedia("print"),this._printMedia&&this._printMedia.addListener(this._onMediaQuery)))}},h.prototype.unobserve=function(){this.observe(null)},h.prototype.isObserving=function(){return!!this._window},h.prototype.dispose=function(){this.removeAllEventlisteners(),this._timerId&&clearTimeout(this._timerId),this._onPrintEnd(),this.unobserve(),this._eventArg=null},h.prototype.print=function(){if(this._window)if(0===this._state)if(this._state=1,h._env.isEikonDesktop?(this._defaultWidth=672,this._defaultHeight=917):(this._defaultWidth=717,this._defaultHeight=978),this._eventArg.pageWidth=this._defaultWidth,this._eventArg.pageHeight=this._defaultHeight,this._eventArg.documentElement=this.getDocumentElement(),this._eventArg.bodyElement=this.getBodyElement(),this.getDocumentElement().classList.add("tr-printing-mode"),this._dispatch("pageCounting",this._eventArg),h.DEBUG){var t=h._debugBtn=document.createElement("button");t.addEventListener("click",this._onBeforePrint),t.textContent="BeforePrint",t.style.display="unset",t.style.position="fixed",t.style.width="100px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.top="20px",document.body.appendChild(t)}else this._onBeforePrint(),setTimeout(this._print,500);else console.warn("Cannot initiate another printing command while another printing process is running.");else console.error("Cannot perform printing. Window object must be specified by using observe() method.")},h.prototype._print=function(){this._defaultPrint.call(this._window)},h.createBlankPages=function(t){for(var e=document.createElement("div"),i=0;i<t;++i){var o=document.createElement("div");h.DEBUG?o.textContent="Page "+(i+1):o.className="tr-blank-page",e.appendChild(o)}return e.style.display="block",e},h.prototype.createClientBox=function(t,e){var i=document.createElement("div"),o=i.style;return o.width=t+"px",o.height=e+"px",o.display="block",o.border="2px solid red",o.boxSizing="border-box",o.fontSize="3em",i.textContent=t+" x "+e,i},h.prototype.enablePaperSizeCorrection=function(t){this._correction=!1!==t},h.prototype.fixPaperSize=function(t){this._fixedSize=!1!==t},h.prototype.getDocumentElement=function(){return this._window.document.documentElement||null},h.prototype.getBodyElement=function(){return this._window.document.body||null},h.prototype._onKeyDown=function(t){(h._env.isMac?t.metaKey:t.ctrlKey)&&(t.altKey||80===t.keyCode&&(t.preventDefault(),t.stopPropagation(),this.print()))},h.prototype._onMediaQuery=function(t){t.matches?this._onBeforePrint():this._onAfterPrint()},h.prototype._onBeforePrint=function(t){if(this._state<2&&(this._state=2,this._calculatePageSize(this._correction,this._fixedSize),this._eventArg.documentElement=this.getDocumentElement(),this._eventArg.bodyElement=this.getBodyElement(),this.getDocumentElement().classList.add("tr-printing-mode"),this._dispatch("beforeprint",this._eventArg),h.DEBUG)){var e=h._debugBtn;e.removeEventListener("click",this._onBeforePrint),e.addEventListener("click",this._onAfterPrint),e.textContent="AfterPrint"}},h.prototype._onAfterPrint=function(t){if(this._state<3&&(this._state=3,this._calculatePageSize(),this.getDocumentElement().classList.remove("tr-printing-mode"),this._dispatch("afterprint",this._eventArg),this._timerId=setTimeout(this._onPrintEnd,0),h._debugBtn)){var e=h._debugBtn.parentNode;e&&e.removeChild(h._debugBtn),h._debugBtn=null}},h.prototype._onPrintEnd=function(){this._timerId=0,this._state=0},h.prototype._calculatePageSize=function(t,e){if(h._env.isIE)return!1;var i=this.getDocumentElement(),o=i.clientWidth,n=this._window.innerWidth||0,r=i.clientHeight,s=this._window.innerHeight||0,l=o>=n?o:n,a=r>=s?r:s;if(e)l>a?(l=this._defaultHeight,a=this._defaultWidth):(l=this._defaultWidth,a=this._defaultHeight);else if(t){var u=a>=l,d=this._calculateAspectRatio(l,a),c=h._paperSizes[d];c||(c=h._paperSizes[d-1]||h._paperSizes[d+1]),c&&(u?(l=c[0],a=c[1]):(a=c[0],l=c[1]))}return(this._eventArg.pageWidth!==l||this._eventArg.pageHeight!==a)&&(this._eventArg.pageWidth=l,this._eventArg.pageHeight=a,!0)},h.prototype._calculateAspectRatio=function(t,e){var i=e>=t?t/e:e/t;return Math.floor(1e3*i)},h._paperSizes={702:[3101,4414],699:[2168,3100],697:[1511,2167],692:[1046,1511],685:[717,1046],674:[483,715],583:[739,1266],755:[739,978],629:[979,1554]};var c=function(){};r.p.inherits(c,s.N),c.prototype._flexRow=null,c.prototype._floatingPanel=null,c.prototype._frontPanel=null,c.prototype.getContent=function(){return this._elem.children[0]||null},c.prototype.setContent=function(t,e){return null==t?null:(t.getElement?t=t.getElement():1!==t.nodeType&&(t=this._createTextContent(t)),o.i.removeChildren(this._elem),this._elem.appendChild(t),t)},c.prototype.setTooltip=function(t){t?this._elem.setAttribute("title",t):this._elem.removeAttribute("title")},c.prototype.setTextContent=function(t){o.i.removeChildren(this._elem),this._elem.appendChild(this._createTextContent(t))},c.prototype.addContent=function(t){return this._elem.appendChild(t),t},c.prototype._createTextContent=function(t){var e=o.i.div("text");return null!=t&&(e.textContent=t,this.percentText=t),e},c.prototype.setStyle=function(t,e){this._elem.style[t]=e},c.prototype.removeIcon=function(t){},c.prototype.updateIcon=function(t){if(t&&1===t.nodeType){var e=this._frontPanel;if(!e){this._flexRow=document.createElement("div"),this._flexRow.className="tr-printing-flex-row",(e=this._floatingPanel=document.createElement("div")).className="tr-printing-float-right",this._flexRow.appendChild(e);var i=this._elem.children,n=i.length;if(n){for(var r=new Array(n),s=0;s<n;++s)r[s]=i[s];o.i.appendChild(this._flexRow,r)}this._elem.appendChild(this._flexRow)}e.appendChild(t.cloneNode(!0))}},c.prototype.unlisten=function(){},c.prototype.listen=function(){},c.prototype.setTooltip=function(){},c.prototype.addClass=function(t){this._elem.classList.add(t)},c.prototype.hasClass=function(t){this._elem.classList.contains(t)},c.prototype.removeClass=function(t){this._elem.classList.remove(t)},c.prototype.enableClass=function(t,e){e||null==e?this.addClass(t):this.removeClass(t)},c.prototype.insertFloatingIcon=function(t,e){if(t&&1===t.nodeType){var i=this._floatingPanel;if(!i){this._flexRow=document.createElement("div"),this._flexRow.className="tr-printing-flex-row";var n=this._elem.children,r=n.length;if(r){for(var s=new Array(r),l=0;l<r;++l)s[l]=n[l];o.i.appendChild(this._flexRow,s)}(i=this._floatingPanel=document.createElement("div")).className="tr-printing-float-right",this._flexRow.appendChild(i),this._elem.appendChild(this._flexRow)}i.appendChild(t.cloneNode(!0))}},c.prototype.removeFloatingIcon=function(t,e){},c.prototype.getSection=function(){return null},c.prototype.cloak=function(t){delete this.percentText,delete this._flexRow,delete this._floatingPanel,delete this._frontPanel,t.className="cell",this._elem=t};var p=function(){this._cellWriter=new c,this._table=new u,this._columns=[],this._elem=this._table.getElement()};r.p.inherits(p,s.N),p.prototype._cellWriter,p.prototype._table,p.prototype.getFirstIndexInView=function(){return 0},p.prototype.getLastIndexInView=function(){return this._table.getRowCount()},p.prototype.getColumnCount=function(){return this._table.getColumnCount()},p.prototype.getColumn=function(t){var e=this._columns[t];return e||(e=this._columns[t]={}),e},p.prototype.setColumnCount=function(t){this._table.setColumnCount(t)},p.prototype.getRowCount=function(){return this._table.getRowCount()},p.prototype.setRowCount=function(t){this._table.setRowCount(t)},p.prototype.getCell=function(t,e){var i=this._table.getCell(t,e);return i?(this._cellWriter.cloak(i),this._cellWriter):null},p.prototype.getCellContent=function(t,e){var i=this.getCell(t,e);return i?i.getContent():null},p.prototype.setCellContent=function(t,e,i){var o=this.getCell(t,e);o&&o.setContent(i)},p.prototype.enableRowClass=function(t,e,i){},p.prototype.stretchCell=function(t,e,i,o){this._table.getCell(t,e).setAttribute("colspan",this._table.getColumnCount())},p.prototype.unstretchCell=function(t,e){},p.prototype.hasCellSpan=function(){return!1},p.prototype.getCellRowSpan=function(t,e){return 1},p.prototype.setCellRowSpan=function(t,e,i){},p.prototype.getCellColSpan=function(t,e){return 1},p.prototype.setCellColSpan=function(t,e,i){},p.prototype.clearCellSpans=function(){},p.prototype.clearColumnSpans=function(t){},p.prototype.isColumnActive=function(t){return!0},p.prototype.getCellElement=function(t,e){return this._table.getCell(t,e)},p.prototype._startBindingSession=function(t){};var _=null,g=function(t,e){if(!(t&&e&&t.parentNode&&e.parentNode))return o.i.removeParent(t),void o.i.removeParent(e);_||(_=document.createElement("span")),t.parentNode.replaceChild(_,t),e.parentNode.replaceChild(t,e),_.parentNode.replaceChild(e,_)},f=function(t,e){if(t&&e){var i,n;if(e.hasAttributes())for(i=(n=e.attributes).length;--i>=0;)e.removeAttribute(n[i].name);if(t.hasAttributes())for(i=(n=t.attributes).length;--i>=0;)e.setAttribute(n[i].name,n[i].value);o.i.removeChildren(e);var r=t.childNodes,s=r.length;for(i=0;i<s;++i)e.appendChild(r[i].cloneNode(!0))}},m=function(t,e,i){if(i&&"default"!==i){var o=t.getCellsInColumn(e);if(o)for(var n=o.length;--n>=0;)o[n].classList.add("tr-align-"+i)}},v=function(t){var e=null;try{t.api?e=t.api.getCoreGrid():t.getCoreGrid?e=t.getCoreGrid():t.getPlugin&&(e=t)}catch(t){console.log("Cannot print the given object")}return e},C={_styles:"",_printTrait:null,_blankPage:null,_grid:null,_isObserving:!1,_options:{},setPrintOptions:function(t){C._options=t||{}},observe:function(t){var e=C._getPrintTrait();e.observe(t),C._isObserving=e.isObserving()},unobserve:function(){C._getPrintTrait().unobserve()},enableDebugMode:function(t){h.DEBUG=!1!==t},getPreFlightInfo:function(t,e){var i=e||{};if(i.pageCount||(i.pageCount=0),!t)return i;var o=t.getColumnCount();if(!o)return i;i._calculated=!1,C._options.pageWidth&&(e.pageWidth=C._options.pageWidth),C._options.pageHeight&&(e.pageHeight=C._options.pageHeight);var n,r=function(t){var e=0,i=0;return t&&(t.pageWidth&&(e=t.pageWidth),t.pageHeight&&(i=t.pageHeight)),e||(e=Math.max(document.documentElement.clientWidth,window.innerWidth||0)),i||(i=Math.max(document.documentElement.clientHeight,window.innerHeight||0)),{pageWidth:e-=2,pageHeight:i-=10}}(e),s=i.pageWidth=r.pageWidth,l=i.pageHeight=r.pageHeight,a=0,u=C._options.identifierField||C._options.primaryColumn;"number"==typeof u&&(a=u);var d,h,c=i.primaryColumn=C._newColInfo(t,a),p=[],_=0;for(n=0;n<o;++n)n!=c.index&&t.isColumnVisible(n)&&(((_-=(h=C._newColInfo(t,n)).width)<=0||!p.length)&&((d={columns:[]}).columns.push(c),_=s-c.width,_-=h.width,p.push(d)),d.columns.push(h));var g=p.length;g||(g=1,p.push([c])),i.columnSets=p;for(var f=0;f<g;++f){o=(d=p[f]).columns.length;var m=[];for(_=s,n=0;n<o;++n)(h=d.columns[n]).scalability?m.push(h):_-=h.width;var v=m.length;if(v){var y=_/v;for(n=0;n<v;++n)m[n].width=(y*(n+1)|0)-(y*n|0)}var b=0,S=d.widths=new Array(o);for(n=0;n<o;++n)h=d.columns[n],S[n]=h.width,b+=h.width;d.width=b}var w=t.getDataSource(),x=i.totalRowcount=w.getVisibleRowCount(),T=t.getSection("title"),I=(l-(i.headerHeight=T.isVisible()?T.getDefaultRowHeight():0))/(i.rowHeight=t.getSection("content").getDefaultRowHeight())|0;I>0||(I=1),i.maxRowPerPage=I;var R=i.gridCount=Math.ceil(x/I);return i.pageCount=R*g,i._calculated=!0,i},createPrintElement:function(t,e){if(!(t=t?v(t):C._grid))return null;var i=e||C._printInfo;i&&i._calculated||(i=C.getPreFlightInfo(t,i));var o=i.maxRowPerPage,n=i.totalRowcount,r=i.rowHeight,s=i.headerHeight,l=i.columnSets,a=i.columnSets.length,d=i.primaryColumn,h=i.gridCount,c=new p,_=new p;t.getSectionSettings("content").snapshot(c);var y=t.getSectionSettings("title");y&&y.snapshot(_);for(var b=[],S=0;S<h;++S){var w=S*o,x=w+o;x>n&&(x=n);for(var T=x-w,I=0;I<a;++I){var R,D,E,A=l[I],k=A.columns.length,P=new u(null,{colCount:k,rowCount:T,rowHeight:r});if(P.setColumnWidths(A.widths),s){P.addHeaderRows();var M=P.getHeader();for(M.setDefaultRowHeight(s),R=0;R<k;++R)E=(D=A.columns[R]).index,f(_.getCellElement(E,0),M.getCell(R,0)),m(M,R,D.alignment)}for(R=0;R<k;++R){for(var F=(E=(D=A.columns[R]).index)===d.index,G=0;G<T;++G){var B=w+G,L=c.getCellElement(E,B),O=P.getCell(R,G);F?f(L,O):g(L,O)}m(P,R,D.alignment)}P._tableNum=S,b.push(P)}}var N=i.pageCount,H=document.createElement("div");for(H.className="tr-printing-root",H.style.display="block",S=0;S<N;++S)H.appendChild(b[S].getElement());return H},_applyCss:function(){C._styles||(C._styles=(0,n.CA)([".tr-printing-mode, .tr-printing-mode body",["width: 100%;","height: unset;","padding: 0;","margin: 0;","background-color: white;","overflow: hidden; /* No scrollbar for printing */"],".tr-printing-mode body > *",["display: none;"],".tr-printing-root",["width: 100%;","background-color: white;"],".tr-printing-root > *",["page-break-after: always;"],".tr-printing-root table",["border-collapse: collapse;","table-layout:fixed; /* To force clipping text */"],".tr-printing-root tr",["height: 21px;","color: unset;","background-color: unset;"],".tr-printing-root td",["border: 1px solid black;","padding: 0 5px;","height: unset;","font-size: 12px;","text-overflow: ellipsis;","white-space: nowrap;","overflow: hidden;"],".tr-printing-root td, .tr-printing-root tr:hover td, .tr-printing-root tr td:hover",["color: black;","background-color: white;"],".tr-printing-root .tr-align-left",["text-align: left;"],".tr-printing-root .tr-align-right",["text-align: right;"],".tr-printing-root .tr-align-center",["text-align: center;"],".tr-printing-root .cell ef-icon",["margin-top: 3px;"],".tr-printing-root .cell .sort-symbol",["margin-left: 4px;","display: inline-block;"],".tr-printing-root .cell .sort-symbol",["margin-left: 4px;","display: inline-block;"],".tr-printing-root .priority-symbol:last-child,\t\t.tr-printing-root .sortable-indicator:last-child,\t\t.tr-printing-root .sort-symbol:last-child",["margin-right: 0px;"],".tr-printing-root .sortable-indicator:last-child",["opacity: 0.5;"],".tr-printing-root .folder .expander",["margin-right: 7px;","margin-left: 3px;"],".tr-printing-root .folder .fallback-arrow",["vertical-align: middle;","font-size: 7px;","line-height: 1;","display: inline-block;","transform: scaleX(1.5);","font-family: Arial;"],".tr-printing-root .folder.closed .expander",["transform: translate(0px, 1px) rotate(-90deg);"],".tr-printing-root .folder.closed .expander .fallback-arrow",["transform: translate(0px, -1px) rotate(-90deg) scaleX(1.5);"],".tr-printing-root .print-inline",["display:inline-block;"],".tr-printing-root .text",["vertical-align: middle;","overflow: hidden;","text-overflow: ellipsis;"],".tr-printing-root .group-header, .tr-printing-root .ric-arrow",["color: black !important;"],".tr-printing-root .group-header-box",["display: inline-block;","width: 180px;"],".tr-printing-root .group-header-box *",["display: inline-block;"],".tr-printing-root .tr-percent-bar",["position:relative;","text-align: left;","overflow: hidden;","white-space: nowrap;"],".tr-printing-root .tr-percent-bar>div",["position:relative;","display: inline-block;","height: 8px;","vertical-align: middle;"],".tr-printing-root .tr-percent-bar>div>div",["position:absolute;","height: 100%;"],".tr-printing-root .tr-percent-bar>span",["display: inline-block;","vertical-align: middle;","box-sizing: border-box;","padding-left: 4px;","padding-right: 4px;","overflow: hidden;","max-width: 100%;"],".tr-printing-wrapper",["white-space: nowrap;","overflow: hidden;"],"/* For safety */",".tr-printing-wrapper > *",["display: inline-block;","vertical-align: top;"],".tr-printing-wrapper  > * + *",["margin-left: 4px;"],".tr-blank-page",["page-break-after: always;","height: 1px;","visibility: hidden;"],".tr-printing-flex-row",["display: flex;","width: 100%;","min-width: 0;","align-items: center;"],".tr-printing-flex-row>*:not(.tr-printing-float-right)",["flex: 1 1 0;"],"@media screen",[(0,n.CA)(["/* For debugging */",".tr-printing-mode",["overflow: auto;","background-color: lightgrey;"],".tr-printing-root > * + *",["margin-top: 4px;"]])]]),(0,n.kM)(C._styles,document.body))},print:function(t){var e=null;if(t&&(C._applyCss(),e=v(t)),e){C._grid=e;var i=C._getPrintTrait();C._isObserving||i.observe(),i.print()}else C._grid=null},_getPrintTrait:function(){var t=C._printTrait;return t||((t=C._printTrait=new h).addEventListener("pageCounting",C._onPageCounting),t.addEventListener("beforeprint",C._onBeforePrint),t.addEventListener("afterprint",C._onAfterPrint)),t},_newColInfo:function(t,e){var i=t.getMinimumColumnWidth(e);i<=0&&(i=50);var o=t.getColumnScalability(e);return{index:e,width:o?i:t.getColumnWidth(e),data:t.getColumnData(e),scalability:o,minWidth:i,alignment:t.getColumnAlignment(e)}},_removePrintElements:function(){o.i.removeParent(C._blankPage),C._blankPage=null,o.i.removeParent(C._printElem),C._printElem=null},_onPageCounting:function(t){C._removePrintElements(),C._printInfo=C.getPreFlightInfo(C._grid,t),C._printInfo.pageCount&&(C._blankPage=h.createBlankPages(C._printInfo.pageCount),t.bodyElement.appendChild(C._blankPage))},_onBeforePrint:function(t){C._removePrintElements(),C._printInfo&&C._printInfo.pageCount&&(C._printElem=C.createPrintElement(C._grid,C._printInfo),t.bodyElement.appendChild(C._printElem))},_onAfterPrint:function(t){C._removePrintElements(),C._isObserving||C._getPrintTrait().unobserve(),C._printInfo=null,C._grid&&(C._grid.updateLayout(),C._grid=null)}};C.Options;var y=i(515),b={"EFX-GRID":1,"ATLAS-BLOTTER":1,"EF-GRID":1},S={BODY:1,HTML:1,"EFX-GRID":1,"ATLAS-BLOTTER":1,"EF-GRID":1},w=function(t,e){if(t&&"none"!==t.style.display){var i=t.style;null==e&&(e="inline-block"!==i.display),e?(i.display="inline-block",i.verticalAlign="top"):(i.display="",i.verticalAlign="")}},x=function(t){this._onDelayedConfiguration=this._onDelayedConfiguration.bind(this),this._onConfiguration=this._onConfiguration.bind(this),this._onWrapCountChanged=this._onWrapCountChanged.bind(this),this._tables=[],t&&(this._emeraldGrid="EF-GRID"===t.tagName,this._tables.push(t))};r.p.inherits(x,d.pB),x.prototype._tables=null,x.prototype._configObj=null,x.prototype._extensions=null,x.prototype._tableCount=1,x.prototype._emeraldGrid=!1,x.prototype._ready=!1,x.prototype._wrapSize=0,x.synchronizeVScrollbar=function(t,e,i){if(!t||!e)return Promise.reject("Host elements for vertical and horizontal scrollbars are not specified.");if(t===e)return Promise.reject("Vertical and horizontal scrollbars cannot have the same host element.");if(S[t.tagName]||S[e.tagName])return Promise.reject("Host element cannot be body element.");var o,n,r=0;i&&(b[i.tagName]&&(i=[i]),r=i.length||0);var s=[];for(o=0;o<r;++o)(n=i[o])&&b[n.tagName]&&s.push(n);if(!(r=s.length))return Promise.reject("No grid element detected for scrollbar synchronization.");var l=[];for(o=0;o<r;++o)if((n=s[o]).api)l.push(Promise.resolve(n));else{var a=n._deferredConfig;a||(a=n._deferredConfig=new y.B,n.addEventListener("configured",x._onGridConfigured)),l.push(a.promise)}return Promise.all(l).then(x._onVScrollbarSynchronization.bind(null,t,e,s))},x._onGridConfigured=function(t){var e=t.currentTarget;if(e.removeEventListener("configured",x._onGridConfigured),e._deferredConfig){var i=e._deferredConfig;e._deferredConfig=null,i.resolve(e)}},x._onVScrollbarSynchronization=function(t,e,i){o.i.removeChildren(e),t.style.overflow="hidden",t.style.position="relative",e.style.whiteSpace="nowrap",e.style.overflow="auto hidden";for(var n=i.length,r=i[0].api.getCoreGrid(),s=0;s<n;++s){var l=i[s],a=l.api.getCoreGrid();w(l,!0),s>0?r.synchronizeVScrollbar(a):(a.getVScrollbar().attachToExternalElement(t),l._vScrollbarSynchronization=!0)}o.i.appendChild(e,i)},x.prototype.setGridConfig=function(t){if(this._configObj=t,t){this._extensions=t.extensions?t.extensions.slice():[];var e=this._tables[0];e&&(t=this._cloneConfig(),e.addEventListener("configured",this._onDelayedConfiguration),e.config=t)}},x.prototype._onDelayedConfiguration=function(t){this._ready=!1,setTimeout(this._onConfiguration,10)},x.prototype._onConfiguration=function(){this._ready||(this._ready=!0,this._wrapSize?this._wrapTable(this._wrapSize):this._setTableCount(this._tableCount))},x.prototype.dispose=function(){for(var t=this._tables.length,e=0;e<t;++e)this._tables[e].dispose();this._tables=[],this._extensions=null,this._ready=!1},x.prototype._cloneConfig=function(){var t=null;if(this._configObj&&(t=(0,n.kI)(this._configObj),Array.isArray(t.columns))){var e=this._tables[0].api?this._tables[0].api.getConfigObject():this._configObj;t.columns=e.columns.slice()}return t||{}},x.prototype.getTableCount=function(){return this._tables.length},x.prototype._setTableCount=function(t){if(this._tableCount=t>0?t:1,this._ready){var e=this._tables.length;this._tableCount>e?this._addTables(this._tableCount-e):this._tableCount<e&&this._removeTables(e-this._tableCount)}},x.prototype.setTableCount=function(t){this._wrapSize&&this._wrapTable(0),this._setTableCount(t)},x.prototype._addTable=function(t){var e=this._tables[0],i=e.parentNode,o=e.api.getCoreGrid(),n=e.api.getDataView(),r=o.getPlugin("SortableTitlePlugin"),s=o.getPlugin("DragAndDropTitlePlugin"),l=this._cloneConfig();if(l.extensions=this._generateExtensions(),delete l.staticDataRows,delete l.rows,delete l.dataModel,this._wrapSize){var a=n.getWrappedViews();l.dataView=a[t-1],l.grid=e.api}else{l.SortableTitle=r,l.DragAndDropTitle=s;var u=function(t){for(var e=new Array(t),i=0;i<t;++i)e[i]={};return e}(n.getRowCount());this._emeraldGrid?l.dataModel={data:u}:l.rows=u}var d=document.createElement(e.tagName);w(d,!0),d.config=l;var h=this._tables[this._tables.length-1];return i.insertBefore(d,h.nextSibling),d},x.prototype._addTables=function(t){if(t&&!(t<0)){var e=this._tables[0];w(e,!0);for(var i=0;i<t;++i){var o=this._addTable(this._tables.length);this._tables.push(o)}this._wrapSize||e._vScrollbarSynchronization&&x.synchronizeVScrollbar(e.api.getCoreGrid().getVScrollbar().getParent(),e.parentNode,this._tables)}},x.prototype._removeTables=function(t){var e=this._tables.length;if(e-t<1&&(t=e-1),t)for(var i=0;i<t;++i){var o=this._tables.pop();o.config=null,o.parentNode&&o.parentNode.removeChild(o)}},x.prototype._wrapTable=function(t){if(this._wrapSize=t>0?t:0,this._ready){var e=this._tables[0];this._wrapSize?(e.style.display="none",e.api.getCoreGrid().getVScrollbar().disable()):(e.style.display="",w(e,!0),e.api.getCoreGrid().getVScrollbar().disable(!1));var i=e.api.getDataView();i.listen("wrapCountChanged",this._onWrapCountChanged),i.wrapView(this._wrapSize)}},x.prototype.wrapTable=function(t){t&&this._tableCount>1&&this._setTableCount(1),(!t||t<0)&&(t=0),this._wrapSize!==t&&this._wrapTable(t)},x.prototype._onWrapCountChanged=function(t){t.prevCount<t.newCount&&this._addTables(t.newCount-t.prevCount),t.newCount<t.prevCount&&this._removeTables(t.prevCount-t.newCount)},x.prototype.getTable=function(t){return t||(t=0),this._tables[t]||null},x.prototype._generateExtensions=function(){for(var t=this._extensions?this._extensions.length:0,e=new Array(t),i=0;i<t;++i){var o=this._extensions[i];o.hasMultiTableSupport&&o.hasMultiTableSupport()?e[i]=o:e[i]=new o.constructor}return e},x.prototype._execAll=function(t,e){for(var i=this._tables.length,o=0;o<i;++o){var n=this._tables[o];void 0!==e?arguments.length>2?n.api[t].apply(n.api,Array.prototype.slice.call(arguments,1)):n.api[t](e):n.api[t]()}},x.prototype.insertRow=function(t,e){if(!this._emeraldGrid)if(this._wrapSize)this.getTable().api.insertRow(t,e);else for(var i=this._tables.length,o=0;o<i;++o)this._tables[o].api.insertRow(t,e)},x.prototype.removeRow=function(t){if(!this._emeraldGrid)if(null==t&&(t=this.getRowCount()-1),this._wrapSize)this.getTable().api.removeRow(t);else for(var e=this._tables.length,i=0;i<e;++i)this._tables[i].api.removeRow(t)},x.prototype.getRowCount=function(){return this.getTable().api.getRowCount()},x.prototype.insertColumn=function(t,e){if(!this._emeraldGrid)for(var i=this._tables.length,o=0;o<i;++o)this._tables[o].api.insertColumn(t,e)},x.prototype.removeColumn=function(t){if(!this._emeraldGrid)for(var e=this._tables.length,i=0;i<e;++i)this._tables[i].api.removeColumn(t)},x.prototype.getColumnCount=function(){return this.getTable().api.getColumnCount()},i(787);var T={texts:["If a dog and cat had a baby together that grew up and worked a desk job he'd be a Cog in the machine","I'm still upset that Tie Domi didn't name his child Tyson","A tagline for a car company that prides itself on its morals and ethics: Take the High Road","Logan Broger is amazing and a wonderful boy according to Logan's mom","You know the Grammys are a joke when Future doesn't win Best Everything","If you were a member of the Bloods and became paralyzed do you then become a member of the Crips?","Curling is the best sport named after something you do to your hair","You say potatoe, I say starchy carbs","If you work for an ad agency and getting paid for it aren't you the one who is being influenced by advertising?","Are there Out of Stock photos? Gafuffle","I think of a lot of good ideas when going to the bathroom I guess I have a real stream of consciousness","Most streets are two way streets","Why does that make love so special?","A tagline for an airline: Take the High Road","Rumour has it targeted online advertising was developed because the internet was upset that you could read it but it couldn't read you","This is a true fact: I never had a fear of heights until I fell off a roof","A tagline for a special highway that is easy to navigate while under the influence of drugs: Take the High Road","I'm the only person in the world with my name","We need more werkin and less twerkin if you ask me","If Fantasy Hockey actually lived up to its name, every team would have Henrik Lundqvist and Joffrey Lupul on it","I'm in a band that does Metallica covers with our private parts it's called Myphallica","Smiling could easily be misinterpreted for showing your teeth to someone because they said something that made you happy","We say we are walking the dog, but the dog always leads","Tim Horton was a hockey player but is the name of a coffee chain, which means my dream of a goat sanctuary being my legacy is not unrealistic","I started a sensory deprivation chamber business it involves really dark curtains, ear plugs, and a sleeping mask","Do we make money or does money make us? Chezwich","Pantone is a colour but also the singular version of pants","Logan Ipsum will loop at some point","Thank you for using my words in your work","You should listen to my mixtape (check out the rest of my portfolio)","I have never known a Jack that was in good enough shape to name bodybuilding after him","Twitter is the rice of social media","Injuries always keep you OUT of things","For the name of an act as serious as killing someone, assassination literally translates to buttbuttination","Why don't we call glasses duocles","If you wake up with a giant zit, you are really facing your fears when you look in the mirror","Cemeteries are just garbage dumps filled with humans","I have a moral code, but I haven't figured out how to read it yet","I bet most serial killers play the drums","To Catch A Predator would have been a great name for a Steve Irwin show","If the word kerning is kerned poorly, it kind of looks like learning which is appropriate because both are important","North America should be called Russia since people are always moving so fast","I don't need a big house, just a two floor condo you could say I have lofty expectations","Even faithful and simple Sancho is forced to deceive him at certain points","The novel is considered a satire of orthodoxy, veracity and even nationalism","In exploring the individualism of his characters, Cervantes helped move beyond the narrow literary conventions of the chivalric romance literature that he spoofed","which consists of straightforward retelling of a series of acts that redound to the knightly virtues of the hero","The character of Don Quixote became so well known in its time that the word quixotic was quickly adopted by many languages","Characters such as Sancho Panza and Don Quixote's steed, Rocinante, are emblems of Western literary culture","It stands in a unique position between medieval chivalric romance and the modern novel","The former consist of disconnected stories featuring the same characters and settings with little exploration of the inner life of even the main character"]};T.words=T.texts.join(" ").split(" ").filter((function(t){return t.length>1})),T.companyName=["Yost-Prohaska","Wehner, Howe and Brown","Gusikowski-Legros","Wolff-Windler","McGlynn, Douglas and Kilback","MacGyver Group","Spinka, Stracke and Huel","Howell, Wolff and Emmerich","Blick-O'Reilly","Dibbert, Buckridge and Leffler","Skiles, Kuhlman and Johns","Daugherty Group","Reilly, Toy and Bayer","Bradtke, Mohr and Weber","Thompson, Bruen and Friesen","Rempel-Bednar","Kunze LLC","Pfannerstill Group","Moen-Larkin","Larson LLC","Haag-Feest","Hauck-Bartell","Rohan-Kohler","Waters, Homenick and Pagac","Ziemann Group","Reynolds, Turcotte and Bosco","Graham, Morar and Waters","Cassin Inc","Bosco-Terry","Stanton-Blick","Prohaska and Sons","Pouros, Daugherty and Pfannerstill","Bogan-Cormier","O'Kon-Mills","Mueller-Schmeler","Runte-Trantow","Muller Inc","Shanahan, Ryan and Orn","Huel LLC","Shanahan-Zulauf","Emard-Schuster","Muller Inc","Collier, Muller and Yundt","Wehner, Prohaska and Harber","Ondricka-Stehr","Towne LLC","Feil Inc","Braun, Kihn and Treutel","Ebert-MacGyver","Harris LLC"],T.industry=["Specialty Chemicals","Office Equipment/Supplies/Services","Electric Utilities: Central","Trucking Freight/Courier Services","Auto Parts:O.E.M.","Oil Refining/Marketing","Biotechnology: Biological Products (No Diagnostic Substances)","Computer Software: Programming, Data Processing","Farming/Seeds/Milling","Biotechnology: Laboratory Analytical Instruments","Finance: Consumer Services","Major Banks","Investment Managers","Oilfield Services/Equipment","Paper","Transportation Services"],T.market=["NYSE","NASDAQ","SET","DJI","HSCEI","HKEX","NIKKEI"],T.country=[{name:"Afghanistan",code:"AF"},{name:"land Islands",code:"AX"},{name:"Albania",code:"AL"},{name:"Algeria",code:"DZ"},{name:"American Samoa",code:"AS"},{name:"AndorrA",code:"AD"},{name:"Angola",code:"AO"},{name:"Anguilla",code:"AI"},{name:"Antarctica",code:"AQ"},{name:"Antigua and Barbuda",code:"AG"},{name:"Argentina",code:"AR"},{name:"Armenia",code:"AM"},{name:"Aruba",code:"AW"},{name:"Australia",code:"AU"},{name:"Austria",code:"AT"},{name:"Azerbaijan",code:"AZ"},{name:"Bahamas",code:"BS"},{name:"Bahrain",code:"BH"},{name:"Bangladesh",code:"BD"},{name:"Barbados",code:"BB"},{name:"Belarus",code:"BY"},{name:"Belgium",code:"BE"},{name:"Belize",code:"BZ"},{name:"Benin",code:"BJ"},{name:"Bermuda",code:"BM"},{name:"Bhutan",code:"BT"},{name:"Bolivia",code:"BO"},{name:"Bosnia and Herzegovina",code:"BA"},{name:"Botswana",code:"BW"},{name:"Bouvet Island",code:"BV"},{name:"Brazil",code:"BR"},{name:"British Indian Ocean Territory",code:"IO"},{name:"Brunei Darussalam",code:"BN"},{name:"Bulgaria",code:"BG"},{name:"Burkina Faso",code:"BF"},{name:"Burundi",code:"BI"},{name:"Cambodia",code:"KH"},{name:"Cameroon",code:"CM"},{name:"Canada",code:"CA"},{name:"Cape Verde",code:"CV"},{name:"Cayman Islands",code:"KY"},{name:"Central African Republic",code:"CF"},{name:"Chad",code:"TD"},{name:"Chile",code:"CL"},{name:"China",code:"CN"},{name:"Christmas Island",code:"CX"},{name:"Cocos (Keeling) Islands",code:"CC"},{name:"Colombia",code:"CO"},{name:"Comoros",code:"KM"},{name:"Congo",code:"CG"},{name:"Congo, The Democratic Republic of the",code:"CD"},{name:"Cook Islands",code:"CK"},{name:"Costa Rica",code:"CR"},{name:"Cote D'Ivoire",code:"CI"},{name:"Croatia",code:"HR"},{name:"Cuba",code:"CU"},{name:"Cyprus",code:"CY"},{name:"Czech Republic",code:"CZ"},{name:"Denmark",code:"DK"},{name:"Djibouti",code:"DJ"},{name:"Dominica",code:"DM"},{name:"Dominican Republic",code:"DO"},{name:"Ecuador",code:"EC"},{name:"Egypt",code:"EG"},{name:"El Salvador",code:"SV"},{name:"Equatorial Guinea",code:"GQ"},{name:"Eritrea",code:"ER"},{name:"Estonia",code:"EE"},{name:"Ethiopia",code:"ET"},{name:"Falkland Islands (Malvinas)",code:"FK"},{name:"Faroe Islands",code:"FO"},{name:"Fiji",code:"FJ"},{name:"Finland",code:"FI"},{name:"France",code:"FR"},{name:"French Guiana",code:"GF"},{name:"French Polynesia",code:"PF"},{name:"French Southern Territories",code:"TF"},{name:"Gabon",code:"GA"},{name:"Gambia",code:"GM"},{name:"Georgia",code:"GE"},{name:"Germany",code:"DE"},{name:"Ghana",code:"GH"},{name:"Gibraltar",code:"GI"},{name:"Greece",code:"GR"},{name:"Greenland",code:"GL"},{name:"Grenada",code:"GD"},{name:"Guadeloupe",code:"GP"},{name:"Guam",code:"GU"},{name:"Guatemala",code:"GT"},{name:"Guernsey",code:"GG"},{name:"Guinea",code:"GN"},{name:"Guinea-Bissau",code:"GW"},{name:"Guyana",code:"GY"},{name:"Haiti",code:"HT"},{name:"Heard Island and Mcdonald Islands",code:"HM"},{name:"Holy See (Vatican City State)",code:"VA"},{name:"Honduras",code:"HN"},{name:"Hong Kong",code:"HK"},{name:"Hungary",code:"HU"},{name:"Iceland",code:"IS"},{name:"India",code:"IN"},{name:"Indonesia",code:"ID"},{name:"Iran, Islamic Republic Of",code:"IR"},{name:"Iraq",code:"IQ"},{name:"Ireland",code:"IE"},{name:"Isle of Man",code:"IM"},{name:"Israel",code:"IL"},{name:"Italy",code:"IT"},{name:"Jamaica",code:"JM"},{name:"Japan",code:"JP"},{name:"Jersey",code:"JE"},{name:"Jordan",code:"JO"},{name:"Kazakhstan",code:"KZ"},{name:"Kenya",code:"KE"},{name:"Kiribati",code:"KI"},{name:"Korea, Democratic People'S Republic of",code:"KP"},{name:"Korea, Republic of",code:"KR"},{name:"Kuwait",code:"KW"},{name:"Kyrgyzstan",code:"KG"},{name:"Lao People'S Democratic Republic",code:"LA"},{name:"Latvia",code:"LV"},{name:"Lebanon",code:"LB"},{name:"Lesotho",code:"LS"},{name:"Liberia",code:"LR"},{name:"Libyan Arab Jamahiriya",code:"LY"},{name:"Liechtenstein",code:"LI"},{name:"Lithuania",code:"LT"},{name:"Luxembourg",code:"LU"},{name:"Macao",code:"MO"},{name:"Macedonia, The Former Yugoslav Republic of",code:"MK"},{name:"Madagascar",code:"MG"},{name:"Malawi",code:"MW"},{name:"Malaysia",code:"MY"},{name:"Maldives",code:"MV"},{name:"Mali",code:"ML"},{name:"Malta",code:"MT"},{name:"Marshall Islands",code:"MH"},{name:"Martinique",code:"MQ"},{name:"Mauritania",code:"MR"},{name:"Mauritius",code:"MU"},{name:"Mayotte",code:"YT"},{name:"Mexico",code:"MX"},{name:"Micronesia, Federated States of",code:"FM"},{name:"Moldova, Republic of",code:"MD"},{name:"Monaco",code:"MC"},{name:"Mongolia",code:"MN"},{name:"Montenegro",code:"ME"},{name:"Montserrat",code:"MS"},{name:"Morocco",code:"MA"},{name:"Mozambique",code:"MZ"},{name:"Myanmar",code:"MM"},{name:"Namibia",code:"NA"},{name:"Nauru",code:"NR"},{name:"Nepal",code:"NP"},{name:"Netherlands",code:"NL"},{name:"Netherlands Antilles",code:"AN"},{name:"New Caledonia",code:"NC"},{name:"New Zealand",code:"NZ"},{name:"Nicaragua",code:"NI"},{name:"Niger",code:"NE"},{name:"Nigeria",code:"NG"},{name:"Niue",code:"NU"},{name:"Norfolk Island",code:"NF"},{name:"Northern Mariana Islands",code:"MP"},{name:"Norway",code:"NO"},{name:"Oman",code:"OM"},{name:"Pakistan",code:"PK"},{name:"Palau",code:"PW"},{name:"Palestinian Territory, Occupied",code:"PS"},{name:"Panama",code:"PA"},{name:"Papua New Guinea",code:"PG"},{name:"Paraguay",code:"PY"},{name:"Peru",code:"PE"},{name:"Philippines",code:"PH"},{name:"Pitcairn",code:"PN"},{name:"Poland",code:"PL"},{name:"Portugal",code:"PT"},{name:"Puerto Rico",code:"PR"},{name:"Qatar",code:"QA"},{name:"Reunion",code:"RE"},{name:"Romania",code:"RO"},{name:"Russian Federation",code:"RU"},{name:"RWANDA",code:"RW"},{name:"Saint Helena",code:"SH"},{name:"Saint Kitts and Nevis",code:"KN"},{name:"Saint Lucia",code:"LC"},{name:"Saint Pierre and Miquelon",code:"PM"},{name:"Saint Vincent and the Grenadines",code:"VC"},{name:"Samoa",code:"WS"},{name:"San Marino",code:"SM"},{name:"Sao Tome and Principe",code:"ST"},{name:"Saudi Arabia",code:"SA"},{name:"Senegal",code:"SN"},{name:"Serbia",code:"RS"},{name:"Seychelles",code:"SC"},{name:"Sierra Leone",code:"SL"},{name:"Singapore",code:"SG"},{name:"Slovakia",code:"SK"},{name:"Slovenia",code:"SI"},{name:"Solomon Islands",code:"SB"},{name:"Somalia",code:"SO"},{name:"South Africa",code:"ZA"},{name:"South Georgia and the South Sandwich Islands",code:"GS"},{name:"Spain",code:"ES"},{name:"Sri Lanka",code:"LK"},{name:"Sudan",code:"SD"},{name:"Suriname",code:"SR"},{name:"Svalbard and Jan Mayen",code:"SJ"},{name:"Swaziland",code:"SZ"},{name:"Sweden",code:"SE"},{name:"Switzerland",code:"CH"},{name:"Syrian Arab Republic",code:"SY"},{name:"Taiwan, Province of China",code:"TW"},{name:"Tajikistan",code:"TJ"},{name:"Tanzania, United Republic of",code:"TZ"},{name:"Thailand",code:"TH"},{name:"Timor-Leste",code:"TL"},{name:"Togo",code:"TG"},{name:"Tokelau",code:"TK"},{name:"Tonga",code:"TO"},{name:"Trinidad and Tobago",code:"TT"},{name:"Tunisia",code:"TN"},{name:"Turkey",code:"TR"},{name:"Turkmenistan",code:"TM"},{name:"Turks and Caicos Islands",code:"TC"},{name:"Tuvalu",code:"TV"},{name:"Uganda",code:"UG"},{name:"Ukraine",code:"UA"},{name:"United Arab Emirates",code:"AE"},{name:"United Kingdom",code:"GB"},{name:"United States",code:"US"},{name:"United States Minor Outlying Islands",code:"UM"},{name:"Uruguay",code:"UY"},{name:"Uzbekistan",code:"UZ"},{name:"Vanuatu",code:"VU"},{name:"Venezuela",code:"VE"},{name:"Viet Nam",code:"VN"},{name:"Virgin Islands, British",code:"VG"},{name:"Virgin Islands, U.S.",code:"VI"},{name:"Wallis and Futuna",code:"WF"},{name:"Western Sahara",code:"EH"},{name:"Yemen",code:"YE"},{name:"Zambia",code:"ZM"},{name:"Zimbabwe",code:"ZW"}];const I=T;var R=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10],D={X_RIC_NAME:{type:"string"},CF_NAME:{type:"string",prefix:!0,suffix:" Name"},CF_LAST:{type:"number",min:.01,max:1e3,prec:2},PCTCHNG:{type:"number",min:-1,max:1,prec:2,suffix:"%"},PCTCHNG2:{type:"float",min:-20,max:20,prec:2,suffix:"%"},CF_CURR:{fixedValue:"USD"},INDICATOR:{type:"number",min:0,max:5},CF_TICK:{type:"number",min:1,max:3,changeOnly:!0},PRCTCK_1:{type:"set",members:["⇧","B⇧","↑","B↑","26","1",'"1"',"-1","⇩","B⇩","↓","B↓","27","2",'"2"']},CF_NETCHNG:{type:"number",min:-100,max:100},CF_VOLUME:{type:"number",min:0,max:1e7},RI_FLAG:{type:"set",members:["R","Q","I","_",""]},RI_CODE:{type:"number",min:0,max:2},STATUS:{type:"number",min:0,max:6},YRLOW:{type:"number",min:0,max:20},YRHIGH:{type:"number",min:200,max:2e3},CFLOW:{type:"number",min:0,max:20},CFHIGH:{type:"number",min:200,max:2e3},LOW_YLD:{type:"set",members:[void 0,0,1,2,3,4,5,10,11,15,20]},HIGH_YLD:{type:"set",members:[void 0,200,300,400,500,1e3,1500,2e3]},CF_YIELD:{type:"set",members:[void 0,0,10,20,30,40,50,100,200,300,400,500]},"TR.IPODate":{type:"isoDate",min:Date.now()-63072e6,max:Date.now()},"TR.Volume":{type:"number",min:2e3,max:1e7},"TR.Price52WeekHigh":{type:"number",min:100,max:300,prec:2},"TR.Price52WeekLow":{type:"number",min:1,max:200,prec:2},"TR.InvalidField":{type:"set",members:[void 0]},percent:{type:"number",min:0,max:101},number_1:{type:"number",min:1,max:100},number_2:{type:"number",min:-100,max:100},index4:{type:"number",min:0,max:4},index5:{type:"number",min:0,max:5},index10:{type:"number",min:0,max:10},index100:{type:"number",min:0,max:100},group3:{type:"set",members:["Group_A","Group_B","Group_C"]},group4:{type:"set",members:["Group_1","Group_2","Group_3","Group_4"]},float_1:{type:"float",min:0,max:1,prec:2},float_2:{type:"float",min:0,max:100,prec:2},float_3:{type:"float",min:-1,max:1,prec:2},precision4:{type:"float",min:-10,max:10,prec:4},precision8:{type:"float",min:-100,max:100,prec:8},boolean:{type:"boolean"},date:{type:"date",min:15e11,max:16e11},date1:{type:"function",generate:function(t,e){return null==e?B(6e11,16e11,e):new Date(1e12+1e9*e)}},ISODate:{type:"isoDateObject",min:Date.now()-63072e6,max:Date.now()},word:{type:"string",min:1,max:1},phrase:{type:"string",min:2,max:5},words:{type:"string",min:1,max:20},words1:{type:"string",min:2,max:8},words2:{type:"string",min:3,max:10},words3:{type:"string",min:5,max:15},sentence:{type:"string",min:8,max:20},id:{type:"function",hash:0,generate:function(t,e){return null==e&&(e=null!=t._id?t._id:-1,t._id=++e),e||0}},companyName:{type:"set",members:I.companyName},industry:{type:"set",members:I.industry},market:{type:"set",members:I.market},country:{type:"set",members:I.country}},E=function(t,e){if(t){var i=e;"function"==typeof e&&(i={type:"function",generate:e}),D[t]=i}},A=function(t,e,i,o){t||(t=0),null==e&&(e=100);var n=(e-t)*function(t){return"number"==typeof t?function(t){var e=1e4*Math.sin(113*t);return(e*=e)-(0|e)}(t):Math.random()}(o)+t;if(i>0){var r=R[i];return Math.floor(n*r)/r}return null!=i?Math.floor(n):n},k=function(t,e,i){return A(t,e+1,0,i)},P=function(t,e,i){return A(t,e,0,i)},M=function(t,e){return P(0,t,e)},F=function(t){return 0===k(0,1,t)},G=function(t,e){return t?t[M(t.length,e)]:String.fromCharCode(k(65,90,e))},B=function(t,e,i){(t=t||Date.now()-63072e6)instanceof Date&&(t=t.getTime()),(e=e||Date.now())instanceof Date&&(e=e.getTime());var o=k(0,(e-t)/1e3,i);return new Date(t+1e3*o)},L=function(t,e,i){for(var o=t<e?P(t,e,i):t,n=new Array(o),r=0;r<o;++r){null!=i&&(i*=1.17*(r+1));var s=M(I.words.length,i);n[r]=I.words[s]}return n.join(" ")},O=function(t,e,i){var o={},n=0;e&&("number"==typeof e?n=o.numRows=e:(o=e,n=e.numRows||e.numRow||e.rowCount,null!=e.seed&&-1===(i=e.seed)&&(i=null))),n||(n=1),t?Array.isArray(t)||(t=[t+""]):t=[""];for(var r=t.length,s=[],l=0;l<n;++l){for(var a=[],u=0;u<r;++u){var d=t[u];a.push(N(d,e,i).value)}null!=i&&++i,s.push(a)}return{data:s,seed:i,fields:t}},N=function(t,e,i){var o=function(t){return D[t]||{}}(t);if(o.type||(o.type="number",E(t,o)),o.fixedValue)return o.value=n,o;null!=i&&(null==o.hash&&(o.hash=function(t){for(var e=0,i=t?t.length:0;--i>=0;)e+=t.charCodeAt(i)*(i+.9879);return e}(t)),i+=o.hash);var n,r=null!=o.min?o.min:100,s=null!=o.max?o.max:1e4;if("string"===o.type)n=null!=o.min||null!=o.max?L(r,s,i):e&&e.text||"";else if("set"===o.type)n=G(o.members,i);else if("date"===o.type)n=B(r,s,i);else if("isoDate"===o.type)n=B(r,s,i).toISOString().slice(0,10);else if("isoDateObject"===o.type)n=B(r,s,i),n=new Date(n.toISOString().slice(0,10));else if("boolean"===o.type)n=F(i);else if("function"===o.type)o.field=t,n=o.generate(o,i);else{var l=null!=o.prec?o.prec:0;n=A(r,s,l,i)}return o.value=n,o},H=function(t){this._seed=null!=t?t:null};H.prototype._seed=null,H.prototype.generate=function(t,e){var i=O(t,e,this._seed);return this._seed=i.seed,i.data},H.prototype.generateRecords=function(t,e){var i=O(t,e,this._seed);this._seed=i.seed;for(var o=(t=i.fields).length,n=i.data,r=n.length;--r>=0;){for(var s=n[r],l={},a=0;a<o;++a)l[t[a]]=s[a];n[r]=l}return n},H.prototype.generateQuoteData=function(t,e){var i=function(t,e,i){var o=N(t,e,i),n=o.value+"";return o.prefix&&("string"==typeof o.prefix?n=o.prefix+n:e.prefix&&(n=e.prefix+" "+n)),o.suffix&&(n+=o.suffix),"string"===o.type&&(o.value=n),o.formattedValue=n,o}(t,e,this._seed);return null!=this._seed&&++this._seed,i},H.prototype.getSeed=function(){return this._seed},H.prototype.setSeed=function(t){"number"==typeof t&&(this._seed=t)},H.prototype.randBetween=function(t,e){var i=P(t,e,this._seed);return null!=this._seed&&++this._seed,i},H.prototype.randInt=function(t,e){var i=k(t,e,this._seed);return null!=this._seed&&++this._seed,i},H.prototype.randIndex=function(t){var e=M(t,this._seed);return null!=this._seed&&++this._seed,e},H.prototype.randNumber=function(t,e,i){var o=A(t,e,i,this._seed);return null!=this._seed&&++this._seed,o},H.prototype.randBoolean=function(){var t=F(this._seed);return null!=this._seed&&++this._seed,t},H.prototype.randMember=function(t){var e=G(t,this._seed);return null!=this._seed&&++this._seed,e},H.prototype.randDate=function(t,e){var i=B(t,e,this._seed);return null!=this._seed&&++this._seed,i},H.prototype.randString=function(t,e){var i=L(t,e,this._seed);return null!=this._seed&&++this._seed,i},H.seed=null,H.generate=function(t,e){var i=O(t,e,H.seed);return H.seed=i.seed,i.data},H.generateRecord=function(t,e,i){Array.isArray(t)||(t=[t+""]);var o={};null!=e&&("number"==typeof e?i=e:e&&(o=e));for(var n=t.length,r={},s=0;s<n;++s){var l=t[s];r[l]=N(l,o,i).value}return r},H.generateRecords=function(t,e){var i=O(t,e,H.seed);H.seed=i.seed;for(var o=(t=i.fields).length,n=i.data,r=n.length;--r>=0;){for(var s=n[r],l={},a=0;a<o;++a)l[t[a]]=s[a];n[r]=l}return n},H.addFieldInfo=E,H.randNumber=A,H.randInt=k,H.randBetween=P,H.randIndex=M,H.randBoolean=F,H.randMember=G,H.randDate=B,H.randString=L,H.toRecords=function(t,e){if(!Array.isArray(t))return null;Array.isArray(e)||(e=e?[e+""]:[]);for(var i=t.length,o=new Array(i),n=0;n<i;++n)for(var r=o[n]={},s=t[n],l=s&&s.length||0,a=0;a<l;++a){var u=s[a];if(void 0!==u){var d=e[a];d||0===d||(d=a+""),r[d]=u}}return o};var z={"TR.NonExistField":!0,"TR.NotExistField":!0,CF_IGNORE_FIELD:!0};var V=i(251),U=new H,W={request:function(t,e){if(e)return Promise.resolve(JSON.stringify(e));var i,o,n,r,s,l,a,u,d,h=[];if("Col,date|,Row,In|,va,T,NoEmptyTickers"===t.output){for(l=t.identifiers,a=t.formula.trim().split(/(?=,TR.)/),u=[],d=z,i=0;i<a.length;i++)d[o=a[i]]||u.push(o);var c=u.length;h.push([{h:!0,i:"instrument",v:"Instrument"},{h:!0,i:"date",v:"Date"}]);for(var p=0;p<c;p++){var _,g=u[p],f=g.match(/TR.(.*)(?=\()/)[0].replace("TR.",""),m=g.toLowerCase(),v=m.match(/sdate=(.*)[,]/),C=m.match(/edate=(.*)[)]/),y=v?v[1]:V.ou.format(new Date,"YYYY-MM-DD"),b=C[1];y>b&&(_=y,y=b,b=_);var S=(+new Date(b)-+new Date(y))/864e5;for(i=0;i<=S;i++){var w=new Date(new Date(y).setDate(new Date(y).getDate()+i)),x={h:!0,v:V.ou.format(w,"YYYY-MM-DDT00:00:00")};0===p&&h[0].push(x)}var T=l;for(i=0;i<T.length;i++){var I=[T[i],f];for(s=1;s<=S+1;s++){var R=H.generateRecord(f);I.push(R[f])}h.push(I)}}}else{for(l=t.identifiers,a=W.splitFields(t.formula),u=[],d=z,i=0;i<a.length;i++)d[o=a[i]]||u.push(o);for(h[0]=[{h:!0,i:"instrument",v:"Instrument"}],i=0;i<u.length;i++)o=u[i],h[0].push({h:!0,r:o.toUpperCase().trim()});var D={};n=l.length;var E=U.generate(u,n);for(i=0;i<n;++i){var A=l[i];(r=D[A])||(r=D[A]=E[i]).unshift(A),h.push(r)}if(h.length>0&&U.randInt(1,10)<=3){var k=U.randInt(0,h.length-1);n=(r=h[k]).length;var P=new Array(n);for(P[0]=r[0],i=1;i<n;i++)P[i]="";h.splice(k+1,0,P)}}return Promise.resolve(JSON.stringify({rows:h}))},splitFields:function(t){if(!t)return[];var e=t.split(/,(?![^()]*\))/);return e.map((function(t){return t.trim()}))}},j=new H,q={request:function(t,e){if(e)return Promise.resolve(JSON.stringify(e));var i,o,n,r,s=t.instruments,l=t.fields,a=z;for(l=[],i=0;i<t.fields.length;i++)a[(o=t.fields[i]).name]||l.push(o);var u={};n=s.length;var d=[],h=j.generate(l,n);for(i=0;i<n;++i){var c=s[i];(r=u[c])||(r=u[c]=h[i]).unshift(c),d.push(r)}if(d.length>0&&j.randInt(1,10)<=3){var p=j.randInt(0,d.length-1);n=(r=d[p]).length;var _=new Array(n);for(_[0]=r[0],i=1;i<n;i++)_[i]="";d.splice(p+1,0,_)}var g=[{displayName:"Instrument"}];for(i=0;i<l.length;i++)o=l[i],g.push({displayName:o.name,field:o.name.toUpperCase()});return Promise.resolve(JSON.stringify({data:d,headers:[g]}))}},K=function(){this._dict={}};K.prototype._dict,K.prototype._count=0,K.prototype.addItem=function(t,e){if(t&&null!=e){var i=this._dict[t];return i?i.push(e):this._dict[t]=[e],++this._count,!0}return!1},K.prototype.addItems=function(t,e){if(t){if(!Array.isArray(e))return this.addItem(t,e);var i=e?e.length:0;if(i){var o=this._dict[t];return o||(o=this._dict[t]=[]),Array.prototype.push.apply(o,e),this._count+=i,!0}}return!1},K.prototype.removeItem=function(t,e){var i=this._dict[t];if(i){var o=i.indexOf(e);if(o>=0)return i.length>1?i.splice(o,1):delete this._dict[t],--this._count,!0}return!1},K.prototype.removeItemsByKey=function(t){var e=this._dict[t];return!!e&&(delete this._dict[t],this._count-=e.length,!0)},K.prototype.removeAllItems=function(){return!!this._count&&(this._dict={},this._count=0,!0)},K.prototype.getItems=function(t){return this._dict[t]||null},K.prototype.getAllItems=function(){if(this._count>0){var t=[],e=this._dict;for(var i in e)Array.prototype.push.apply(t,e[i]);return t}return null},K.prototype.getItemCount=function(t){if(t){var e=this._dict[t]||null;return e?e.length:0}return this._count},K.prototype.getAllKeys=function(){return Object.keys(this._dict)};var Y=function(t,e){return t.ric+"_"+e.ric},J=function(t){var e,i,o,n=t;for(e=n.length-1;e>0;e--)i=Math.floor(Math.random()*(e+1)),o=n[e],n[e]=n[i],n[i]=o;return n.forEach(Z),n.sort(X)},Z=function(t,e){t.CHILD_ORDER=e},X=function(t,e){return t.CHILD_ORDER-e.CHILD_ORDER},Q=function(){};Q.prototype._lastSub=null,Q.prototype._configObj=null,Q.prototype.config=function(t){t&&(this._configObj=t),this._lastSub&&this._configObj&&this._lastSub.config(this._configObj)},Q.prototype.create=function(t){return this._lastSub=new $(t||this._configObj),this._lastSub},Q.prototype.isSkipHeaderSupported=function(){return!0},Q.prototype.setUpdateInterval=function(t,e){this._lastSub?this._lastSub.setUpdateInterval(t,e):(this._configObj||(this._configObj={}),this._configObj.minInterval=t,this._configObj.maxInterval=e)},Q.prototype.setPercentageDataUpdate=function(t){this._lastSub?this._lastSub.setPercentageDataUpdate(t):(this._configObj||(this._configObj={}),this._configObj.percentageDataUpdate=t)};var $=function(t){this._onSubscriptionResponse=this._onSubscriptionResponse.bind(this),this._subMap={},this._dataMap=new K,this._fields={},this._events={},this._dataGen=new H,this.config(t)};$.prototype._minInterval=750,$.prototype._maxInterval=850,$.prototype._percentageDataUpdate=.1,$.prototype.config=function(t){if(t){var e=t.minInterval;"number"==typeof e&&(this._minInterval=e,this._minInterval>this._maxInterval&&(this._maxInterval=this._minInterval)),"number"==typeof(e=t.maxInterval)&&(this._maxInterval=e,this._minInterval>this._maxInterval&&(this._minInterval=this._maxInterval)),"number"==typeof(e=t.percentageDataUpdate)&&(this._percentageDataUpdate=e/100)}},$.prototype.setUpdateInterval=function(t,e){"number"==typeof t&&(this._minInterval=t),"number"==typeof e&&(this._maxInterval=e)},$.prototype.setPercentageDataUpdate=function(t){"number"==typeof t&&(this._percentageDataUpdate=Math.round(t/100))},$.prototype.setSeed=function(t){this._dataGen.setSeed(t)},$.prototype.addRic=function(t,e){return this._addSymbol(t,!1,e)},$.prototype.addChain=function(t,e){return this._addSymbol(t,!0,e)},$.prototype.addFields=function(t){if(t){"string"==typeof t&&(t=[t]);for(var e=t.length,i=0;i<e;++i)this._fields[t[i]]=!0}},$.prototype.removeSubscription=function(t){var e=this._subMap[t];if(e&&(this._dispatch("subscriptionRemoved",{subs:[e]}),delete this._subMap[t],this._dataMap.removeItem(e.ric,e),e.chain)){for(var i=e.children,o=i.length,n=0;n<o;++n){var r=i[n];this._dataMap.removeItem(Y(e,r),r),r.parent=null}e.children=null,e.ricList=null}},$.prototype.removeRic=$.prototype.removeSubscription,$.prototype.removeChain=$.prototype.removeSubscription,$.prototype.removeAllSubscriptions=function(){var t=this._working;if(this.stop(),this._hasListener("subscriptionRemoved")){var e=[];for(var i in this._subMap)e.push(this._subMap[i]);e.length>0&&this._dispatch("subscriptionRemoved",{subs:e})}this._subMap={},this._dataMap.removeAllItems(),t&&this.start()},$.prototype.removeFields=function(t){"string"==typeof t&&(t=[t]);for(var e=t.length,i=0;i<e;++i){var o=t[i];this._fields[o]&&delete this._fields[o]}},$.prototype.removeAllFields=function(){var t=!1;for(var e in this._fields){t=!0;break}t&&(this._fields={})},$.prototype.start=function(){this._working=!0,this._connect()},$.prototype.stop=function(){this._working=!1,this._timerId&&(window.clearTimeout(this._timerId),this._timerId=0)},$.prototype.dispose=function(){this.stop(),this._subMap=null,this._dataMap&&(this._dataMap.removeAllItems(),this._dataMap=null),this._fields=null,this._events=null},$.prototype.addEventListener=function(t,e){if(e){var i=this._events[t];i?i.indexOf(e)<0&&i.push(e):this._events[t]=[e]}},$.prototype.removeEventListener=function(t,e){var i=this._events?this._events[t]:null;if(i){var o=i.indexOf(e);o>=0&&i.splice(o,1)}},$.prototype.removeAllEventListeners=function(){this._events={}},$.prototype.getSubscription=function(t){return this._subMap[t]||null},$.prototype.getRic=function(t){var e=this._subMap[t];return e?e.ric:""},$.prototype.getAllFields=function(){return this._fields},$.prototype.hasField=function(t){return this._fields[t]||!1},$.prototype.filter=function(t,e){return this};var tt=function(t,e){for(var i in t)e[i]=t[i];return e};$.prototype._addSymbol=function(t,e,i){if(!t)return null;if(i||0===i)i+="";else do{i="_"+this._runningSubId+++"_"}while(this._subMap[i]);if(this._subMap[i])return window.console.log("WARNING: Cannot add ric with duplicate id"),null;e&&(t=t.replace("0#",""));var o={};o.ric=t,o.chain=e,o.id=i,o.dataId=i+t,this._subMap[i]=o,this._dataMap.addItem(t,o);var n=this._dataMap.getItems(t),r=n.length;this._dispatch("subscriptionAdded",{subs:[o]});var s,l=null,a=0;if(e)if(1===r)for(o.children=[],a=$.simpleDigest(t)%10+4,s=0;s<a;++s)(l={}).ric="Child_"+String.fromCharCode(65+s),l.id=i,l.dataId=i+l.ric,l.parent=o,o.children.push(l),l.CHILD_ORDER=s,this._dataMap.addItem(Y(o,l),l);else{var u=n[0].children;for(a=u.length,o.children=new Array(a),s=0;s<a;++s)(l={}).ric=u[s].ric,l.id=i,l.dataId=i+l.ric,l.parent=o,o.children[s]=l,this._dataMap.addItem(Y(o,l),l)}return r>1&&this._working&&setTimeout(this._updateDuplicateSymbol.bind(this,t),10),this._connect(),i},$.simpleDigest=function(t){for(var e=t.length,i=0,o=0;o<e;++o)i+=t.charCodeAt(o);return i},$.prototype._connect=function(){if(this._working&&!this._timerId){var t=this._dataGen.randInt(this._minInterval,this._maxInterval);this._timerId=window.setTimeout(this._onSubscriptionResponse,t)}},$.prototype._onSubscriptionResponse=function(){this._timerId=0;var t=this._dataMap.getAllKeys(),e=t?t.length:0;if(e){var i=(this._percentageDataUpdate-.02)*e;i=i>0?i:1;var o=(this._percentageDataUpdate+.02)*e;o=o<e?o:e;for(var n,r=this._dataGen.randInt(i,o),s=this._fields,l=0;l<r;l++){var a,u,d,h=t[this._dataGen.randIndex(e)],c=this._dataMap.getItems(h),p=c[0],_=p.parent,g=this._dataGen.randBoolean();if(void 0,(n=h.match(/\./g))&&n.length>1&&_&&g){var f=_.children,m=(f=J(f)).length,v=f.indexOf(p);for(p.CHILD_ORDER=v,a=this._generateQuoteData(p,s),d=c.length,u=0;u<d;++u){for(var C=0;C<m;C++){var y=f[C];if(c[u]===y)a.CHILD_ORDER=y.CHILD_ORDER,this._dispatchDataChanged(c[u],a);else{var b=y.CHILD_ORDER;this._dispatchDataChanged(y,{X_RIC_NAME:y.ric,CHILD_ORDER:b})}}this._dispatchPostUpdate({childOrderChange:!0})}}else for(a=this._generateQuoteData(p,s),d=c.length,u=0;u<d;++u){var S=c[u].CHILD_ORDER;null!=S&&(a.CHILD_ORDER=S),this._dispatchDataChanged(c[u],a)}}this._connect()}else this._connect()},$.prototype._dispatchPostUpdate=function(t){this._dispatch("postUpdate",t)},$.prototype._generateQuoteData=function(t,e){var i=t.ric,o=t.prevData,n={},r={text:i,prefix:t.parent?t.parent.ric:""};for(var s in e){var l=this._dataGen.generateQuoteData(s,r),a=s+"_FORMATTED";if(o){if(l.changeOnly&&o[s]===l.value)continue;o[s]=l.value,o[a]=l.formattedValue}n[s]=l.value,n[a]=l.formattedValue}return null!=n.X_RIC_NAME&&null!=n.INDICATOR&&n.INDICATOR>0&&(n.X_RIC_NAME="/"+n.X_RIC_NAME),n},$.prototype._getChildSubByRic=function(t,e){var i=t.children;if(i)for(var o=i.length,n=0;n<o;++n){var r=i[n];if(r.ric===e)return r}return null},$.prototype._updateDuplicateSymbol=function(t){var e=this._dataMap.getItems(t);if(e){var i=e.length;if(!(i<2)){var o,n=e[0],r=n.prevData,s=!!n.chain;if(r)for(o=1;o<i;++o){var l=e[o];l.prevData||this._dispatchDataChanged(l,r)}if(s){var a=n.ricList;if(a){var u=a.length;for(o=1;o<i;++o)for(var d=e[o],h=d.ricList,c=h?h.length:0;c<u;++c){var p=a[c],_=this._getChildSubByRic(n,p),g=this._getChildSubByRic(d,p);_&&g&&_.prevData&&this._dispatchDataChanged(g,_.prevData)}}}}}},$.prototype._dispatchDataChanged=function(t,e){var i=tt(e,{}),o={};o.ric=t.ric,o.values=i,o.subId=t.id;var n=t.prevData;if(!n){n={},t.prevData=n,o.type="statusUpdated",i.STATUS=1,i.STATUS_FORMATTED=this._statusMap[1],i.SUB_ID=t.id,tt(i,n);var r=t.parent;if(r){var s=r.ricList;s||(s=r.ricList=[]),r.ricList.push(t.ric)}}this._dispatch("dataChanged",o)},$.prototype.onFeedStatusChanged=function(t,e){return window.setTimeout((function(){e([{key:"Q",name:"IDN_RDF",state:"up"}])}),1e3),this},$.prototype._hasListener=function(t){var e=this._events[t];return!!e&&e.length>0},$.prototype._dispatch=function(t,e){var i=this._events[t];if(i)for(var o=i.length,n=0;n<o;++n)i[n](e)},$.prototype._subMap=null,$.prototype._fields=null,$.prototype._events=null,$.prototype._working=!1,$.prototype._timerId=0,$.prototype._runningSubId=0,$.prototype._statusMap={0:"PENDING",1:"OK",2:"STALE",3:"INFO",4:"CLOSED",5:"DELAYED",6:"NOPERM",7:"REACHLIMIT",8:"C_COMPLETE",9:"C_CLOSE",10:"C_EMPTY",11:"C_NOTCHAIN",12:"C_ERR",13:"C_NOBEGIN",14:"C_NOEND"};var et={};et.DataGrid=(0,n.kI)(q),et.DataGrid.request=function(t){return q.request(t).then((function(t){return JSON.parse(t)}))},et.Adc=(0,n.kI)(W),et.Adc.request=function(t){return W.request(t).then((function(t){return JSON.parse(t)}))},et.setInvalidFields=function(t){if(t&&"string"==typeof t)z[t]=!0;else if(Array.isArray(t))for(var e=0;e<t.length;e++)z[t[e]]=!0};var it={};it.Quotes=new Q,it.Data=et,it.init=function(t){return t&&it.Quotes.config(t),new Promise((function(t,e){setTimeout((function(){t(it)}),300)}))},it.ready=function(t){return it.init(t)}},735:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>BasicSection});var _refinitiv_ui_efx_grid_utils__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(377),_util_Section__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(854),_refinitiv_ui_efx_grid_extensions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(800);class BasicSection extends _util_Section__WEBPACK_IMPORTED_MODULE_1__.${fields=["id","number_1","number_2","companyName","word","boolean","float_1","float_2","date"];activeFields=["id","number_1","companyName","word","boolean","float_1","date"];activeColumns=[];allAvailableColumns=[];rowAmount=10;autoHideScrollbar=!0;noColumnDragging=!1;rowHighlighting=!0;textSelect=!1;rowVirtualization=!0;columnVirtualization=!1;customHeaderRowHeight=!1;headerRowHeight=32;customRowHeight=!1;rowHeight=32;topSection=!0;sorting=!0;customColumnWidth=!1;columnWidth=200;customColumnMinWidth=!1;columnMinWidth=50;extensionList=["AutoTooltip","CellSelection","Checkbox","ColumnDragging","ColumnFitter","ColumnFormatting","ColumnGrouping","ColumnResizing","ColumnSelection","ColumnStack","ConditionalColoring","ContentWrap","ContextMenu","FilterInput","HeatMap","InCellEditing","Pagination","PercentBar","RangeBar","RowColoring","RowDragging","RowFiltering","RowGrouping","RowSegmenting","RowSelection","StatisticsRow","TextFormatting","TitleWrap","Zoom"];selectedExtensions=[];dialog=null;defaultDisabled={headerRowHeight:!0,rowHeight:!0,columnWidth:!0,columnMinWidth:!0};constructor(t){super(t);var e=this;this.allAvailableColumns=this.fields.map((function(t){return{id:t,name:t,field:t}})),this.activeColumns=this.allAvailableColumns.filter((function(t){return e.activeFields.includes(t.field)}))}getSectionName(){return"Basic"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),this._createColumnSelectionBtn(e,"columnSelect","Columns ","Select active columns"),this._createMultiCombobox(e,"selectedExtensions","Active extensions ",this.extensionList),this._createTextInput(e,"rowAmount","Rows ");var i=document.createElement("div");e.appendChild(i),e.appendChild(document.createElement("hr")),e.appendChild(document.createElement("hr")),this._createCheckbox(e,"autoHideScrollbar","Auto hide scrollbar"),this._createCheckbox(e,"noColumnDragging","Disable column dragging"),this._createCheckbox(e,"rowHighlighting","Row highlighting"),this._createCheckbox(e,"textSelect","Text selection"),this._createCheckbox(e,"rowVirtualization","Row virtualization"),this._createCheckbox(e,"columnVirtualization","Column virtualization"),this._createCheckbox(e,"topSection","Display header"),this._createCheckbox(e,"sorting","Allow sorting"),e.appendChild(document.createElement("hr")),e.appendChild(document.createElement("hr")),i=document.createElement("div"),this._createCheckbox(i,"customHeaderRowHeight","Custom header row height",["headerRowHeight"],!0),this._createTextInput(i,"headerRowHeight",null,!0,this.customHeaderRowHeight),e.appendChild(i),i=document.createElement("div"),this._createCheckbox(i,"customRowHeight","Custom content row height",["rowHeight"],!0),this._createTextInput(i,"rowHeight",null,!0,this.customRowHeight),e.appendChild(i),i=document.createElement("div"),this._createCheckbox(i,"customColumnWidth","Custom column width",["columnWidth"],!0),this._createTextInput(i,"columnWidth",null,!0,this.customColumnWidth),e.appendChild(i),i=document.createElement("div"),this._createCheckbox(i,"customColumnMinWidth","Custom column min width",["columnMinWidth"],!0),this._createTextInput(i,"columnMinWidth",null,!0,this.customColumnMinWidth),e.appendChild(i),t.innerHTML="",t.appendChild(e);var o=this;selectedExtensions.addEventListener("click",(function(t){o._dispatch("extension-changed",t)}))}getConfig(configObj){var t=this,columns=this.activeColumns.map((function(e){var i=e;return t.customColumnWidth&&(i.width=t.columnWidth),t.customColumnMinWidth&&(i.minWidth=t.columnMinWidth),i})),dataRows=_refinitiv_ui_efx_grid_utils__WEBPACK_IMPORTED_MODULE_0__.NH.generateRecords(this.fields,{numRows:this.rowAmount});if(configObj.columns=columns,configObj.staticDataRows=dataRows,this.autoHideScrollbar||(configObj.autoHideScrollbar=!1),this.noColumnDragging&&(configObj.noColumnDragging=!0),this.rowHighlighting||(configObj.rowHighlighting=!1),this.textSelect&&(configObj.textSelect=!0),this.rowVirtualization||(configObj.rowVirtualization=!1),this.columnVirtualization&&(configObj.columnVirtualization=!0),this.customHeaderRowHeight&&(configObj.headerRowHeight=this.headerRowHeight),this.customRowHeight&&(configObj.rowHeight=this.rowHeight),this.topSection||(configObj.topSection=!1),this.sorting||(configObj.sorting={sortableColumns:!1}),this.selectedExtensions.length){configObj.extensions=[];for(var i=0;i<this.selectedExtensions.length;i++){var extName=this.selectedExtensions[i],ext=4==this.gridVersion?new tr[extName+"Extension"]:eval(`new ${extName}()`);configObj.extensions.push(ext)}}return configObj}_createColumnSelectionBtn(t,e,i,o){var n=this,r=document.createElement("div");if(i){var s=document.createElement("label");s.setAttribute("for",e),s.textContent=i,r?r.appendChild(s):t.appendChild(s)}var l=document.createElement(6==this.gridVersion?"ef-button":"coral-button");l.textContent=o,l.setAttribute("id",e),l.style.width="auto";var a=function(t){n.activeColumns=t.detail.value,n._dispatch("value-changed",t)};l.addEventListener("click",function(){n.dialog||(n.dialog=document.createElement("column-selection-dialog")),n.dialog.config={data:n.allAvailableColumns,visibleItems:n.activeColumns,confirm:a},n.dialog.show()}.bind(this),!1),r?(r.appendChild(l),t.appendChild(r)):t.appendChild(l)}}},854:(t,e,i)=>{i.d(e,{$:()=>r});var o=function(){};o.prototype._events=null,o.prototype._listenerCount=0,o.prototype.addEventListener=function(t,e){if(t&&e){this._events||(this._events={});var i=this._events[t];i?i.indexOf(e)<0&&(i.push(e),++this._listenerCount):(this._events[t]=[e],++this._listenerCount)}},o.prototype.removeEventListener=function(t,e){var i=this._events?this._events[t]:null;if(i){var o=i.indexOf(e);o>=0&&(i.splice(o,1),--this._listenerCount)}},o.prototype.removeAllEventListeners=function(){this._events=null,this._listenerCount=0},o.prototype.hasListener=function(t){if(this._listenerCount){if(t){var e=this._events?this._events[t]:null;return!!e&&e.length>0}return!0}return!1},o.prototype.getListener=function(t,e){if(t){var i=this._events?this._events[t]:null;if(i)return e||(e=0),i[e]||null}return null},o.prototype.addListener=function(t,e){var i=t?t[e]:null;"function"==typeof i&&this.addEventListener(e,i)},o.prototype._prepareEventArguments=function(t,e){return e},o.prototype._dispatch=function(t,e){var i=this._events?this._events[t]:null;if(i){e=this._prepareEventArguments(t,e);for(var o=i.length,n=0;n<o;++n)i[n](e)}},o.preventDefault=function(t){t&&t.preventDefault&&(t.preventDefault(),t.stopPropagation())};const n=o;class r extends n{isActive=!1;gridVersion=null;constructor(t){super(),this.gridVersion=t}_createTextInput(t,e,i,o,n){var r;if(o||(r=document.createElement("div")),i){var s=document.createElement("label");s.setAttribute("for",e),s.textContent=i,r?r.appendChild(s):t.appendChild(s)}var l=document.createElement(6==this.gridVersion?"ef-text-field":"coral-text-field");l.setAttribute("value",this[e]),l.setAttribute("id",e),l.style.width="auto",this.defaultDisabled&&this.defaultDisabled[e]&&(l.disabled=!n),l.addEventListener("value-changed",function(t){this[e]=t.target.value,this._dispatch("value-changed",t)}.bind(this),!1),r?(r.appendChild(l),t.appendChild(r)):t.appendChild(l)}_createCheckbox(t,e,i,o,n){var r=document.createElement(6==this.gridVersion?"ef-checkbox":"coral-checkbox");if(r.setAttribute("id",e),this.defaultDisabled&&this.defaultDisabled[e]&&r.setAttribute("disabled",!0),this[e]&&r.setAttribute("checked",!0),i&&(r.textContent=i),r.addEventListener("checked-changed",function(t){var i=t.target.checked;if(this[e]=i,o&&o.length)for(var n of o)document.getElementById(n).disabled=!i;this._dispatch("value-changed",t)}.bind(this),!1),n)t.appendChild(r);else{var s=document.createElement("div");s.appendChild(r),t.appendChild(s)}}_createMultiCombobox(t,e,i,o){var n=document.createElement("div"),r=document.createElement(6==this.gridVersion?"ef-combo-box":"coral-combo-box");if(r.setAttribute("multiple",!0),i){var s=document.createElement("label");s.setAttribute("for",e),s.textContent=i,n.appendChild(s)}o&&(o=o.map((function(t){return{label:t,value:t}})),r.data=o),this[e]&&(r.values=this[e]),this.defaultDisabled&&this.defaultDisabled[e]&&r.setAttribute("disabled",!0),r.setAttribute("id",e),r.addEventListener("value-changed",function(t){this[e]=t.target.values,this._dispatch("value-changed",t)}.bind(this),!1),n.appendChild(r),t.appendChild(n)}_createCombobox(t,e,i,o,n){var r=document.createElement("div"),s=document.createElement(6==this.gridVersion?"ef-combo-box":"coral-combo-box");if(i){var l=document.createElement("label");l.setAttribute("for",e),l.textContent=i,r.appendChild(l)}o&&(o=o.map((function(t){return{label:t,value:t}})),s.data=o),this[e]&&(s.value=this[e]),this.defaultDisabled&&this.defaultDisabled[e]&&(s.disabled=!n),s.setAttribute("id",e),s.addEventListener("value-changed",function(t){this[e]=t.target.value,this._dispatch("value-changed",t)}.bind(this),!1),null==n?(r.appendChild(s),t.appendChild(r)):t.appendChild(s)}addToTab(){var t=document.getElementById("tabs"),e=document.createElement(6==this.gridVersion?"ef-tab":"coral-tab"),i=this.getSectionName();e.label=i,e.value=i,e.id=i,"Basic"===i&&(e.active=!0),4==this.gridVersion&&e.addEventListener("tap",(t=>{t.target.label&&this.buildSection&&(this.buildSection(),document.querySelectorAll("coral-tab").forEach((t=>t.active=!1)),t.target.active=!0)})),t.appendChild(e),this.isActive=!0}removeTab(t){var e=document.getElementById("tabs"),i=document.getElementById(t);e.removeChild(i),this.isActive=!1}}}},__webpack_module_cache__={};function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={exports:{}};return __webpack_modules__[t](i,i.exports,__webpack_require__),i.exports}__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var __webpack_exports__={};(()=>{var t=__webpack_require__(735),e=__webpack_require__(854);class i extends e.${noResizing=!1;preserveGridSize=!1;preserveProportion=!1;defaultDisabled={};constructor(t){super(t)}getSectionName(){return"ColumnResizing"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),this._createCheckbox(e,"preserveGridSize","Preserve grid size"),this._createCheckbox(e,"preserveProportion","Preserve column proportion"),this._createCheckbox(e,"noResizing","No resizing"),t.innerHTML="",t.appendChild(e)}getConfig(t){var e={};return this.noResizing&&(e.noResizing=!0),this.preserveGridSize&&(e.preserveGridSize=!0),this.preserveProportion&&(e.preserveProportion=!0),Object.keys(e).length>0&&this.isActive&&(t.columnResizing=e),t}}class o{constructor(t){this.member=t?t.replace("Plugin",""):""}toJSON(){return"$new "+this.member+"()$"}}class n extends e.${defaultDisabled={};constructor(t){super(t)}getSectionName(){return"ConditioinalColoring"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),t.innerHTML="",t.appendChild(e)}getConfig(t){var e={};return Object.keys(e).length>0&&this.isActive&&(t.conditionalColoring=e),t}}class r extends e.${applyGrouping=!1;enableAlignment=!1;textAlignment="left";alignmentOptions=["left","center","right"];enableTooltip=!1;tooltipText="";defaultDisabled={textAlignment:1,tooltipText:1};constructor(t){super(t)}getSectionName(){return"ColumnGrouping"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),this._createCheckbox(e,"applyGrouping","Apply basic grouping");var i=document.createElement("div");this._createCheckbox(i,"enableAlignment","Group header text alignment",["textAlignment"],!0),this._createCombobox(i,"textAlignment",null,this.alignmentOptions,this.enableAlignment),e.appendChild(i),i=document.createElement("div"),this._createCheckbox(i,"enableTooltip","Group header tooltip",["tooltipText"],!0),this._createTextInput(i,"tooltipText",null,!0,this.enableTooltip),e.appendChild(i),t.innerHTML="",t.appendChild(e)}getConfig(t){var e=[];if(this.applyGrouping){var i=t.columns.length;i>1&&e.push({id:"g1",name:"Group 1",children:[t.columns[0].field,t.columns[1].field]}),i>3&&(e.push({id:"g2",name:"Group 2",children:[t.columns[2].field,t.columns[3].field]}),e.push({id:"g3",name:"Group 3",children:["g1","g2"]}))}if(e.length>0&&this.isActive){for(var o=0;o<e.length;o++){var n=e[o];this.enableAlignment&&(n.alignment=this.textAlignment),this.enableTooltip&&(n.tooltip=this.tooltipText||!0)}t.columnGrouping=e}return t}}class s extends e.${applyStacking=!1;spreadingMode=!1;defaultDisabled={};constructor(t){super(t)}getSectionName(){return"ColumnStack"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),this._createCheckbox(e,"applyStacking","Apply basic stack"),this._createCheckbox(e,"spreadingMode","Use spreading mode"),t.innerHTML="",t.appendChild(e)}getConfig(t){var e={};if(this.applyStacking){var i=t.columns.length;e.stacks=[],e.stacks.push({id:"s1",name:"Stack 1",children:[t.columns[i-2].id,t.columns[i-1].id],activeColumn:t.columns[i-1].id,spreading:!!this.spreadingMode||void 0}),e.menuElement=document.getElementById("menu")}return Object.keys(e).length>0&&this.isActive&&(t.columnStack=e),t}}__webpack_require__(800);class l extends e.${useRowColoring=!1;defaultDisabled={};constructor(t){super(t)}getSectionName(){return"RowColoring"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),t.innerHTML="",t.appendChild(e)}getConfig(t){var e={};return Object.keys(e).length>0&&this.isActive&&(t.rowColoring=e),t}}class a extends e.${useRowFiltering=!1;filterIconOnHover=!1;defaultDisabled={};constructor(t){super(t)}getSectionName(){return"RowFiltering"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),this._createCheckbox(e,"filterIconOnHover","Show filter icon when hovering"),t.innerHTML="",t.appendChild(e)}getConfig(t){var e={};return this.filterIconOnHover&&(e.iconActivation="onHover"),Object.keys(e).length>0&&this.isActive&&(t.rowFiltering=e),t}}class u extends e.${useRowGrouping=!1;defaultDisabled={};constructor(t){super(t)}getSectionName(){return"RowGrouping"}buildSection(){var t=document.getElementById("section-detail"),e=document.createElement(6==this.gridVersion?"ef-panel":"coral-panel");e.setAttribute("spacing",!0),e.classList.add("two-columns"),t.innerHTML="",t.appendChild(e)}getConfig(t){var e={};return Object.keys(e).length>0&&this.isActive&&(t.rowGrouping=e),t}}var d,h,c,p,_=0,g=[],f={},m={},v={},C="";function y(){_=0,v={};for(var t=0;t<p;t++)g[t].getConfig(v);h.config=v,C=S(v),d.value=C}function b(){_||(_=setTimeout(y,500))}function S(t){var e={...t},i=t.extensions,n=i?i.length:0,r=[];if(n){for(var s=0;s<n;s++)r.push(new o(i[s].getName()));e.extensions=r}e.columnStack&&(e.columnStack={...e.columnStack},delete e.columnStack.menuElement),e.staticDataRows&&(e.staticDataRows=[...e.staticDataRows],delete e.staticDataRows);var l=JSON.stringify(e,null,4);return l.replaceAll('"$',"").replaceAll('$"',"")}document.addEventListener("DOMContentLoaded",(e=>{var o;for(d=document.getElementById("configArea"),(h=document.getElementById("grid")).addEventListener("configured",(function(t){})),c="EFX-GRID"===h.tagName?6:4,g.push(new t.p(c)),g.push(new i(c)),g.push(new r(c)),g.push(new s(c)),g.push(new n(c)),g.push(new l(c)),g.push(new a(c)),g.push(new u(c)),p=g.length,o=0;o<p;o++){var _=g[o];_.getConfig(v),_.addEventListener("value-changed",b),f[_.getSectionName()]=_}g[0].addToTab(),g[0].buildSection(),g[0].addEventListener("extension-changed",(function(t){var e=t.target.values,i=e.length;for(var n in m)e.includes(n)||(delete m[n],f[n]&&f[n].removeTab(n));for(o=0;o<i;o++){var r=e[o];m[r]||(m[r]=1,f[r]&&f[r].addToTab())}})),6==c&&tabs.addEventListener("value-changed",(t=>{t.detail&&t.detail.value&&f[t.detail.value].buildSection()})),h.config=v,C=S(v),d.value=C}))})()})();