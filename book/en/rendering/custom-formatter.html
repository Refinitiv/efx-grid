<!doctype html>
<html pandora>

<head>
  <title>Custom Rendering</title>
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <meta name="x-pandora-base" content="../">
  <meta name="x-pandora-location" content="rendering/custom-formatter.html">
  <link rel="stylesheet" href="../../../resources/styles/book.css">
  <script defer src="../../../resources/scripts/book.js"></script>
  <script defer src="../search.index.js"></script>
  <link rel="icon" href="../resources/images/icon.png">
</head>

<body>
  <pandora-book>
    <div class="header" no-print>
      <div class="book-icon" style="background-image:url(&quot;../resources/images/icon.png&quot;)"></div>
      <h1><a href="../index.html">Grid Usage Guide</a></h1>
      <div class="search">
        <input type="search" placeholder="Type to search...">
      </div>
    </div>
    <div class="content">
      <div class="sidebar" no-print>
        <pandora-nav id="8e4bbf74-bbde-4051-871a-62f087a94ccf">
          <ul>
            <li parent id="cid-0" collapsible collapsed>
              <div collapser>Getting Started</div>
              <ul>
                <li><a href="../index.html">Installation</a></li>
                <li><a href="../getting_started/typescript.html">TypeScript</a></li>
                <li><a href="../getting_started/react_guide.html">Using with React</a></li>
                <li><a href="../getting_started/angular_guide.html">Using with Angular</a></li>
                <li><a href="../getting_started/overview.html">Overview</a></li>
              </ul>
            </li>
            <li><a href="../support.html">Help and Support</a></li>
            <li parent id="cid-1" collapsible collapsed>
              <div collapser>General Concept</div>
              <ul>
                <li><a href="../general_concept/basic.html">Basic Grid Creation</a></li>
                <li><a href="../general_concept/initializing-data.html">Initializing Data</a></li>
                <li><a href="../general_concept/accessing-data.html">Accessing Data</a></li>
                <li><a href="../general_concept/event-listeners.html">Event Listeners</a></li>
                <li><a href="../general_concept/disposing-grid.html">Disposing Grid</a></li>
              </ul>
            </li>
            <li parent id="cid-2" collapsible collapsed>
              <div collapser>Showcases</div>
              <ul>
                <li><a href="../showcases/comprehensive.html">Comprehensive</a></li>
              </ul>
            </li>
            <li parent id="cid-5" collapsible collapsed>
              <div collapser>APIs</div>
              <ul>
                <li><a href="../apis/README.html">Overview</a></li>
                <li parent id="cid-3" collapsible collapsed>
                  <div collapser>Core</div>
                  <ul>
                    <li><a href="../apis/core/Cell.html">Cell</a></li>
                    <li><a href="../apis/core/CellSpans.html">CellSpans</a></li>
                    <li><a href="../apis/core/ColumnStats.html">ColumnStats</a></li>
                    <li><a href="../apis/core/DataCache.html">DataCache</a></li>
                    <li><a href="../apis/core/DataTable.html">DataTable</a></li>
                    <li><a href="../apis/core/DataView.html">DataView</a></li>
                    <li><a href="../apis/core/DragAndDropTitlePlugin.html">DragAndDropTitlePlugin</a></li>
                    <li><a href="../apis/core/ElementWrapper.html">ElementWrapper</a></li>
                    <li><a href="../apis/core/EventDispatcher.html">EventDispatcher</a></li>
                    <li><a href="../apis/core/Grid.html">Grid</a></li>
                    <li><a href="../apis/core/HScrollbar.html">HScrollbar</a></li>
                    <li><a href="../apis/core/ILayoutGrid.html">ILayoutGrid</a></li>
                    <li><a href="../apis/core/LayoutGrid.html">LayoutGrid</a></li>
                    <li><a href="../apis/core/Scrollbar.html">Scrollbar</a></li>
                    <li><a href="../apis/core/SectionSettings.html">SectionSettings</a></li>
                    <li><a href="../apis/core/Segment.html">Segment</a></li>
                    <li><a href="../apis/core/SegmentCollection.html">SegmentCollection</a></li>
                    <li><a href="../apis/core/SortableTitlePlugin.html">SortableTitlePlugin</a></li>
                    <li><a href="../apis/core/VScrollbar.html">VScrollbar</a></li>
                  </ul>
                </li>
                <li parent id="cid-4" collapsible collapsed>
                  <div collapser>Real-time Grid (EFX Grid)</div>
                  <ul>
                    <li><a href="../apis/rt_grid/ColumnDefinition.html">ColumnDefinition</a></li>
                    <li><a href="../apis/rt_grid/Grid.html">Grid</a></li>
                    <li><a href="../apis/rt_grid/RowDefinition.html">RowDefinition</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li parent id="cid-6" collapsible collapsed>
              <div collapser>Extensions</div>
              <ul>
                <li><a href="../extensions/README.html">Overview</a></li>
                <li><a href="../extensions/tr-grid-auto-tooltip.html">Auto Tooltip</a></li>
                <li><a href="../extensions/tr-grid-cell-selection.html">Cell Selection</a></li>
                <li><a href="../extensions/tr-grid-checkbox.html">Checkbox Column</a></li>
                <li><a href="../extensions/column-dragging.html">Column Dragging</a></li>
                <li><a href="../extensions/tr-grid-column-fitter.html">Column Fitter</a></li>
                <li><a href="../extensions/tr-grid-column-formatting.html">Column Formatting</a></li>
                <li><a href="../extensions/tr-grid-column-grouping.html">Column Grouping</a></li>
                <li><a href="../extensions/tr-grid-column-resizing.html">Column Resizing</a></li>
                <li><a href="../extensions/tr-grid-column-selection.html">Column Selection</a></li>
                <li><a href="../extensions/tr-grid-column-stack.html">Column Stack</a></li>
                <li><a href="../extensions/tr-grid-conditional-coloring.html">Conditional Coloring</a></li>
                <li><a href="../extensions/tr-grid-content-wrap.html">Content Wrap</a></li>
                <li><a href="../extensions/tr-grid-contextmenu.html">Context Menu</a></li>
                <li><a href="../extensions/tr-grid-filter-input.html">Filter Input</a></li>
                <li><a href="../extensions/tr-grid-heat-map.html">Heat Map</a></li>
                <li><a href="../extensions/tr-grid-in-cell-editing.html">In-Cell Editing</a></li>
                <li><a href="../extensions/tr-grid-pagination.html">Pagination</a></li>
                <li><a href="../extensions/tr-grid-percent-bar.html">Percent Bar</a></li>
                <li><a href="../extensions/tr-grid-range-bar.html">Range Bar</a></li>
                <li><a href="../extensions/tr-grid-row-dragging.html">Row Dragging</a></li>
                <li><a href="../extensions/tr-grid-row-filtering.html">Row Filtering</a></li>
                <li><a href="../extensions/tr-grid-row-grouping.html">Row Grouping</a></li>
                <li><a href="../extensions/row-segmenting.html">Row Segmenting</a></li>
                <li><a href="../extensions/tr-grid-row-selection.html">Row Selection</a></li>
                <li><a href="../extensions/tr-grid-rowcoloring.html">Row Coloring</a></li>
                <li><a href="../extensions/statistics-row.html">Statistics Row</a></li>
                <li><a href="../extensions/tr-grid-textformatting.html">Text Formatting</a></li>
                <li><a href="../extensions/tr-grid-titlewrap.html">Title Wrap</a></li>
                <li><a href="../extensions/zoom.html">Zoom</a></li>
              </ul>
            </li>
            <li parent id="cid-8" collapsible collapsed>
              <div collapser>Content Rendering</div>
              <ul>
                <li><a href="../rendering/column-formatter.html">Default Rendering</a></li>
                <li selected><a href="../rendering/custom-formatter.html">Custom Rendering</a></li>
                <li><a href="../rendering/change-formatter.html">Changing Formatter at Runtime</a></li>
                <li><a href="../rendering/formatter-event-handling.html">Event Handling in Formatter</a></li>
                <li parent id="cid-7" collapsible collapsed>
                  <div collapser>Predefined Formatter</div>
                  <ul>
                    <li><a href="../rendering/predefined-formatter.html">Overview</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-image-formatter.html">SimpleImageFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-input-formatter.html">SimpleInputFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-link-formatter.html">SimpleLinkFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-ticker-formatter.html">SimpleTickerFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/simple-toggle-formatter.html">SimpleToggleFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/percent-bar-formatter.html">PercentBarFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/text-formatter.html">TextFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-button-formatter.html">EFButtonFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-checkbox-formatter.html">EFCheckboxFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-combo-box-formatter.html">EFComboBoxFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-datetime-picker-formatter.html">EFDateTimePickerFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-icon-formatter.html">EFIconFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-number-field-formatter.html">EFNumberFieldFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-radio-button-formatter.html">EFRadioButtonFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-select-formatter.html">EFSelectFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-text-field-formatter.html">EFTextFieldFormatter</a></li>
                    <li><a href="../rendering/predefined_formatters/ef-toggle-formatter.html">EFToggleFormatter</a></li>
                  </ul>
                </li>
              </ul>
            </li>
            <li parent id="cid-9" collapsible collapsed>
              <div collapser>Data</div>
              <ul>
                <li><a href="../data/columns-and-data.html">Resetting/Clearing Data</a></li>
                <li><a href="../data/create.html">Creating Data</a></li>
                <li><a href="../data/read.html">Reading Data</a></li>
                <li><a href="../data/update.html">Updating Data</a></li>
                <li><a href="../data/delete.html">Deleting Data</a></li>
                <li><a href="../data/data-conversion.html">Data Conversion</a></li>
                <li><a href="../data/columns-and-data.html">Columns and Data</a></li>
              </ul>
            </li>
            <li parent id="cid-10" collapsible collapsed>
              <div collapser>Columns</div>
              <ul>
                <li><a href="../columns/column-resetting.html">Column Resetting</a></li>
                <li><a href="../columns/column-formatter.html">Column Formatter</a></li>
                <li><a href="../columns/column-alignment.html">Column Alignment</a></li>
                <li><a href="../columns/dynamic-add-insert-column.html">Column Add/insert</a></li>
                <li><a href="../columns/dynamic-remove-column.html">Column Hide/remove</a></li>
                <li><a href="../columns/column-width.html">Column Width</a></li>
                <li><a href="../columns/column-reordering.html">Column Reordering</a></li>
                <li><a href="../columns/column-moving.html">Column Moving</a></li>
                <li><a href="../columns/column-freezing.html">Column Freezing</a></li>
                <li><a href="../columns/column-pinning.html">Column Pinning</a></li>
                <li><a href="../columns/column-styling.html">Column Styling</a></li>
                <li><a href="../columns/custom-title-formatter.html">Column Custom Title</a></li>
                <li><a href="../columns/column-grouping.html">Column Grouping</a></li>
              </ul>
            </li>
            <li parent id="cid-11" collapsible collapsed>
              <div collapser>Rows</div>
              <ul>
                <li><a href="../rows/row-highlight-selection.html">Row Highlighting / Selection</a></li>
                <li><a href="../rows/row-height.html">Row Height</a></li>
                <li><a href="../rows/row-show-hide.html">Row Showing / Hiding</a></li>
                <li><a href="../rows/row-reordering.html">Row Reordering</a></li>
                <li><a href="../rows/add-header-footer.html">Adding Header &amp; Footer Sections</a></li>
                <li><a href="../rows/row-grouping.html">Row Grouping</a></li>
              </ul>
            </li>
            <li parent id="cid-12" collapsible collapsed>
              <div collapser>Scrollbars</div>
              <ul>
                <li><a href="../scrollbars/vertical-scrollbar.html">Vertical Scrollbar</a></li>
                <li><a href="../scrollbars/horizontal-scrollbar.html">Horizontal Scrollbar</a></li>
                <li><a href="../scrollbars/scroll-speed.html">Scroll Speed</a></li>
                <li><a href="../scrollbars/non-overlap-scrollbars.html">Non-Overlap Scrollbars</a></li>
                <li><a href="../scrollbars/scrollbar-visibility.html">Scrollbar Visibility</a></li>
                <li><a href="../scrollbars/left-side-column-pinning.html">Left Side Column Pinning/Freezing</a></li>
                <li><a href="../scrollbars/right-side-column-pinning.html">Right Side Column Pinning/Freezing</a></li>
              </ul>
            </li>
            <li parent id="cid-13" collapsible collapsed>
              <div collapser>Sorting</div>
              <ul>
                <li><a href="../sorting/sorting.html">Basic Sorting</a></li>
                <li><a href="../sorting/default-sorting.html">Default Sort</a></li>
                <li><a href="../sorting/server-side-sorting.html">Server Side Sorting</a></li>
                <li><a href="../sorting/custom-sort-logic.html">Custom Sort Logic</a></li>
                <li><a href="../sorting/multi-column-sorting.html">Multi-Column / 3-States Sorting</a></li>
                <li><a href="../sorting/sorting-get-reset.html">Get Sort States / Reset All Sorting</a></li>
              </ul>
            </li>
            <li parent id="cid-14" collapsible collapsed>
              <div collapser>Filtering</div>
              <ul>
                <li><a href="../filtering/filtering-programmatically.html">Filtering Programmatically</a></li>
                <li><a href="../filtering/filtering-auto-filter-row.html">Filter UI</a></li>
                <li><a href="../filtering/custom-filter.html">Custom Filter UI</a></li>
                <li><a href="../filtering/filtering-get-reset.html">Get Filter States / Reset All</a></li>
              </ul>
            </li>
            <li parent id="cid-15" collapsible collapsed>
              <div collapser>Utilities</div>
              <ul>
                <li><a href="../utilities/printing.html">Printing Grid</a></li>
                <li><a href="../utilities/multi-table.html">Multi-table</a></li>
                <li><a href="../utilities/native-table.html">Native HTML table</a></li>
                <li><a href="../utilities/data-generator.html">Data genarator</a></li>
              </ul>
            </li>
            <li parent id="cid-16" collapsible collapsed>
              <div collapser>Widgets</div>
              <ul>
                <li><a href="../widgets/column-format-dialog.html">Column Format Dialog</a></li>
                <li><a href="../widgets/column-selection-dialog.html">Column Selection Dialog</a></li>
                <li><a href="../widgets/filter-dialog.html">Filter Dialog</a></li>
                <li><a href="../widgets/language-support.html">Language Support</a></li>
              </ul>
            </li>
            <li parent id="cid-17" collapsible collapsed>
              <div collapser>Miscellaneous</div>
              <ul>
                <li><a href="../misc/core-apis.html">Using Core APIs</a></li>
                <li><a href="../misc/pagination.html">Pagination</a></li>
                <li><a href="../misc/loading-mask.html">Loading Mask</a></li>
                <li><a href="../misc/fifty-thosand-rows.html">50,000 Rows Handling</a></li>
                <li><a href="../misc/row-span.html">Row Span</a></li>
                <li><a href="../misc/row-expansion.html">Row Expansion</a></li>
                <li><a href="../misc/text-selection.html">Text Selection</a></li>
              </ul>
            </li>
            <li parent id="cid-18" collapsible collapsed>
              <div collapser>Migrating to EFX Grid</div>
              <ul>
                <li><a href="../migrating/from-emerald-grid.html">Emerald Grid</a></li>
              </ul>
            </li>
            <li><a href="../license.html">License</a></li>
          </ul>
        </pandora-nav>
      </div>
      <div class="main">
        <div class="reader">
          <pandora-page>
            <h1 id="custom-formatter">Custom Formatter</h1>
            <p>Since Grid utilizes a row virtualization technique, where the same cell is reused across different rows, you cannot simply just create any content and stop there. With row virtualization the custom content that you are trying to create or render will be reused in the different rows. So you have to create the content once and reuse it from the cache. Then, you need to bind data from Grid&apos;s data store to the content for each data update and scrolling.</p>
            <p>The process for writing the formatter is usually something like the following code:</p>
            <pre><code><span class="hljs-keyword">var</span> formatter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-comment">// Cache checking part (Reuse the same element)</span>
    <span class="hljs-keyword">var</span> element = cell.getContent();
    <span class="hljs-keyword">if</span> (!element) {
        <span class="hljs-comment">// Element creation part</span>
        element = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&apos;tag-name&apos;</span>);

        <span class="hljs-comment">// Apply common static settings (once per element creation) here</span>
        <span class="hljs-comment">// This could be attributes, styles, event listeners, and etc.</span>
        element.style.color = <span class="hljs-string">&quot;red&quot;</span>;
    }

    <span class="hljs-comment">// Element updating part (bind data to the UI element)</span>
    element.value = e.data; <span class="hljs-comment">// IMPORTANT</span>

    <span class="hljs-comment">// The below code is required. It does not post any significant performance impact</span>
    cell.setContent(element);
};</code></pre>
            <h2 id="defining-the-formatter">Defining the formatter</h2>
            <p>The formatter can be specified as a function on the <code>binding</code> property of the column configuration object.</p>
            <pre><code><span class="hljs-keyword">var</span> configObj = {
    ...
    columns: [
        {
            <span class="hljs-attr">field</span>: <span class="hljs-string">&quot;Field 1&quot;</span>, 
            <span class="hljs-attr">binding</span>: <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
                e.cell.setContent(e.data);
            }
        },
        ...
    ],
    ...
}</code></pre>
            <blockquote>
              <p>For displaying simple text you do not need to create a custom formatter, as Grid already has simple text as its default formatter.</p>
            </blockquote>
            <h3 id="common-form-and-structure">Common form and structure</h3>
            <p><code>binding</code> method will be called multiple times during user scrolling. The key here is to create a DOM element only once, reuse the same element and update the data every time the method is called. </p>
            <p>In general, the steps are as the following steps:</p>
            <ol>
              <li>Check if the content already exists</li>
              <li>If it exists, skip to the next step. If the content does not exist, create the content</li>
              <li>Update the data to the content</li>
              <li>Set the content to the cell</li>
            </ol>
            <p>Below is the most common form of formatter. It is recommended to write most custom formatters in this form and structure. </p>
            <pre><code><span class="hljs-keyword">var</span> formatter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> content = cell.getContent(); <span class="hljs-comment">// Utilize cache</span>
    <span class="hljs-keyword">if</span> (!content) { <span class="hljs-comment">// Check if cache exists</span>
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;xxx-xxxx&quot;</span>);
        <span class="hljs-comment">// Initialize element once</span>
        <span class="hljs-keyword">var</span> subContent = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;yyyy&quot;</span>);
        subContent.style.color = <span class="hljs-string">&quot;brown&quot;</span>; 

        <span class="hljs-keyword">var</span> subContent2 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;zz-zzz&quot;</span>);
        content._myContent = subContent2;

        content.appendChild(subContent);
        content.appendChild(subContent2);
    }

    content._myContent.textContent = e.data; <span class="hljs-comment">// IMPORTANT</span>

    cell.setContent(content); <span class="hljs-comment">// Always set the content to allow multiple types of content in the same column</span>
};</code></pre>
            <h3 id="setting-styles-in-the-formatter">Setting styles in the formatter</h3>
            <p>When making any type of modification in the <code>binding</code> method, you must reset the value back because the same cell will be reused by different rows.</p>
            <pre><code><span class="hljs-keyword">var</span> formatter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> data = e.data;
    <span class="hljs-keyword">var</span> content = cell.getContent();
    <span class="hljs-keyword">if</span> (!content) {
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>);
        content.style.color = <span class="hljs-string">&quot;salmon&quot;</span>; <span class="hljs-comment">// Static styling</span>
    }

    <span class="hljs-comment">// Dynamic styling</span>
    <span class="hljs-keyword">if</span>(data &gt; <span class="hljs-number">0</span>) {
        content.style.backgroundColor = <span class="hljs-string">&quot;green&quot;</span>;
    } <span class="hljs-keyword">else</span> <span class="hljs-keyword">if</span>(data &lt; <span class="hljs-number">0</span>) {
        content.style.backgroundColor = <span class="hljs-string">&quot;red&quot;</span>;
    } <span class="hljs-keyword">else</span> {
        content.style.backgroundColor = <span class="hljs-string">&quot;&quot;</span>; <span class="hljs-comment">// Reset the background</span>
    }
    cell.setStyle(<span class="hljs-string">&quot;fontSize&quot;</span>, <span class="hljs-built_in">Math</span>.abs(data) &gt; <span class="hljs-number">10</span> ? <span class="hljs-string">&quot;1.5em&quot;</span> : <span class="hljs-string">&quot;&quot;</span>); <span class="hljs-comment">// Styles can be applied to either the cell content or the cell itself.</span>

    content.textContent = data;
    cell.setContent(content);
};</code></pre>
            <h3 id="interactive-content">Interactive content</h3>
            <p>States must be saved back to Grid after users make changes to the content. This is because Grid&apos;s row virtualization will reuse the same content during the scroll. Also note that user interaction does not happen during the data binding. User interaction is an asynchronous operation. So do not rely on closure variables or inline functions. </p>
            <p>Contexts and values may be a different. You will need to resolve the position or context at runtime by using <a href="../apis/rt_grid/Grid.html">getRelativePosition()</a>.</p>
            <pre><code><span class="hljs-keyword">var</span> formatter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> dropdown = cell.getContent();
    <span class="hljs-keyword">if</span> (!dropdown) {
        dropdown = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;select&quot;</span>);
        dropdown.addEventListener(<span class="hljs-string">&quot;change&quot;</span>, dropdownChangeHandler); <span class="hljs-comment">// Handle user interaction</span>

        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">var</span> i = <span class="hljs-number">0</span>; i &lt; <span class="hljs-number">3</span>; ++i) {
            <span class="hljs-keyword">var</span> option = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;option&quot;</span>);
            option.value = i;
            option.textContent = <span class="hljs-string">&quot;Value &quot;</span> + i;
            dropdown.appendChild(option);
        }
    }

    dropdown.selectedIndex = e.data;
    cell.setContent(dropdown);
};
<span class="hljs-keyword">var</span> dropdownChangeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> dropdown = e.currentTarget;
    <span class="hljs-keyword">var</span> selectedIndex = dropdown.selectedIndex;

    <span class="hljs-keyword">var</span> pos = grid.api.getRelativePosition(e);
    <span class="hljs-keyword">var</span> rowDef = grid.api.getRowDefinition(pos.rowIndex);

    rowDef.setData(<span class="hljs-string">&quot;Field XXXX&quot;</span>, selectedIndex); <span class="hljs-comment">// It is important to set the new data</span>
};</code></pre>
            <blockquote>
              <p>Find out more information about event handling <a href="formatter-event-handling">here</a>.</p>
            </blockquote>
            <h3 id="content-with-multiple-states">Content with multiple states</h3>
            <p>Content with multiple states (for example, colors, disabled and invalid states) must have all states stored in the Grid. You can have as many columns&apos; data or fields as we want in order to represent the content. </p>
            <p>The example below shows input with multiple states depending on the data on other fields.</p>
            <pre><code><span class="hljs-keyword">var</span> formatter = <span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params">e</span>)</span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> rowData = e.rowData;
    <span class="hljs-keyword">var</span> inputElem = cell.getContent();
    <span class="hljs-keyword">if</span> (!inputElem) {
        inputElem = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;input&quot;</span>);
    }

    <span class="hljs-keyword">var</span> state1 = rowData[<span class="hljs-string">&quot;someField&quot;</span>];
    <span class="hljs-keyword">if</span>(state1) {
        inputElem.setAttribute(<span class="hljs-string">&quot;disabled&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
    } <span class="hljs-keyword">else</span> {
        inputElem.removeAttribute(<span class="hljs-string">&quot;disabled&quot;</span>);
    }

    <span class="hljs-keyword">var</span> state2 = rowData[<span class="hljs-string">&quot;anotherField&quot;</span>];
    <span class="hljs-keyword">if</span>(state2) {
        inputElem.setAttribute(<span class="hljs-string">&quot;error&quot;</span>, <span class="hljs-string">&quot;&quot;</span>);
    } <span class="hljs-keyword">else</span> {
        inputElem.removeAttribute(<span class="hljs-string">&quot;error&quot;</span>);
    }

    inputElem.value = e.data;
    cell.setContent(inputElem);
};</code></pre>
            <blockquote>
              <p>Note: <strong>data is completely independent from column UIs</strong>. This means you do not have to create a column for data to exist. Data can be added or removed separately from Grid&apos;s columns.</p>
            </blockquote>
            <h2 id="formatter-binding-method-parameters">Formatter/binding method parameters</h2>
            <p>Event argument <code>binding</code> method has the following parameter list:</p>
            <ul>
              <li><em>data</em> : The data value corresponding to the field and row of the cell</li>
              <li><em>cell</em> : The cell object that provides access to the DOM element of the cell</li>
              <li><em>rowIndex</em> : Index of the current row of the cell being rendered</li>
              <li><em>rowDef</em> : The row definition object</li>
              <li><em>rowData</em> : The data object that stores data of the entire row</li>
              <li><em>colIndex</em> : Index of the current column of the cell being rendered</li>
              <li><em>secton</em> : The section object hosting the current column</li>
            </ul>
            <h2 id="understanding-row-virtualization">Understanding row virtualization</h2>
            <p>The row virtualization technique is <strong>different from the lazy initialization</strong> technique, which creates more content as users scroll down through all the available rows. For example, suppose you have 10,000 rows and Grid&apos;s view port can show 20 rows. With row virtualization Grid will create content for around 24 rows (20 rows + buffer rows) throughout Grid&apos;s life cycle. With lazy initialization Grid will create content for 24 rows at first load. As users scroll down through the available rows, more and more content will be created. Eventually, all content will be created for all 10,000 rows when using the lazy initialization technique.</p>
            <p>A web page will get slower as more content/elements are put into the DOM tree. So it&apos;s better to reuse the same element whenever possible.</p>
            <h2 id="examples">Examples</h2>
            <p>Click the green button on the bottom right corner of the live example to see the code.</p>

            <div class="pandora-code-viewer" id="pid-93">
              <div class="pandora-viewer">
                <button>&lt;/&gt;</button>
              </div>
              <div class="pandora-code-view">
                <div class="pandora-toolbar">
                  <ul>
                    <li class="pandora-tab-selected" data-toggle="tab-html">HTML</li>
                    <li data-toggle="tab-js">JS</li>
                    <li data-toggle="tab-css">CSS</li>
                  </ul>
                </div>
                <div class="pandora-tab-container">
                  <pre class="pandora-tab-view tab-html">&lt;efx-grid id=&quot;grid&quot;&gt;
&lt;/efx-grid&gt;</pre>
                  <pre class="pandora-tab-view tab-js">var rangeBarFormatter = function(e) {
  var cell = e.cell;
  var bar = cell.getContent(); // Utilize caching
  if (!bar) {
    bar = document.createElement(&quot;div&quot;);
    bar.style.height = &quot;8px&quot;;
    bar.style.position = &quot;relative&quot;;
    bar.style.backgroundColor = &quot;#EA7D22&quot;;

    var indi = bar.indi = document.createElement(&quot;div&quot;);
    indi.style.position = &quot;absolute&quot;;
    indi.style.top = &quot;0&quot;;
    indi.style.left = &quot;10px&quot;;
    indi.style.width = &quot;3px&quot;;
    indi.style.height = &quot;100%&quot;;
    indi.style.backgroundColor = &quot;white&quot;;
    bar.appendChild(indi);
  }
  cell.setContent(bar);
  bar.indi.style.left = (e.data * 100) + &quot;%&quot;;
};

var capitalizer = function(e) {
  e.cell.setContent(e.data.toString().toUpperCase());
};

var yearDisplay = function(e) {
  var cell = e.cell;
  cell.setStyle(&quot;color&quot;, &quot;black&quot;);
  cell.setStyle(&quot;background-color&quot;, &quot;#EA7D22&quot;);
  cell.setContent(&quot;Year &quot; + e.data.getFullYear());
};

var fields = [&quot;companyName&quot;, &quot;market&quot;, &quot;CF_LAST&quot;, &quot;float_1&quot;, &quot;ISODate&quot;];
var records = DataGenerator.generateRecords(fields, { numRows: 40 });
var configObj = {
  columns: [
    { name: &quot;Company&quot;, field: fields[0], binding: capitalizer },
    { name: &quot;Market&quot;, field: fields[1], width: 100 },
    { name: &quot;Last&quot;, field: fields[2], width: 80 },
    { name: &quot;Buy/Sell&quot;, field: fields[3], width: 100, binding: rangeBarFormatter },
    { name: &quot;IPO&quot;, field: fields[4], alienment: &quot;center&quot;, binding: yearDisplay }
  ],
  staticDataRows: records
};

var grid = document.getElementById(&quot;grid&quot;);
grid.config = configObj;</pre>
                  <pre class="pandora-tab-view tab-css">efx-grid {
  height: 200px;
}</pre>
                  <div class="pandora-console"></div>
                </div>
              </div>
              <link rel="prefetch" href="../node_modules/tr-grid-test-resource-v6/dist/elf-halo-light.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-auto-tooltip/dist/tr-grid-auto-tooltip.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-cell-selection/dist/tr-grid-cell-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-checkbox/dist/tr-grid-checkbox.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/column-dragging/dist/column-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-fitter/dist/tr-grid-column-fitter.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-formatting/dist/tr-grid-column-formatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-grouping/dist/tr-grid-column-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-resizing/dist/tr-grid-column-resizing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-selection/dist/tr-grid-column-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-column-stack/dist/tr-grid-column-stack.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-conditional-coloring/dist/tr-grid-conditional-coloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-content-wrap/dist/tr-grid-content-wrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-contextmenu/dist/tr-grid-contextmenu.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-filter-input/dist/tr-grid-filter-input.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-heat-map/dist/tr-grid-heat-map.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-in-cell-editing/dist/tr-grid-in-cell-editing.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-pagination/dist/tr-grid-pagination.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-percent-bar/dist/tr-grid-percent-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-range-bar/dist/tr-grid-range-bar.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-dragging/dist/tr-grid-row-dragging.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-filtering/dist/tr-grid-row-filtering.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-grouping/dist/tr-grid-row-grouping.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/row-segmenting/dist/row-segmenting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-row-selection/dist/tr-grid-row-selection.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-rowcoloring/dist/tr-grid-rowcoloring.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/statistics-row/dist/statistics-row.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-textformatting/dist/tr-grid-textformatting.min.js" type="script">
              <link rel="prefetch" href="../node_modules/tr-grid-titlewrap/dist/tr-grid-titlewrap.min.js" type="script">
              <link rel="prefetch" href="../node_modules/@grid/zoom/dist/zoom.min.js" type="script">
            </div>
            <h1 id="formatting-custom-content-with-text-formatting-extension">Formatting custom content with Text Formatting Extension</h1>
            <p>When using Text Formatting Extension, by default, custom content will be overwritten due to the need for rendering a formatted text by the extension. To format the text inside the custom content and avoid the overriding, you will need to instruct the extension on how and where to do the formatting. See <a href="../extensions/tr-grid-textformatting.html">this page</a> for more information.</p>
            <h1 id="writing-a-good-formatter">Writing a good formatter</h1>
            <p>Be mindful that the <code>binding</code> method will be executed repeatedly and multiple times during data updates and scrolling. Performance is crucial, so you should write the code with caution. See the following guidelines for writing a good formatter.</p>
            <h2 id="use-predefined-formatters">Use predefined formatters</h2>
            <p>The most common formatters are already prewritten for you. Predefined formatters are optimized and easy to use. See <a href="predefined-formatter.html">this page for more details</a>.</p>
            <h2 id="avoid-using-innerhtml-and-innertext">Avoid using innerHTML and innerText</h2>
            <p><strong>innerHTML</strong> and <strong>innerText</strong> from native elements involve text parsing and element creation, both of which are computationally expensive. You can improve performance by avoiding using them.</p>
            <pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding1</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>); <span class="hljs-comment">// Unneccessary creation as it will be called and created multiple times</span>
    content.innerHTML = <span class="hljs-string">&quot;&lt;span&gt;&quot;</span> + e.data + <span class="hljs-string">&quot;&lt;/span&gt;&lt;span&gt;2&lt;/span&gt;&quot;</span>; <span class="hljs-comment">// Slow due to text parsing and element creations</span>

    e.cell.setContent(content);
}

<span class="hljs-comment">// The above function can be re-writen as the following function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding2</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> content = cell.getContent();
    <span class="hljs-keyword">if</span>(!content) {
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>);
        <span class="hljs-keyword">var</span> span1 = content._span1 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>); 
        <span class="hljs-keyword">var</span> span2 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>);
        span2.textContent = <span class="hljs-number">2</span>;

        content.appendChild(span1);
        content.appendChild(span2);
    }
    content._span1.textContent = e.data;
    cell.setContent(content);
}</code></pre>
            <h2 id="avoid-creating-an-element-for-simple-text">Avoid creating an element for simple text</h2>
            <p><code>setContent</code> method is already optimized for simple text.</p>
            <pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding1</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>); <span class="hljs-comment">// Unneccessary creation</span>
    content.textContent = e.data + <span class="hljs-string">&quot; text&quot;</span>;

    e.cell.setContent(content);
}

<span class="hljs-comment">// The above function can be re-writen as the following function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding2</span>(<span class="hljs-params">e</span>) </span>{
    e.cell.setContent(e.data + <span class="hljs-string">&quot; text&quot;</span>);
}</code></pre>
            <h2 id="reuse-the-same-content-to-avoid-element-creation">Reuse the same content to avoid element creation</h2>
            <p>Bind method will be executed repeatedly and multiple times during data update and scrolling. Minimize element creation by using cache.</p>
            <pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding1</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;input&quot;</span>); <span class="hljs-comment">// Slow</span>
    content.value = e.data;
    e.cell.setContent(content);
}

<span class="hljs-comment">// The above function can be re-writen as the following function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding2</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> content = cell.getContent(); <span class="hljs-comment">// Get previous content</span>
    <span class="hljs-keyword">if</span>(!content) {
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;input&quot;</span>);
    }
    content.value = e.data;
    cell.setContent(content);
}</code></pre>
            <h2 id="store-element-in-a-variable-for-easy-access">Store element in a variable for easy access</h2>
            <p>For complex structure content, it is faster and easier to use a variable for referencing rather than navigating through a DOM tree.</p>
            <pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding1</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> content = cell.getContent();
    <span class="hljs-keyword">if</span>(!content) {
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>);
        <span class="hljs-keyword">var</span> span1 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>);
        <span class="hljs-keyword">var</span> span2 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>);

        content.appendChild(span1);
        content.appendChild(span2);
    }
    cell.setContent(content);
    <span class="hljs-keyword">var</span> spans = content.getElementsByTagName(<span class="hljs-string">&quot;span&quot;</span>); <span class="hljs-comment">// Slow</span>
    spans[<span class="hljs-number">0</span>].textContent = e.data % <span class="hljs-number">5</span>;
    spans[<span class="hljs-number">1</span>].textContent = e.data % <span class="hljs-number">3</span>;
}

<span class="hljs-comment">// The above function can be re-writen as the following function</span>
<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding2</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> content = cell.getContent();
    <span class="hljs-keyword">if</span>(!content) {
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;div&quot;</span>);
        <span class="hljs-keyword">var</span> span1 = content._span1 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>);
        <span class="hljs-keyword">var</span> span2 = content._span2 = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;span&quot;</span>);

        content.appendChild(span1);
        content.appendChild(span2);
    }
    content._span1.textContent = e.data % <span class="hljs-number">5</span>;
    content._span2.textContent = e.data % <span class="hljs-number">3</span>;
    cell.setContent(content);
}</code></pre>
            <blockquote>
              <p>Note: Cell can contain only one top level node/element (such as, single content). But a content element can have multiple nested elements.</p>
            </blockquote>
            <h2 id="use-rowdefinition-object-for-asynchronous-operation">Use RowDefinition object for asynchronous operation</h2>
            <p>When dealing with asynchronous operations such as server request and response, it is important to use the correct context and data. Row index, cell element, and page can all be changed during the waiting time. Sorting, filtering, grouping, and pagination can also affect row order. So the most reliable way to identify Grid&apos;s row is to use RowDefinition object. </p>
            <pre><code><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">binding1</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> cell = e.cell;
    <span class="hljs-keyword">var</span> content = cell.getContent();
    <span class="hljs-keyword">if</span>(!content) {
        content = <span class="hljs-built_in">document</span>.createElement(<span class="hljs-string">&quot;button&quot;</span>);
        content.addEventListener(<span class="hljs-string">&quot;click&quot;</span>, onRequestingData);
    }
    cell.setContent(content);
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onRequestingData</span>(<span class="hljs-params">e</span>) </span>{
    <span class="hljs-keyword">var</span> pos = grid.api.getRelativePosition(e);
    <span class="hljs-keyword">var</span> rowDef = grid.api.getRowDefinition(pos.rowIndex);

    requestServerData({}, onServerResponse.bind(<span class="hljs-literal">null</span>, rowDef));
}

<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">onServerResponse</span>(<span class="hljs-params">rowDef, resp</span>) </span>{
    <span class="hljs-comment">// do something</span>
}</code></pre>
          </pandora-page>
          <div class="results"></div>
        </div>
      </div>
    </div>
  </pandora-book>
</body>

</html>